var U_=Object.defineProperty;var z_=(n,e,t)=>e in n?U_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var zt=(n,e,t)=>z_(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function H_(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var mx={exports:{}},Ff={},gx={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ud=Symbol.for("react.element"),q_=Symbol.for("react.portal"),Y_=Symbol.for("react.fragment"),V_=Symbol.for("react.strict_mode"),G_=Symbol.for("react.profiler"),J_=Symbol.for("react.provider"),K_=Symbol.for("react.context"),X_=Symbol.for("react.forward_ref"),Q_=Symbol.for("react.suspense"),Z_=Symbol.for("react.memo"),e4=Symbol.for("react.lazy"),Uy=Symbol.iterator;function t4(n){return n===null||typeof n!="object"?null:(n=Uy&&n[Uy]||n["@@iterator"],typeof n=="function"?n:null)}var yx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vx=Object.assign,xx={};function xc(n,e,t){this.props=n,this.context=e,this.refs=xx,this.updater=t||yx}xc.prototype.isReactComponent={};xc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};xc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function wx(){}wx.prototype=xc.prototype;function zg(n,e,t){this.props=n,this.context=e,this.refs=xx,this.updater=t||yx}var Wg=zg.prototype=new wx;Wg.constructor=zg;vx(Wg,xc.prototype);Wg.isPureReactComponent=!0;var zy=Array.isArray,bx=Object.prototype.hasOwnProperty,Hg={current:null},Sx={key:!0,ref:!0,__self:!0,__source:!0};function _x(n,e,t){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)bx.call(e,r)&&!Sx.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:ud,type:n,key:s,ref:a,props:i,_owner:Hg.current}}function n4(n,e){return{$$typeof:ud,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function qg(n){return typeof n=="object"&&n!==null&&n.$$typeof===ud}function r4(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Wy=/\/+/g;function s0(n,e){return typeof n=="object"&&n!==null&&n.key!=null?r4(""+n.key):e.toString(36)}function Dh(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case ud:case q_:a=!0}}if(a)return a=n,i=i(a),n=r===""?"."+s0(a,0):r,zy(i)?(t="",n!=null&&(t=n.replace(Wy,"$&/")+"/"),Dh(i,e,t,"",function(u){return u})):i!=null&&(qg(i)&&(i=n4(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Wy,"$&/")+"/")+n)),e.push(i)),1;if(a=0,r=r===""?".":r+":",zy(n))for(var o=0;o<n.length;o++){s=n[o];var l=r+s0(s,o);a+=Dh(s,e,t,l,i)}else if(l=t4(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=r+s0(s,o++),a+=Dh(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function lh(n,e,t){if(n==null)return n;var r=[],i=0;return Dh(n,r,"","",function(s){return e.call(t,s,i++)}),r}function i4(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Cr={current:null},Mh={transition:null},s4={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:Mh,ReactCurrentOwner:Hg};function Nx(){throw Error("act(...) is not supported in production builds of React.")}Ct.Children={map:lh,forEach:function(n,e,t){lh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return lh(n,function(){e++}),e},toArray:function(n){return lh(n,function(e){return e})||[]},only:function(n){if(!qg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ct.Component=xc;Ct.Fragment=Y_;Ct.Profiler=G_;Ct.PureComponent=zg;Ct.StrictMode=V_;Ct.Suspense=Q_;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s4;Ct.act=Nx;Ct.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=vx({},n.props),i=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Hg.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)bx.call(e,l)&&!Sx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:ud,type:n.type,key:i,ref:s,props:r,_owner:a}};Ct.createContext=function(n){return n={$$typeof:K_,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:J_,_context:n},n.Consumer=n};Ct.createElement=_x;Ct.createFactory=function(n){var e=_x.bind(null,n);return e.type=n,e};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(n){return{$$typeof:X_,render:n}};Ct.isValidElement=qg;Ct.lazy=function(n){return{$$typeof:e4,_payload:{_status:-1,_result:n},_init:i4}};Ct.memo=function(n,e){return{$$typeof:Z_,type:n,compare:e===void 0?null:e}};Ct.startTransition=function(n){var e=Mh.transition;Mh.transition={};try{n()}finally{Mh.transition=e}};Ct.unstable_act=Nx;Ct.useCallback=function(n,e){return Cr.current.useCallback(n,e)};Ct.useContext=function(n){return Cr.current.useContext(n)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(n){return Cr.current.useDeferredValue(n)};Ct.useEffect=function(n,e){return Cr.current.useEffect(n,e)};Ct.useId=function(){return Cr.current.useId()};Ct.useImperativeHandle=function(n,e,t){return Cr.current.useImperativeHandle(n,e,t)};Ct.useInsertionEffect=function(n,e){return Cr.current.useInsertionEffect(n,e)};Ct.useLayoutEffect=function(n,e){return Cr.current.useLayoutEffect(n,e)};Ct.useMemo=function(n,e){return Cr.current.useMemo(n,e)};Ct.useReducer=function(n,e,t){return Cr.current.useReducer(n,e,t)};Ct.useRef=function(n){return Cr.current.useRef(n)};Ct.useState=function(n){return Cr.current.useState(n)};Ct.useSyncExternalStore=function(n,e,t){return Cr.current.useSyncExternalStore(n,e,t)};Ct.useTransition=function(){return Cr.current.useTransition()};Ct.version="18.3.1";gx.exports=Ct;var H=gx.exports;const Yg=W_(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a4=H,o4=Symbol.for("react.element"),l4=Symbol.for("react.fragment"),c4=Object.prototype.hasOwnProperty,u4=a4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d4={key:!0,ref:!0,__self:!0,__source:!0};function kx(n,e,t){var r,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)c4.call(e,r)&&!d4.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:o4,type:n,key:s,ref:a,props:i,_owner:u4.current}}Ff.Fragment=l4;Ff.jsx=kx;Ff.jsxs=kx;mx.exports=Ff;var c=mx.exports,jx={exports:{}},pi={},Ax={exports:{}},Cx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(J,ie){var ae=J.length;J.push(ie);e:for(;0<ae;){var Ne=ae-1>>>1,E=J[Ne];if(0<i(E,ie))J[Ne]=ie,J[ae]=E,ae=Ne;else break e}}function t(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ie=J[0],ae=J.pop();if(ae!==ie){J[0]=ae;e:for(var Ne=0,E=J.length,q=E>>>1;Ne<q;){var Y=2*(Ne+1)-1,Z=J[Y],te=Y+1,ce=J[te];if(0>i(Z,ae))te<E&&0>i(ce,Z)?(J[Ne]=ce,J[te]=ae,Ne=te):(J[Ne]=Z,J[Y]=ae,Ne=Y);else if(te<E&&0>i(ce,ae))J[Ne]=ce,J[te]=ae,Ne=te;else break e}}return ie}function i(J,ie){var ae=J.sortIndex-ie.sortIndex;return ae!==0?ae:J.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,p=null,m=3,f=!1,x=!1,y=!1,N=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(J){for(var ie=t(u);ie!==null;){if(ie.callback===null)r(u);else if(ie.startTime<=J)r(u),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=t(u)}}function C(J){if(y=!1,_(J),!x)if(t(l)!==null)x=!0,X(T);else{var ie=t(u);ie!==null&&oe(C,ie.startTime-J)}}function T(J,ie){x=!1,y&&(y=!1,w(j),j=-1),f=!0;var ae=m;try{for(_(ie),p=t(l);p!==null&&(!(p.expirationTime>ie)||J&&!L());){var Ne=p.callback;if(typeof Ne=="function"){p.callback=null,m=p.priorityLevel;var E=Ne(p.expirationTime<=ie);ie=n.unstable_now(),typeof E=="function"?p.callback=E:p===t(l)&&r(l),_(ie)}else r(l);p=t(l)}if(p!==null)var q=!0;else{var Y=t(u);Y!==null&&oe(C,Y.startTime-ie),q=!1}return q}finally{p=null,m=ae,f=!1}}var P=!1,A=null,j=-1,I=5,$=-1;function L(){return!(n.unstable_now()-$<I)}function M(){if(A!==null){var J=n.unstable_now();$=J;var ie=!0;try{ie=A(!0,J)}finally{ie?D():(P=!1,A=null)}}else P=!1}var D;if(typeof b=="function")D=function(){b(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,G=O.port2;O.port1.onmessage=M,D=function(){G.postMessage(null)}}else D=function(){N(M,0)};function X(J){A=J,P||(P=!0,D())}function oe(J,ie){j=N(function(){J(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){x||f||(x=!0,X(T))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(J){switch(m){case 1:case 2:case 3:var ie=3;break;default:ie=m}var ae=m;m=ie;try{return J()}finally{m=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,ie){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ae=m;m=J;try{return ie()}finally{m=ae}},n.unstable_scheduleCallback=function(J,ie,ae){var Ne=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Ne+ae:Ne):ae=Ne,J){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=ae+E,J={id:d++,callback:ie,priorityLevel:J,startTime:ae,expirationTime:E,sortIndex:-1},ae>Ne?(J.sortIndex=ae,e(u,J),t(l)===null&&J===t(u)&&(y?(w(j),j=-1):y=!0,oe(C,ae-Ne))):(J.sortIndex=E,e(l,J),x||f||(x=!0,X(T))),J},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(J){var ie=m;return function(){var ae=m;m=ie;try{return J.apply(this,arguments)}finally{m=ae}}}})(Cx);Ax.exports=Cx;var h4=Ax.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f4=H,di=h4;function Re(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ex=new Set,Ou={};function Fo(n,e){sc(n,e),sc(n+"Capture",e)}function sc(n,e){for(Ou[n]=e,n=0;n<e.length;n++)Ex.add(e[n])}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sm=Object.prototype.hasOwnProperty,p4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hy={},qy={};function m4(n){return sm.call(qy,n)?!0:sm.call(Hy,n)?!1:p4.test(n)?qy[n]=!0:(Hy[n]=!0,!1)}function g4(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function y4(n,e,t,r){if(e===null||typeof e>"u"||g4(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Er(n,e,t,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){nr[n]=new Er(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];nr[e]=new Er(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){nr[n]=new Er(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){nr[n]=new Er(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){nr[n]=new Er(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){nr[n]=new Er(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){nr[n]=new Er(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){nr[n]=new Er(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){nr[n]=new Er(n,5,!1,n.toLowerCase(),null,!1,!1)});var Vg=/[\-:]([a-z])/g;function Gg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Vg,Gg);nr[e]=new Er(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Vg,Gg);nr[e]=new Er(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Vg,Gg);nr[e]=new Er(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){nr[n]=new Er(n,1,!1,n.toLowerCase(),null,!1,!1)});nr.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){nr[n]=new Er(n,1,!1,n.toLowerCase(),null,!0,!0)});function Jg(n,e,t,r){var i=nr.hasOwnProperty(e)?nr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(y4(e,t,i,r)&&(t=null),r||i===null?m4(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Qs=f4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ch=Symbol.for("react.element"),El=Symbol.for("react.portal"),Pl=Symbol.for("react.fragment"),Kg=Symbol.for("react.strict_mode"),am=Symbol.for("react.profiler"),Px=Symbol.for("react.provider"),Tx=Symbol.for("react.context"),Xg=Symbol.for("react.forward_ref"),om=Symbol.for("react.suspense"),lm=Symbol.for("react.suspense_list"),Qg=Symbol.for("react.memo"),va=Symbol.for("react.lazy"),Lx=Symbol.for("react.offscreen"),Yy=Symbol.iterator;function ru(n){return n===null||typeof n!="object"?null:(n=Yy&&n[Yy]||n["@@iterator"],typeof n=="function"?n:null)}var fn=Object.assign,a0;function mu(n){if(a0===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);a0=e&&e[1]||""}return`
`+a0+n}var o0=!1;function l0(n,e){if(!n||o0)return"";o0=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{o0=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?mu(n):""}function v4(n){switch(n.tag){case 5:return mu(n.type);case 16:return mu("Lazy");case 13:return mu("Suspense");case 19:return mu("SuspenseList");case 0:case 2:case 15:return n=l0(n.type,!1),n;case 11:return n=l0(n.type.render,!1),n;case 1:return n=l0(n.type,!0),n;default:return""}}function cm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Pl:return"Fragment";case El:return"Portal";case am:return"Profiler";case Kg:return"StrictMode";case om:return"Suspense";case lm:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Tx:return(n.displayName||"Context")+".Consumer";case Px:return(n._context.displayName||"Context")+".Provider";case Xg:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Qg:return e=n.displayName||null,e!==null?e:cm(n.type)||"Memo";case va:e=n._payload,n=n._init;try{return cm(n(e))}catch{}}return null}function x4(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cm(e);case 8:return e===Kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $a(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Dx(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function w4(n){var e=Dx(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function uh(n){n._valueTracker||(n._valueTracker=w4(n))}function Mx(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Dx(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Qh(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function um(n,e){var t=e.checked;return fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Vy(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=$a(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ix(n,e){e=e.checked,e!=null&&Jg(n,"checked",e,!1)}function dm(n,e){Ix(n,e);var t=$a(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?hm(n,e.type,t):e.hasOwnProperty("defaultValue")&&hm(n,e.type,$a(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Gy(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function hm(n,e,t){(e!=="number"||Qh(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var gu=Array.isArray;function ql(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+$a(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function fm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return fn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Jy(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Re(92));if(gu(t)){if(1<t.length)throw Error(Re(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:$a(t)}}function Rx(n,e){var t=$a(e.value),r=$a(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Ky(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Fx(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pm(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Fx(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dh,Ox=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(dh=dh||document.createElement("div"),dh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function $u(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Su={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b4=["Webkit","ms","Moz","O"];Object.keys(Su).forEach(function(n){b4.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Su[e]=Su[n]})});function $x(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Su.hasOwnProperty(n)&&Su[n]?(""+e).trim():e+"px"}function Bx(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=$x(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var S4=fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mm(n,e){if(e){if(S4[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function gm(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ym=null;function Zg(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vm=null,Yl=null,Vl=null;function Xy(n){if(n=fd(n)){if(typeof vm!="function")throw Error(Re(280));var e=n.stateNode;e&&(e=zf(e),vm(n.stateNode,n.type,e))}}function Ux(n){Yl?Vl?Vl.push(n):Vl=[n]:Yl=n}function zx(){if(Yl){var n=Yl,e=Vl;if(Vl=Yl=null,Xy(n),e)for(n=0;n<e.length;n++)Xy(e[n])}}function Wx(n,e){return n(e)}function Hx(){}var c0=!1;function qx(n,e,t){if(c0)return n(e,t);c0=!0;try{return Wx(n,e,t)}finally{c0=!1,(Yl!==null||Vl!==null)&&(Hx(),zx())}}function Bu(n,e){var t=n.stateNode;if(t===null)return null;var r=zf(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Re(231,e,typeof t));return t}var xm=!1;if(Hs)try{var iu={};Object.defineProperty(iu,"passive",{get:function(){xm=!0}}),window.addEventListener("test",iu,iu),window.removeEventListener("test",iu,iu)}catch{xm=!1}function _4(n,e,t,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var _u=!1,Zh=null,ef=!1,wm=null,N4={onError:function(n){_u=!0,Zh=n}};function k4(n,e,t,r,i,s,a,o,l){_u=!1,Zh=null,_4.apply(N4,arguments)}function j4(n,e,t,r,i,s,a,o,l){if(k4.apply(this,arguments),_u){if(_u){var u=Zh;_u=!1,Zh=null}else throw Error(Re(198));ef||(ef=!0,wm=u)}}function Oo(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Yx(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Qy(n){if(Oo(n)!==n)throw Error(Re(188))}function A4(n){var e=n.alternate;if(!e){if(e=Oo(n),e===null)throw Error(Re(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Qy(i),n;if(s===r)return Qy(i),e;s=s.sibling}throw Error(Re(188))}if(t.return!==r.return)t=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,r=s;break}if(o===r){a=!0,r=i,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,r=i;break}if(o===r){a=!0,r=s,t=i;break}o=o.sibling}if(!a)throw Error(Re(189))}}if(t.alternate!==r)throw Error(Re(190))}if(t.tag!==3)throw Error(Re(188));return t.stateNode.current===t?n:e}function Vx(n){return n=A4(n),n!==null?Gx(n):null}function Gx(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Gx(n);if(e!==null)return e;n=n.sibling}return null}var Jx=di.unstable_scheduleCallback,Zy=di.unstable_cancelCallback,C4=di.unstable_shouldYield,E4=di.unstable_requestPaint,kn=di.unstable_now,P4=di.unstable_getCurrentPriorityLevel,e1=di.unstable_ImmediatePriority,Kx=di.unstable_UserBlockingPriority,tf=di.unstable_NormalPriority,T4=di.unstable_LowPriority,Xx=di.unstable_IdlePriority,Of=null,gs=null;function L4(n){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(Of,n,void 0,(n.current.flags&128)===128)}catch{}}var Qi=Math.clz32?Math.clz32:I4,D4=Math.log,M4=Math.LN2;function I4(n){return n>>>=0,n===0?32:31-(D4(n)/M4|0)|0}var hh=64,fh=4194304;function yu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function nf(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?r=yu(o):(s&=a,s!==0&&(r=yu(s)))}else a=t&~i,a!==0?r=yu(a):s!==0&&(r=yu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Qi(e),i=1<<t,r|=n[t],e&=~i;return r}function R4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F4(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-Qi(s),o=1<<a,l=i[a];l===-1?(!(o&t)||o&r)&&(i[a]=R4(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function bm(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Qx(){var n=hh;return hh<<=1,!(hh&4194240)&&(hh=64),n}function u0(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function dd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Qi(e),n[e]=t}function O4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Qi(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function t1(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Qi(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Ht=0;function Zx(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var e5,n1,t5,n5,r5,Sm=!1,ph=[],Ea=null,Pa=null,Ta=null,Uu=new Map,zu=new Map,wa=[],$4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e2(n,e){switch(n){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Uu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zu.delete(e.pointerId)}}function su(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fd(e),e!==null&&n1(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function B4(n,e,t,r,i){switch(e){case"focusin":return Ea=su(Ea,n,e,t,r,i),!0;case"dragenter":return Pa=su(Pa,n,e,t,r,i),!0;case"mouseover":return Ta=su(Ta,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Uu.set(s,su(Uu.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zu.set(s,su(zu.get(s)||null,n,e,t,r,i)),!0}return!1}function i5(n){var e=vo(n.target);if(e!==null){var t=Oo(e);if(t!==null){if(e=t.tag,e===13){if(e=Yx(t),e!==null){n.blockedOn=e,r5(n.priority,function(){t5(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ih(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=_m(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);ym=r,t.target.dispatchEvent(r),ym=null}else return e=fd(t),e!==null&&n1(e),n.blockedOn=t,!1;e.shift()}return!0}function t2(n,e,t){Ih(n)&&t.delete(e)}function U4(){Sm=!1,Ea!==null&&Ih(Ea)&&(Ea=null),Pa!==null&&Ih(Pa)&&(Pa=null),Ta!==null&&Ih(Ta)&&(Ta=null),Uu.forEach(t2),zu.forEach(t2)}function au(n,e){n.blockedOn===e&&(n.blockedOn=null,Sm||(Sm=!0,di.unstable_scheduleCallback(di.unstable_NormalPriority,U4)))}function Wu(n){function e(i){return au(i,n)}if(0<ph.length){au(ph[0],n);for(var t=1;t<ph.length;t++){var r=ph[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ea!==null&&au(Ea,n),Pa!==null&&au(Pa,n),Ta!==null&&au(Ta,n),Uu.forEach(e),zu.forEach(e),t=0;t<wa.length;t++)r=wa[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<wa.length&&(t=wa[0],t.blockedOn===null);)i5(t),t.blockedOn===null&&wa.shift()}var Gl=Qs.ReactCurrentBatchConfig,rf=!0;function z4(n,e,t,r){var i=Ht,s=Gl.transition;Gl.transition=null;try{Ht=1,r1(n,e,t,r)}finally{Ht=i,Gl.transition=s}}function W4(n,e,t,r){var i=Ht,s=Gl.transition;Gl.transition=null;try{Ht=4,r1(n,e,t,r)}finally{Ht=i,Gl.transition=s}}function r1(n,e,t,r){if(rf){var i=_m(n,e,t,r);if(i===null)w0(n,e,r,sf,t),e2(n,r);else if(B4(i,n,e,t,r))r.stopPropagation();else if(e2(n,r),e&4&&-1<$4.indexOf(n)){for(;i!==null;){var s=fd(i);if(s!==null&&e5(s),s=_m(n,e,t,r),s===null&&w0(n,e,r,sf,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else w0(n,e,r,null,t)}}var sf=null;function _m(n,e,t,r){if(sf=null,n=Zg(r),n=vo(n),n!==null)if(e=Oo(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Yx(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return sf=n,null}function s5(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P4()){case e1:return 1;case Kx:return 4;case tf:case T4:return 16;case Xx:return 536870912;default:return 16}default:return 16}}var _a=null,i1=null,Rh=null;function a5(){if(Rh)return Rh;var n,e=i1,t=e.length,r,i="value"in _a?_a.value:_a.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var a=t-n;for(r=1;r<=a&&e[t-r]===i[s-r];r++);return Rh=i.slice(n,1<r?1-r:void 0)}function Fh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function mh(){return!0}function n2(){return!1}function mi(n){function e(t,r,i,s,a){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mh:n2,this.isPropagationStopped=n2,this}return fn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=mh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=mh)},persist:function(){},isPersistent:mh}),e}var wc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},s1=mi(wc),hd=fn({},wc,{view:0,detail:0}),H4=mi(hd),d0,h0,ou,$f=fn({},hd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ou&&(ou&&n.type==="mousemove"?(d0=n.screenX-ou.screenX,h0=n.screenY-ou.screenY):h0=d0=0,ou=n),d0)},movementY:function(n){return"movementY"in n?n.movementY:h0}}),r2=mi($f),q4=fn({},$f,{dataTransfer:0}),Y4=mi(q4),V4=fn({},hd,{relatedTarget:0}),f0=mi(V4),G4=fn({},wc,{animationName:0,elapsedTime:0,pseudoElement:0}),J4=mi(G4),K4=fn({},wc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),X4=mi(K4),Q4=fn({},wc,{data:0}),i2=mi(Q4),Z4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n3(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=t3[n])?!!e[n]:!1}function a1(){return n3}var r3=fn({},hd,{key:function(n){if(n.key){var e=Z4[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Fh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?e3[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a1,charCode:function(n){return n.type==="keypress"?Fh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),i3=mi(r3),s3=fn({},$f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s2=mi(s3),a3=fn({},hd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a1}),o3=mi(a3),l3=fn({},wc,{propertyName:0,elapsedTime:0,pseudoElement:0}),c3=mi(l3),u3=fn({},$f,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),d3=mi(u3),h3=[9,13,27,32],o1=Hs&&"CompositionEvent"in window,Nu=null;Hs&&"documentMode"in document&&(Nu=document.documentMode);var f3=Hs&&"TextEvent"in window&&!Nu,o5=Hs&&(!o1||Nu&&8<Nu&&11>=Nu),a2=" ",o2=!1;function l5(n,e){switch(n){case"keyup":return h3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c5(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Tl=!1;function p3(n,e){switch(n){case"compositionend":return c5(e);case"keypress":return e.which!==32?null:(o2=!0,a2);case"textInput":return n=e.data,n===a2&&o2?null:n;default:return null}}function m3(n,e){if(Tl)return n==="compositionend"||!o1&&l5(n,e)?(n=a5(),Rh=i1=_a=null,Tl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return o5&&e.locale!=="ko"?null:e.data;default:return null}}var g3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!g3[n.type]:e==="textarea"}function u5(n,e,t,r){Ux(r),e=af(e,"onChange"),0<e.length&&(t=new s1("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var ku=null,Hu=null;function y3(n){b5(n,0)}function Bf(n){var e=Ml(n);if(Mx(e))return n}function v3(n,e){if(n==="change")return e}var d5=!1;if(Hs){var p0;if(Hs){var m0="oninput"in document;if(!m0){var c2=document.createElement("div");c2.setAttribute("oninput","return;"),m0=typeof c2.oninput=="function"}p0=m0}else p0=!1;d5=p0&&(!document.documentMode||9<document.documentMode)}function u2(){ku&&(ku.detachEvent("onpropertychange",h5),Hu=ku=null)}function h5(n){if(n.propertyName==="value"&&Bf(Hu)){var e=[];u5(e,Hu,n,Zg(n)),qx(y3,e)}}function x3(n,e,t){n==="focusin"?(u2(),ku=e,Hu=t,ku.attachEvent("onpropertychange",h5)):n==="focusout"&&u2()}function w3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bf(Hu)}function b3(n,e){if(n==="click")return Bf(e)}function S3(n,e){if(n==="input"||n==="change")return Bf(e)}function _3(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ts=typeof Object.is=="function"?Object.is:_3;function qu(n,e){if(ts(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!sm.call(e,i)||!ts(n[i],e[i]))return!1}return!0}function d2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function h2(n,e){var t=d2(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=d2(t)}}function f5(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?f5(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function p5(){for(var n=window,e=Qh();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Qh(n.document)}return e}function l1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function N3(n){var e=p5(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&f5(t.ownerDocument.documentElement,t)){if(r!==null&&l1(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=h2(t,s);var a=h2(t,r);i&&a&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var k3=Hs&&"documentMode"in document&&11>=document.documentMode,Ll=null,Nm=null,ju=null,km=!1;function f2(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;km||Ll==null||Ll!==Qh(r)||(r=Ll,"selectionStart"in r&&l1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ju&&qu(ju,r)||(ju=r,r=af(Nm,"onSelect"),0<r.length&&(e=new s1("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Ll)))}function gh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Dl={animationend:gh("Animation","AnimationEnd"),animationiteration:gh("Animation","AnimationIteration"),animationstart:gh("Animation","AnimationStart"),transitionend:gh("Transition","TransitionEnd")},g0={},m5={};Hs&&(m5=document.createElement("div").style,"AnimationEvent"in window||(delete Dl.animationend.animation,delete Dl.animationiteration.animation,delete Dl.animationstart.animation),"TransitionEvent"in window||delete Dl.transitionend.transition);function Uf(n){if(g0[n])return g0[n];if(!Dl[n])return n;var e=Dl[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in m5)return g0[n]=e[t];return n}var g5=Uf("animationend"),y5=Uf("animationiteration"),v5=Uf("animationstart"),x5=Uf("transitionend"),w5=new Map,p2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qa(n,e){w5.set(n,e),Fo(e,[n])}for(var y0=0;y0<p2.length;y0++){var v0=p2[y0],j3=v0.toLowerCase(),A3=v0[0].toUpperCase()+v0.slice(1);qa(j3,"on"+A3)}qa(g5,"onAnimationEnd");qa(y5,"onAnimationIteration");qa(v5,"onAnimationStart");qa("dblclick","onDoubleClick");qa("focusin","onFocus");qa("focusout","onBlur");qa(x5,"onTransitionEnd");sc("onMouseEnter",["mouseout","mouseover"]);sc("onMouseLeave",["mouseout","mouseover"]);sc("onPointerEnter",["pointerout","pointerover"]);sc("onPointerLeave",["pointerout","pointerover"]);Fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C3=new Set("cancel close invalid load scroll toggle".split(" ").concat(vu));function m2(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,j4(r,e,void 0,n),n.currentTarget=null}function b5(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;m2(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;m2(i,o,u),s=l}}}if(ef)throw n=wm,ef=!1,wm=null,n}function tn(n,e){var t=e[Pm];t===void 0&&(t=e[Pm]=new Set);var r=n+"__bubble";t.has(r)||(S5(e,n,2,!1),t.add(r))}function x0(n,e,t){var r=0;e&&(r|=4),S5(t,n,r,e)}var yh="_reactListening"+Math.random().toString(36).slice(2);function Yu(n){if(!n[yh]){n[yh]=!0,Ex.forEach(function(t){t!=="selectionchange"&&(C3.has(t)||x0(t,!1,n),x0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[yh]||(e[yh]=!0,x0("selectionchange",!1,e))}}function S5(n,e,t,r){switch(s5(e)){case 1:var i=z4;break;case 4:i=W4;break;default:i=r1}t=i.bind(null,e,t,n),i=void 0,!xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function w0(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=vo(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}qx(function(){var u=s,d=Zg(t),p=[];e:{var m=w5.get(n);if(m!==void 0){var f=s1,x=n;switch(n){case"keypress":if(Fh(t)===0)break e;case"keydown":case"keyup":f=i3;break;case"focusin":x="focus",f=f0;break;case"focusout":x="blur",f=f0;break;case"beforeblur":case"afterblur":f=f0;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=r2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Y4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=o3;break;case g5:case y5:case v5:f=J4;break;case x5:f=c3;break;case"scroll":f=H4;break;case"wheel":f=d3;break;case"copy":case"cut":case"paste":f=X4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=s2}var y=(e&4)!==0,N=!y&&n==="scroll",w=y?m!==null?m+"Capture":null:m;y=[];for(var b=u,_;b!==null;){_=b;var C=_.stateNode;if(_.tag===5&&C!==null&&(_=C,w!==null&&(C=Bu(b,w),C!=null&&y.push(Vu(b,C,_)))),N)break;b=b.return}0<y.length&&(m=new f(m,x,null,t,d),p.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",m&&t!==ym&&(x=t.relatedTarget||t.fromElement)&&(vo(x)||x[qs]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(x=t.relatedTarget||t.toElement,f=u,x=x?vo(x):null,x!==null&&(N=Oo(x),x!==N||x.tag!==5&&x.tag!==6)&&(x=null)):(f=null,x=u),f!==x)){if(y=r2,C="onMouseLeave",w="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(y=s2,C="onPointerLeave",w="onPointerEnter",b="pointer"),N=f==null?m:Ml(f),_=x==null?m:Ml(x),m=new y(C,b+"leave",f,t,d),m.target=N,m.relatedTarget=_,C=null,vo(d)===u&&(y=new y(w,b+"enter",x,t,d),y.target=_,y.relatedTarget=N,C=y),N=C,f&&x)t:{for(y=f,w=x,b=0,_=y;_;_=gl(_))b++;for(_=0,C=w;C;C=gl(C))_++;for(;0<b-_;)y=gl(y),b--;for(;0<_-b;)w=gl(w),_--;for(;b--;){if(y===w||w!==null&&y===w.alternate)break t;y=gl(y),w=gl(w)}y=null}else y=null;f!==null&&g2(p,m,f,y,!1),x!==null&&N!==null&&g2(p,N,x,y,!0)}}e:{if(m=u?Ml(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var T=v3;else if(l2(m))if(d5)T=S3;else{T=w3;var P=x3}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(T=b3);if(T&&(T=T(n,u))){u5(p,T,t,d);break e}P&&P(n,m,u),n==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&hm(m,"number",m.value)}switch(P=u?Ml(u):window,n){case"focusin":(l2(P)||P.contentEditable==="true")&&(Ll=P,Nm=u,ju=null);break;case"focusout":ju=Nm=Ll=null;break;case"mousedown":km=!0;break;case"contextmenu":case"mouseup":case"dragend":km=!1,f2(p,t,d);break;case"selectionchange":if(k3)break;case"keydown":case"keyup":f2(p,t,d)}var A;if(o1)e:{switch(n){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Tl?l5(n,t)&&(j="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(j="onCompositionStart");j&&(o5&&t.locale!=="ko"&&(Tl||j!=="onCompositionStart"?j==="onCompositionEnd"&&Tl&&(A=a5()):(_a=d,i1="value"in _a?_a.value:_a.textContent,Tl=!0)),P=af(u,j),0<P.length&&(j=new i2(j,n,null,t,d),p.push({event:j,listeners:P}),A?j.data=A:(A=c5(t),A!==null&&(j.data=A)))),(A=f3?p3(n,t):m3(n,t))&&(u=af(u,"onBeforeInput"),0<u.length&&(d=new i2("onBeforeInput","beforeinput",null,t,d),p.push({event:d,listeners:u}),d.data=A))}b5(p,e)})}function Vu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function af(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Bu(n,t),s!=null&&r.unshift(Vu(n,s,i)),s=Bu(n,e),s!=null&&r.push(Vu(n,s,i))),n=n.return}return r}function gl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function g2(n,e,t,r,i){for(var s=e._reactName,a=[];t!==null&&t!==r;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Bu(t,s),l!=null&&a.unshift(Vu(t,l,o))):i||(l=Bu(t,s),l!=null&&a.push(Vu(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var E3=/\r\n?/g,P3=/\u0000|\uFFFD/g;function y2(n){return(typeof n=="string"?n:""+n).replace(E3,`
`).replace(P3,"")}function vh(n,e,t){if(e=y2(e),y2(n)!==e&&t)throw Error(Re(425))}function of(){}var jm=null,Am=null;function Cm(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Em=typeof setTimeout=="function"?setTimeout:void 0,T3=typeof clearTimeout=="function"?clearTimeout:void 0,v2=typeof Promise=="function"?Promise:void 0,L3=typeof queueMicrotask=="function"?queueMicrotask:typeof v2<"u"?function(n){return v2.resolve(null).then(n).catch(D3)}:Em;function D3(n){setTimeout(function(){throw n})}function b0(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Wu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Wu(e)}function La(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function x2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var bc=Math.random().toString(36).slice(2),hs="__reactFiber$"+bc,Gu="__reactProps$"+bc,qs="__reactContainer$"+bc,Pm="__reactEvents$"+bc,M3="__reactListeners$"+bc,I3="__reactHandles$"+bc;function vo(n){var e=n[hs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[qs]||t[hs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=x2(n);n!==null;){if(t=n[hs])return t;n=x2(n)}return e}n=t,t=n.parentNode}return null}function fd(n){return n=n[hs]||n[qs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ml(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Re(33))}function zf(n){return n[Gu]||null}var Tm=[],Il=-1;function Ya(n){return{current:n}}function rn(n){0>Il||(n.current=Tm[Il],Tm[Il]=null,Il--)}function en(n,e){Il++,Tm[Il]=n.current,n.current=e}var Ba={},xr=Ya(Ba),zr=Ya(!1),Po=Ba;function ac(n,e){var t=n.type.contextTypes;if(!t)return Ba;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Wr(n){return n=n.childContextTypes,n!=null}function lf(){rn(zr),rn(xr)}function w2(n,e,t){if(xr.current!==Ba)throw Error(Re(168));en(xr,e),en(zr,t)}function _5(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Re(108,x4(n)||"Unknown",i));return fn({},t,r)}function cf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ba,Po=xr.current,en(xr,n),en(zr,zr.current),!0}function b2(n,e,t){var r=n.stateNode;if(!r)throw Error(Re(169));t?(n=_5(n,e,Po),r.__reactInternalMemoizedMergedChildContext=n,rn(zr),rn(xr),en(xr,n)):rn(zr),en(zr,t)}var Os=null,Wf=!1,S0=!1;function N5(n){Os===null?Os=[n]:Os.push(n)}function R3(n){Wf=!0,N5(n)}function Va(){if(!S0&&Os!==null){S0=!0;var n=0,e=Ht;try{var t=Os;for(Ht=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Os=null,Wf=!1}catch(i){throw Os!==null&&(Os=Os.slice(n+1)),Jx(e1,Va),i}finally{Ht=e,S0=!1}}return null}var Rl=[],Fl=0,uf=null,df=0,Ai=[],Ci=0,To=null,Bs=1,Us="";function uo(n,e){Rl[Fl++]=df,Rl[Fl++]=uf,uf=n,df=e}function k5(n,e,t){Ai[Ci++]=Bs,Ai[Ci++]=Us,Ai[Ci++]=To,To=n;var r=Bs;n=Us;var i=32-Qi(r)-1;r&=~(1<<i),t+=1;var s=32-Qi(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Bs=1<<32-Qi(e)+i|t<<i|r,Us=s+n}else Bs=1<<s|t<<i|r,Us=n}function c1(n){n.return!==null&&(uo(n,1),k5(n,1,0))}function u1(n){for(;n===uf;)uf=Rl[--Fl],Rl[Fl]=null,df=Rl[--Fl],Rl[Fl]=null;for(;n===To;)To=Ai[--Ci],Ai[Ci]=null,Us=Ai[--Ci],Ai[Ci]=null,Bs=Ai[--Ci],Ai[Ci]=null}var li=null,si=null,sn=!1,Xi=null;function j5(n,e){var t=Ei(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function S2(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,li=n,si=La(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,li=n,si=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=To!==null?{id:Bs,overflow:Us}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ei(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,li=n,si=null,!0):!1;default:return!1}}function Lm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Dm(n){if(sn){var e=si;if(e){var t=e;if(!S2(n,e)){if(Lm(n))throw Error(Re(418));e=La(t.nextSibling);var r=li;e&&S2(n,e)?j5(r,t):(n.flags=n.flags&-4097|2,sn=!1,li=n)}}else{if(Lm(n))throw Error(Re(418));n.flags=n.flags&-4097|2,sn=!1,li=n}}}function _2(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;li=n}function xh(n){if(n!==li)return!1;if(!sn)return _2(n),sn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Cm(n.type,n.memoizedProps)),e&&(e=si)){if(Lm(n))throw A5(),Error(Re(418));for(;e;)j5(n,e),e=La(e.nextSibling)}if(_2(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Re(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){si=La(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}si=null}}else si=li?La(n.stateNode.nextSibling):null;return!0}function A5(){for(var n=si;n;)n=La(n.nextSibling)}function oc(){si=li=null,sn=!1}function d1(n){Xi===null?Xi=[n]:Xi.push(n)}var F3=Qs.ReactCurrentBatchConfig;function lu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Re(309));var r=t.stateNode}if(!r)throw Error(Re(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(Re(284));if(!t._owner)throw Error(Re(290,n))}return n}function wh(n,e){throw n=Object.prototype.toString.call(e),Error(Re(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function N2(n){var e=n._init;return e(n._payload)}function C5(n){function e(w,b){if(n){var _=w.deletions;_===null?(w.deletions=[b],w.flags|=16):_.push(b)}}function t(w,b){if(!n)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=Ra(w,b),w.index=0,w.sibling=null,w}function s(w,b,_){return w.index=_,n?(_=w.alternate,_!==null?(_=_.index,_<b?(w.flags|=2,b):_):(w.flags|=2,b)):(w.flags|=1048576,b)}function a(w){return n&&w.alternate===null&&(w.flags|=2),w}function o(w,b,_,C){return b===null||b.tag!==6?(b=E0(_,w.mode,C),b.return=w,b):(b=i(b,_),b.return=w,b)}function l(w,b,_,C){var T=_.type;return T===Pl?d(w,b,_.props.children,C,_.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===va&&N2(T)===b.type)?(C=i(b,_.props),C.ref=lu(w,b,_),C.return=w,C):(C=Hh(_.type,_.key,_.props,null,w.mode,C),C.ref=lu(w,b,_),C.return=w,C)}function u(w,b,_,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=P0(_,w.mode,C),b.return=w,b):(b=i(b,_.children||[]),b.return=w,b)}function d(w,b,_,C,T){return b===null||b.tag!==7?(b=_o(_,w.mode,C,T),b.return=w,b):(b=i(b,_),b.return=w,b)}function p(w,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=E0(""+b,w.mode,_),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ch:return _=Hh(b.type,b.key,b.props,null,w.mode,_),_.ref=lu(w,null,b),_.return=w,_;case El:return b=P0(b,w.mode,_),b.return=w,b;case va:var C=b._init;return p(w,C(b._payload),_)}if(gu(b)||ru(b))return b=_o(b,w.mode,_,null),b.return=w,b;wh(w,b)}return null}function m(w,b,_,C){var T=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return T!==null?null:o(w,b,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ch:return _.key===T?l(w,b,_,C):null;case El:return _.key===T?u(w,b,_,C):null;case va:return T=_._init,m(w,b,T(_._payload),C)}if(gu(_)||ru(_))return T!==null?null:d(w,b,_,C,null);wh(w,_)}return null}function f(w,b,_,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(_)||null,o(b,w,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ch:return w=w.get(C.key===null?_:C.key)||null,l(b,w,C,T);case El:return w=w.get(C.key===null?_:C.key)||null,u(b,w,C,T);case va:var P=C._init;return f(w,b,_,P(C._payload),T)}if(gu(C)||ru(C))return w=w.get(_)||null,d(b,w,C,T,null);wh(b,C)}return null}function x(w,b,_,C){for(var T=null,P=null,A=b,j=b=0,I=null;A!==null&&j<_.length;j++){A.index>j?(I=A,A=null):I=A.sibling;var $=m(w,A,_[j],C);if($===null){A===null&&(A=I);break}n&&A&&$.alternate===null&&e(w,A),b=s($,b,j),P===null?T=$:P.sibling=$,P=$,A=I}if(j===_.length)return t(w,A),sn&&uo(w,j),T;if(A===null){for(;j<_.length;j++)A=p(w,_[j],C),A!==null&&(b=s(A,b,j),P===null?T=A:P.sibling=A,P=A);return sn&&uo(w,j),T}for(A=r(w,A);j<_.length;j++)I=f(A,w,j,_[j],C),I!==null&&(n&&I.alternate!==null&&A.delete(I.key===null?j:I.key),b=s(I,b,j),P===null?T=I:P.sibling=I,P=I);return n&&A.forEach(function(L){return e(w,L)}),sn&&uo(w,j),T}function y(w,b,_,C){var T=ru(_);if(typeof T!="function")throw Error(Re(150));if(_=T.call(_),_==null)throw Error(Re(151));for(var P=T=null,A=b,j=b=0,I=null,$=_.next();A!==null&&!$.done;j++,$=_.next()){A.index>j?(I=A,A=null):I=A.sibling;var L=m(w,A,$.value,C);if(L===null){A===null&&(A=I);break}n&&A&&L.alternate===null&&e(w,A),b=s(L,b,j),P===null?T=L:P.sibling=L,P=L,A=I}if($.done)return t(w,A),sn&&uo(w,j),T;if(A===null){for(;!$.done;j++,$=_.next())$=p(w,$.value,C),$!==null&&(b=s($,b,j),P===null?T=$:P.sibling=$,P=$);return sn&&uo(w,j),T}for(A=r(w,A);!$.done;j++,$=_.next())$=f(A,w,j,$.value,C),$!==null&&(n&&$.alternate!==null&&A.delete($.key===null?j:$.key),b=s($,b,j),P===null?T=$:P.sibling=$,P=$);return n&&A.forEach(function(M){return e(w,M)}),sn&&uo(w,j),T}function N(w,b,_,C){if(typeof _=="object"&&_!==null&&_.type===Pl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ch:e:{for(var T=_.key,P=b;P!==null;){if(P.key===T){if(T=_.type,T===Pl){if(P.tag===7){t(w,P.sibling),b=i(P,_.props.children),b.return=w,w=b;break e}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===va&&N2(T)===P.type){t(w,P.sibling),b=i(P,_.props),b.ref=lu(w,P,_),b.return=w,w=b;break e}t(w,P);break}else e(w,P);P=P.sibling}_.type===Pl?(b=_o(_.props.children,w.mode,C,_.key),b.return=w,w=b):(C=Hh(_.type,_.key,_.props,null,w.mode,C),C.ref=lu(w,b,_),C.return=w,w=C)}return a(w);case El:e:{for(P=_.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){t(w,b.sibling),b=i(b,_.children||[]),b.return=w,w=b;break e}else{t(w,b);break}else e(w,b);b=b.sibling}b=P0(_,w.mode,C),b.return=w,w=b}return a(w);case va:return P=_._init,N(w,b,P(_._payload),C)}if(gu(_))return x(w,b,_,C);if(ru(_))return y(w,b,_,C);wh(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(t(w,b.sibling),b=i(b,_),b.return=w,w=b):(t(w,b),b=E0(_,w.mode,C),b.return=w,w=b),a(w)):t(w,b)}return N}var lc=C5(!0),E5=C5(!1),hf=Ya(null),ff=null,Ol=null,h1=null;function f1(){h1=Ol=ff=null}function p1(n){var e=hf.current;rn(hf),n._currentValue=e}function Mm(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Jl(n,e){ff=n,h1=Ol=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ur=!0),n.firstContext=null)}function Ii(n){var e=n._currentValue;if(h1!==n)if(n={context:n,memoizedValue:e,next:null},Ol===null){if(ff===null)throw Error(Re(308));Ol=n,ff.dependencies={lanes:0,firstContext:n}}else Ol=Ol.next=n;return e}var xo=null;function m1(n){xo===null?xo=[n]:xo.push(n)}function P5(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,m1(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ys(n,r)}function Ys(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var xa=!1;function g1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T5(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ws(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Da(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Rt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ys(n,t)}return i=r.interleaved,i===null?(e.next=e,m1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ys(n,t)}function Oh(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,t1(n,t)}}function k2(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function pf(n,e,t,r){var i=n.updateQueue;xa=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var d=n.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;a=0,d=u=l=null,o=s;do{var m=o.lane,f=o.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=n,y=o;switch(m=e,f=t,y.tag){case 1:if(x=y.payload,typeof x=="function"){p=x.call(f,p,m);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,m=typeof x=="function"?x.call(f,p,m):x,m==null)break e;p=fn({},p,m);break e;case 2:xa=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else f={eventTime:f,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=f,l=p):d=d.next=f,a|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Do|=a,n.lanes=a,n.memoizedState=p}}function j2(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Re(191,i));i.call(r)}}}var pd={},ys=Ya(pd),Ju=Ya(pd),Ku=Ya(pd);function wo(n){if(n===pd)throw Error(Re(174));return n}function y1(n,e){switch(en(Ku,e),en(Ju,n),en(ys,pd),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pm(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=pm(e,n)}rn(ys),en(ys,e)}function cc(){rn(ys),rn(Ju),rn(Ku)}function L5(n){wo(Ku.current);var e=wo(ys.current),t=pm(e,n.type);e!==t&&(en(Ju,n),en(ys,t))}function v1(n){Ju.current===n&&(rn(ys),rn(Ju))}var cn=Ya(0);function mf(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _0=[];function x1(){for(var n=0;n<_0.length;n++)_0[n]._workInProgressVersionPrimary=null;_0.length=0}var $h=Qs.ReactCurrentDispatcher,N0=Qs.ReactCurrentBatchConfig,Lo=0,hn=null,Fn=null,Yn=null,gf=!1,Au=!1,Xu=0,O3=0;function sr(){throw Error(Re(321))}function w1(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ts(n[t],e[t]))return!1;return!0}function b1(n,e,t,r,i,s){if(Lo=s,hn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$h.current=n===null||n.memoizedState===null?z3:W3,n=t(r,i),Au){s=0;do{if(Au=!1,Xu=0,25<=s)throw Error(Re(301));s+=1,Yn=Fn=null,e.updateQueue=null,$h.current=H3,n=t(r,i)}while(Au)}if($h.current=yf,e=Fn!==null&&Fn.next!==null,Lo=0,Yn=Fn=hn=null,gf=!1,e)throw Error(Re(300));return n}function S1(){var n=Xu!==0;return Xu=0,n}function us(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?hn.memoizedState=Yn=n:Yn=Yn.next=n,Yn}function Ri(){if(Fn===null){var n=hn.alternate;n=n!==null?n.memoizedState:null}else n=Fn.next;var e=Yn===null?hn.memoizedState:Yn.next;if(e!==null)Yn=e,Fn=n;else{if(n===null)throw Error(Re(310));Fn=n,n={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},Yn===null?hn.memoizedState=Yn=n:Yn=Yn.next=n}return Yn}function Qu(n,e){return typeof e=="function"?e(n):e}function k0(n){var e=Ri(),t=e.queue;if(t===null)throw Error(Re(311));t.lastRenderedReducer=n;var r=Fn,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var d=u.lane;if((Lo&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=p,a=r):l=l.next=p,hn.lanes|=d,Do|=d}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,ts(r,e.memoizedState)||(Ur=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,hn.lanes|=s,Do|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function j0(n){var e=Ri(),t=e.queue;if(t===null)throw Error(Re(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do s=n(s,a.action),a=a.next;while(a!==i);ts(s,e.memoizedState)||(Ur=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function D5(){}function M5(n,e){var t=hn,r=Ri(),i=e(),s=!ts(r.memoizedState,i);if(s&&(r.memoizedState=i,Ur=!0),r=r.queue,_1(F5.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Yn!==null&&Yn.memoizedState.tag&1){if(t.flags|=2048,Zu(9,R5.bind(null,t,r,i,e),void 0,null),Gn===null)throw Error(Re(349));Lo&30||I5(t,e,i)}return i}function I5(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function R5(n,e,t,r){e.value=t,e.getSnapshot=r,O5(e)&&$5(n)}function F5(n,e,t){return t(function(){O5(e)&&$5(n)})}function O5(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ts(n,t)}catch{return!0}}function $5(n){var e=Ys(n,1);e!==null&&Zi(e,n,1,-1)}function A2(n){var e=us();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:n},e.queue=n,n=n.dispatch=U3.bind(null,hn,n),[e.memoizedState,n]}function Zu(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function B5(){return Ri().memoizedState}function Bh(n,e,t,r){var i=us();hn.flags|=n,i.memoizedState=Zu(1|e,t,void 0,r===void 0?null:r)}function Hf(n,e,t,r){var i=Ri();r=r===void 0?null:r;var s=void 0;if(Fn!==null){var a=Fn.memoizedState;if(s=a.destroy,r!==null&&w1(r,a.deps)){i.memoizedState=Zu(e,t,s,r);return}}hn.flags|=n,i.memoizedState=Zu(1|e,t,s,r)}function C2(n,e){return Bh(8390656,8,n,e)}function _1(n,e){return Hf(2048,8,n,e)}function U5(n,e){return Hf(4,2,n,e)}function z5(n,e){return Hf(4,4,n,e)}function W5(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function H5(n,e,t){return t=t!=null?t.concat([n]):null,Hf(4,4,W5.bind(null,e,n),t)}function N1(){}function q5(n,e){var t=Ri();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&w1(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Y5(n,e){var t=Ri();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&w1(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function V5(n,e,t){return Lo&21?(ts(t,e)||(t=Qx(),hn.lanes|=t,Do|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ur=!0),n.memoizedState=t)}function $3(n,e){var t=Ht;Ht=t!==0&&4>t?t:4,n(!0);var r=N0.transition;N0.transition={};try{n(!1),e()}finally{Ht=t,N0.transition=r}}function G5(){return Ri().memoizedState}function B3(n,e,t){var r=Ia(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},J5(n))K5(e,t);else if(t=P5(n,e,t,r),t!==null){var i=kr();Zi(t,n,r,i),X5(t,e,r)}}function U3(n,e,t){var r=Ia(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(J5(n))K5(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(i.hasEagerState=!0,i.eagerState=o,ts(o,a)){var l=e.interleaved;l===null?(i.next=i,m1(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=P5(n,e,i,r),t!==null&&(i=kr(),Zi(t,n,r,i),X5(t,e,r))}}function J5(n){var e=n.alternate;return n===hn||e!==null&&e===hn}function K5(n,e){Au=gf=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function X5(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,t1(n,t)}}var yf={readContext:Ii,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},z3={readContext:Ii,useCallback:function(n,e){return us().memoizedState=[n,e===void 0?null:e],n},useContext:Ii,useEffect:C2,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Bh(4194308,4,W5.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Bh(4194308,4,n,e)},useInsertionEffect:function(n,e){return Bh(4,2,n,e)},useMemo:function(n,e){var t=us();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=us();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=B3.bind(null,hn,n),[r.memoizedState,n]},useRef:function(n){var e=us();return n={current:n},e.memoizedState=n},useState:A2,useDebugValue:N1,useDeferredValue:function(n){return us().memoizedState=n},useTransition:function(){var n=A2(!1),e=n[0];return n=$3.bind(null,n[1]),us().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=hn,i=us();if(sn){if(t===void 0)throw Error(Re(407));t=t()}else{if(t=e(),Gn===null)throw Error(Re(349));Lo&30||I5(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,C2(F5.bind(null,r,s,n),[n]),r.flags|=2048,Zu(9,R5.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=us(),e=Gn.identifierPrefix;if(sn){var t=Us,r=Bs;t=(r&~(1<<32-Qi(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Xu++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=O3++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},W3={readContext:Ii,useCallback:q5,useContext:Ii,useEffect:_1,useImperativeHandle:H5,useInsertionEffect:U5,useLayoutEffect:z5,useMemo:Y5,useReducer:k0,useRef:B5,useState:function(){return k0(Qu)},useDebugValue:N1,useDeferredValue:function(n){var e=Ri();return V5(e,Fn.memoizedState,n)},useTransition:function(){var n=k0(Qu)[0],e=Ri().memoizedState;return[n,e]},useMutableSource:D5,useSyncExternalStore:M5,useId:G5,unstable_isNewReconciler:!1},H3={readContext:Ii,useCallback:q5,useContext:Ii,useEffect:_1,useImperativeHandle:H5,useInsertionEffect:U5,useLayoutEffect:z5,useMemo:Y5,useReducer:j0,useRef:B5,useState:function(){return j0(Qu)},useDebugValue:N1,useDeferredValue:function(n){var e=Ri();return Fn===null?e.memoizedState=n:V5(e,Fn.memoizedState,n)},useTransition:function(){var n=j0(Qu)[0],e=Ri().memoizedState;return[n,e]},useMutableSource:D5,useSyncExternalStore:M5,useId:G5,unstable_isNewReconciler:!1};function Vi(n,e){if(n&&n.defaultProps){e=fn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Im(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:fn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var qf={isMounted:function(n){return(n=n._reactInternals)?Oo(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=kr(),i=Ia(n),s=Ws(r,i);s.payload=e,t!=null&&(s.callback=t),e=Da(n,s,i),e!==null&&(Zi(e,n,i,r),Oh(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=kr(),i=Ia(n),s=Ws(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Da(n,s,i),e!==null&&(Zi(e,n,i,r),Oh(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=kr(),r=Ia(n),i=Ws(t,r);i.tag=2,e!=null&&(i.callback=e),e=Da(n,i,r),e!==null&&(Zi(e,n,r,t),Oh(e,n,r))}};function E2(n,e,t,r,i,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!qu(t,r)||!qu(i,s):!0}function Q5(n,e,t){var r=!1,i=Ba,s=e.contextType;return typeof s=="object"&&s!==null?s=Ii(s):(i=Wr(e)?Po:xr.current,r=e.contextTypes,s=(r=r!=null)?ac(n,i):Ba),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qf,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function P2(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&qf.enqueueReplaceState(e,e.state,null)}function Rm(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},g1(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ii(s):(s=Wr(e)?Po:xr.current,i.context=ac(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Im(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qf.enqueueReplaceState(i,i.state,null),pf(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function uc(n,e){try{var t="",r=e;do t+=v4(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function A0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Fm(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var q3=typeof WeakMap=="function"?WeakMap:Map;function Z5(n,e,t){t=Ws(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){xf||(xf=!0,Vm=r),Fm(n,e)},t}function ew(n,e,t){t=Ws(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Fm(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Fm(n,e),typeof r!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function T2(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new q3;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=sN.bind(null,n,e,t),e.then(n,n))}function L2(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function D2(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ws(-1,1),e.tag=2,Da(t,e,1))),t.lanes|=1),n)}var Y3=Qs.ReactCurrentOwner,Ur=!1;function _r(n,e,t,r){e.child=n===null?E5(e,null,t,r):lc(e,n.child,t,r)}function M2(n,e,t,r,i){t=t.render;var s=e.ref;return Jl(e,i),r=b1(n,e,t,r,s,i),t=S1(),n!==null&&!Ur?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Vs(n,e,i)):(sn&&t&&c1(e),e.flags|=1,_r(n,e,r,i),e.child)}function I2(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!L1(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,tw(n,e,s,r,i)):(n=Hh(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:qu,t(a,r)&&n.ref===e.ref)return Vs(n,e,i)}return e.flags|=1,n=Ra(s,r),n.ref=e.ref,n.return=e,e.child=n}function tw(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(qu(s,r)&&n.ref===e.ref)if(Ur=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Ur=!0);else return e.lanes=n.lanes,Vs(n,e,i)}return Om(n,e,t,r,i)}function nw(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},en(Bl,ni),ni|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,en(Bl,ni),ni|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,en(Bl,ni),ni|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,en(Bl,ni),ni|=r;return _r(n,e,i,t),e.child}function rw(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Om(n,e,t,r,i){var s=Wr(t)?Po:xr.current;return s=ac(e,s),Jl(e,i),t=b1(n,e,t,r,s,i),r=S1(),n!==null&&!Ur?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Vs(n,e,i)):(sn&&r&&c1(e),e.flags|=1,_r(n,e,t,i),e.child)}function R2(n,e,t,r,i){if(Wr(t)){var s=!0;cf(e)}else s=!1;if(Jl(e,i),e.stateNode===null)Uh(n,e),Q5(e,t,r),Rm(e,t,r,i),r=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=Ii(u):(u=Wr(t)?Po:xr.current,u=ac(e,u));var d=t.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&P2(e,a,r,u),xa=!1;var m=e.memoizedState;a.state=m,pf(e,r,a,i),l=e.memoizedState,o!==r||m!==l||zr.current||xa?(typeof d=="function"&&(Im(e,t,d,r),l=e.memoizedState),(o=xa||E2(e,t,o,r,m,l,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,T5(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:Vi(e.type,o),a.props=u,p=e.pendingProps,m=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ii(l):(l=Wr(t)?Po:xr.current,l=ac(e,l));var f=t.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||m!==l)&&P2(e,a,r,l),xa=!1,m=e.memoizedState,a.state=m,pf(e,r,a,i);var x=e.memoizedState;o!==p||m!==x||zr.current||xa?(typeof f=="function"&&(Im(e,t,f,r),x=e.memoizedState),(u=xa||E2(e,t,u,r,m,x,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),a.props=r,a.state=x,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return $m(n,e,t,r,s,i)}function $m(n,e,t,r,i,s){rw(n,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&b2(e,t,!1),Vs(n,e,s);r=e.stateNode,Y3.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&a?(e.child=lc(e,n.child,null,s),e.child=lc(e,null,o,s)):_r(n,e,o,s),e.memoizedState=r.state,i&&b2(e,t,!0),e.child}function iw(n){var e=n.stateNode;e.pendingContext?w2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&w2(n,e.context,!1),y1(n,e.containerInfo)}function F2(n,e,t,r,i){return oc(),d1(i),e.flags|=256,_r(n,e,t,r),e.child}var Bm={dehydrated:null,treeContext:null,retryLane:0};function Um(n){return{baseLanes:n,cachePool:null,transitions:null}}function sw(n,e,t){var r=e.pendingProps,i=cn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),en(cn,i&1),n===null)return Dm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,n=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Gf(a,r,0,null),n=_o(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Um(t),e.memoizedState=Bm,n):k1(e,a));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return V3(n,e,a,r,o,i,t);if(s){s=r.fallback,a=e.mode,i=n.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ra(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Ra(o,s):(s=_o(s,a,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=n.child.memoizedState,a=a===null?Um(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=Bm,r}return s=n.child,n=s.sibling,r=Ra(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function k1(n,e){return e=Gf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function bh(n,e,t,r){return r!==null&&d1(r),lc(e,n.child,null,t),n=k1(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function V3(n,e,t,r,i,s,a){if(t)return e.flags&256?(e.flags&=-257,r=A0(Error(Re(422))),bh(n,e,a,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Gf({mode:"visible",children:r.children},i,0,null),s=_o(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&lc(e,n.child,null,a),e.child.memoizedState=Um(a),e.memoizedState=Bm,s);if(!(e.mode&1))return bh(n,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Re(419)),r=A0(s,r,void 0),bh(n,e,a,r)}if(o=(a&n.childLanes)!==0,Ur||o){if(r=Gn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ys(n,i),Zi(r,n,i,-1))}return T1(),r=A0(Error(Re(421))),bh(n,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=aN.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,si=La(i.nextSibling),li=e,sn=!0,Xi=null,n!==null&&(Ai[Ci++]=Bs,Ai[Ci++]=Us,Ai[Ci++]=To,Bs=n.id,Us=n.overflow,To=e),e=k1(e,r.children),e.flags|=4096,e)}function O2(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Mm(n.return,e,t)}function C0(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function aw(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(_r(n,e,r.children,t),r=cn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&O2(n,t,e);else if(n.tag===19)O2(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(en(cn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&mf(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),C0(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&mf(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}C0(e,!0,t,null,s);break;case"together":C0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uh(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Vs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Do|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Re(153));if(e.child!==null){for(n=e.child,t=Ra(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ra(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function G3(n,e,t){switch(e.tag){case 3:iw(e),oc();break;case 5:L5(e);break;case 1:Wr(e.type)&&cf(e);break;case 4:y1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;en(hf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(en(cn,cn.current&1),e.flags|=128,null):t&e.child.childLanes?sw(n,e,t):(en(cn,cn.current&1),n=Vs(n,e,t),n!==null?n.sibling:null);en(cn,cn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return aw(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),en(cn,cn.current),r)break;return null;case 22:case 23:return e.lanes=0,nw(n,e,t)}return Vs(n,e,t)}var ow,zm,lw,cw;ow=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};zm=function(){};lw=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,wo(ys.current);var s=null;switch(t){case"input":i=um(n,i),r=um(n,r),s=[];break;case"select":i=fn({},i,{value:void 0}),r=fn({},r,{value:void 0}),s=[];break;case"textarea":i=fm(n,i),r=fm(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=of)}mm(t,r);var a;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ou.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ou.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&tn("scroll",n),s||o===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};cw=function(n,e,t,r){t!==r&&(e.flags|=4)};function cu(n,e){if(!sn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function ar(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function J3(n,e,t){var r=e.pendingProps;switch(u1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(e),null;case 1:return Wr(e.type)&&lf(),ar(e),null;case 3:return r=e.stateNode,cc(),rn(zr),rn(xr),x1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(xh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xi!==null&&(Km(Xi),Xi=null))),zm(n,e),ar(e),null;case 5:v1(e);var i=wo(Ku.current);if(t=e.type,n!==null&&e.stateNode!=null)lw(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Re(166));return ar(e),null}if(n=wo(ys.current),xh(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[hs]=e,r[Gu]=s,n=(e.mode&1)!==0,t){case"dialog":tn("cancel",r),tn("close",r);break;case"iframe":case"object":case"embed":tn("load",r);break;case"video":case"audio":for(i=0;i<vu.length;i++)tn(vu[i],r);break;case"source":tn("error",r);break;case"img":case"image":case"link":tn("error",r),tn("load",r);break;case"details":tn("toggle",r);break;case"input":Vy(r,s),tn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tn("invalid",r);break;case"textarea":Jy(r,s),tn("invalid",r)}mm(t,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&vh(r.textContent,o,n),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&vh(r.textContent,o,n),i=["children",""+o]):Ou.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&tn("scroll",r)}switch(t){case"input":uh(r),Gy(r,s,!0);break;case"textarea":uh(r),Ky(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=of)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Fx(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=a.createElement(t,{is:r.is}):(n=a.createElement(t),t==="select"&&(a=n,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):n=a.createElementNS(n,t),n[hs]=e,n[Gu]=r,ow(n,e,!1,!1),e.stateNode=n;e:{switch(a=gm(t,r),t){case"dialog":tn("cancel",n),tn("close",n),i=r;break;case"iframe":case"object":case"embed":tn("load",n),i=r;break;case"video":case"audio":for(i=0;i<vu.length;i++)tn(vu[i],n);i=r;break;case"source":tn("error",n),i=r;break;case"img":case"image":case"link":tn("error",n),tn("load",n),i=r;break;case"details":tn("toggle",n),i=r;break;case"input":Vy(n,r),i=um(n,r),tn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=fn({},r,{value:void 0}),tn("invalid",n);break;case"textarea":Jy(n,r),i=fm(n,r),tn("invalid",n);break;default:i=r}mm(t,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?Bx(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ox(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&$u(n,l):typeof l=="number"&&$u(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ou.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tn("scroll",n):l!=null&&Jg(n,s,l,a))}switch(t){case"input":uh(n),Gy(n,r,!1);break;case"textarea":uh(n),Ky(n);break;case"option":r.value!=null&&n.setAttribute("value",""+$a(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?ql(n,!!r.multiple,s,!1):r.defaultValue!=null&&ql(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=of)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ar(e),null;case 6:if(n&&e.stateNode!=null)cw(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Re(166));if(t=wo(Ku.current),wo(ys.current),xh(e)){if(r=e.stateNode,t=e.memoizedProps,r[hs]=e,(s=r.nodeValue!==t)&&(n=li,n!==null))switch(n.tag){case 3:vh(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&vh(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[hs]=e,e.stateNode=r}return ar(e),null;case 13:if(rn(cn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(sn&&si!==null&&e.mode&1&&!(e.flags&128))A5(),oc(),e.flags|=98560,s=!1;else if(s=xh(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Re(317));s[hs]=e}else oc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ar(e),s=!1}else Xi!==null&&(Km(Xi),Xi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||cn.current&1?On===0&&(On=3):T1())),e.updateQueue!==null&&(e.flags|=4),ar(e),null);case 4:return cc(),zm(n,e),n===null&&Yu(e.stateNode.containerInfo),ar(e),null;case 10:return p1(e.type._context),ar(e),null;case 17:return Wr(e.type)&&lf(),ar(e),null;case 19:if(rn(cn),s=e.memoizedState,s===null)return ar(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)cu(s,!1);else{if(On!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=mf(n),a!==null){for(e.flags|=128,cu(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return en(cn,cn.current&1|2),e.child}n=n.sibling}s.tail!==null&&kn()>dc&&(e.flags|=128,r=!0,cu(s,!1),e.lanes=4194304)}else{if(!r)if(n=mf(a),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),cu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!sn)return ar(e),null}else 2*kn()-s.renderingStartTime>dc&&t!==1073741824&&(e.flags|=128,r=!0,cu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=kn(),e.sibling=null,t=cn.current,en(cn,r?t&1|2:t&1),e):(ar(e),null);case 22:case 23:return P1(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ni&1073741824&&(ar(e),e.subtreeFlags&6&&(e.flags|=8192)):ar(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function K3(n,e){switch(u1(e),e.tag){case 1:return Wr(e.type)&&lf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return cc(),rn(zr),rn(xr),x1(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return v1(e),null;case 13:if(rn(cn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));oc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return rn(cn),null;case 4:return cc(),null;case 10:return p1(e.type._context),null;case 22:case 23:return P1(),null;case 24:return null;default:return null}}var Sh=!1,pr=!1,X3=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function $l(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){yn(n,e,r)}else t.current=null}function Wm(n,e,t){try{t()}catch(r){yn(n,e,r)}}var $2=!1;function Q3(n,e){if(jm=rf,n=p5(),l1(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,d=0,p=n,m=null;t:for(;;){for(var f;p!==t||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(l=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(f=p.firstChild)!==null;)m=p,p=f;for(;;){if(p===n)break t;if(m===t&&++u===i&&(o=a),m===s&&++d===r&&(l=a),(f=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Am={focusedElem:n,selectionRange:t},rf=!1,Qe=e;Qe!==null;)if(e=Qe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Qe=n;else for(;Qe!==null;){e=Qe;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,N=x.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:Vi(e.type,y),N);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(C){yn(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,Qe=n;break}Qe=e.return}return x=$2,$2=!1,x}function Cu(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Wm(e,t,s)}i=i.next}while(i!==r)}}function Yf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Hm(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function uw(n){var e=n.alternate;e!==null&&(n.alternate=null,uw(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[hs],delete e[Gu],delete e[Pm],delete e[M3],delete e[I3])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function dw(n){return n.tag===5||n.tag===3||n.tag===4}function B2(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dw(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qm(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=of));else if(r!==4&&(n=n.child,n!==null))for(qm(n,e,t),n=n.sibling;n!==null;)qm(n,e,t),n=n.sibling}function Ym(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Ym(n,e,t),n=n.sibling;n!==null;)Ym(n,e,t),n=n.sibling}var Qn=null,Ji=!1;function fa(n,e,t){for(t=t.child;t!==null;)hw(n,e,t),t=t.sibling}function hw(n,e,t){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(Of,t)}catch{}switch(t.tag){case 5:pr||$l(t,e);case 6:var r=Qn,i=Ji;Qn=null,fa(n,e,t),Qn=r,Ji=i,Qn!==null&&(Ji?(n=Qn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Qn.removeChild(t.stateNode));break;case 18:Qn!==null&&(Ji?(n=Qn,t=t.stateNode,n.nodeType===8?b0(n.parentNode,t):n.nodeType===1&&b0(n,t),Wu(n)):b0(Qn,t.stateNode));break;case 4:r=Qn,i=Ji,Qn=t.stateNode.containerInfo,Ji=!0,fa(n,e,t),Qn=r,Ji=i;break;case 0:case 11:case 14:case 15:if(!pr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Wm(t,e,a),i=i.next}while(i!==r)}fa(n,e,t);break;case 1:if(!pr&&($l(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){yn(t,e,o)}fa(n,e,t);break;case 21:fa(n,e,t);break;case 22:t.mode&1?(pr=(r=pr)||t.memoizedState!==null,fa(n,e,t),pr=r):fa(n,e,t);break;default:fa(n,e,t)}}function U2(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new X3),e.forEach(function(r){var i=oN.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Wi(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Qn=o.stateNode,Ji=!1;break e;case 3:Qn=o.stateNode.containerInfo,Ji=!0;break e;case 4:Qn=o.stateNode.containerInfo,Ji=!0;break e}o=o.return}if(Qn===null)throw Error(Re(160));hw(s,a,i),Qn=null,Ji=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){yn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fw(e,n),e=e.sibling}function fw(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Wi(e,n),ls(n),r&4){try{Cu(3,n,n.return),Yf(3,n)}catch(y){yn(n,n.return,y)}try{Cu(5,n,n.return)}catch(y){yn(n,n.return,y)}}break;case 1:Wi(e,n),ls(n),r&512&&t!==null&&$l(t,t.return);break;case 5:if(Wi(e,n),ls(n),r&512&&t!==null&&$l(t,t.return),n.flags&32){var i=n.stateNode;try{$u(i,"")}catch(y){yn(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Ix(i,s),gm(o,a);var u=gm(o,s);for(a=0;a<l.length;a+=2){var d=l[a],p=l[a+1];d==="style"?Bx(i,p):d==="dangerouslySetInnerHTML"?Ox(i,p):d==="children"?$u(i,p):Jg(i,d,p,u)}switch(o){case"input":dm(i,s);break;case"textarea":Rx(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ql(i,!!s.multiple,f,!1):m!==!!s.multiple&&(s.defaultValue!=null?ql(i,!!s.multiple,s.defaultValue,!0):ql(i,!!s.multiple,s.multiple?[]:"",!1))}i[Gu]=s}catch(y){yn(n,n.return,y)}}break;case 6:if(Wi(e,n),ls(n),r&4){if(n.stateNode===null)throw Error(Re(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(y){yn(n,n.return,y)}}break;case 3:if(Wi(e,n),ls(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Wu(e.containerInfo)}catch(y){yn(n,n.return,y)}break;case 4:Wi(e,n),ls(n);break;case 13:Wi(e,n),ls(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(C1=kn())),r&4&&U2(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(pr=(u=pr)||d,Wi(e,n),pr=u):Wi(e,n),ls(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(Qe=n,d=n.child;d!==null;){for(p=Qe=d;Qe!==null;){switch(m=Qe,f=m.child,m.tag){case 0:case 11:case 14:case 15:Cu(4,m,m.return);break;case 1:$l(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){yn(r,t,y)}}break;case 5:$l(m,m.return);break;case 22:if(m.memoizedState!==null){W2(p);continue}}f!==null?(f.return=m,Qe=f):W2(p)}d=d.sibling}e:for(d=null,p=n;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=$x("display",a))}catch(y){yn(n,n.return,y)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(y){yn(n,n.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Wi(e,n),ls(n),r&4&&U2(n);break;case 21:break;default:Wi(e,n),ls(n)}}function ls(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(dw(t)){var r=t;break e}t=t.return}throw Error(Re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($u(i,""),r.flags&=-33);var s=B2(n);Ym(n,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=B2(n);qm(n,o,a);break;default:throw Error(Re(161))}}catch(l){yn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Z3(n,e,t){Qe=n,pw(n)}function pw(n,e,t){for(var r=(n.mode&1)!==0;Qe!==null;){var i=Qe,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Sh;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||pr;o=Sh;var u=pr;if(Sh=a,(pr=l)&&!u)for(Qe=i;Qe!==null;)a=Qe,l=a.child,a.tag===22&&a.memoizedState!==null?H2(i):l!==null?(l.return=a,Qe=l):H2(i);for(;s!==null;)Qe=s,pw(s),s=s.sibling;Qe=i,Sh=o,pr=u}z2(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Qe=s):z2(n)}}function z2(n){for(;Qe!==null;){var e=Qe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pr||Yf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Vi(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&j2(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}j2(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Wu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}pr||e.flags&512&&Hm(e)}catch(m){yn(e,e.return,m)}}if(e===n){Qe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function W2(n){for(;Qe!==null;){var e=Qe;if(e===n){Qe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function H2(n){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Yf(4,e)}catch(l){yn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){yn(e,i,l)}}var s=e.return;try{Hm(e)}catch(l){yn(e,s,l)}break;case 5:var a=e.return;try{Hm(e)}catch(l){yn(e,a,l)}}}catch(l){yn(e,e.return,l)}if(e===n){Qe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Qe=o;break}Qe=e.return}}var eN=Math.ceil,vf=Qs.ReactCurrentDispatcher,j1=Qs.ReactCurrentOwner,Di=Qs.ReactCurrentBatchConfig,Rt=0,Gn=null,Mn=null,Zn=0,ni=0,Bl=Ya(0),On=0,ed=null,Do=0,Vf=0,A1=0,Eu=null,Or=null,C1=0,dc=1/0,Ms=null,xf=!1,Vm=null,Ma=null,_h=!1,Na=null,wf=0,Pu=0,Gm=null,zh=-1,Wh=0;function kr(){return Rt&6?kn():zh!==-1?zh:zh=kn()}function Ia(n){return n.mode&1?Rt&2&&Zn!==0?Zn&-Zn:F3.transition!==null?(Wh===0&&(Wh=Qx()),Wh):(n=Ht,n!==0||(n=window.event,n=n===void 0?16:s5(n.type)),n):1}function Zi(n,e,t,r){if(50<Pu)throw Pu=0,Gm=null,Error(Re(185));dd(n,t,r),(!(Rt&2)||n!==Gn)&&(n===Gn&&(!(Rt&2)&&(Vf|=t),On===4&&ba(n,Zn)),Hr(n,r),t===1&&Rt===0&&!(e.mode&1)&&(dc=kn()+500,Wf&&Va()))}function Hr(n,e){var t=n.callbackNode;F4(n,e);var r=nf(n,n===Gn?Zn:0);if(r===0)t!==null&&Zy(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Zy(t),e===1)n.tag===0?R3(q2.bind(null,n)):N5(q2.bind(null,n)),L3(function(){!(Rt&6)&&Va()}),t=null;else{switch(Zx(r)){case 1:t=e1;break;case 4:t=Kx;break;case 16:t=tf;break;case 536870912:t=Xx;break;default:t=tf}t=Sw(t,mw.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function mw(n,e){if(zh=-1,Wh=0,Rt&6)throw Error(Re(327));var t=n.callbackNode;if(Kl()&&n.callbackNode!==t)return null;var r=nf(n,n===Gn?Zn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=bf(n,r);else{e=r;var i=Rt;Rt|=2;var s=yw();(Gn!==n||Zn!==e)&&(Ms=null,dc=kn()+500,So(n,e));do try{rN();break}catch(o){gw(n,o)}while(!0);f1(),vf.current=s,Rt=i,Mn!==null?e=0:(Gn=null,Zn=0,e=On)}if(e!==0){if(e===2&&(i=bm(n),i!==0&&(r=i,e=Jm(n,i))),e===1)throw t=ed,So(n,0),ba(n,r),Hr(n,kn()),t;if(e===6)ba(n,r);else{if(i=n.current.alternate,!(r&30)&&!tN(i)&&(e=bf(n,r),e===2&&(s=bm(n),s!==0&&(r=s,e=Jm(n,s))),e===1))throw t=ed,So(n,0),ba(n,r),Hr(n,kn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Re(345));case 2:ho(n,Or,Ms);break;case 3:if(ba(n,r),(r&130023424)===r&&(e=C1+500-kn(),10<e)){if(nf(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){kr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Em(ho.bind(null,n,Or,Ms),e);break}ho(n,Or,Ms);break;case 4:if(ba(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var a=31-Qi(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=kn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eN(r/1960))-r,10<r){n.timeoutHandle=Em(ho.bind(null,n,Or,Ms),r);break}ho(n,Or,Ms);break;case 5:ho(n,Or,Ms);break;default:throw Error(Re(329))}}}return Hr(n,kn()),n.callbackNode===t?mw.bind(null,n):null}function Jm(n,e){var t=Eu;return n.current.memoizedState.isDehydrated&&(So(n,e).flags|=256),n=bf(n,e),n!==2&&(e=Or,Or=t,e!==null&&Km(e)),n}function Km(n){Or===null?Or=n:Or.push.apply(Or,n)}function tN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!ts(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ba(n,e){for(e&=~A1,e&=~Vf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Qi(e),r=1<<t;n[t]=-1,e&=~r}}function q2(n){if(Rt&6)throw Error(Re(327));Kl();var e=nf(n,0);if(!(e&1))return Hr(n,kn()),null;var t=bf(n,e);if(n.tag!==0&&t===2){var r=bm(n);r!==0&&(e=r,t=Jm(n,r))}if(t===1)throw t=ed,So(n,0),ba(n,e),Hr(n,kn()),t;if(t===6)throw Error(Re(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ho(n,Or,Ms),Hr(n,kn()),null}function E1(n,e){var t=Rt;Rt|=1;try{return n(e)}finally{Rt=t,Rt===0&&(dc=kn()+500,Wf&&Va())}}function Mo(n){Na!==null&&Na.tag===0&&!(Rt&6)&&Kl();var e=Rt;Rt|=1;var t=Di.transition,r=Ht;try{if(Di.transition=null,Ht=1,n)return n()}finally{Ht=r,Di.transition=t,Rt=e,!(Rt&6)&&Va()}}function P1(){ni=Bl.current,rn(Bl)}function So(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,T3(t)),Mn!==null)for(t=Mn.return;t!==null;){var r=t;switch(u1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lf();break;case 3:cc(),rn(zr),rn(xr),x1();break;case 5:v1(r);break;case 4:cc();break;case 13:rn(cn);break;case 19:rn(cn);break;case 10:p1(r.type._context);break;case 22:case 23:P1()}t=t.return}if(Gn=n,Mn=n=Ra(n.current,null),Zn=ni=e,On=0,ed=null,A1=Vf=Do=0,Or=Eu=null,xo!==null){for(e=0;e<xo.length;e++)if(t=xo[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}t.pending=r}xo=null}return n}function gw(n,e){do{var t=Mn;try{if(f1(),$h.current=yf,gf){for(var r=hn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gf=!1}if(Lo=0,Yn=Fn=hn=null,Au=!1,Xu=0,j1.current=null,t===null||t.return===null){On=1,ed=e,Mn=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=Zn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=L2(a);if(f!==null){f.flags&=-257,D2(f,a,o,s,e),f.mode&1&&T2(s,u,e),e=f,l=u;var x=e.updateQueue;if(x===null){var y=new Set;y.add(l),e.updateQueue=y}else x.add(l);break e}else{if(!(e&1)){T2(s,u,e),T1();break e}l=Error(Re(426))}}else if(sn&&o.mode&1){var N=L2(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),D2(N,a,o,s,e),d1(uc(l,o));break e}}s=l=uc(l,o),On!==4&&(On=2),Eu===null?Eu=[s]:Eu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Z5(s,l,e);k2(s,w);break e;case 1:o=l;var b=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ma===null||!Ma.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=ew(s,o,e);k2(s,C);break e}}s=s.return}while(s!==null)}xw(t)}catch(T){e=T,Mn===t&&t!==null&&(Mn=t=t.return);continue}break}while(!0)}function yw(){var n=vf.current;return vf.current=yf,n===null?yf:n}function T1(){(On===0||On===3||On===2)&&(On=4),Gn===null||!(Do&268435455)&&!(Vf&268435455)||ba(Gn,Zn)}function bf(n,e){var t=Rt;Rt|=2;var r=yw();(Gn!==n||Zn!==e)&&(Ms=null,So(n,e));do try{nN();break}catch(i){gw(n,i)}while(!0);if(f1(),Rt=t,vf.current=r,Mn!==null)throw Error(Re(261));return Gn=null,Zn=0,On}function nN(){for(;Mn!==null;)vw(Mn)}function rN(){for(;Mn!==null&&!C4();)vw(Mn)}function vw(n){var e=bw(n.alternate,n,ni);n.memoizedProps=n.pendingProps,e===null?xw(n):Mn=e,j1.current=null}function xw(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=K3(t,e),t!==null){t.flags&=32767,Mn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{On=6,Mn=null;return}}else if(t=J3(t,e,ni),t!==null){Mn=t;return}if(e=e.sibling,e!==null){Mn=e;return}Mn=e=n}while(e!==null);On===0&&(On=5)}function ho(n,e,t){var r=Ht,i=Di.transition;try{Di.transition=null,Ht=1,iN(n,e,t,r)}finally{Di.transition=i,Ht=r}return null}function iN(n,e,t,r){do Kl();while(Na!==null);if(Rt&6)throw Error(Re(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Re(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(O4(n,s),n===Gn&&(Mn=Gn=null,Zn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||_h||(_h=!0,Sw(tf,function(){return Kl(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Di.transition,Di.transition=null;var a=Ht;Ht=1;var o=Rt;Rt|=4,j1.current=null,Q3(n,t),fw(t,n),N3(Am),rf=!!jm,Am=jm=null,n.current=t,Z3(t),E4(),Rt=o,Ht=a,Di.transition=s}else n.current=t;if(_h&&(_h=!1,Na=n,wf=i),s=n.pendingLanes,s===0&&(Ma=null),L4(t.stateNode),Hr(n,kn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(xf)throw xf=!1,n=Vm,Vm=null,n;return wf&1&&n.tag!==0&&Kl(),s=n.pendingLanes,s&1?n===Gm?Pu++:(Pu=0,Gm=n):Pu=0,Va(),null}function Kl(){if(Na!==null){var n=Zx(wf),e=Di.transition,t=Ht;try{if(Di.transition=null,Ht=16>n?16:n,Na===null)var r=!1;else{if(n=Na,Na=null,wf=0,Rt&6)throw Error(Re(331));var i=Rt;for(Rt|=4,Qe=n.current;Qe!==null;){var s=Qe,a=s.child;if(Qe.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Qe=u;Qe!==null;){var d=Qe;switch(d.tag){case 0:case 11:case 15:Cu(8,d,s)}var p=d.child;if(p!==null)p.return=d,Qe=p;else for(;Qe!==null;){d=Qe;var m=d.sibling,f=d.return;if(uw(d),d===u){Qe=null;break}if(m!==null){m.return=f,Qe=m;break}Qe=f}}}var x=s.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var N=y.sibling;y.sibling=null,y=N}while(y!==null)}}Qe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Qe=a;else e:for(;Qe!==null;){if(s=Qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cu(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Qe=w;break e}Qe=s.return}}var b=n.current;for(Qe=b;Qe!==null;){a=Qe;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,Qe=_;else e:for(a=b;Qe!==null;){if(o=Qe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Yf(9,o)}}catch(T){yn(o,o.return,T)}if(o===a){Qe=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,Qe=C;break e}Qe=o.return}}if(Rt=i,Va(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(Of,n)}catch{}r=!0}return r}finally{Ht=t,Di.transition=e}}return!1}function Y2(n,e,t){e=uc(t,e),e=Z5(n,e,1),n=Da(n,e,1),e=kr(),n!==null&&(dd(n,1,e),Hr(n,e))}function yn(n,e,t){if(n.tag===3)Y2(n,n,t);else for(;e!==null;){if(e.tag===3){Y2(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ma===null||!Ma.has(r))){n=uc(t,n),n=ew(e,n,1),e=Da(e,n,1),n=kr(),e!==null&&(dd(e,1,n),Hr(e,n));break}}e=e.return}}function sN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=kr(),n.pingedLanes|=n.suspendedLanes&t,Gn===n&&(Zn&t)===t&&(On===4||On===3&&(Zn&130023424)===Zn&&500>kn()-C1?So(n,0):A1|=t),Hr(n,e)}function ww(n,e){e===0&&(n.mode&1?(e=fh,fh<<=1,!(fh&130023424)&&(fh=4194304)):e=1);var t=kr();n=Ys(n,e),n!==null&&(dd(n,e,t),Hr(n,t))}function aN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),ww(n,t)}function oN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Re(314))}r!==null&&r.delete(e),ww(n,t)}var bw;bw=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||zr.current)Ur=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ur=!1,G3(n,e,t);Ur=!!(n.flags&131072)}else Ur=!1,sn&&e.flags&1048576&&k5(e,df,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uh(n,e),n=e.pendingProps;var i=ac(e,xr.current);Jl(e,t),i=b1(null,e,r,n,i,t);var s=S1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wr(r)?(s=!0,cf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,g1(e),i.updater=qf,e.stateNode=i,i._reactInternals=e,Rm(e,r,n,t),e=$m(null,e,r,!0,s,t)):(e.tag=0,sn&&s&&c1(e),_r(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Uh(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cN(r),n=Vi(r,n),i){case 0:e=Om(null,e,r,n,t);break e;case 1:e=R2(null,e,r,n,t);break e;case 11:e=M2(null,e,r,n,t);break e;case 14:e=I2(null,e,r,Vi(r.type,n),t);break e}throw Error(Re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vi(r,i),Om(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vi(r,i),R2(n,e,r,i,t);case 3:e:{if(iw(e),n===null)throw Error(Re(387));r=e.pendingProps,s=e.memoizedState,i=s.element,T5(n,e),pf(e,r,null,t);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=uc(Error(Re(423)),e),e=F2(n,e,r,t,i);break e}else if(r!==i){i=uc(Error(Re(424)),e),e=F2(n,e,r,t,i);break e}else for(si=La(e.stateNode.containerInfo.firstChild),li=e,sn=!0,Xi=null,t=E5(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(oc(),r===i){e=Vs(n,e,t);break e}_r(n,e,r,t)}e=e.child}return e;case 5:return L5(e),n===null&&Dm(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,a=i.children,Cm(r,i)?a=null:s!==null&&Cm(r,s)&&(e.flags|=32),rw(n,e),_r(n,e,a,t),e.child;case 6:return n===null&&Dm(e),null;case 13:return sw(n,e,t);case 4:return y1(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=lc(e,null,r,t):_r(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vi(r,i),M2(n,e,r,i,t);case 7:return _r(n,e,e.pendingProps,t),e.child;case 8:return _r(n,e,e.pendingProps.children,t),e.child;case 12:return _r(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,en(hf,r._currentValue),r._currentValue=a,s!==null)if(ts(s.value,a)){if(s.children===i.children&&!zr.current){e=Vs(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ws(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Mm(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Re(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Mm(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}_r(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Jl(e,t),i=Ii(i),r=r(i),e.flags|=1,_r(n,e,r,t),e.child;case 14:return r=e.type,i=Vi(r,e.pendingProps),i=Vi(r.type,i),I2(n,e,r,i,t);case 15:return tw(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vi(r,i),Uh(n,e),e.tag=1,Wr(r)?(n=!0,cf(e)):n=!1,Jl(e,t),Q5(e,r,i),Rm(e,r,i,t),$m(null,e,r,!0,n,t);case 19:return aw(n,e,t);case 22:return nw(n,e,t)}throw Error(Re(156,e.tag))};function Sw(n,e){return Jx(n,e)}function lN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(n,e,t,r){return new lN(n,e,t,r)}function L1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cN(n){if(typeof n=="function")return L1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Xg)return 11;if(n===Qg)return 14}return 2}function Ra(n,e){var t=n.alternate;return t===null?(t=Ei(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Hh(n,e,t,r,i,s){var a=2;if(r=n,typeof n=="function")L1(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Pl:return _o(t.children,i,s,e);case Kg:a=8,i|=8;break;case am:return n=Ei(12,t,e,i|2),n.elementType=am,n.lanes=s,n;case om:return n=Ei(13,t,e,i),n.elementType=om,n.lanes=s,n;case lm:return n=Ei(19,t,e,i),n.elementType=lm,n.lanes=s,n;case Lx:return Gf(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Px:a=10;break e;case Tx:a=9;break e;case Xg:a=11;break e;case Qg:a=14;break e;case va:a=16,r=null;break e}throw Error(Re(130,n==null?n:typeof n,""))}return e=Ei(a,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function _o(n,e,t,r){return n=Ei(7,n,r,e),n.lanes=t,n}function Gf(n,e,t,r){return n=Ei(22,n,r,e),n.elementType=Lx,n.lanes=t,n.stateNode={isHidden:!1},n}function E0(n,e,t){return n=Ei(6,n,null,e),n.lanes=t,n}function P0(n,e,t){return e=Ei(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function uN(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=u0(0),this.expirationTimes=u0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=u0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function D1(n,e,t,r,i,s,a,o,l){return n=new uN(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ei(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},g1(s),n}function dN(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:El,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function _w(n){if(!n)return Ba;n=n._reactInternals;e:{if(Oo(n)!==n||n.tag!==1)throw Error(Re(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(n.tag===1){var t=n.type;if(Wr(t))return _5(n,t,e)}return e}function Nw(n,e,t,r,i,s,a,o,l){return n=D1(t,r,!0,n,i,s,a,o,l),n.context=_w(null),t=n.current,r=kr(),i=Ia(t),s=Ws(r,i),s.callback=e??null,Da(t,s,i),n.current.lanes=i,dd(n,i,r),Hr(n,r),n}function Jf(n,e,t,r){var i=e.current,s=kr(),a=Ia(i);return t=_w(t),e.context===null?e.context=t:e.pendingContext=t,e=Ws(s,a),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Da(i,e,a),n!==null&&(Zi(n,i,a,s),Oh(n,i,a)),a}function Sf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function V2(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function M1(n,e){V2(n,e),(n=n.alternate)&&V2(n,e)}function hN(){return null}var kw=typeof reportError=="function"?reportError:function(n){console.error(n)};function I1(n){this._internalRoot=n}Kf.prototype.render=I1.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Re(409));Jf(n,e,null,null)};Kf.prototype.unmount=I1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Mo(function(){Jf(null,n,null,null)}),e[qs]=null}};function Kf(n){this._internalRoot=n}Kf.prototype.unstable_scheduleHydration=function(n){if(n){var e=n5();n={blockedOn:null,target:n,priority:e};for(var t=0;t<wa.length&&e!==0&&e<wa[t].priority;t++);wa.splice(t,0,n),t===0&&i5(n)}};function R1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Xf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function G2(){}function fN(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Sf(a);s.call(u)}}var a=Nw(e,r,n,0,null,!1,!1,"",G2);return n._reactRootContainer=a,n[qs]=a.current,Yu(n.nodeType===8?n.parentNode:n),Mo(),a}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Sf(l);o.call(u)}}var l=D1(n,0,!1,null,null,!1,!1,"",G2);return n._reactRootContainer=l,n[qs]=l.current,Yu(n.nodeType===8?n.parentNode:n),Mo(function(){Jf(e,l,t,r)}),l}function Qf(n,e,t,r,i){var s=t._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Sf(a);o.call(l)}}Jf(e,a,n,i)}else a=fN(t,e,n,i,r);return Sf(a)}e5=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=yu(e.pendingLanes);t!==0&&(t1(e,t|1),Hr(e,kn()),!(Rt&6)&&(dc=kn()+500,Va()))}break;case 13:Mo(function(){var r=Ys(n,1);if(r!==null){var i=kr();Zi(r,n,1,i)}}),M1(n,1)}};n1=function(n){if(n.tag===13){var e=Ys(n,134217728);if(e!==null){var t=kr();Zi(e,n,134217728,t)}M1(n,134217728)}};t5=function(n){if(n.tag===13){var e=Ia(n),t=Ys(n,e);if(t!==null){var r=kr();Zi(t,n,e,r)}M1(n,e)}};n5=function(){return Ht};r5=function(n,e){var t=Ht;try{return Ht=n,e()}finally{Ht=t}};vm=function(n,e,t){switch(e){case"input":if(dm(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=zf(r);if(!i)throw Error(Re(90));Mx(r),dm(r,i)}}}break;case"textarea":Rx(n,t);break;case"select":e=t.value,e!=null&&ql(n,!!t.multiple,e,!1)}};Wx=E1;Hx=Mo;var pN={usingClientEntryPoint:!1,Events:[fd,Ml,zf,Ux,zx,E1]},uu={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mN={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Vx(n),n===null?null:n.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||hN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nh.isDisabled&&Nh.supportsFiber)try{Of=Nh.inject(mN),gs=Nh}catch{}}pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pN;pi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R1(e))throw Error(Re(200));return dN(n,e,null,t)};pi.createRoot=function(n,e){if(!R1(n))throw Error(Re(299));var t=!1,r="",i=kw;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=D1(n,1,!1,null,null,t,!1,r,i),n[qs]=e.current,Yu(n.nodeType===8?n.parentNode:n),new I1(e)};pi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Re(188)):(n=Object.keys(n).join(","),Error(Re(268,n)));return n=Vx(e),n=n===null?null:n.stateNode,n};pi.flushSync=function(n){return Mo(n)};pi.hydrate=function(n,e,t){if(!Xf(e))throw Error(Re(200));return Qf(null,n,e,!0,t)};pi.hydrateRoot=function(n,e,t){if(!R1(n))throw Error(Re(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",a=kw;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=Nw(e,null,n,1,t??null,i,!1,s,a),n[qs]=e.current,Yu(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Kf(e)};pi.render=function(n,e,t){if(!Xf(e))throw Error(Re(200));return Qf(null,n,e,!1,t)};pi.unmountComponentAtNode=function(n){if(!Xf(n))throw Error(Re(40));return n._reactRootContainer?(Mo(function(){Qf(null,null,n,!1,function(){n._reactRootContainer=null,n[qs]=null})}),!0):!1};pi.unstable_batchedUpdates=E1;pi.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Xf(t))throw Error(Re(200));if(n==null||n._reactInternals===void 0)throw Error(Re(38));return Qf(n,e,t,!1,r)};pi.version="18.3.1-next-f1338f8080-20240426";function jw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jw)}catch(n){console.error(n)}}jw(),jx.exports=pi;var xn=jx.exports,Aw,J2=xn;Aw=J2.createRoot,J2.hydrateRoot;/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),K2=n=>{const e=yN(n);return e.charAt(0).toUpperCase()+e.slice(1)},Cw=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),vN=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=H.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>H.createElement("svg",{ref:l,...xN,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Cw("lucide",i),...!s&&!vN(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,d])=>H.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=(n,e)=>{const t=H.forwardRef(({className:r,...i},s)=>H.createElement(wN,{ref:s,iconNode:e,className:Cw(`lucide-${gN(K2(n))}`,`lucide-${n}`,r),...i}));return t.displayName=K2(n),t};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],SN=Ft("arrow-right",bN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],NN=Ft("calculator",_N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jr=Ft("calendar",kN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ew=Ft("check",jN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Pw=Ft("chevron-left",AN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Tw=Ft("chevron-right",CN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xm=Ft("circle-alert",EN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Io=Ft("circle-check-big",PN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],F1=Ft("clock",TN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Qm=Ft("database",LN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],vs=Ft("download",DN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Sc=Ft("eye-off",MN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_c=Ft("eye",IN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],es=Ft("file-text",RN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ON=Ft("grid-3x3",FN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],X2=Ft("list",$N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],UN=Ft("loader-circle",BN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],WN=Ft("pen-line",zN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Q2=Ft("plus",HN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Lw=Ft("printer",qN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],VN=Ft("save",YN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Zm=Ft("server",GN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dw=Ft("settings",JN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Mw=Ft("square-pen",KN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Z2=Ft("star",XN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],ZN=Ft("table",QN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xs=Ft("trash-2",ek);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],nk=Ft("trending-up",tk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],In=Ft("triangle-alert",rk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_f=Ft("upload",ik);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Br=Ft("user",sk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ev=Ft("users",ak);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ar=Ft("x",ok);function Is(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Iw(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ci={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},hc={duration:.5,overwrite:!1,delay:0},O1,er,an,Pi=1e8,Kt=1/Pi,eg=Math.PI*2,lk=eg/4,ck=0,Rw=Math.sqrt,uk=Math.cos,dk=Math.sin,Jn=function(e){return typeof e=="string"},vn=function(e){return typeof e=="function"},Gs=function(e){return typeof e=="number"},$1=function(e){return typeof e>"u"},bs=function(e){return typeof e=="object"},qr=function(e){return e!==!1},B1=function(){return typeof window<"u"},kh=function(e){return vn(e)||Jn(e)},Fw=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},vr=Array.isArray,tg=/(?:-?\.?\d|\.)+/gi,Ow=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ul=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,T0=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,$w=/[+-]=-?[.\d]+/,Bw=/[^,'"\[\]\s]+/gi,hk=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,un,ds,ng,U1,hi={},Nf={},Uw,zw=function(e){return(Nf=fc(e,hi))&&Kr},z1=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},td=function(e,t){return!t&&console.warn(e)},Ww=function(e,t){return e&&(hi[e]=t)&&Nf&&(Nf[e]=t)||hi},nd=function(){return 0},fk={suppressEvents:!0,isStart:!0,kill:!1},qh={suppressEvents:!0,kill:!1},pk={suppressEvents:!0},W1={},Fa=[],rg={},Hw,ri={},L0={},tv=30,Yh=[],H1="",q1=function(e){var t=e[0],r,i;if(bs(t)||vn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=Yh.length;i--&&!Yh[i].targetTest(t););r=Yh[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new pb(e[i],r)))||e.splice(i,1);return e},No=function(e){return e._gsap||q1(Ti(e))[0]._gsap},qw=function(e,t,r){return(r=e[t])&&vn(r)?e[t]():$1(r)&&e.getAttribute&&e.getAttribute(t)||r},Yr=function(e,t){return(e=e.split(",")).forEach(t)||e},Nn=function(e){return Math.round(e*1e5)/1e5||0},Dn=function(e){return Math.round(e*1e7)/1e7||0},Xl=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},mk=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},kf=function(){var e=Fa.length,t=Fa.slice(0),r,i;for(rg={},Fa.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},Y1=function(e){return!!(e._initted||e._startAt||e.add)},Yw=function(e,t,r,i){Fa.length&&!er&&kf(),e.render(t,r,!!(er&&t<0&&Y1(e))),Fa.length&&!er&&kf()},Vw=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Bw).length<2?t:Jn(e)?e.trim():e},Gw=function(e){return e},fi=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},gk=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},fc=function(e,t){for(var r in t)e[r]=t[r];return e},nv=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=bs(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},jf=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Tu=function(e){var t=e.parent||un,r=e.keyframes?gk(vr(e.keyframes)):fi;if(qr(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},yk=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},Jw=function(e,t,r,i,s){var a=e[i],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},Zf=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,a=t._next;s?s._next=a:e[r]===t&&(e[r]=a),a?a._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Ua=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ko=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},vk=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},ig=function(e,t,r,i){return e._startAt&&(er?e._startAt.revert(qh):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},xk=function n(e){return!e||e._ts&&n(e.parent)},rv=function(e){return e._repeat?pc(e._tTime,e=e.duration()+e._rDelay)*e:0},pc=function(e,t){var r=Math.floor(e=Dn(e/t));return e&&r===e?r-1:r},Af=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},ep=function(e){return e._end=Dn(e._start+(e._tDur/Math.abs(e._ts||e._rts||Kt)||0))},tp=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Dn(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),ep(e),r._dirty||ko(r,e)),e},Kw=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=Af(e.rawTime(),t),(!t._dur||md(0,t.totalDuration(),r)-t._tTime>Kt)&&t.render(r,!0)),ko(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Kt}},fs=function(e,t,r,i){return t.parent&&Ua(t),t._start=Dn((Gs(r)?r:r||e!==un?ji(e,r,t):e._time)+t._delay),t._end=Dn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Jw(e,t,"_first","_last",e._sort?"_start":0),sg(t)||(e._recent=t),i||Kw(e,t),e._ts<0&&tp(e,e._tTime),e},Xw=function(e,t){return(hi.ScrollTrigger||z1("scrollTrigger",t))&&hi.ScrollTrigger.create(t,e)},Qw=function(e,t,r,i,s){if(G1(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!er&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Hw!==ii.frame)return Fa.push(e),e._lazy=[s,i],1},wk=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},sg=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},bk=function(e,t,r,i){var s=e.ratio,a=t<0||!t&&(!e._start&&wk(e)&&!(!e._initted&&sg(e))||(e._ts<0||e._dp._ts<0)&&!sg(e))?0:1,o=e._rDelay,l=0,u,d,p;if(o&&e._repeat&&(l=md(0,e._tDur,t),d=pc(l,o),e._yoyo&&d&1&&(a=1-a),d!==pc(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||er||i||e._zTime===Kt||!t&&e._zTime){if(!e._initted&&Qw(e,t,i,r,l))return;for(p=e._zTime,e._zTime=t||(r?Kt:0),r||(r=t&&!p),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,u=e._pt;u;)u.r(a,u.d),u=u._next;t<0&&ig(e,t,r,!0),e._onUpdate&&!r&&ai(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&ai(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&Ua(e,1),!r&&!er&&(ai(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Sk=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},mc=function(e,t,r,i){var s=e._repeat,a=Dn(t)||0,o=e._tTime/e._tDur;return o&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:Dn(a*(s+1)+e._rDelay*s):a,o>0&&!i&&tp(e,e._tTime=e._tDur*o),e.parent&&ep(e),r||ko(e.parent,e),e},iv=function(e){return e instanceof Nr?ko(e):mc(e,e._dur)},_k={_start:0,endTime:nd,totalDuration:nd},ji=function n(e,t,r){var i=e.labels,s=e._recent||_k,a=e.duration()>=Pi?s.endTime(!1):e._dur,o,l,u;return Jn(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),u=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(o<0?s:r).totalDuration()/100:1)):o<0?(t in i||(i[t]=a),i[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),u&&r&&(l=l/100*(vr(r)?r[0]:r).totalDuration()),o>1?n(e,t.substr(0,o-1),r)+l:a+l)):t==null?a:+t},Lu=function(e,t,r){var i=Gs(t[1]),s=(i?2:1)+(e<2?0:1),a=t[s],o,l;if(i&&(a.duration=t[1]),a.parent=r,e){for(o=a,l=r;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=qr(l.vars.inherit)&&l.parent;a.immediateRender=qr(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new Ln(t[0],a,t[s+1])},Ga=function(e,t){return e||e===0?t(e):t},md=function(e,t,r){return r<e?e:r>t?t:r},mr=function(e,t){return!Jn(e)||!(t=hk.exec(e))?"":t[1]},Nk=function(e,t,r){return Ga(r,function(i){return md(e,t,i)})},ag=[].slice,Zw=function(e,t){return e&&bs(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&bs(e[0]))&&!e.nodeType&&e!==ds},kk=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Jn(i)&&!t||Zw(i,1)?(s=r).push.apply(s,Ti(i)):r.push(i)})||r},Ti=function(e,t,r){return an&&!t&&an.selector?an.selector(e):Jn(e)&&!r&&(ng||!gc())?ag.call((t||U1).querySelectorAll(e),0):vr(e)?kk(e,r):Zw(e)?ag.call(e,0):e?[e]:[]},og=function(e){return e=Ti(e)[0]||td("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return Ti(t,r.querySelectorAll?r:r===e?td("Invalid scope")||U1.createElement("div"):e)}},eb=function(e){return e.sort(function(){return .5-Math.random()})},tb=function(e){if(vn(e))return e;var t=bs(e)?e:{each:e},r=jo(t.ease),i=t.from||0,s=parseFloat(t.base)||0,a={},o=i>0&&i<1,l=isNaN(i)||o,u=t.axis,d=i,p=i;return Jn(i)?d=p={center:.5,edges:.5,end:1}[i]||0:!o&&l&&(d=i[0],p=i[1]),function(m,f,x){var y=(x||t).length,N=a[y],w,b,_,C,T,P,A,j,I;if(!N){if(I=t.grid==="auto"?0:(t.grid||[1,Pi])[1],!I){for(A=-Pi;A<(A=x[I++].getBoundingClientRect().left)&&I<y;);I<y&&I--}for(N=a[y]=[],w=l?Math.min(I,y)*d-.5:i%I,b=I===Pi?0:l?y*p/I-.5:i/I|0,A=0,j=Pi,P=0;P<y;P++)_=P%I-w,C=b-(P/I|0),N[P]=T=u?Math.abs(u==="y"?C:_):Rw(_*_+C*C),T>A&&(A=T),T<j&&(j=T);i==="random"&&eb(N),N.max=A-j,N.min=j,N.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(I>y?y-1:u?u==="y"?y/I:I:Math.max(I,y/I))||0)*(i==="edges"?-1:1),N.b=y<0?s-y:s,N.u=mr(t.amount||t.each)||0,r=r&&y<0?db(r):r}return y=(N[m]-N.min)/N.max||0,Dn(N.b+(r?r(y):y)*N.v)+N.u}},lg=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Dn(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(Gs(r)?0:mr(r))}},nb=function(e,t){var r=vr(e),i,s;return!r&&bs(e)&&(i=r=e.radius||Pi,e.values?(e=Ti(e.values),(s=!Gs(e[0]))&&(i*=i)):e=lg(e.increment)),Ga(t,r?vn(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),u=Pi,d=0,p=e.length,m,f;p--;)s?(m=e[p].x-o,f=e[p].y-l,m=m*m+f*f):m=Math.abs(e[p]-o),m<u&&(u=m,d=p);return d=!i||u<=i?e[d]:a,s||d===a||Gs(a)?d:d+mr(a)}:lg(e))},rb=function(e,t,r,i){return Ga(vr(e)?!t:r===!0?!!(r=0):!i,function(){return vr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},jk=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,a){return a(s)},i)}},Ak=function(e,t){return function(r){return e(parseFloat(r))+(t||mr(r))}},Ck=function(e,t,r){return sb(e,t,0,1,r)},ib=function(e,t,r){return Ga(r,function(i){return e[~~t(i)]})},Ek=function n(e,t,r){var i=t-e;return vr(e)?ib(e,n(0,e.length),t):Ga(r,function(s){return(i+(s-e)%i)%i+e})},Pk=function n(e,t,r){var i=t-e,s=i*2;return vr(e)?ib(e,n(0,e.length-1),t):Ga(r,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},rd=function(e){for(var t=0,r="",i,s,a,o;~(i=e.indexOf("random(",t));)a=e.indexOf(")",i),o=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(o?Bw:tg),r+=e.substr(t,i-t)+rb(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return r+e.substr(t,e.length-t)},sb=function(e,t,r,i,s){var a=t-e,o=i-r;return Ga(s,function(l){return r+((l-e)/a*o||0)})},Tk=function n(e,t,r,i){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var a=Jn(e),o={},l,u,d,p,m;if(r===!0&&(i=1)&&(r=null),a)e={p:e},t={p:t};else if(vr(e)&&!vr(t)){for(d=[],p=e.length,m=p-2,u=1;u<p;u++)d.push(n(e[u-1],e[u]));p--,s=function(x){x*=p;var y=Math.min(m,~~x);return d[y](x-y)},r=t}else i||(e=fc(vr(e)?[]:{},e));if(!d){for(l in t)V1.call(o,e,l,"get",t[l]);s=function(x){return X1(x,o)||(a?e.p:e)}}}return Ga(r,s)},sv=function(e,t,r){var i=e.labels,s=Pi,a,o,l;for(a in i)o=i[a]-t,o<0==!!r&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},ai=function(e,t,r){var i=e.vars,s=i[t],a=an,o=e._ctx,l,u,d;if(s)return l=i[t+"Params"],u=i.callbackScope||e,r&&Fa.length&&kf(),o&&(an=o),d=l?s.apply(u,l):s.call(u),an=a,d},xu=function(e){return Ua(e),e.scrollTrigger&&e.scrollTrigger.kill(!!er),e.progress()<1&&ai(e,"onInterrupt"),e},zl,ab=[],ob=function(e){if(e)if(e=!e.name&&e.default||e,B1()||e.headless){var t=e.name,r=vn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:nd,render:X1,add:V1,kill:Vk,modifier:Yk,rawVars:0},a={targetTest:0,get:0,getSetter:K1,aliases:{},register:0};if(gc(),e!==i){if(ri[t])return;fi(i,fi(jf(e,s),a)),fc(i.prototype,fc(s,jf(e,a))),ri[i.prop=t]=i,e.targetTest&&(Yh.push(i),W1[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Ww(t,i),e.register&&e.register(Kr,i,Vr)}else ab.push(e)},Gt=255,wu={aqua:[0,Gt,Gt],lime:[0,Gt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Gt],navy:[0,0,128],white:[Gt,Gt,Gt],olive:[128,128,0],yellow:[Gt,Gt,0],orange:[Gt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Gt,0,0],pink:[Gt,192,203],cyan:[0,Gt,Gt],transparent:[Gt,Gt,Gt,0]},D0=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Gt+.5|0},lb=function(e,t,r){var i=e?Gs(e)?[e>>16,e>>8&Gt,e&Gt]:0:wu.black,s,a,o,l,u,d,p,m,f,x;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),wu[e])i=wu[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Gt,i&Gt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Gt,e&Gt]}else if(e.substr(0,3)==="hsl"){if(i=x=e.match(tg),!t)l=+i[0]%360/360,u=+i[1]/100,d=+i[2]/100,a=d<=.5?d*(u+1):d+u-d*u,s=d*2-a,i.length>3&&(i[3]*=1),i[0]=D0(l+1/3,s,a),i[1]=D0(l,s,a),i[2]=D0(l-1/3,s,a);else if(~e.indexOf("="))return i=e.match(Ow),r&&i.length<4&&(i[3]=1),i}else i=e.match(tg)||wu.transparent;i=i.map(Number)}return t&&!x&&(s=i[0]/Gt,a=i[1]/Gt,o=i[2]/Gt,p=Math.max(s,a,o),m=Math.min(s,a,o),d=(p+m)/2,p===m?l=u=0:(f=p-m,u=d>.5?f/(2-p-m):f/(p+m),l=p===s?(a-o)/f+(a<o?6:0):p===a?(o-s)/f+2:(s-a)/f+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(d*100+.5)),r&&i.length<4&&(i[3]=1),i},cb=function(e){var t=[],r=[],i=-1;return e.split(Oa).forEach(function(s){var a=s.match(Ul)||[];t.push.apply(t,a),r.push(i+=a.length+1)}),t.c=r,t},av=function(e,t,r){var i="",s=(e+i).match(Oa),a=t?"hsla(":"rgba(",o=0,l,u,d,p;if(!s)return e;if(s=s.map(function(m){return(m=lb(m,t,1))&&a+(t?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),r&&(d=cb(e),l=r.c,l.join(i)!==d.c.join(i)))for(u=e.replace(Oa,"1").split(Ul),p=u.length-1;o<p;o++)i+=u[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(d.length?d:s.length?s:r).shift());if(!u)for(u=e.split(Oa),p=u.length-1;o<p;o++)i+=u[o]+s[o];return i+u[p]},Oa=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in wu)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),Lk=/hsl[a]?\(/,ub=function(e){var t=e.join(" "),r;if(Oa.lastIndex=0,Oa.test(t))return r=Lk.test(t),e[1]=av(e[1],r),e[0]=av(e[0],r,cb(e[1])),!0},id,ii=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,a=s,o=[],l,u,d,p,m,f,x=function y(N){var w=n()-i,b=N===!0,_,C,T,P;if((w>e||w<0)&&(r+=w-t),i+=w,T=i-r,_=T-a,(_>0||b)&&(P=++p.frame,m=T-p.time*1e3,p.time=T=T/1e3,a+=_+(_>=s?4:s-_),C=1),b||(l=u(y)),C)for(f=0;f<o.length;f++)o[f](T,m,P,N)};return p={time:0,frame:0,tick:function(){x(!0)},deltaRatio:function(N){return m/(1e3/(N||60))},wake:function(){Uw&&(!ng&&B1()&&(ds=ng=window,U1=ds.document||{},hi.gsap=Kr,(ds.gsapVersions||(ds.gsapVersions=[])).push(Kr.version),zw(Nf||ds.GreenSockGlobals||!ds.gsap&&ds||{}),ab.forEach(ob)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&p.sleep(),u=d||function(N){return setTimeout(N,a-p.time*1e3+1|0)},id=1,x(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(l),id=0,u=nd},lagSmoothing:function(N,w){e=N||1/0,t=Math.min(w||33,e)},fps:function(N){s=1e3/(N||240),a=p.time*1e3+s},add:function(N,w,b){var _=w?function(C,T,P,A){N(C,T,P,A),p.remove(_)}:N;return p.remove(N),o[b?"unshift":"push"](_),gc(),_},remove:function(N,w){~(w=o.indexOf(N))&&o.splice(w,1)&&f>=w&&f--},_listeners:o},p}(),gc=function(){return!id&&ii.wake()},Lt={},Dk=/^[\d.\-M][\d.\-,\s]/,Mk=/["']/g,Ik=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,a=r.length,o,l,u;s<a;s++)l=r[s],o=s!==a-1?l.lastIndexOf(","):l.length,u=l.substr(0,o),t[i]=isNaN(u)?u.replace(Mk,"").trim():+u,i=l.substr(o+1).trim();return t},Rk=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},Fk=function(e){var t=(e+"").split("("),r=Lt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Ik(t[1])]:Rk(e).split(",").map(Vw)):Lt._CE&&Dk.test(e)?Lt._CE("",e):r},db=function(e){return function(t){return 1-e(1-t)}},hb=function n(e,t){for(var r=e._first,i;r;)r instanceof Nr?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},jo=function(e,t){return e&&(vn(e)?e:Lt[e]||Fk(e))||t},$o=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},a;return Yr(e,function(o){Lt[o]=hi[o]=s,Lt[a=o.toLowerCase()]=r;for(var l in s)Lt[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Lt[o+"."+l]=s[l]}),s},fb=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},M0=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),a=s/eg*(Math.asin(1/i)||0),o=function(d){return d===1?1:i*Math.pow(2,-10*d)*dk((d-a)*s)+1},l=e==="out"?o:e==="in"?function(u){return 1-o(1-u)}:fb(o);return s=eg/s,l.config=function(u,d){return n(e,u,d)},l},I0=function n(e,t){t===void 0&&(t=1.70158);var r=function(a){return a?--a*a*((t+1)*a+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:fb(r);return i.config=function(s){return n(e,s)},i};Yr("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;$o(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});Lt.Linear.easeNone=Lt.none=Lt.Linear.easeIn;$o("Elastic",M0("in"),M0("out"),M0());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(o){return o<t?n*o*o:o<r?n*Math.pow(o-1.5/e,2)+.75:o<i?n*(o-=2.25/e)*o+.9375:n*Math.pow(o-2.625/e,2)+.984375};$o("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);$o("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});$o("Circ",function(n){return-(Rw(1-n*n)-1)});$o("Sine",function(n){return n===1?1:-uk(n*lk)+1});$o("Back",I0("in"),I0("out"),I0());Lt.SteppedEase=Lt.steps=hi.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,a=1-Kt;return function(o){return((i*md(0,a,o)|0)+s)*r}}};hc.ease=Lt["quad.out"];Yr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return H1+=n+","+n+"Params,"});var pb=function(e,t){this.id=ck++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:qw,this.set=t?t.getSetter:K1},sd=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,mc(this,+t.duration,1,1),this.data=t.data,an&&(this._ctx=an,an.data.push(this)),id||ii.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,mc(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(gc(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(tp(this,r),!s._dp||s.parent||Kw(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&fs(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Kt||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Yw(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+rv(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+rv(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?pc(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-Kt?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?Af(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Kt?0:this._rts,this.totalTime(md(-Math.abs(this._delay),this.totalDuration(),s),i!==!1),ep(this),vk(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(gc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Kt&&(this._tTime-=Kt)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&fs(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(qr(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Af(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=pk);var i=er;return er=r,Y1(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),er=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,iv(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,iv(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(ji(this,r),qr(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,qr(i)),this._dur||(this._zTime=-Kt),this},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Kt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Kt,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Kt)},e.eventCallback=function(r,i,s){var a=this.vars;return arguments.length>1?(i?(a[r]=i,s&&(a[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete a[r],this):a[r]},e.then=function(r){var i=this;return new Promise(function(s){var a=vn(r)?r:Gw,o=function(){var u=i.then;i.then=null,vn(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=u),s(a),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?o():i._prom=o})},e.kill=function(){xu(this)},n}();fi(sd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Kt,_prom:0,_ps:!1,_rts:1});var Nr=function(n){Iw(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=qr(r.sortChildren),un&&fs(r.parent||un,Is(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&Xw(Is(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,a){return Lu(0,arguments,this),this},t.from=function(i,s,a){return Lu(1,arguments,this),this},t.fromTo=function(i,s,a,o){return Lu(2,arguments,this),this},t.set=function(i,s,a){return s.duration=0,s.parent=this,Tu(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Ln(i,s,ji(this,a),1),this},t.call=function(i,s,a){return fs(this,Ln.delayedCall(0,i,s),a)},t.staggerTo=function(i,s,a,o,l,u,d){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=u,a.onCompleteParams=d,a.parent=this,new Ln(i,a,ji(this,l)),this},t.staggerFrom=function(i,s,a,o,l,u,d){return a.runBackwards=1,Tu(a).immediateRender=qr(a.immediateRender),this.staggerTo(i,s,a,o,l,u,d)},t.staggerFromTo=function(i,s,a,o,l,u,d,p){return o.startAt=a,Tu(o).immediateRender=qr(o.immediateRender),this.staggerTo(i,s,o,l,u,d,p)},t.render=function(i,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,d=i<=0?0:Dn(i),p=this._zTime<0!=i<0&&(this._initted||!u),m,f,x,y,N,w,b,_,C,T,P,A;if(this!==un&&d>l&&i>=0&&(d=l),d!==this._tTime||a||p){if(o!==this._time&&u&&(d+=this._time-o,i+=this._time-o),m=d,C=this._start,_=this._ts,w=!_,p&&(u||(o=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(P=this._yoyo,N=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(N*100+i,s,a);if(m=Dn(d%N),d===l?(y=this._repeat,m=u):(T=Dn(d/N),y=~~T,y&&y===T&&(m=u,y--),m>u&&(m=u)),T=pc(this._tTime,N),!o&&this._tTime&&T!==y&&this._tTime-T*N-this._dur<=0&&(T=y),P&&y&1&&(m=u-m,A=1),y!==T&&!this._lock){var j=P&&T&1,I=j===(P&&y&1);if(y<T&&(j=!j),o=j?0:d%u?u:d,this._lock=1,this.render(o||(A?0:Dn(y*N)),s,!u)._lock=0,this._tTime=d,!s&&this.parent&&ai(this,"onRepeat"),this.vars.repeatRefresh&&!A&&(this.invalidate()._lock=1),o&&o!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,I&&(this._lock=2,o=j?u:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!A&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;hb(this,A)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=Sk(this,Dn(o),Dn(m)),b&&(d-=m-(m=b._start))),this._tTime=d,this._time=m,this._act=!_,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,o=0),!o&&d&&!s&&!T&&(ai(this,"onStart"),this._tTime!==d))return this;if(m>=o&&i>=0)for(f=this._first;f;){if(x=f._next,(f._act||m>=f._start)&&f._ts&&b!==f){if(f.parent!==this)return this.render(i,s,a);if(f.render(f._ts>0?(m-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(m-f._start)*f._ts,s,a),m!==this._time||!this._ts&&!w){b=0,x&&(d+=this._zTime=-Kt);break}}f=x}else{f=this._last;for(var $=i<0?i:m;f;){if(x=f._prev,(f._act||$<=f._end)&&f._ts&&b!==f){if(f.parent!==this)return this.render(i,s,a);if(f.render(f._ts>0?($-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+($-f._start)*f._ts,s,a||er&&Y1(f)),m!==this._time||!this._ts&&!w){b=0,x&&(d+=this._zTime=$?-Kt:Kt);break}}f=x}}if(b&&!s&&(this.pause(),b.render(m>=o?0:-Kt)._zTime=m>=o?1:-1,this._ts))return this._start=C,ep(this),this.render(i,s,a);this._onUpdate&&!s&&ai(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&o)&&(C===this._start||Math.abs(_)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(d===l&&this._ts>0||!d&&this._ts<0)&&Ua(this,1),!s&&!(i<0&&!o)&&(d||o||!l)&&(ai(this,d===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var a=this;if(Gs(s)||(s=ji(this,s,i)),!(i instanceof sd)){if(vr(i))return i.forEach(function(o){return a.add(o,s)}),this;if(Jn(i))return this.addLabel(i,s);if(vn(i))i=Ln.delayedCall(0,i);else return this}return this!==i?fs(this,i,s):this},t.getChildren=function(i,s,a,o){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-Pi);for(var l=[],u=this._first;u;)u._start>=o&&(u instanceof Ln?s&&l.push(u):(a&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,s,a)))),u=u._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},t.remove=function(i){return Jn(i)?this.removeLabel(i):vn(i)?this.killTweensOf(i):(i.parent===this&&Zf(this,i),i===this._recent&&(this._recent=this._last),ko(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Dn(ii.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=ji(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,a){var o=Ln.delayedCall(0,s||nd,a);return o.data="isPause",this._hasPause=1,fs(this,o,ji(this,i))},t.removePause=function(i){var s=this._first;for(i=ji(this,i);s;)s._start===i&&s.data==="isPause"&&Ua(s),s=s._next},t.killTweensOf=function(i,s,a){for(var o=this.getTweensOf(i,a),l=o.length;l--;)ka!==o[l]&&o[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var a=[],o=Ti(i),l=this._first,u=Gs(s),d;l;)l instanceof Ln?mk(l._targets,o)&&(u?(!ka||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(d=l.getTweensOf(o,s)).length&&a.push.apply(a,d),l=l._next;return a},t.tweenTo=function(i,s){s=s||{};var a=this,o=ji(a,i),l=s,u=l.startAt,d=l.onStart,p=l.onStartParams,m=l.immediateRender,f,x=Ln.to(a,fi({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale())||Kt,onStart:function(){if(a.pause(),!f){var N=s.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale());x._dur!==N&&mc(x,N,0,1).render(x._time,!0,!0),f=1}d&&d.apply(x,p||[])}},s));return m?x.render(0):x},t.tweenFromTo=function(i,s,a){return this.tweenTo(s,fi({startAt:{time:ji(this,i)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),sv(this,ji(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),sv(this,ji(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Kt)},t.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,u;o;)o._start>=a&&(o._start+=i,o._end+=i),o=o._next;if(s)for(u in l)l[u]>=a&&(l[u]+=i);return ko(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),ko(this)},t.totalDuration=function(i){var s=0,a=this,o=a._last,l=Pi,u,d,p;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(p=a.parent;o;)u=o._prev,o._dirty&&o.totalDuration(),d=o._start,d>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,fs(a,o,d-o._delay,1)._lock=0):l=d,d<0&&o._ts&&(s-=d,(!p&&!a._dp||p&&p.smoothChildTiming)&&(a._start+=d/a._ts,a._time-=d,a._tTime-=d),a.shiftChildren(-d,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=u;mc(a,a===un&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(un._ts&&(Yw(un,Af(i,un)),Hw=ii.frame),ii.frame>=tv){tv+=ci.autoSleep||120;var s=un._first;if((!s||!s._ts)&&ci.autoSleep&&ii._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ii.sleep()}}},e}(sd);fi(Nr.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ok=function(e,t,r,i,s,a,o){var l=new Vr(this._pt,e,t,0,1,wb,null,s),u=0,d=0,p,m,f,x,y,N,w,b;for(l.b=r,l.e=i,r+="",i+="",(w=~i.indexOf("random("))&&(i=rd(i)),a&&(b=[r,i],a(b,e,t),r=b[0],i=b[1]),m=r.match(T0)||[];p=T0.exec(i);)x=p[0],y=i.substring(u,p.index),f?f=(f+1)%5:y.substr(-5)==="rgba("&&(f=1),x!==m[d++]&&(N=parseFloat(m[d-1])||0,l._pt={_next:l._pt,p:y||d===1?y:",",s:N,c:x.charAt(1)==="="?Xl(N,x)-N:parseFloat(x)-N,m:f&&f<4?Math.round:0},u=T0.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=o,($w.test(i)||w)&&(l.e=0),this._pt=l,l},V1=function(e,t,r,i,s,a,o,l,u,d){vn(i)&&(i=i(s||0,e,a));var p=e[t],m=r!=="get"?r:vn(p)?u?e[t.indexOf("set")||!vn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():p,f=vn(p)?u?Wk:vb:J1,x;if(Jn(i)&&(~i.indexOf("random(")&&(i=rd(i)),i.charAt(1)==="="&&(x=Xl(m,i)+(mr(m)||0),(x||x===0)&&(i=x))),!d||m!==i||cg)return!isNaN(m*i)&&i!==""?(x=new Vr(this._pt,e,t,+m||0,i-(m||0),typeof p=="boolean"?qk:xb,0,f),u&&(x.fp=u),o&&x.modifier(o,this,e),this._pt=x):(!p&&!(t in e)&&z1(t,i),Ok.call(this,e,t,m,i,f,l||ci.stringFilter,u))},$k=function(e,t,r,i,s){if(vn(e)&&(e=Du(e,s,t,r,i)),!bs(e)||e.style&&e.nodeType||vr(e)||Fw(e))return Jn(e)?Du(e,s,t,r,i):e;var a={},o;for(o in e)a[o]=Du(e[o],s,t,r,i);return a},mb=function(e,t,r,i,s,a){var o,l,u,d;if(ri[e]&&(o=new ri[e]).init(s,o.rawVars?t[e]:$k(t[e],i,s,a,r),r,i,a)!==!1&&(r._pt=l=new Vr(r._pt,s,e,0,1,o.render,o,0,o.priority),r!==zl))for(u=r._ptLookup[r._targets.indexOf(s)],d=o._props.length;d--;)u[o._props[d]]=l;return o},ka,cg,G1=function n(e,t,r){var i=e.vars,s=i.ease,a=i.startAt,o=i.immediateRender,l=i.lazy,u=i.onUpdate,d=i.runBackwards,p=i.yoyoEase,m=i.keyframes,f=i.autoRevert,x=e._dur,y=e._startAt,N=e._targets,w=e.parent,b=w&&w.data==="nested"?w.vars.targets:N,_=e._overwrite==="auto"&&!O1,C=e.timeline,T,P,A,j,I,$,L,M,D,O,G,X,oe;if(C&&(!m||!s)&&(s="none"),e._ease=jo(s,hc.ease),e._yEase=p?db(jo(p===!0?s:p,hc.ease)):0,p&&e._yoyo&&!e._repeat&&(p=e._yEase,e._yEase=e._ease,e._ease=p),e._from=!C&&!!i.runBackwards,!C||m&&!i.stagger){if(M=N[0]?No(N[0]).harness:0,X=M&&i[M.prop],T=jf(i,W1),y&&(y._zTime<0&&y.progress(1),t<0&&d&&o&&!f?y.render(-1,!0):y.revert(d&&x?qh:fk),y._lazy=0),a){if(Ua(e._startAt=Ln.set(N,fi({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!y&&qr(l),startAt:null,delay:0,onUpdate:u&&function(){return ai(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(er||!o&&!f)&&e._startAt.revert(qh),o&&x&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(d&&x&&!y){if(t&&(o=!1),A=fi({overwrite:!1,data:"isFromStart",lazy:o&&!y&&qr(l),immediateRender:o,stagger:0,parent:w},T),X&&(A[M.prop]=X),Ua(e._startAt=Ln.set(N,A)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(er?e._startAt.revert(qh):e._startAt.render(-1,!0)),e._zTime=t,!o)n(e._startAt,Kt,Kt);else if(!t)return}for(e._pt=e._ptCache=0,l=x&&qr(l)||l&&!x,P=0;P<N.length;P++){if(I=N[P],L=I._gsap||q1(N)[P]._gsap,e._ptLookup[P]=O={},rg[L.id]&&Fa.length&&kf(),G=b===N?P:b.indexOf(I),M&&(D=new M).init(I,X||T,e,G,b)!==!1&&(e._pt=j=new Vr(e._pt,I,D.name,0,1,D.render,D,0,D.priority),D._props.forEach(function(J){O[J]=j}),D.priority&&($=1)),!M||X)for(A in T)ri[A]&&(D=mb(A,T,e,G,I,b))?D.priority&&($=1):O[A]=j=V1.call(e,I,A,"get",T[A],G,b,0,i.stringFilter);e._op&&e._op[P]&&e.kill(I,e._op[P]),_&&e._pt&&(ka=e,un.killTweensOf(I,O,e.globalTime(t)),oe=!e.parent,ka=0),e._pt&&l&&(rg[L.id]=1)}$&&bb(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!oe,m&&t<=0&&C.render(Pi,!0,!0)},Bk=function(e,t,r,i,s,a,o,l){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,p,m,f;if(!u)for(u=e._ptCache[t]=[],m=e._ptLookup,f=e._targets.length;f--;){if(d=m[f][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return cg=1,e.vars[t]="+=0",G1(e,o),cg=0,l?td(t+" not eligible for reset"):1;u.push(d)}for(f=u.length;f--;)p=u[f],d=p._pt||p,d.s=(i||i===0)&&!s?i:d.s+(i||0)+a*d.c,d.c=r-d.s,p.e&&(p.e=Nn(r)+mr(p.e)),p.b&&(p.b=d.s+mr(p.b))},Uk=function(e,t){var r=e[0]?No(e[0]).harness:0,i=r&&r.aliases,s,a,o,l;if(!i)return t;s=fc({},t);for(a in i)if(a in s)for(l=i[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},zk=function(e,t,r,i){var s=t.ease||i||"power1.inOut",a,o;if(vr(t))o=r[e]||(r[e]=[]),t.forEach(function(l,u){return o.push({t:u/(t.length-1)*100,v:l,e:s})});else for(a in t)o=r[a]||(r[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},Du=function(e,t,r,i,s){return vn(e)?e.call(t,r,i,s):Jn(e)&&~e.indexOf("random(")?rd(e):e},gb=H1+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",yb={};Yr(gb+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return yb[n]=1});var Ln=function(n){Iw(e,n);function e(r,i,s,a){var o;typeof i=="number"&&(s.duration=i,i=s,s=null),o=n.call(this,a?i:Tu(i))||this;var l=o.vars,u=l.duration,d=l.delay,p=l.immediateRender,m=l.stagger,f=l.overwrite,x=l.keyframes,y=l.defaults,N=l.scrollTrigger,w=l.yoyoEase,b=i.parent||un,_=(vr(r)||Fw(r)?Gs(r[0]):"length"in i)?[r]:Ti(r),C,T,P,A,j,I,$,L;if(o._targets=_.length?q1(_):td("GSAP target "+r+" not found. https://gsap.com",!ci.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=f,x||m||kh(u)||kh(d)){if(i=o.vars,C=o.timeline=new Nr({data:"nested",defaults:y||{},targets:b&&b.data==="nested"?b.vars.targets:_}),C.kill(),C.parent=C._dp=Is(o),C._start=0,m||kh(u)||kh(d)){if(A=_.length,$=m&&tb(m),bs(m))for(j in m)~gb.indexOf(j)&&(L||(L={}),L[j]=m[j]);for(T=0;T<A;T++)P=jf(i,yb),P.stagger=0,w&&(P.yoyoEase=w),L&&fc(P,L),I=_[T],P.duration=+Du(u,Is(o),T,I,_),P.delay=(+Du(d,Is(o),T,I,_)||0)-o._delay,!m&&A===1&&P.delay&&(o._delay=d=P.delay,o._start+=d,P.delay=0),C.to(I,P,$?$(T,I,_):0),C._ease=Lt.none;C.duration()?u=d=0:o.timeline=0}else if(x){Tu(fi(C.vars.defaults,{ease:"none"})),C._ease=jo(x.ease||i.ease||"none");var M=0,D,O,G;if(vr(x))x.forEach(function(X){return C.to(_,X,">")}),C.duration();else{P={};for(j in x)j==="ease"||j==="easeEach"||zk(j,x[j],P,x.easeEach);for(j in P)for(D=P[j].sort(function(X,oe){return X.t-oe.t}),M=0,T=0;T<D.length;T++)O=D[T],G={ease:O.e,duration:(O.t-(T?D[T-1].t:0))/100*u},G[j]=O.v,C.to(_,G,M),M+=G.duration;C.duration()<u&&C.to({},{duration:u-C.duration()})}}u||o.duration(u=C.duration())}else o.timeline=0;return f===!0&&!O1&&(ka=Is(o),un.killTweensOf(_),ka=0),fs(b,Is(o),s),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(p||!u&&!x&&o._start===Dn(b._time)&&qr(p)&&xk(Is(o))&&b.data!=="nested")&&(o._tTime=-Kt,o.render(Math.max(0,-d)||0)),N&&Xw(Is(o),N),o}var t=e.prototype;return t.render=function(i,s,a){var o=this._time,l=this._tDur,u=this._dur,d=i<0,p=i>l-Kt&&!d?l:i<Kt?0:i,m,f,x,y,N,w,b,_,C;if(!u)bk(this,i,s,a);else if(p!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(m=p,_=this.timeline,this._repeat){if(y=u+this._rDelay,this._repeat<-1&&d)return this.totalTime(y*100+i,s,a);if(m=Dn(p%y),p===l?(x=this._repeat,m=u):(N=Dn(p/y),x=~~N,x&&x===N?(m=u,x--):m>u&&(m=u)),w=this._yoyo&&x&1,w&&(C=this._yEase,m=u-m),N=pc(this._tTime,y),m===o&&!a&&this._initted&&x===N)return this._tTime=p,this;x!==N&&(_&&this._yEase&&hb(_,w),this.vars.repeatRefresh&&!w&&!this._lock&&m!==y&&this._initted&&(this._lock=a=1,this.render(Dn(y*x),!0).invalidate()._lock=0))}if(!this._initted){if(Qw(this,d?i:m,a,s,p))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&x!==N))return this;if(u!==this._dur)return this.render(i,s,a)}if(this._tTime=p,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(C||this._ease)(m/u),this._from&&(this.ratio=b=1-b),!o&&p&&!s&&!N&&(ai(this,"onStart"),this._tTime!==p))return this;for(f=this._pt;f;)f.r(b,f.d),f=f._next;_&&_.render(i<0?i:_._dur*_._ease(m/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(d&&ig(this,i,s,a),ai(this,"onUpdate")),this._repeat&&x!==N&&this.vars.onRepeat&&!s&&this.parent&&ai(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(d&&!this._onUpdate&&ig(this,i,!0,!0),(i||!u)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&Ua(this,1),!s&&!(d&&!o)&&(p||o||w)&&(ai(this,p===l?"onComplete":"onReverseComplete",!0),this._prom&&!(p<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,a,o,l){id||ii.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||G1(this,u),d=this._ease(u/this._dur),Bk(this,i,s,a,o,d,u,l)?this.resetTo(i,s,a,o,1):(tp(this,0),this.parent||Jw(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?xu(this):this.scrollTrigger&&this.scrollTrigger.kill(!!er),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,ka&&ka.vars.overwrite!==!0)._first||xu(this),this.parent&&a!==this.timeline.totalDuration()&&mc(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=i?Ti(i):o,u=this._ptLookup,d=this._pt,p,m,f,x,y,N,w;if((!s||s==="all")&&yk(o,l))return s==="all"&&(this._pt=0),xu(this);for(p=this._op=this._op||[],s!=="all"&&(Jn(s)&&(y={},Yr(s,function(b){return y[b]=1}),s=y),s=Uk(o,s)),w=o.length;w--;)if(~l.indexOf(o[w])){m=u[w],s==="all"?(p[w]=s,x=m,f={}):(f=p[w]=p[w]||{},x=s);for(y in x)N=m&&m[y],N&&((!("kill"in N.d)||N.d.kill(y)===!0)&&Zf(this,N,"_pt"),delete m[y]),f!=="all"&&(f[y]=1)}return this._initted&&!this._pt&&d&&xu(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Lu(1,arguments)},e.delayedCall=function(i,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(i,s,a){return Lu(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return un.killTweensOf(i,s,a)},e}(sd);fi(Ln.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Yr("staggerTo,staggerFrom,staggerFromTo",function(n){Ln[n]=function(){var e=new Nr,t=ag.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var J1=function(e,t,r){return e[t]=r},vb=function(e,t,r){return e[t](r)},Wk=function(e,t,r,i){return e[t](i.fp,r)},Hk=function(e,t,r){return e.setAttribute(t,r)},K1=function(e,t){return vn(e[t])?vb:$1(e[t])&&e.setAttribute?Hk:J1},xb=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},qk=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},wb=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},X1=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},Yk=function(e,t,r,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,t,r),s=a},Vk=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?Zf(this,t,"_pt"):t.dep||(r=1),t=i;return!r},Gk=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},bb=function(e){for(var t=e._pt,r,i,s,a;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:a)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:a=t,t=r}e._pt=s},Vr=function(){function n(t,r,i,s,a,o,l,u,d){this.t=r,this.s=s,this.c=a,this.p=i,this.r=o||xb,this.d=l||this,this.set=u||J1,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=Gk,this.m=r,this.mt=s,this.tween=i},n}();Yr(H1+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return W1[n]=1});hi.TweenMax=hi.TweenLite=Ln;hi.TimelineLite=hi.TimelineMax=Nr;un=new Nr({sortChildren:!1,defaults:hc,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ci.stringFilter=ub;var Ao=[],Vh={},Jk=[],ov=0,Kk=0,R0=function(e){return(Vh[e]||Jk).map(function(t){return t()})},ug=function(){var e=Date.now(),t=[];e-ov>2&&(R0("matchMediaInit"),Ao.forEach(function(r){var i=r.queries,s=r.conditions,a,o,l,u;for(o in i)a=ds.matchMedia(i[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,u=1);u&&(r.revert(),l&&t.push(r))}),R0("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),ov=e,R0("matchMedia"))},Sb=function(){function n(t,r){this.selector=r&&og(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Kk++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){vn(r)&&(s=i,i=r,r=vn);var a=this,o=function(){var u=an,d=a.selector,p;return u&&u!==a&&u.data.push(a),s&&(a.selector=og(s)),an=a,p=i.apply(a,arguments),vn(p)&&a._r.push(p),an=u,a.selector=d,a.isReverted=!1,p};return a.last=o,r===vn?o(a,function(l){return a.add(null,l)}):r?a[r]=o:o},e.ignore=function(r){var i=an;an=null,r(this),an=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Ln&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var o=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(d){return o.splice(o.indexOf(d),1)}));for(o.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,p){return p.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),l=s.data.length;l--;)u=s.data[l],u instanceof Nr?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof Ln)&&u.revert&&u.revert(r);s._r.forEach(function(d){return d(r,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),i)for(var a=Ao.length;a--;)Ao[a].id===this.id&&Ao.splice(a,1)},e.revert=function(r){this.kill(r||{})},n}(),Xk=function(){function n(t){this.contexts=[],this.scope=t,an&&an.data.push(this)}var e=n.prototype;return e.add=function(r,i,s){bs(r)||(r={matches:r});var a=new Sb(0,s||this.scope),o=a.conditions={},l,u,d;an&&!a.selector&&(a.selector=an.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=r;for(u in r)u==="all"?d=1:(l=ds.matchMedia(r[u]),l&&(Ao.indexOf(a)<0&&Ao.push(a),(o[u]=l.matches)&&(d=1),l.addListener?l.addListener(ug):l.addEventListener("change",ug)));return d&&i(a,function(p){return a.add(null,p)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),Cf={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return ob(i)})},timeline:function(e){return new Nr(e)},getTweensOf:function(e,t){return un.getTweensOf(e,t)},getProperty:function(e,t,r,i){Jn(e)&&(e=Ti(e)[0]);var s=No(e||{}).get,a=r?Gw:Vw;return r==="native"&&(r=""),e&&(t?a((ri[t]&&ri[t].get||s)(e,t,r,i)):function(o,l,u){return a((ri[o]&&ri[o].get||s)(e,o,l,u))})},quickSetter:function(e,t,r){if(e=Ti(e),e.length>1){var i=e.map(function(d){return Kr.quickSetter(d,t,r)}),s=i.length;return function(d){for(var p=s;p--;)i[p](d)}}e=e[0]||{};var a=ri[t],o=No(e),l=o.harness&&(o.harness.aliases||{})[t]||t,u=a?function(d){var p=new a;zl._pt=0,p.init(e,r?d+r:d,zl,0,[e]),p.render(1,p),zl._pt&&X1(1,zl)}:o.set(e,l);return a?u:function(d){return u(e,l,r?d+r:d,o,1)}},quickTo:function(e,t,r){var i,s=Kr.to(e,fi((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),a=function(l,u,d){return s.resetTo(t,l,u,d)};return a.tween=s,a},isTweening:function(e){return un.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=jo(e.ease,hc.ease)),nv(hc,e||{})},config:function(e){return nv(ci,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(o){return o&&!ri[o]&&!hi[o]&&td(t+" effect requires "+o+" plugin.")}),L0[t]=function(o,l,u){return r(Ti(o),fi(l||{},s),u)},a&&(Nr.prototype[t]=function(o,l,u){return this.add(L0[t](o,bs(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){Lt[e]=jo(t)},parseEase:function(e,t){return arguments.length?jo(e,t):Lt},getById:function(e){return un.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new Nr(e),i,s;for(r.smoothChildTiming=qr(e.smoothChildTiming),un.remove(r),r._dp=0,r._time=r._tTime=un._time,i=un._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Ln&&i.vars.onComplete===i._targets[0]))&&fs(r,i,i._start-i._delay),i=s;return fs(un,r,0),r},context:function(e,t){return e?new Sb(e,t):an},matchMedia:function(e){return new Xk(e)},matchMediaRefresh:function(){return Ao.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||ug()},addEventListener:function(e,t){var r=Vh[e]||(Vh[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Vh[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:Ek,wrapYoyo:Pk,distribute:tb,random:rb,snap:nb,normalize:Ck,getUnit:mr,clamp:Nk,splitColor:lb,toArray:Ti,selector:og,mapRange:sb,pipe:jk,unitize:Ak,interpolate:Tk,shuffle:eb},install:zw,effects:L0,ticker:ii,updateRoot:Nr.updateRoot,plugins:ri,globalTimeline:un,core:{PropTween:Vr,globals:Ww,Tween:Ln,Timeline:Nr,Animation:sd,getCache:No,_removeLinkedListItem:Zf,reverting:function(){return er},context:function(e){return e&&an&&(an.data.push(e),e._ctx=an),an},suppressOverwrites:function(e){return O1=e}}};Yr("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Cf[n]=Ln[n]});ii.add(Nr.updateRoot);zl=Cf.to({},{duration:0});var Qk=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Zk=function(e,t){var r=e._targets,i,s,a;for(i in t)for(s=r.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=Qk(a,i)),a&&a.modifier&&a.modifier(t[i],e,r[s],i))},F0=function(e,t){return{name:e,headless:1,rawVars:1,init:function(i,s,a){a._onInit=function(o){var l,u;if(Jn(s)&&(l={},Yr(s,function(d){return l[d]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}Zk(o,s)}}}},Kr=Cf.registerPlugin({name:"attr",init:function(e,t,r,i,s){var a,o,l;this.tween=r;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],i,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var r=t._pt;r;)er?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},F0("roundProps",lg),F0("modifiers"),F0("snap",nb))||Cf;Ln.version=Nr.version=Kr.version="3.13.0";Uw=1;B1()&&gc();Lt.Power0;Lt.Power1;Lt.Power2;Lt.Power3;Lt.Power4;Lt.Linear;Lt.Quad;Lt.Cubic;Lt.Quart;Lt.Quint;Lt.Strong;Lt.Elastic;Lt.Back;Lt.SteppedEase;Lt.Bounce;Lt.Sine;Lt.Expo;Lt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var lv,ja,Ql,Q1,bo,cv,Z1,e6=function(){return typeof window<"u"},Js={},fo=180/Math.PI,Zl=Math.PI/180,yl=Math.atan2,uv=1e8,ey=/([A-Z])/g,t6=/(left|right|width|margin|padding|x)/i,n6=/[\s,\(]\S/,ps={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},dg=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},r6=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},i6=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},s6=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},_b=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Nb=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},a6=function(e,t,r){return e.style[t]=r},o6=function(e,t,r){return e.style.setProperty(t,r)},l6=function(e,t,r){return e._gsap[t]=r},c6=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},u6=function(e,t,r,i,s){var a=e._gsap;a.scaleX=a.scaleY=r,a.renderTransform(s,a)},d6=function(e,t,r,i,s){var a=e._gsap;a[t]=r,a.renderTransform(s,a)},dn="transform",Gr=dn+"Origin",h6=function n(e,t){var r=this,i=this.target,s=i.style,a=i._gsap;if(e in Js&&s){if(this.tfm=this.tfm||{},e!=="transform")e=ps[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=$s(i,o)}):this.tfm[e]=a.x?a[e]:$s(i,e),e===Gr&&(this.tfm.zOrigin=a.zOrigin);else return ps.transform.split(",").forEach(function(o){return n.call(r,o,t)});if(this.props.indexOf(dn)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Gr,t,"")),e=dn}(s||t)&&this.props.push(e,t,s[e])},kb=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},f6=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(ey,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Z1(),(!s||!s.isStart)&&!r[dn]&&(kb(r),i.zOrigin&&r[Gr]&&(r[Gr]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},jb=function(e,t){var r={target:e,props:[],revert:f6,save:h6};return e._gsap||Kr.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return r.save(i)}),r},Ab,hg=function(e,t){var r=ja.createElementNS?ja.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ja.createElement(e);return r&&r.style?r:ja.createElement(e)},Li=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(ey,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,yc(t)||t,1)||""},dv="O,Moz,ms,Ms,Webkit".split(","),yc=function(e,t,r){var i=t||bo,s=i.style,a=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(dv[a]+e in s););return a<0?null:(a===3?"ms":a>=0?dv[a]:"")+e},fg=function(){e6()&&window.document&&(lv=window,ja=lv.document,Ql=ja.documentElement,bo=hg("div")||{style:{}},hg("div"),dn=yc(dn),Gr=dn+"Origin",bo.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ab=!!yc("perspective"),Z1=Kr.core.reverting,Q1=1)},hv=function(e){var t=e.ownerSVGElement,r=hg("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",r.appendChild(i),Ql.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),Ql.removeChild(r),s},fv=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},Cb=function(e){var t,r;try{t=e.getBBox()}catch{t=hv(e),r=1}return t&&(t.width||t.height)||r||(t=hv(e)),t&&!t.width&&!t.x&&!t.y?{x:+fv(e,["x","cx","x1"])||0,y:+fv(e,["y","cy","y1"])||0,width:0,height:0}:t},Eb=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Cb(e))},Ro=function(e,t){if(t){var r=e.style,i;t in Js&&t!==Gr&&(t=dn),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(ey,"-$1").toLowerCase())):r.removeAttribute(t)}},Aa=function(e,t,r,i,s,a){var o=new Vr(e._pt,t,r,0,1,a?Nb:_b);return e._pt=o,o.b=i,o.e=s,e._props.push(r),o},pv={deg:1,rad:1,turn:1},p6={grid:1,flex:1},za=function n(e,t,r,i){var s=parseFloat(r)||0,a=(r+"").trim().substr((s+"").length)||"px",o=bo.style,l=t6.test(t),u=e.tagName.toLowerCase()==="svg",d=(u?"client":"offset")+(l?"Width":"Height"),p=100,m=i==="px",f=i==="%",x,y,N,w;if(i===a||!s||pv[i]||pv[a])return s;if(a!=="px"&&!m&&(s=n(e,t,r,"px")),w=e.getCTM&&Eb(e),(f||a==="%")&&(Js[t]||~t.indexOf("adius")))return x=w?e.getBBox()[l?"width":"height"]:e[d],Nn(f?s/x*p:s/100*x);if(o[l?"width":"height"]=p+(m?a:i),y=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!u?e:e.parentNode,w&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===ja||!y.appendChild)&&(y=ja.body),N=y._gsap,N&&f&&N.width&&l&&N.time===ii.time&&!N.uncache)return Nn(s/N.width*p);if(f&&(t==="height"||t==="width")){var b=e.style[t];e.style[t]=p+i,x=e[d],b?e.style[t]=b:Ro(e,t)}else(f||a==="%")&&!p6[Li(y,"display")]&&(o.position=Li(e,"position")),y===e&&(o.position="static"),y.appendChild(bo),x=bo[d],y.removeChild(bo),o.position="absolute";return l&&f&&(N=No(y),N.time=ii.time,N.width=y[d]),Nn(m?x*s/p:x&&s?p/x*s:0)},$s=function(e,t,r,i){var s;return Q1||fg(),t in ps&&t!=="transform"&&(t=ps[t],~t.indexOf(",")&&(t=t.split(",")[0])),Js[t]&&t!=="transform"?(s=od(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Pf(Li(e,Gr))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=Ef[t]&&Ef[t](e,t,r)||Li(e,t)||qw(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?za(e,t,s,r)+r:s},m6=function(e,t,r,i){if(!r||r==="none"){var s=yc(t,e,1),a=s&&Li(e,s,1);a&&a!==r?(t=s,r=a):t==="borderColor"&&(r=Li(e,"borderTopColor"))}var o=new Vr(this._pt,e.style,t,0,1,wb),l=0,u=0,d,p,m,f,x,y,N,w,b,_,C,T;if(o.b=r,o.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=Li(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(y=e.style[t],e.style[t]=i,i=Li(e,t)||i,y?e.style[t]=y:Ro(e,t)),d=[r,i],ub(d),r=d[0],i=d[1],m=r.match(Ul)||[],T=i.match(Ul)||[],T.length){for(;p=Ul.exec(i);)N=p[0],b=i.substring(l,p.index),x?x=(x+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(x=1),N!==(y=m[u++]||"")&&(f=parseFloat(y)||0,C=y.substr((f+"").length),N.charAt(1)==="="&&(N=Xl(f,N)+C),w=parseFloat(N),_=N.substr((w+"").length),l=Ul.lastIndex-_.length,_||(_=_||ci.units[t]||C,l===i.length&&(i+=_,o.e+=_)),C!==_&&(f=za(e,t,y,_)||0),o._pt={_next:o._pt,p:b||u===1?b:",",s:f,c:w-f,m:x&&x<4||t==="zIndex"?Math.round:0});o.c=l<i.length?i.substring(l,i.length):""}else o.r=t==="display"&&i==="none"?Nb:_b;return $w.test(i)&&(o.e=0),this._pt=o,o},mv={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},g6=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=mv[r]||r,t[1]=mv[i]||i,t.join(" ")},y6=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,a=r._gsap,o,l,u;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)o=s[u],Js[o]&&(l=1,o=o==="transformOrigin"?Gr:dn),Ro(r,o);l&&(Ro(r,dn),a&&(a.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",od(r,1),a.uncache=1,kb(i)))}},Ef={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var a=e._pt=new Vr(e._pt,t,r,0,0,y6);return a.u=i,a.pr=-10,a.tween=s,e._props.push(r),1}}},ad=[1,0,0,1,0,0],Pb={},Tb=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},gv=function(e){var t=Li(e,dn);return Tb(t)?ad:t.substr(7).match(Ow).map(Nn)},ty=function(e,t){var r=e._gsap||No(e),i=e.style,s=gv(e),a,o,l,u;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?ad:s):(s===ad&&!e.offsetParent&&e!==Ql&&!r.svg&&(l=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(u=1,o=e.nextElementSibling,Ql.appendChild(e)),s=gv(e),l?i.display=l:Ro(e,"display"),u&&(o?a.insertBefore(e,o):a?a.appendChild(e):Ql.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},pg=function(e,t,r,i,s,a){var o=e._gsap,l=s||ty(e,!0),u=o.xOrigin||0,d=o.yOrigin||0,p=o.xOffset||0,m=o.yOffset||0,f=l[0],x=l[1],y=l[2],N=l[3],w=l[4],b=l[5],_=t.split(" "),C=parseFloat(_[0])||0,T=parseFloat(_[1])||0,P,A,j,I;r?l!==ad&&(A=f*N-x*y)&&(j=C*(N/A)+T*(-y/A)+(y*b-N*w)/A,I=C*(-x/A)+T*(f/A)-(f*b-x*w)/A,C=j,T=I):(P=Cb(e),C=P.x+(~_[0].indexOf("%")?C/100*P.width:C),T=P.y+(~(_[1]||_[0]).indexOf("%")?T/100*P.height:T)),i||i!==!1&&o.smooth?(w=C-u,b=T-d,o.xOffset=p+(w*f+b*y)-w,o.yOffset=m+(w*x+b*N)-b):o.xOffset=o.yOffset=0,o.xOrigin=C,o.yOrigin=T,o.smooth=!!i,o.origin=t,o.originIsAbsolute=!!r,e.style[Gr]="0px 0px",a&&(Aa(a,o,"xOrigin",u,C),Aa(a,o,"yOrigin",d,T),Aa(a,o,"xOffset",p,o.xOffset),Aa(a,o,"yOffset",m,o.yOffset)),e.setAttribute("data-svg-origin",C+" "+T)},od=function(e,t){var r=e._gsap||new pb(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,a="px",o="deg",l=getComputedStyle(e),u=Li(e,Gr)||"0",d,p,m,f,x,y,N,w,b,_,C,T,P,A,j,I,$,L,M,D,O,G,X,oe,J,ie,ae,Ne,E,q,Y,Z;return d=p=m=y=N=w=b=_=C=0,f=x=1,r.svg=!!(e.getCTM&&Eb(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[dn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[dn]!=="none"?l[dn]:"")),i.scale=i.rotate=i.translate="none"),A=ty(e,r.svg),r.svg&&(r.uncache?(J=e.getBBox(),u=r.xOrigin-J.x+"px "+(r.yOrigin-J.y)+"px",oe=""):oe=!t&&e.getAttribute("data-svg-origin"),pg(e,oe||u,!!oe||r.originIsAbsolute,r.smooth!==!1,A)),T=r.xOrigin||0,P=r.yOrigin||0,A!==ad&&(L=A[0],M=A[1],D=A[2],O=A[3],d=G=A[4],p=X=A[5],A.length===6?(f=Math.sqrt(L*L+M*M),x=Math.sqrt(O*O+D*D),y=L||M?yl(M,L)*fo:0,b=D||O?yl(D,O)*fo+y:0,b&&(x*=Math.abs(Math.cos(b*Zl))),r.svg&&(d-=T-(T*L+P*D),p-=P-(T*M+P*O))):(Z=A[6],q=A[7],ae=A[8],Ne=A[9],E=A[10],Y=A[11],d=A[12],p=A[13],m=A[14],j=yl(Z,E),N=j*fo,j&&(I=Math.cos(-j),$=Math.sin(-j),oe=G*I+ae*$,J=X*I+Ne*$,ie=Z*I+E*$,ae=G*-$+ae*I,Ne=X*-$+Ne*I,E=Z*-$+E*I,Y=q*-$+Y*I,G=oe,X=J,Z=ie),j=yl(-D,E),w=j*fo,j&&(I=Math.cos(-j),$=Math.sin(-j),oe=L*I-ae*$,J=M*I-Ne*$,ie=D*I-E*$,Y=O*$+Y*I,L=oe,M=J,D=ie),j=yl(M,L),y=j*fo,j&&(I=Math.cos(j),$=Math.sin(j),oe=L*I+M*$,J=G*I+X*$,M=M*I-L*$,X=X*I-G*$,L=oe,G=J),N&&Math.abs(N)+Math.abs(y)>359.9&&(N=y=0,w=180-w),f=Nn(Math.sqrt(L*L+M*M+D*D)),x=Nn(Math.sqrt(X*X+Z*Z)),j=yl(G,X),b=Math.abs(j)>2e-4?j*fo:0,C=Y?1/(Y<0?-Y:Y):0),r.svg&&(oe=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!Tb(Li(e,dn)),oe&&e.setAttribute("transform",oe))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(f*=-1,b+=y<=0?180:-180,y+=y<=0?180:-180):(x*=-1,b+=b<=0?180:-180)),t=t||r.uncache,r.x=d-((r.xPercent=d&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+a,r.y=p-((r.yPercent=p&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-p)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+a,r.z=m+a,r.scaleX=Nn(f),r.scaleY=Nn(x),r.rotation=Nn(y)+o,r.rotationX=Nn(N)+o,r.rotationY=Nn(w)+o,r.skewX=b+o,r.skewY=_+o,r.transformPerspective=C+a,(r.zOrigin=parseFloat(u.split(" ")[2])||!t&&r.zOrigin||0)&&(i[Gr]=Pf(u)),r.xOffset=r.yOffset=0,r.force3D=ci.force3D,r.renderTransform=r.svg?x6:Ab?Lb:v6,r.uncache=0,r},Pf=function(e){return(e=e.split(" "))[0]+" "+e[1]},O0=function(e,t,r){var i=mr(t);return Nn(parseFloat(t)+parseFloat(za(e,"x",r+"px",i)))+i},v6=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Lb(e,t)},ao="0deg",du="0px",oo=") ",Lb=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,a=r.x,o=r.y,l=r.z,u=r.rotation,d=r.rotationY,p=r.rotationX,m=r.skewX,f=r.skewY,x=r.scaleX,y=r.scaleY,N=r.transformPerspective,w=r.force3D,b=r.target,_=r.zOrigin,C="",T=w==="auto"&&e&&e!==1||w===!0;if(_&&(p!==ao||d!==ao)){var P=parseFloat(d)*Zl,A=Math.sin(P),j=Math.cos(P),I;P=parseFloat(p)*Zl,I=Math.cos(P),a=O0(b,a,A*I*-_),o=O0(b,o,-Math.sin(P)*-_),l=O0(b,l,j*I*-_+_)}N!==du&&(C+="perspective("+N+oo),(i||s)&&(C+="translate("+i+"%, "+s+"%) "),(T||a!==du||o!==du||l!==du)&&(C+=l!==du||T?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+oo),u!==ao&&(C+="rotate("+u+oo),d!==ao&&(C+="rotateY("+d+oo),p!==ao&&(C+="rotateX("+p+oo),(m!==ao||f!==ao)&&(C+="skew("+m+", "+f+oo),(x!==1||y!==1)&&(C+="scale("+x+", "+y+oo),b.style[dn]=C||"translate(0, 0)"},x6=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,a=r.x,o=r.y,l=r.rotation,u=r.skewX,d=r.skewY,p=r.scaleX,m=r.scaleY,f=r.target,x=r.xOrigin,y=r.yOrigin,N=r.xOffset,w=r.yOffset,b=r.forceCSS,_=parseFloat(a),C=parseFloat(o),T,P,A,j,I;l=parseFloat(l),u=parseFloat(u),d=parseFloat(d),d&&(d=parseFloat(d),u+=d,l+=d),l||u?(l*=Zl,u*=Zl,T=Math.cos(l)*p,P=Math.sin(l)*p,A=Math.sin(l-u)*-m,j=Math.cos(l-u)*m,u&&(d*=Zl,I=Math.tan(u-d),I=Math.sqrt(1+I*I),A*=I,j*=I,d&&(I=Math.tan(d),I=Math.sqrt(1+I*I),T*=I,P*=I)),T=Nn(T),P=Nn(P),A=Nn(A),j=Nn(j)):(T=p,j=m,P=A=0),(_&&!~(a+"").indexOf("px")||C&&!~(o+"").indexOf("px"))&&(_=za(f,"x",a,"px"),C=za(f,"y",o,"px")),(x||y||N||w)&&(_=Nn(_+x-(x*T+y*A)+N),C=Nn(C+y-(x*P+y*j)+w)),(i||s)&&(I=f.getBBox(),_=Nn(_+i/100*I.width),C=Nn(C+s/100*I.height)),I="matrix("+T+","+P+","+A+","+j+","+_+","+C+")",f.setAttribute("transform",I),b&&(f.style[dn]=I)},w6=function(e,t,r,i,s){var a=360,o=Jn(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?fo:1),u=l-i,d=i+u+"deg",p,m;return o&&(p=s.split("_")[1],p==="short"&&(u%=a,u!==u%(a/2)&&(u+=u<0?a:-a)),p==="cw"&&u<0?u=(u+a*uv)%a-~~(u/a)*a:p==="ccw"&&u>0&&(u=(u-a*uv)%a-~~(u/a)*a)),e._pt=m=new Vr(e._pt,t,r,i,u,r6),m.e=d,m.u="deg",e._props.push(r),m},yv=function(e,t){for(var r in t)e[r]=t[r];return e},b6=function(e,t,r){var i=yv({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=r.style,o,l,u,d,p,m,f,x;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),a[dn]=t,o=od(r,1),Ro(r,dn),r.setAttribute("transform",u)):(u=getComputedStyle(r)[dn],a[dn]=t,o=od(r,1),a[dn]=u);for(l in Js)u=i[l],d=o[l],u!==d&&s.indexOf(l)<0&&(f=mr(u),x=mr(d),p=f!==x?za(r,l,u,x):parseFloat(u),m=parseFloat(d),e._pt=new Vr(e._pt,o,l,p,m-p,dg),e._pt.u=x||0,e._props.push(l));yv(o,i)};Yr("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",a=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(o){return e<2?n+o:"border"+o+n});Ef[e>1?"border"+n:n]=function(o,l,u,d,p){var m,f;if(arguments.length<4)return m=a.map(function(x){return $s(o,x,u)}),f=m.join(" "),f.split(m[0]).length===5?m[0]:f;m=(d+"").split(" "),f={},a.forEach(function(x,y){return f[x]=m[y]=m[y]||m[(y-1)/2|0]}),o.init(l,f,p)}});var Db={name:"css",register:fg,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var a=this._props,o=e.style,l=r.vars.startAt,u,d,p,m,f,x,y,N,w,b,_,C,T,P,A,j;Q1||fg(),this.styles=this.styles||jb(e),j=this.styles.props,this.tween=r;for(y in t)if(y!=="autoRound"&&(d=t[y],!(ri[y]&&mb(y,t,r,i,e,s)))){if(f=typeof d,x=Ef[y],f==="function"&&(d=d.call(r,i,e,s),f=typeof d),f==="string"&&~d.indexOf("random(")&&(d=rd(d)),x)x(this,e,y,d,r)&&(A=1);else if(y.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(y)+"").trim(),d+="",Oa.lastIndex=0,Oa.test(u)||(N=mr(u),w=mr(d)),w?N!==w&&(u=za(e,y,u,w)+w):N&&(d+=N),this.add(o,"setProperty",u,d,i,s,0,0,y),a.push(y),j.push(y,0,o[y]);else if(f!=="undefined"){if(l&&y in l?(u=typeof l[y]=="function"?l[y].call(r,i,e,s):l[y],Jn(u)&&~u.indexOf("random(")&&(u=rd(u)),mr(u+"")||u==="auto"||(u+=ci.units[y]||mr($s(e,y))||""),(u+"").charAt(1)==="="&&(u=$s(e,y))):u=$s(e,y),m=parseFloat(u),b=f==="string"&&d.charAt(1)==="="&&d.substr(0,2),b&&(d=d.substr(2)),p=parseFloat(d),y in ps&&(y==="autoAlpha"&&(m===1&&$s(e,"visibility")==="hidden"&&p&&(m=0),j.push("visibility",0,o.visibility),Aa(this,o,"visibility",m?"inherit":"hidden",p?"inherit":"hidden",!p)),y!=="scale"&&y!=="transform"&&(y=ps[y],~y.indexOf(",")&&(y=y.split(",")[0]))),_=y in Js,_){if(this.styles.save(y),f==="string"&&d.substring(0,6)==="var(--"&&(d=Li(e,d.substring(4,d.indexOf(")"))),p=parseFloat(d)),C||(T=e._gsap,T.renderTransform&&!t.parseTransform||od(e,t.parseTransform),P=t.smoothOrigin!==!1&&T.smooth,C=this._pt=new Vr(this._pt,o,dn,0,1,T.renderTransform,T,0,-1),C.dep=1),y==="scale")this._pt=new Vr(this._pt,T,"scaleY",T.scaleY,(b?Xl(T.scaleY,b+p):p)-T.scaleY||0,dg),this._pt.u=0,a.push("scaleY",y),y+="X";else if(y==="transformOrigin"){j.push(Gr,0,o[Gr]),d=g6(d),T.svg?pg(e,d,0,P,0,this):(w=parseFloat(d.split(" ")[2])||0,w!==T.zOrigin&&Aa(this,T,"zOrigin",T.zOrigin,w),Aa(this,o,y,Pf(u),Pf(d)));continue}else if(y==="svgOrigin"){pg(e,d,1,P,0,this);continue}else if(y in Pb){w6(this,T,y,m,b?Xl(m,b+d):d);continue}else if(y==="smoothOrigin"){Aa(this,T,"smooth",T.smooth,d);continue}else if(y==="force3D"){T[y]=d;continue}else if(y==="transform"){b6(this,d,e);continue}}else y in o||(y=yc(y)||y);if(_||(p||p===0)&&(m||m===0)&&!n6.test(d)&&y in o)N=(u+"").substr((m+"").length),p||(p=0),w=mr(d)||(y in ci.units?ci.units[y]:N),N!==w&&(m=za(e,y,u,w)),this._pt=new Vr(this._pt,_?T:o,y,m,(b?Xl(m,b+p):p)-m,!_&&(w==="px"||y==="zIndex")&&t.autoRound!==!1?s6:dg),this._pt.u=w||0,N!==w&&w!=="%"&&(this._pt.b=u,this._pt.r=i6);else if(y in o)m6.call(this,e,y,u,b?b+d:d);else if(y in e)this.add(e,y,u||e[y],b?b+d:d,i,s);else if(y!=="parseTransform"){z1(y,d);continue}_||(y in o?j.push(y,0,o[y]):typeof e[y]=="function"?j.push(y,2,e[y]()):j.push(y,1,u||e[y])),a.push(y)}}A&&bb(this)},render:function(e,t){if(t.tween._time||!Z1())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:$s,aliases:ps,getSetter:function(e,t,r){var i=ps[t];return i&&i.indexOf(",")<0&&(t=i),t in Js&&t!==Gr&&(e._gsap.x||$s(e,"x"))?r&&cv===r?t==="scale"?c6:l6:(cv=r||{})&&(t==="scale"?u6:d6):e.style&&!$1(e.style[t])?a6:~t.indexOf("-")?o6:K1(e,t)},core:{_removeProperty:Ro,_getMatrix:ty}};Kr.utils.checkPrefix=yc;Kr.core.getStyleSaver=jb;(function(n,e,t,r){var i=Yr(n+","+e+","+t,function(s){Js[s]=1});Yr(e,function(s){ci.units[s]="deg",Pb[s]=1}),ps[i[13]]=n+","+e,Yr(r,function(s){var a=s.split(":");ps[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Yr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){ci.units[n]="px"});Kr.registerPlugin(Db);var hr=Kr.registerPlugin(Db)||Kr;hr.core.Tween;const Mb=[{id:"12-10",label:"Saturday Regular",time:"12-10",color:"bg-gray-100 text-gray-800 border-gray-200",displayColor:"text-gray-800"},{id:"9-4",label:"Sunday/Public Holiday/Special",time:"9-4",color:"bg-red-100 text-red-800 border-red-200",displayColor:"text-red-600"},{id:"4-10",label:"Evening Shift",time:"4-10",color:"bg-blue-100 text-blue-800 border-blue-200",displayColor:"text-blue-600"},{id:"N",label:"Night Duty",time:"N",color:"bg-green-100 text-green-800 border-green-200",displayColor:"text-green-600"}],Wl=[{id:"9-4",combination:"9-4",hours:6.5},{id:"9-4+4-10",combination:"9-4 + 4-10",hours:12},{id:"9-4+N",combination:"9-4 + N",hours:19},{id:"9-4+4-10+N",combination:"9-4 + 4-10 + N",hours:24.5},{id:"AM+12-10",combination:"AM + 12-10",hours:9},{id:"AM+12-10+N",combination:"AM + 12-10 + N",hours:21.5},{id:"12-10",combination:"12-10",hours:9.5},{id:"12-10+N",combination:"12-10 + N",hours:22},{id:"4-10",combination:"4-10",hours:5.5},{id:"4-10+N",combination:"4-10 + N",hours:18},{id:"N",combination:"N",hours:12.5}],S6=({isOpen:n,selectedDate:e,schedule:t,specialDates:r,onConfirm:i,onCancel:s})=>{const[a,o]=H.useState(!1),[l,u]=H.useState(null);if(H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{const y=N=>{N.key==="Escape"&&n&&!a&&s()};if(n)return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n,a,s]),H.useEffect(()=>{n&&(o(!1),u(null))},[n]),!n||!e)return null;const d=y=>{y.target===y.currentTarget&&!a&&s()},p=y=>{const N=new Date(y),w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b=["January","February","March","April","May","June","July","August","September","October","November","December"],_=w[N.getDay()],C=N.getDate(),T=b[N.getMonth()],P=N.getFullYear();return`${_}, ${T} ${C}, ${P}`},m=async()=>{if(!(!e||a)){o(!0),u(null);try{await i(e),s()}catch(y){u(y instanceof Error?y.message:"Failed to clear date"),o(!1)}}},f=()=>{const y=t[e]||[],N=r[e]===!0,w=[];return y.length>0&&w.push(`${y.length} shift${y.length!==1?"s":""}`),N&&w.push("special date marking"),w.join(" and ")},x=c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 overflow-y-auto",onClick:d,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,WebkitOverflowScrolling:"touch",touchAction:"pan-y",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full my-8 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",marginTop:window.innerWidth>window.innerHeight?"2px":"2rem",marginBottom:window.innerWidth>window.innerHeight?"2px":"2rem",maxWidth:window.innerWidth>window.innerHeight?"95vw":"28rem",maxHeight:window.innerWidth>window.innerHeight?"98vh":"none"},onClick:y=>{y.stopPropagation()},children:[c.jsxs("div",{className:"relative pb-4 border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[!a&&c.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Ar,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(xs,{className:"w-6 h-6 text-red-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Clear Date"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[c.jsx(jr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:p(e)})]})]}),c.jsxs("div",{className:"overflow-y-auto flex-1",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",maxHeight:window.innerWidth>window.innerHeight?"calc(98vh - 100px)":"70vh",padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[l&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(In,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-sm text-red-700",children:l})]})}),c.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-center",children:"Content to be cleared:"}),c.jsx("p",{className:"text-sm text-gray-700 text-center",children:f()})]}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to clear all content for ",c.jsx("strong",{children:p(e)}),"?"]}),c.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(In,{className:"w-4 h-4 text-amber-600"}),c.jsx("span",{className:"text-sm text-amber-800 font-medium",children:"This action cannot be undone"})]})})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx("button",{onClick:s,disabled:a,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:m,disabled:a,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:a?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Clearing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(xs,{className:"w-4 h-4"}),c.jsx("span",{children:"Clear"})]})})]}),c.jsx("div",{className:"h-8"})]})]})});return xn.createPortal(x,document.body)},_6=({isOpen:n,selectedMonth:e,selectedYear:t,onConfirm:r,onCancel:i})=>{const[s,a]=H.useState(!1),[o,l]=H.useState(null);if(H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{const f=x=>{x.key==="Escape"&&n&&!s&&i()};if(n)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[n,s,i]),H.useEffect(()=>{n&&(a(!1),l(null))},[n]),!n)return null;const d=`${["January","February","March","April","May","June","July","August","September","October","November","December"][e]} ${t}`,p=async()=>{if(!s){a(!0),l(null);try{await r(t,e),i()}catch(f){l(f instanceof Error?f.message:"Failed to clear month"),a(!1)}}},m=f=>{f.target===f.currentTarget&&!s&&i()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[9999]",onClick:m,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full select-none",style:{userSelect:"none",WebkitUserSelect:"none"},onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"relative p-6 pb-4 border-b border-gray-200",children:[!s&&c.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200",children:c.jsx(Ar,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(xs,{className:"w-6 h-6 text-red-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Clear Month"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[c.jsx(jr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:d})]})]}),c.jsxs("div",{className:"p-6",children:[o&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(In,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-sm text-red-700",children:o})]})}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsxs("p",{className:"text-gray-700 mb-4",children:["This will clear all shifts for ",c.jsx("strong",{children:d}),". This action cannot be undone."]}),c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(In,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"This will permanently delete:"}),c.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[c.jsx("li",{children:"• All scheduled shifts for the month"}),c.jsx("li",{children:"• All special date markings"}),c.jsx("li",{children:"• All shift combinations and data"})]})]})]})})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:i,disabled:s,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:p,disabled:s,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:s?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Clearing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(xs,{className:"w-4 h-4"}),c.jsx("span",{children:"Clear All"})]})})]})]})]})})},N6=({isOpen:n,monthData:e,onConfirm:t,onCancel:r})=>{const[i,s]=H.useState(!1),[a,o]=H.useState(null),[l,u]=H.useState(""),d=["January","February","March","April","May","June","July","August","September","October","November","December"];if(H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{const w=b=>{b.key==="Escape"&&n&&!i&&r()};if(n)return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n,i,r]),H.useEffect(()=>{n&&(s(!1),o(null),u(""))},[n]),!n||!e)return null;const p=`${d[e.month]} ${e.year}`,m=p.toUpperCase(),f=l.toUpperCase()===m,x=w=>{w.target===w.currentTarget&&!i&&r()},y=async()=>{if(!(!f||i)){s(!0),o(null);try{await t(e.year,e.month),r()}catch(w){o(w instanceof Error?w.message:"Failed to clear month data"),s(!1)}}},N=c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[99999]",onClick:x,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,WebkitOverflowScrolling:"touch",touchAction:"pan-y",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full my-4 select-none",style:{userSelect:"none",WebkitUserSelect:"none",maxHeight:window.innerWidth>window.innerHeight?"98vh":"90vh",maxWidth:window.innerWidth>window.innerHeight?"95vw":"28rem",display:"flex",flexDirection:"column",margin:window.innerWidth>window.innerHeight?"2px 0":"16px 0"},onClick:w=>{w.stopPropagation()},children:[c.jsxs("div",{className:"relative pb-4 border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[!i&&c.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Ar,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(xs,{className:"w-6 h-6 text-red-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Clear Entire Month"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[c.jsx(jr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:p})]})]}),c.jsxs("div",{className:"overflow-y-auto flex-1",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[a&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(In,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-sm text-red-700",children:a})]})}),c.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-gray-800 mb-3 text-center",children:"Month Summary"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-600",children:"Total Shifts"}),c.jsx("div",{className:"font-bold text-gray-900",children:e.totalShifts})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-600",children:"Total Amount"}),c.jsxs("div",{className:"font-bold text-gray-900",children:["Rs ",e.totalAmount.toLocaleString()]})]})]})]}),c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(In,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"This action will permanently delete:"}),c.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[c.jsxs("li",{children:["• All scheduled shifts for ",p]}),c.jsx("li",{children:"• All special date markings"}),c.jsx("li",{children:"• All shift combinations and data"}),c.jsx("li",{children:"• All calculated amounts and totals"})]}),c.jsx("p",{className:"text-sm text-red-800 font-medium mt-3",children:"This action cannot be undone!"})]})]})}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Type ",c.jsx("span",{className:"font-bold text-red-600",children:m})," to confirm:"]}),c.jsx("input",{type:"text",value:l,onChange:w=>u(w.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:m}),l&&!f&&c.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["Please type the exact text: ",m]})]}),c.jsx("div",{className:"h-20"})]}),c.jsx("div",{className:"flex-shrink-0 pt-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:r,disabled:i,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:y,disabled:i||!f,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Clearing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(xs,{className:"w-4 h-4"}),c.jsx("span",{children:"Clear Month"})]})})]})})]})});return xn.createPortal(N,document.body)},k6="modulepreload",j6=function(n){return"/anwh/"+n},vv={},Jr=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=j6(l),l in vv)return;vv[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":k6,u||(p.as="script"),p.crossOrigin="",p.href=l,o&&p.setAttribute("nonce",o),document.head.appendChild(p),u)return new Promise((m,f)=>{p.addEventListener("load",m),p.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},Ib=[{code:"B165",name:"BHEKUR",title:"MIT",salary:47510,employeeId:"B1604812300915",firstName:"Yashdev",surname:"BHEKUR"},{code:"B196",name:"BHOLLOORAM",title:"MIT",salary:48810,employeeId:"B1911811805356",firstName:"Sawan",surname:"BHOLLOORAM"},{code:"D28B",name:"DHUNNY",title:"MIT",salary:30060,employeeId:"D280487461277B",firstName:"Leelarvind",surname:"DHUNNY"},{code:"D07D",name:"DOMUN",title:"SMIT",salary:59300,employeeId:"D070273400031D",firstName:"Sheik Ahmad Shamir",surname:"DOMUN"},{code:"H301",name:"FOKEERCHAND",title:"MIT",salary:37185,employeeId:"H3003861200061",firstName:"Needeema",surname:"FOKEERCHAND"},{code:"S069",name:"GHOORAN",title:"MIT",salary:48810,employeeId:"S0607814601039",firstName:"Bibi Shafinaaz",surname:"SAMTALLY-GHOORAN"},{code:"H13D",name:"HOSENBUX",title:"MIT",salary:48810,employeeId:"H130381180129D",firstName:"Zameer",surname:"HOSENBUX"},{code:"J149",name:"JUMMUN",title:"MIT",salary:47510,employeeId:"J1403792600909",firstName:"Bibi Nawsheen",surname:"JUMMUN"},{code:"M17G",name:"MAUDHOO",title:"MIT",salary:38010,employeeId:"M170380260096G",firstName:"Chandanee",surname:"MAUDHOO"},{code:"N28C",name:"NARAYYA",title:"MIT",salary:38010,employeeId:"N280881240162C",firstName:"Viraj",surname:"NARAYYA"},{code:"P09A",name:"PITTEA",title:"SMIT",salary:59300,employeeId:"P091171190413A",firstName:"Soubiraj",surname:"PITTEA"},{code:"R16G",name:"RUNGADOO",title:"SMIT",salary:59300,employeeId:"R210572400118G",firstName:"Manee",surname:"RUNGADOO"},{code:"T16G",name:"TEELUCK",title:"SMIT",salary:59300,employeeId:"",firstName:"",surname:"TEELUCK"},{code:"V160",name:"VEERASAWMY",title:"SMIT",salary:59300,employeeId:"V1604664204410",firstName:"Goindah",surname:"VEERASAWMY"}],A6=Ib.filter(n=>!n.name.includes("(R)")),C6=A6.map(n=>({...n,name:`${n.name}(R)`,code:`${n.code}R`}));let tr=[...Ib,...C6,{code:"5274",name:"ADMIN",title:"ADMIN",salary:0,employeeId:"",firstName:"",surname:""}];const Rb=async()=>{try{const{fetchStaffMembers:n}=await Jr(async()=>{const{fetchStaffMembers:t}=await Promise.resolve().then(()=>bE);return{fetchStaffMembers:t}},void 0),e=await n();if(console.log("🔄 loadStaffFromSupabase called with staffMembers:",(e==null?void 0:e.length)||0),e&&e.length>0){console.log("📦 Loading staff data from Supabase:",e.length,"members");const t=e.filter(u=>u.name.includes("NARAYYA"));console.log("🔍 NARAYYA staff members from Supabase:",t);const r=e.map(u=>({code:u.code,name:u.name,title:u.title,salary:u.salary,employeeId:u.employee_id,firstName:u.first_name,surname:u.surname})),s=r.filter(u=>!u.name.includes("(R)")).map(u=>({...u,name:`${u.name}(R)`,code:`${u.code}R`})),a=[...r,...s];console.log("📋 Converted serverAuthCodes:",a.length,"entries");const o=a.filter(u=>u.name.includes("NARAYYA"));console.log("🔍 NARAYYA auth codes before update:",o),a.push({code:"5274",name:"ADMIN",title:"ADMIN",salary:0,employeeId:"",firstName:"",surname:""}),tr.length=0,tr.push(...a);const l=tr.filter(u=>u.name.includes("NARAYYA"));console.log("🔍 NARAYYA auth codes after update:",l),ny(),console.log("✅ Staff data loaded from Supabase successfully")}else console.log("⚠️ No staff members found in Supabase")}catch(n){console.log("⚠️ Could not load staff from Supabase (table may not exist), using local defaults:",n)}};Rb();const E6=n=>{console.log("📡 rosterAuth: Received staff real-time update:",n.detail),Rb().catch(e=>{console.error("❌ Failed to reload staff data after real-time update:",e)})};typeof window<"u"&&window.addEventListener("staffRealtimeUpdate",E6);async function P6(n){try{console.log("💾 Updating rosterAuth.ts with new auth codes...");const t=n.filter(i=>!i.name.includes("(R)")&&i.name!=="ADMIN").map(i=>({...i,name:`${i.name}(R)`,code:`${i.code}R`})),r=[...n,...t];tr.length=0,tr.push(...r),ny(),await T6(r),console.log("✅ Successfully updated and persisted auth codes")}catch(e){throw console.error("❌ Failed to update rosterAuth.ts:",e),new Error("Failed to save changes. Please try again.")}}async function T6(n){try{const{workScheduleDB:e}=await Jr(async()=>{const{workScheduleDB:t}=await Promise.resolve().then(()=>fS);return{workScheduleDB:t}},void 0);await e.init(),await e.setSetting("authCodes",n),console.log("💾 Auth codes persisted to IndexedDB")}catch(e){throw console.error("❌ Failed to persist auth codes:",e),e}}async function L6(){try{const{workScheduleDB:n}=await Jr(async()=>{const{workScheduleDB:t}=await Promise.resolve().then(()=>fS);return{workScheduleDB:t}},void 0);await n.init();const e=await n.getSetting("authCodes");if(e&&Array.isArray(e)&&e.length>0){console.log("📦 Loading auth codes from IndexedDB:",e.length,"codes");const r=e.filter(s=>!s.name.includes("(R)")&&s.name!=="ADMIN").map(s=>({...s,name:`${s.name}(R)`,code:`${s.code}R`})),i=[...e,...r];tr.length=0,tr.push(...i),ny(),console.log("✅ Auth codes loaded from storage successfully")}else console.log("ℹ️ No stored auth codes found, using defaults")}catch(n){console.error("❌ Failed to load auth codes from storage:",n)}}L6();function ny(){const n=tr.filter(t=>t.name!=="ADMIN").filter(t=>t.name!=="MIT"&&t.name!=="SMIT").map(t=>t.name).sort((t,r)=>{const i=t.includes("(R)"),s=r.includes("(R)");return i&&!s?-1:!i&&s?1:t.localeCompare(r)});yr.length=0,yr.push(...n);const e=yr.filter(t=>t.includes("NARAYYA"));console.log("🔄 Refreshed availableNames, NARAYYA entries:",e),console.log("🔄 Refreshed derived arrays with new auth codes")}let yr=tr.filter(n=>n.name!=="ADMIN").filter(n=>n.name!=="MIT"&&n.name!=="SMIT").map(n=>n.name).sort((n,e)=>{const t=n.includes("(R)"),r=e.includes("(R)");return t&&!r?-1:!t&&r?1:n.localeCompare(e)});const D6=yr.filter(n=>n.includes("NARAYYA"));console.log("🔍 NARAYYA entries in availableNames:",D6);const Co=n=>[...n].sort((e,t)=>{const r=tr.find(l=>l.name===e),i=tr.find(l=>l.name===t),s=(r==null?void 0:r.title)||"MIT",a=(i==null?void 0:i.title)||"MIT";if(s==="SMIT"&&a!=="SMIT")return-1;if(s!=="SMIT"&&a==="SMIT")return 1;if(s===a){const l=e.includes("(R)"),u=t.includes("(R)");return!l&&u?-1:l&&!u?1:e.localeCompare(t)}const o=s.localeCompare(a);return o!==0?o:e.localeCompare(t)}),mg=["Morning Shift (9-4)","Saturday Regular (12-10)","Evening Shift (4-10)","Night Duty","Sunday/Public Holiday/Special"],M6="5274";function ui(n){const e=tr.find(t=>t.code===n.toUpperCase());return e?e.name:null}function Ks(n){return n.toUpperCase()===M6}function ry(n){return tr.find(e=>e.name===n)||null}function Fb(n){const e=ry(n);return(e==null?void 0:e.salary)||0}const I6=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Jr(async()=>{const{default:r}=await Promise.resolve().then(()=>Nc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class iy extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class R6 extends iy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xv extends iy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wv extends iy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(gg||(gg={}));var F6=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(p){a(p)}}function l(d){try{u(r.throw(d))}catch(p){a(p)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class O6{constructor(e,{headers:t={},customFetch:r,region:i=gg.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=I6(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return F6(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=t;let o={},{region:l}=t;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(o["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(o["Content-Type"]="application/json",d=JSON.stringify(a)));const p=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:d}).catch(y=>{throw new R6(y)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new xv(p);if(!p.ok)throw new wv(p);let f=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return f==="application/json"?x=yield p.json():f==="application/octet-stream"?x=yield p.blob():f==="text/event-stream"?x=p:f==="multipart/form-data"?x=yield p.formData():x=yield p.text(),{data:x,error:null,response:p}}catch(i){return{data:null,error:i,response:i instanceof wv||i instanceof xv?i.context:void 0}}})}}var $r={},sy={},np={},gd={},rp={},ip={},$6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vc=$6();const B6=vc.fetch,Ob=vc.fetch.bind(vc),$b=vc.Headers,U6=vc.Request,z6=vc.Response,Nc=Object.freeze(Object.defineProperty({__proto__:null,Headers:$b,Request:U6,Response:z6,default:Ob,fetch:B6},Symbol.toStringTag,{value:"Module"})),W6=H_(Nc);var sp={};Object.defineProperty(sp,"__esModule",{value:!0});let H6=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};sp.default=H6;var Bb=Mi&&Mi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ip,"__esModule",{value:!0});const q6=Bb(W6),Y6=Bb(sp);let V6=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=q6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let u=null,d=null,p=null,m=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const w=await s.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=w:d=JSON.parse(w))}const y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),N=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");y&&N&&N.length>1&&(p=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,p=null,m=406,f="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await s.text();try{u=JSON.parse(y),Array.isArray(u)&&s.status===404&&(d=[],u=null,m=200,f="OK")}catch{s.status===404&&y===""?(m=204,f="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,m=200,f="OK"),u&&this.shouldThrowOnError)throw new Y6.default(u)}return{error:u,data:d,count:p,status:m,statusText:f}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};ip.default=V6;var G6=Mi&&Mi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(rp,"__esModule",{value:!0});const J6=G6(ip);let K6=class extends J6.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};rp.default=K6;var X6=Mi&&Mi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gd,"__esModule",{value:!0});const Q6=X6(rp);let Z6=class extends Q6.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};gd.default=Z6;var ej=Mi&&Mi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(np,"__esModule",{value:!0});const hu=ej(gd);let tj=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new hu.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new hu.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new hu.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new hu.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new hu.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};np.default=tj;var ap={},op={};Object.defineProperty(op,"__esModule",{value:!0});op.version=void 0;op.version="0.0.0-automated";Object.defineProperty(ap,"__esModule",{value:!0});ap.DEFAULT_HEADERS=void 0;const nj=op;ap.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${nj.version}`};var Ub=Mi&&Mi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sy,"__esModule",{value:!0});const rj=Ub(np),ij=Ub(gd),sj=ap;let aj=class zb{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},sj.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new rj.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new zb(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;r||i?(a=r?"HEAD":"GET",Object.entries(t).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{o.searchParams.append(d,p)})):(a="POST",l=t);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new ij.default({method:a,url:o,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};sy.default=aj;var kc=Mi&&Mi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($r,"__esModule",{value:!0});$r.PostgrestError=$r.PostgrestBuilder=$r.PostgrestTransformBuilder=$r.PostgrestFilterBuilder=$r.PostgrestQueryBuilder=$r.PostgrestClient=void 0;const Wb=kc(sy);$r.PostgrestClient=Wb.default;const Hb=kc(np);$r.PostgrestQueryBuilder=Hb.default;const qb=kc(gd);$r.PostgrestFilterBuilder=qb.default;const Yb=kc(rp);$r.PostgrestTransformBuilder=Yb.default;const Vb=kc(ip);$r.PostgrestBuilder=Vb.default;const Gb=kc(sp);$r.PostgrestError=Gb.default;var oj=$r.default={PostgrestClient:Wb.default,PostgrestQueryBuilder:Hb.default,PostgrestFilterBuilder:qb.default,PostgrestTransformBuilder:Yb.default,PostgrestBuilder:Vb.default,PostgrestError:Gb.default};const{PostgrestClient:lj,PostgrestQueryBuilder:TE,PostgrestFilterBuilder:LE,PostgrestTransformBuilder:DE,PostgrestBuilder:ME,PostgrestError:IE}=oj;function cj(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const uj=cj(),dj="2.11.15",hj=`realtime-js/${dj}`,fj="1.0.0",Jb=1e4,pj=1e3;var Mu;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Mu||(Mu={}));var dr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(dr||(dr={}));var Ki;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ki||(Ki={}));var yg;(function(n){n.websocket="websocket"})(yg||(yg={}));var go;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(go||(go={}));class mj{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+i));a=a+i;const l=r.decode(e.slice(a,a+s));a=a+s;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Kb{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Zt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Zt||(Zt={}));const bv=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,a)=>(s[a]=gj(a,n,e,i),s),{})},gj=(n,e,t,r)=>{const i=e.find(o=>o.name===n),s=i==null?void 0:i.type,a=t[n];return s&&!r.includes(s)?Xb(s,a):vg(a)},Xb=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return wj(e,t)}switch(n){case Zt.bool:return yj(e);case Zt.float4:case Zt.float8:case Zt.int2:case Zt.int4:case Zt.int8:case Zt.numeric:case Zt.oid:return vj(e);case Zt.json:case Zt.jsonb:return xj(e);case Zt.timestamp:return bj(e);case Zt.abstime:case Zt.date:case Zt.daterange:case Zt.int4range:case Zt.int8range:case Zt.money:case Zt.reltime:case Zt.text:case Zt.time:case Zt.timestamptz:case Zt.timetz:case Zt.tsrange:case Zt.tstzrange:return vg(e);default:return vg(e)}},vg=n=>n,yj=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},vj=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},xj=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},wj=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const a=n.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>Xb(e,o))}return n},bj=n=>typeof n=="string"?n.replace(" ","T"):n,Qb=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class $0{constructor(e,t,r={},i=Jb){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sv;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Sv||(Sv={}));class Iu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Iu.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Iu.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Iu.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(s,(u,d)=>{a[u]||(l[u]=d)}),this.map(a,(u,d)=>{const p=s[u];if(p){const m=d.map(N=>N.presence_ref),f=p.map(N=>N.presence_ref),x=d.filter(N=>f.indexOf(N.presence_ref)<0),y=p.filter(N=>m.indexOf(N.presence_ref)<0);x.length>0&&(o[u]=x),y.length>0&&(l[u]=y)}else o[u]=d}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),d.length>0){const p=e[o].map(f=>f.presence_ref),m=d.filter(f=>p.indexOf(f.presence_ref)<0);e[o].unshift(...m)}r(o,d,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const d=l.map(p=>p.presence_ref);u=u.filter(p=>d.indexOf(p.presence_ref)<0),e[o]=u,i(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _v;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(_v||(_v={}));var Nv;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Nv||(Nv={}));var Rs;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Rs||(Rs={}));class ay{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=dr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new $0(this,Ki.join,this.params,this.timeout),this.rejoinTimer=new Kb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=dr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ki.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Iu(this),this.broadcastEndpointURL=Qb(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==dr.closed){const{config:{broadcast:s,presence:a,private:o}}=this.params;this._onError(d=>e==null?void 0:e(Rs.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Rs.CLOSED));const l={},u={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var p;if(this.socket.setAuth(),d===void 0){e==null||e(Rs.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,x=[];for(let y=0;y<f;y++){const N=m[y],{filter:{event:w,schema:b,table:_,filter:C}}=N,T=d&&d[y];if(T&&T.event===w&&T.schema===b&&T.table===_&&T.filter===C)x.push(Object.assign(Object.assign({},N),{id:T.id}));else{this.unsubscribe(),this.state=dr.errored,e==null||e(Rs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Rs.SUBSCRIBED);return}}).receive("error",d=>{this.state=dr.errored,e==null||e(Rs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Rs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=dr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ki.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new $0(this,Ki.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new $0(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:d}=Ki;if(r&&[o,l,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,t,r);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var x,y,N;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((N=(y=f.filter)===null||y===void 0?void 0:y.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===a}).map(f=>f.callback(m,r)):(s=this.bindings[a])===null||s===void 0||s.filter(f=>{var x,y,N,w,b,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const C=f.id,T=(x=f.filter)===null||x===void 0?void 0:x.event;return C&&((y=t.ids)===null||y===void 0?void 0:y.includes(C))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((N=t.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const C=(b=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return C==="*"||C===((_=t==null?void 0:t.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:y,table:N,commit_timestamp:w,type:b,errors:_}=x;m=Object.assign(Object.assign({},{schema:y,table:N,commit_timestamp:w,eventType:b,new:{},old:{},errors:_}),this._getPayloadRecords(x))}f.callback(m,r)})}_isClosed(){return this.state===dr.closed}_isJoined(){return this.state===dr.joined}_isJoining(){return this.state===dr.joining}_isLeaving(){return this.state===dr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&ay.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ki.close,{},e)}_onError(e){this._on(Ki.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=bv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=bv(e.columns,e.old_record)),t}}const kv=()=>{},Sj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _j{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jb,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=kv,this.ref=0,this.logger=kv,this.conn=null,this.sendBuffer=[],this.serializer=new mj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Jr(async()=>{const{default:l}=await Promise.resolve().then(()=>Nc);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${yg.websocket}`,this.httpEndpoint=Qb(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,a)=>a(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Kb(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=uj),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fj}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Mu.connecting:return go.Connecting;case Mu.open:return go.Open;case Mu.closing:return go.Closing;default:return go.Closed}}isConnected(){return this.connectionState()===go.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new ay(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:hj};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ki.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(pj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:a}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),Array.from(this.channels).filter(o=>o._isMember(r)).forEach(o=>o._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ki.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Sj],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class oy extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function qn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Nj extends oy{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xg extends oy{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var kj=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(p){a(p)}}function l(d){try{u(r.throw(d))}catch(p){a(p)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const Zb=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Jr(async()=>{const{default:r}=await Promise.resolve().then(()=>Nc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},jj=()=>kj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Jr(()=>Promise.resolve().then(()=>Nc),void 0)).Response:Response}),wg=n=>{if(Array.isArray(n))return n.map(t=>wg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=wg(r)}),e},Aj=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Bo=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(p){a(p)}}function l(d){try{u(r.throw(d))}catch(p){a(p)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const B0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Cj=(n,e,t)=>Bo(void 0,void 0,void 0,function*(){const r=yield jj();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new Nj(B0(i),s,a))}).catch(i=>{e(new xg(B0(i),i))}):e(new xg(B0(n),n))}),Ej=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(Aj(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t))};function yd(n,e,t,r,i,s){return Bo(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,Ej(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Cj(l,o,r))})})}function Tf(n,e,t,r){return Bo(this,void 0,void 0,function*(){return yd(n,"GET",e,t,r)})}function Fs(n,e,t,r,i){return Bo(this,void 0,void 0,function*(){return yd(n,"POST",e,r,i,t)})}function bg(n,e,t,r,i){return Bo(this,void 0,void 0,function*(){return yd(n,"PUT",e,r,i,t)})}function Pj(n,e,t,r){return Bo(this,void 0,void 0,function*(){return yd(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function eS(n,e,t,r,i){return Bo(this,void 0,void 0,function*(){return yd(n,"DELETE",e,r,i,t)})}var Fr=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(p){a(p)}}function l(d){try{u(r.throw(d))}catch(p){a(p)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const Tj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Lj{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Zb(i)}uploadOrUpdate(e,t,r,i){return Fr(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},jv),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),p=yield(e=="PUT"?bg:Fs)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(qn(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Fr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Fr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:jv.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const p=yield bg(this.fetch,o.toString(),l,{headers:d});return{data:{path:s,fullPath:p.Key},error:null}}catch(l){if(qn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Fr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield Fs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new oy("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(qn(r))return{data:null,error:r};throw r}})}update(e,t,r){return Fr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Fr(this,void 0,void 0,function*(){try{return{data:yield Fs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(qn(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Fr(this,void 0,void 0,function*(){try{return{data:{path:(yield Fs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(qn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Fr(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Fs(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(qn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Fr(this,void 0,void 0,function*(){try{const i=yield Fs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(qn(i))return{data:null,error:i};throw i}})}download(e,t){return Fr(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Tf(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(qn(o))return{data:null,error:o};throw o}})}info(e){return Fr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Tf(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:wg(r),error:null}}catch(r){if(qn(r))return{data:null,error:r};throw r}})}exists(e){return Fr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Pj(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(qn(r)&&r instanceof xg){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Fr(this,void 0,void 0,function*(){try{return{data:yield eS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(qn(t))return{data:null,error:t};throw t}})}list(e,t,r){return Fr(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Tj),t),{prefix:e||""});return{data:yield Fs(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(qn(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Dj="2.10.4",Mj={"X-Client-Info":`storage-js/${Dj}`};var vl=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(p){a(p)}}function l(d){try{u(r.throw(d))}catch(p){a(p)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class Ij{constructor(e,t={},r,i){const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},Mj),t),this.fetch=Zb(r)}listBuckets(){return vl(this,void 0,void 0,function*(){try{return{data:yield Tf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(qn(e))return{data:null,error:e};throw e}})}getBucket(e){return vl(this,void 0,void 0,function*(){try{return{data:yield Tf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(qn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return vl(this,void 0,void 0,function*(){try{return{data:yield Fs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(qn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return vl(this,void 0,void 0,function*(){try{return{data:yield bg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(qn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return vl(this,void 0,void 0,function*(){try{return{data:yield Fs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(qn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return vl(this,void 0,void 0,function*(){try{return{data:yield eS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(qn(t))return{data:null,error:t};throw t}})}}class Rj extends Ij{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Lj(this.url,this.headers,e,this.fetch)}}const Fj="2.53.0";let bu="";typeof Deno<"u"?bu="deno":typeof document<"u"?bu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bu="react-native":bu="node";const Oj={"X-Client-Info":`supabase-js-${bu}/${Fj}`},$j={headers:Oj},Bj={schema:"public"},Uj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zj={};var Wj=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(p){a(p)}}function l(d){try{u(r.throw(d))}catch(p){a(p)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const Hj=n=>{let e;return n?e=n:typeof fetch>"u"?e=Ob:e=fetch,(...t)=>e(...t)},qj=()=>typeof Headers>"u"?$b:Headers,Yj=(n,e,t)=>{const r=Hj(t),i=qj();return(s,a)=>Wj(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:n;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},a),{headers:u}))})};var Vj=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(p){a(p)}}function l(d){try{u(r.throw(d))}catch(p){a(p)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};function Gj(n){return n.endsWith("/")?n:n+"/"}function Jj(n,e){var t,r;const{db:i,auth:s,realtime:a,global:o}=n,{db:l,auth:u,realtime:d,global:p}=e,m={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},p),o),{headers:Object.assign(Object.assign({},(t=p==null?void 0:p.headers)!==null&&t!==void 0?t:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Vj(this,void 0,void 0,function*(){return""})};return n.accessToken?m.accessToken=n.accessToken:delete m.accessToken,m}const tS="2.71.1",kl=30*1e3,Sg=3,U0=Sg*kl,Kj="http://localhost:9999",Xj="supabase.auth.token",Qj={"X-Client-Info":`gotrue-js/${tS}`},_g="X-Supabase-Api-Version",nS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Zj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eA=10*60*1e3;class ly extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function bt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class tA extends ly{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function nA(n){return bt(n)&&n.name==="AuthApiError"}class rS extends ly{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ja extends ly{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class ya extends Ja{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rA(n){return bt(n)&&n.name==="AuthSessionMissingError"}class jh extends Ja{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ah extends Ja{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ch extends Ja{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iA(n){return bt(n)&&n.name==="AuthImplicitGrantRedirectError"}class Av extends Ja{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ng extends Ja{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function z0(n){return bt(n)&&n.name==="AuthRetryableFetchError"}class Cv extends Ja{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class kg extends Ja{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ev=` 	
\r=`.split(""),sA=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Ev.length;e+=1)n[Ev[e].charCodeAt(0)]=-2;for(let e=0;e<Lf.length;e+=1)n[Lf[e].charCodeAt(0)]=e;return n})();function Pv(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Lf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Lf[r]),e.queuedBits-=6}}function iS(n,e,t){const r=sA[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Tv(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{lA(a,r,t)};for(let a=0;a<n.length;a+=1)iS(n.charCodeAt(a),i,s);return e.join("")}function aA(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function oA(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}aA(r,e)}}function lA(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function cA(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)iS(n.charCodeAt(i),t,r);return new Uint8Array(e)}function uA(n){const e=[];return oA(n,t=>e.push(t)),new Uint8Array(e)}function dA(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>Pv(i,t,r)),Pv(null,t,r),e.join("")}function hA(n){return Math.round(Date.now()/1e3)+n}function fA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Yi=()=>typeof window<"u"&&typeof document<"u",lo={tested:!1,writable:!1},sS=()=>{if(!Yi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lo.tested)return lo.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),lo.tested=!0,lo.writable=!0}catch{lo.tested=!0,lo.writable=!1}return lo.writable};function pA(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const aS=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Jr(async()=>{const{default:r}=await Promise.resolve().then(()=>Nc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},mA=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",jl=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},co=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},pa=async(n,e)=>{await n.removeItem(e)};class lp{constructor(){this.promise=new lp.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}lp.promiseConstructor=Promise;function W0(n){const e=n.split(".");if(e.length!==3)throw new kg("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Zj.test(e[r]))throw new kg("JWT not in base64url format");return{header:JSON.parse(Tv(e[0])),payload:JSON.parse(Tv(e[1])),signature:cA(e[2]),raw:{header:e[0],payload:e[1]}}}async function gA(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function yA(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await n(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function vA(n){return("0"+n.toString(16)).substr(-2)}function xA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,vA).join("")}async function wA(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function bA(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await wA(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xl(n,e,t=!1){const r=xA();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await jl(n,`${e}-code-verifier`,i);const s=await bA(r);return[s,r===s?"plain":"s256"]}const SA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _A(n){const e=n.headers.get(_g);if(!e||!e.match(SA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function NA(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function kA(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wl(n){if(!jA.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function H0(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Lv(n){return JSON.parse(JSON.stringify(n))}var AA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const po=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),CA=[502,503,504];async function Dv(n){var e;if(!mA(n))throw new Ng(po(n),0);if(CA.includes(n.status))throw new Ng(po(n),n.status);let t;try{t=await n.json()}catch(s){throw new rS(po(s),s)}let r;const i=_A(n);if(i&&i.getTime()>=nS["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Cv(po(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ya}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Cv(po(t),n.status,t.weak_password.reasons);throw new tA(po(t),n.status||500,r)}const EA=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function At(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[_g]||(s[_g]=nS["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await PA(n,e,t+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function PA(n,e,t,r,i,s){const a=EA(e,r,i,s);let o;try{o=await n(t,Object.assign({},a))}catch(l){throw console.error(l),new Ng(po(l),0)}if(o.ok||await Dv(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await Dv(l)}}function Ds(n){var e;let t=null;MA(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=hA(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Mv(n){const e=Ds(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Sa(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function TA(n){return{data:n,error:null}}function LA(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,a=AA(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function DA(n){return n}function MA(n){return n.access_token&&n.refresh_token&&n.expires_in}const q0=["global","local","others"];var IA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class RA{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=aS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=q0[0]){if(q0.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${q0.join(", ")}`);try{return await At(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await At(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Sa})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=IA(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await At(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:LA,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(bt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await At(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Sa})}catch(t){if(bt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await At(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:DA});if(d.error)throw d.error;const p=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(x.split(";")[1].split("=")[1]);u[`${N}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(bt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){wl(e);try{return await At(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Sa})}catch(t){if(bt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wl(e);try{return await At(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Sa})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){wl(e);try{return await At(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Sa})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){wl(e.userId);try{const{data:t,error:r}=await At(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(bt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wl(e.userId),wl(e.id);try{return{data:await At(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(bt(t))return{data:null,error:t};throw t}}}function Iv(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function FA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bl={debug:!!(globalThis&&sS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class OA extends oS{}async function $A(n,e,t){bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),bl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new OA(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(bl.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}FA();const BA={url:Kj,storageKey:Xj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Rv(n,e,t){return await t()}const Sl={};class ld{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ld.nextInstanceID,ld.nextInstanceID+=1,this.instanceID>0&&Yi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},BA),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new RA({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=aS(i.fetch),this.lock=i.lock||Rv,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Yi()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=$A:this.lock=Rv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:sS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Iv(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Iv(this.memoryStorage)),Yi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Sl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Sl[this.storageKey]=Object.assign(Object.assign({},Sl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Sl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Sl[this.storageKey]=Object.assign(Object.assign({},Sl[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=pA(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Yi()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),iA(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return bt(t)?{error:t}:{error:new rS("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await At(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ds}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(bt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:d,password:p,options:m}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await xl(this.storage,this.storageKey)),s=await At(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:p,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:x},xform:Ds})}else if("phone"in e){const{phone:d,password:p,options:m}=e;s=await At(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ds})}else throw new Ah("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(bt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:a,options:o}=e;t=await At(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mv})}else if("phone"in e){const{phone:s,password:a,options:o}=e;t=await At(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mv})}else throw new Ah("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new jh}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(bt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,s,a,o,l,u,d,p,m,f;let x,y;if("message"in e)x=e.message,y=e.signature;else{const{chain:N,wallet:w,statement:b,options:_}=e;let C;if(Yi())if(typeof w=="object")C=w;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))C=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=w}const T=new URL((t=_==null?void 0:_.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in C&&C.signIn){const P=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),b?{statement:b}:null));let A;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")A=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)A=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)x=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),y=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${T.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((p=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",..._.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const P=await C.signMessage(new TextEncoder().encode(x),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=P}}try{const{data:N,error:w}=await At(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:dA(y)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ds});if(w)throw w;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new jh}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:w})}catch(N){if(bt(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const t=await co(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:a}=await At(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ds});if(await pa(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new jh}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(bt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:a}=e,o=await At(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ds}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new jh}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(bt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await xl(this.storage,this.storageKey));const{error:p}=await At(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:d}=await At(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ah("You must provide either an email or phone number.")}catch(o){if(bt(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await At(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ds});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(bt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await xl(this.storage,this.storageKey)),await At(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:TA})}catch(s){if(bt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ya;const{error:i}=await At(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(bt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await At(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:o}=await At(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Ah("You must provide either an email or phone number and a type")}catch(t){if(bt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await co(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<U0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await co(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=H0()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await At(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Sa}):await this._useSession(async t=>{var r,i,s;const{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ya}:await At(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Sa})})}catch(t){if(bt(t))return rA(t)&&(await this._removeSession(),await pa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ya;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await xl(this.storage,this.storageKey));const{data:u,error:d}=await At(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Sa});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ya;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:a}=W0(e.access_token);if(a.exp&&(r=a.exp,i=r<=t),i){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(bt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ya;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(bt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Yi())throw new Ch("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ch(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Av("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ch("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Av("No code detected.");const{data:b,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!s||!o||!a||!u)throw new Ch("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(o);let m=d+p;l&&(m=parseInt(l));const f=m-d;f*1e3<=kl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${p}s`);const x=m-p;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:y,error:N}=await this._getUser(s);if(N)throw N;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:m,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(bt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await co(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(nA(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await pa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=fA(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await xl(this.storage,this.storageKey,!0));try{return await At(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(bt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(bt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,u,d;const{data:p,error:m}=s;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await At(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Yi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(bt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)throw a;return await At(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(bt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await yA(async i=>(i>0&&await gA(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await At(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ds})),(i,s)=>{const a=200*Math.pow(2,i);return s&&z0(s)&&Date.now()+a-r<kl})}catch(r){if(this._debug(t,"error",r),bt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Yi()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await co(this.storage,this.storageKey);if(i&&this.userStorage){let a=await co(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await jl(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:H0()}else if(i&&!i.user&&!i.user){const a=await co(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await pa(this.storage,this.storageKey+"-user"),await jl(this.storage,this.storageKey,i)):i.user=H0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<U0;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${U0}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),z0(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ya;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new lp;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new ya;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),bt(s)){const a={session:null,error:s};return z0(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await jl(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=Lv(i);await jl(this.storage,this.storageKey,s)}else{const i=Lv(t);await jl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await pa(this.storage,this.storageKey),await pa(this.storage,this.storageKey+"-code-verifier"),await pa(this.storage,this.storageKey+"-user"),this.userStorage&&await pa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Yi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/kl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${kl}ms, refresh threshold is ${Sg} ticks`),i<=Sg&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await xl(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await At(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(bt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await At(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(bt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:o}=await At(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(bt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await At(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(bt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=W0(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+eA>i)return r;const{data:s,error:a}=await At(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:f,error:x}=await this.getSession();if(x||!f.session)return{data:null,error:x};r=f.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=W0(r);t!=null&&t.allowExpired||NA(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:s,header:i,signature:a},error:null}}const d=kA(i.alg),p=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,a,uA(`${o}.${l}`)))throw new kg("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}}ld.nextInstanceID=0;const UA=ld;class zA extends UA{constructor(e){super(e)}}var WA=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(p){a(p)}}function l(d){try{u(r.throw(d))}catch(p){a(p)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class HA{constructor(e,t,r){var i,s,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=Gj(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Bj,realtime:zj,auth:Object.assign(Object.assign({},Uj),{storageKey:u}),global:$j},p=Jj(r??{},d);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=Yj(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new lj(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Rj(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new O6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return WA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,lock:o,debug:l},u,d){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zA({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:a,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new _j(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qA=(n,e,t)=>new HA(n,e,t);function YA(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const n=process.version.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}YA()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Fv="https://cpzxnbhpzsssyhpuhsgh.supabase.co",Ov="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwenhuYmhwenNzc3locHVoc2doIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxMjExMDMsImV4cCI6MjA2ODY5NzEwM30.xB3KJ6FYeS5U08We1JqgSajutrdJ3vIvbRZVHmxUACc";let ft=null;if(Fv.includes("supabase.co")&&Ov.length>50)try{ft=qA(Fv,Ov,{auth:{persistSession:!1},global:{fetch:(n,e={})=>{const t=new AbortController,r=setTimeout(()=>t.abort(),1e4);return fetch(n,{...e,signal:t.signal}).finally(()=>{clearTimeout(r)}).catch(i=>{throw i.name==="AbortError"?new Error("Request timeout - please check your connection"):i})}}}),console.log("✅ Supabase client initialized")}catch(n){console.error("⚠️ Supabase initialization failed:",n)}else console.error("⚠️ Supabase credentials not configured. Please update the hardcoded values in src/lib/supabase.ts");const lS=async()=>{if(!ft)throw console.error("⚠️ Supabase not available - check your configuration"),new Error("Supabase not configured. Please set up your Supabase credentials in the .env file.");try{console.log("🔄 Fetching roster entries from Supabase...");const{data:n,error:e}=await ft.from("roster_entries").select("*").order("date",{ascending:!1}).order("created_at",{ascending:!1});if(e)throw console.error("❌ Error fetching roster entries:",e),new Error(`Database error: ${e.message}`);return console.log("✅ Successfully fetched roster entries:",(n==null?void 0:n.length)||0),n||[]}catch(n){throw console.error("❌ Network error fetching roster entries:",n),n instanceof Error?n:new Error("Network error: Unable to connect to database. Please check your internet connection and Supabase configuration.")}},cy=async(n,e)=>{if(!ft)throw new Error("Database not available. Please check your connection.");try{console.log("💾 Adding roster entry to Supabase:",n);const t=new Date,r=`${t.getDate().toString().padStart(2,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`,i={date:n.date,shift_type:n.shiftType,assigned_name:n.assignedName,last_edited_by:e,last_edited_at:r,change_description:n.changeDescription||null},{data:s,error:a}=await ft.from("roster_entries").insert([i]).select().single();if(a)throw console.error("❌ Error adding roster entry:",a),new Error(`Failed to add roster entry: ${a.message}`);console.log("✅ Successfully added roster entry:",s);const o={date:n.date,shiftType:n.shiftType,assignedName:n.assignedName,editorName:e,action:"added"};return window.dispatchEvent(new CustomEvent("rosterCalendarSync",{detail:o})),s}catch(t){throw console.error("❌ Network error adding roster entry:",t),t instanceof Error?new Error(`Import failed: ${t.message}`):new Error("Import failed: Network or database error")}},cS=async(n,e,t)=>{if(!ft)throw new Error("Supabase not available. Please configure your Supabase credentials in .env file or src/lib/supabase.ts");try{console.log("🔄 Updating roster entry in Supabase:",{id:n,formData:e});const{data:r,error:i}=await ft.from("roster_entries").select("*").eq("id",n).single();if(i)throw console.error("❌ Error fetching current entry:",i),new Error(`Failed to fetch current entry: ${i.message}`);const s=r.assigned_name!==e.assignedName,a=r.assigned_name;console.log("🔍 UPDATE: Name change detection:",{oldName:a,newName:e.assignedName,isNameChange:s,editorName:t});const o=new Date,l=`${o.getDate().toString().padStart(2,"0")}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getFullYear()} ${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}:${o.getSeconds().toString().padStart(2,"0")}`;let u=e.changeDescription;if(r.change_description==="Imported from PDF")u=`${e.changeDescription} (Original PDF: ${r.assigned_name})`;else if(r.change_description&&r.change_description.includes("(Original PDF:")){const x=r.change_description.match(/\(Original PDF: ([^)]+)\)/);x&&(u=`${e.changeDescription} (Original PDF: ${x[1]})`)}const d={date:e.date,shift_type:e.shiftType,assigned_name:e.assignedName,last_edited_by:t,last_edited_at:l,change_description:u||null,text_color:e.textColor||null},{data:p,error:m}=await ft.from("roster_entries").update(d).eq("id",n).select().single();if(m)throw console.error("❌ Error updating roster entry:",m),new Error(`Failed to update roster entry: ${m.message}`);if(console.log("✅ Successfully updated roster entry:",p),s){console.log("🗑️ UPDATE: Dispatching removal event for old name:",a);const x={date:e.date,shiftType:e.shiftType,assignedName:a,editorName:t,action:"removed"};window.dispatchEvent(new CustomEvent("rosterCalendarSync",{detail:x})),console.log("✅ UPDATE: Removal event dispatched for:",a),await new Promise(y=>setTimeout(y,100))}const f={date:e.date,shiftType:e.shiftType,assignedName:e.assignedName,editorName:t,action:"updated"};return window.dispatchEvent(new CustomEvent("rosterCalendarSync",{detail:f})),console.log("✅ UPDATE: Addition event dispatched for:",e.assignedName),p}catch(r){throw console.error("❌ Network error updating roster entry:",r),r}},uS=async n=>{if(!ft)throw new Error("Supabase not available. Please configure your Supabase credentials in .env file or src/lib/supabase.ts");try{console.log("🗑️ Deleting roster entry from Supabase:",n);const{data:e,error:t}=await ft.from("roster_entries").select("*").eq("id",n).single();if(t)throw console.error("❌ Error fetching entry before deletion:",t),new Error(`Failed to fetch entry before deletion: ${t.message}`);const{error:r}=await ft.from("roster_entries").delete().eq("id",n);if(r)throw console.error("❌ Error deleting roster entry:",r),new Error(`Failed to delete roster entry: ${r.message}`);if(console.log("✅ Successfully deleted roster entry:",n),e){console.log("🔄 Dispatching rosterCalendarSync event for removal:",{date:e.date,shiftType:e.shift_type,assignedName:e.assigned_name,editorName:e.last_edited_by||"Unknown",action:"removed"});const i={date:e.date,shiftType:e.shift_type,assignedName:e.assigned_name,editorName:e.last_edited_by||"Unknown",action:"removed"};window.dispatchEvent(new CustomEvent("rosterCalendarSync",{detail:i})),console.log("✅ rosterCalendarSync event dispatched for removal")}}catch(e){throw console.error("❌ Network error deleting roster entry:",e),e}},VA=async()=>{if(!ft)throw new Error("Supabase not available. Please configure your Supabase credentials in .env file or src/lib/supabase.ts");try{console.log("🗑️ Clearing ALL roster entries from Supabase...");const{count:n,error:e}=await ft.from("roster_entries").select("*",{count:"exact",head:!0});e?console.error("❌ Error getting entry count:",e):console.log(`📊 Found ${n} entries to delete`);const{error:t}=await ft.from("roster_entries").delete().neq("id","00000000-0000-0000-0000-000000000000");if(t)throw console.error("❌ Error clearing all roster entries:",t),new Error(`Failed to clear all roster entries: ${t.message}`);console.log(`✅ Successfully cleared all ${n||"unknown number of"} roster entries`)}catch(n){throw console.error("❌ Network error clearing all roster entries:",n),n}},GA=async(n,e)=>{if(!ft)throw new Error("Supabase not available. Please configure your Supabase credentials in .env file or src/lib/supabase.ts");try{const t=`${n}-${(e+1).toString().padStart(2,"0")}-01`,r=`${n}-${(e+1).toString().padStart(2,"0")}-31`;console.log(`🗑️ Clearing roster entries for ${e+1}/${n} from Supabase...`),console.log(`📅 Date range: ${t} to ${r}`);const{count:i,error:s}=await ft.from("roster_entries").select("*",{count:"exact",head:!0}).gte("date",t).lte("date",r);s?console.error("❌ Error getting month entry count:",s):console.log(`📊 Found ${i} entries to delete for ${e+1}/${n}`);const{error:a}=await ft.from("roster_entries").delete().gte("date",t).lte("date",r);if(a)throw console.error("❌ Error clearing month roster entries:",a),new Error(`Failed to clear month roster entries: ${a.message}`);console.log(`✅ Successfully cleared ${i||"unknown number of"} roster entries for ${e+1}/${n}`)}catch(t){throw console.error("❌ Network error clearing month roster entries:",t),t}},JA=async(n,e,t)=>{if(!ft)throw new Error("Supabase not available. Please configure your Supabase credentials in .env file or src/lib/supabase.ts");try{console.log(`📝 Updating all staff remarks for ${n} with info: "${e}"`);const r=new Date,i=`${r.getDate().toString().padStart(2,"0")}-${(r.getMonth()+1).toString().padStart(2,"0")}-${r.getFullYear()} ${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}:${r.getSeconds().toString().padStart(2,"0")}`,{data:s,error:a}=await ft.from("roster_entries").select("*").eq("date",n);if(a)throw console.error("❌ Error fetching entries for date:",a),new Error(`Failed to fetch entries for date: ${a.message}`);if(!s||s.length===0){console.log(`ℹ️ No entries found for date ${n}`);return}console.log(`📝 Found ${s.length} entries to update for ${n}`);for(const o of s){let l=o.change_description||"";if(l=l.replace(/Special Date: [^;]*;?\s*/g,""),e.trim()){const d=`Special Date: ${e.trim()}`;l=l?`${d}; ${l}`:d}const{error:u}=await ft.from("roster_entries").update({change_description:l||null,last_edited_by:t,last_edited_at:i}).eq("id",o.id);if(u)throw console.error(`❌ Error updating entry ${o.id}:`,u),new Error(`Failed to update entry: ${u.message}`)}console.log(`✅ Successfully updated ${s.length} entries for ${n}`)}catch(r){throw console.error("❌ Network error updating staff remarks:",r),r}},dS=({isOpen:n,onClose:e,currentMonth:t,currentYear:r})=>{const[i,s]=H.useState(""),[a,o]=H.useState(""),[l,u]=H.useState(!1),[d,p]=H.useState(null),[m,f]=H.useState("auth"),[x,y]=H.useState(!1);H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{const T=P=>{P.key==="Escape"&&n&&!l&&N()};if(n)return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[n,l]),H.useEffect(()=>{n&&(s(""),o(""),u(!1),p(null),f("auth"))},[n]);const N=()=>{l||e()},w=async()=>{if(console.log("🚀 EXPORT STARTED with auth code:",i),!i||i.length<4){o("Please enter your authentication code");return}const T=ui(i);if(console.log("✅ Authenticated as:",T),!T){o("Invalid authentication code");return}console.log("🔄 Starting calendar export process..."),u(!0),f("exporting"),o("");try{console.log("📊 Fetching roster entries...");const P=await lS();console.log(`📊 Total entries: ${P.length}`);const A=P.filter($=>{const L=new Date($.date);if(!(L.getMonth()===t&&L.getFullYear()===r))return!1;if(T==="ADMIN")return!0;const D=$.assigned_name.replace(/\(R\)$/,"").trim().toUpperCase(),O=T.replace(/\(R\)$/,"").trim().toUpperCase();return D===O});if(console.log(`📊 Found ${A.length} entries for ${T}`),A.forEach($=>{console.log(`📅 Entry: ${$.date} - ${$.shift_type} - ${$.assigned_name}`)}),A.length===0){console.log("❌ No entries found for this staff member and month"),p({success:!1,filename:"",entriesExported:0,errors:[`No shifts found for ${T} in ${_()}`]}),f("result");return}console.log("🔄 Converting roster entries to calendar format...");const j={},I={};console.log("🌟 Checking for special dates in all entries..."),P.forEach($=>{if($.change_description&&$.change_description.includes("Special Date:")){const L=$.change_description.match(/Special Date:\s*([^;]+)/);L&&L[1].trim()&&(I[$.date]=!0,console.log(`🌟 Found special date: ${$.date} - "${L[1].trim()}"`))}}),A.forEach($=>{const L=$.date,D={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[$.shift_type];if(D){j[L]||(j[L]=[]),j[L].includes(D)||j[L].push(D);const G=new Date(L).getDay();(G===6&&$.shift_type==="Morning Shift (9-4)"||G>=1&&G<=5&&$.shift_type==="Morning Shift (9-4)")&&(I[L]=!0)}}),console.log("📅 Calendar updates to apply:",j),console.log("📌 Special date updates to apply:",I),console.log("🔄 Dispatching bulk calendar update event..."),window.dispatchEvent(new CustomEvent("bulkCalendarUpdate",{detail:{calendarUpdates:j,specialDateUpdates:I,editorName:T,source:"calendar_export",entries:P}})),p({success:!0,filename:`${T}_${_()}.ics`,entriesExported:A.length,errors:[]}),f("result"),console.log("✅ Export completed successfully!")}catch(P){console.error("❌ Calendar export error:",P),p({success:!1,filename:"",entriesExported:0,errors:[P instanceof Error?P.message:"Unknown export error"]}),f("result")}finally{u(!1)}},b=T=>{T.target===T.currentTarget&&!l&&N()},_=()=>`${["January","February","March","April","May","June","July","August","September","October","November","December"][t]} ${r}`;if(!n)return null;const C=c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:b,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,WebkitOverflowScrolling:"touch",touchAction:"pan-y",display:"flex",alignItems:"stretch",justifyContent:"center",padding:"0"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",height:"100vh",maxWidth:"100vw",borderRadius:"0",display:"flex",flexDirection:"column"},onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"relative pb-4 border-b border-gray-200 flex-shrink-0 p-6",children:[!l&&c.jsx("button",{onClick:N,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Ar,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx(vs,{className:"w-6 h-6 text-green-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Export to Calendar"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[c.jsx(jr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:_()})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",padding:"24px"},children:[m==="auth"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Authentication Code"}),c.jsxs("div",{className:"flex justify-center space-x-3 mb-3",children:[[0,1,2,3].map(T=>c.jsx("input",{type:x?"text":"password",value:i[T]||"",onChange:P=>{const A=P.target.value.toUpperCase();if(A.length<=1){const j=i.split("");if(j[T]=A,s(j.join("")),A&&T<3){const I=document.querySelector(`input[data-index="${T+1}"]`);I&&I.focus()}}},onKeyDown:P=>{if(P.key==="Backspace"&&!i[T]&&T>0){const A=document.querySelector(`input[data-index="${T-1}"]`);A&&A.focus()}},"data-index":T,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:T===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},T)),c.jsx("button",{type:"button",onTouchStart:()=>y(!0),onTouchEnd:()=>y(!1),onMouseDown:()=>y(!0),onMouseUp:()=>y(!1),onMouseLeave:()=>y(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg ml-2",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:x?c.jsx(Sc,{className:"w-5 h-5"}):c.jsx(_c,{className:"w-5 h-5"})})]})]}),a&&c.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(In,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-sm text-red-700",children:a})]})}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(jr,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"What happens next:"}),c.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[c.jsx("li",{children:"• Enter your authentication code"}),c.jsxs("li",{children:["• Your shifts for ",_()," will be found"]}),c.jsx("li",{children:"• They will automatically appear in your calendar tab"})]})]})]})})]}),m==="exporting"&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("div",{className:"w-8 h-8 border-4 border-green-200 border-t-green-600 rounded-full animate-spin"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Exporting to Calendar"}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["Converting roster data for ",_(),"..."]}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[c.jsx("p",{children:"• Fetching your roster entries"}),c.jsx("p",{children:"• Converting to calendar format"}),c.jsx("p",{children:"• Updating calendar view"})]})]}),m==="result"&&d&&c.jsxs("div",{className:"space-y-6",children:[d.success?c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Io,{className:"w-8 h-8 text-green-600"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Successful!"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Your calendar file has been downloaded"}),c.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"File:"}),c.jsx("span",{className:"text-green-800 font-medium",children:d.filename})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Shifts exported:"}),c.jsx("span",{className:"text-green-800 font-medium",children:d.entriesExported})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Month:"}),c.jsx("span",{className:"text-green-800 font-medium",children:_()})]})]})}),c.jsx("div",{className:"mt-4",children:c.jsx("button",{onClick:()=>{e(),setTimeout(()=>{console.log("🔄 CALENDAR EXPORT: Switching to calendar tab after export"),window.dispatchEvent(new CustomEvent("switchToCalendarTab")),window.dispatchEvent(new CustomEvent("forceCalendarRefresh"))},100)},className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:c.jsx("span",{children:"View in Calendar"})})})]}):c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(In,{className:"w-8 h-8 text-red-600"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Failed"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to export your calendar"}),c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:c.jsx("div",{className:"space-y-2 text-sm text-red-700",children:d.errors.map((T,P)=>c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(In,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:T})]},P))})})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Next Steps:"}),c.jsx("ul",{className:"text-sm text-blue-700 space-y-1",children:d.success?c.jsxs(c.Fragment,{children:[c.jsx("li",{children:"• Import the downloaded file"}),c.jsx("li",{children:"• Your shifts will appear in your calendar"})]}):c.jsxs(c.Fragment,{children:[c.jsx("li",{children:"• Check your authentication code"}),c.jsxs("li",{children:["• Ensure you have shifts in ",_()]}),c.jsx("li",{children:"• Try again or contact support"})]})})]})]}),c.jsx("div",{className:"h-8"})]}),c.jsx("div",{className:"border-t border-gray-200 bg-gray-50 p-6 flex-shrink-0",children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:N,disabled:l,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsxs("button",{onClick:w,disabled:l||i.length<4||m!=="auth",className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:[c.jsx(vs,{className:"w-4 h-4"}),c.jsx("span",{children:"Export To Calendar"})]})]})})]})});return xn.createPortal(C,document.body)};function KA(n){if(typeof n!="number"||isNaN(n))return{formatted:"Rs 0.00"};let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"MUR",currencyDisplay:"symbol",minimumFractionDigits:2,maximumFractionDigits:2}).format(n);return t=t.replace(/MUR|₨/,"Rs"),t=t.replace(/Rs(\d)/,"Rs $1"),{formatted:t}}const jc=({onLongPress:n,onPress:e,onDoublePress:t,delay:r=1e3})=>{const i=H.useRef(null),s=H.useRef(!1),a=H.useRef(!1),o=H.useRef(!1),l=H.useRef(0),u=H.useRef(null),d=H.useCallback(()=>{s.current=!1,i.current=setTimeout(()=>{s.current=!0,console.log("🔥 Long press triggered!"),n()},r)},[n,r]),p=H.useCallback(()=>{i.current&&(clearTimeout(i.current),i.current=null),a.current=!1,o.current=!1},[]),m=H.useCallback(()=>{!s.current&&e&&(console.log("👆 Short press triggered!"),e()),s.current=!1,a.current=!1,o.current=!1},[e]),f=H.useCallback(()=>{l.current++,l.current===1?u.current=setTimeout(()=>{l.current=0},300):l.current===2&&(u.current&&(clearTimeout(u.current),u.current=null),l.current=0,console.log("👆👆 Double click triggered!"),t&&t())},[t]),x=H.useCallback(T=>{T.preventDefault(),!o.current&&(console.log("🖱️ Mouse down - starting long press timer"),a.current=!0,d())},[d]),y=H.useCallback(()=>{a.current&&(console.log("🖱️ Mouse up"),p(),m())},[p,m]),N=H.useCallback(()=>{a.current&&(console.log("🖱️ Mouse leave - canceling"),p())},[p]),w=H.useCallback(T=>{T.preventDefault(),T.stopPropagation(),!a.current&&(console.log("📱 Touch start - starting long press timer"),o.current=!0,d())},[d]),b=H.useCallback(()=>{o.current&&(console.log("📱 Touch end"),p(),m())},[p,m]),_=H.useCallback(()=>{o.current&&(console.log("📱 Touch cancel"),p())},[p]),C=H.useCallback(T=>{T.preventDefault(),T.stopPropagation(),s.current||f()},[f]);return{onMouseDown:x,onMouseUp:y,onMouseLeave:N,onTouchStart:w,onTouchEnd:b,onTouchCancel:_,onClick:C}},XA=(n,e,t)=>{const i={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[e];return!!(!i||i==="9-4"&&t.includes("12-10")||i==="12-10"&&t.includes("9-4")||i==="12-10"&&t.includes("4-10")||i==="4-10"&&t.includes("12-10")||t.includes(i))},QA=(n,e)=>{const r=new Date(n).getDay();return r===6&&e==="Morning Shift (9-4)"||r>=1&&r<=5&&e==="Morning Shift (9-4)"},ZA=(n,e,t,r)=>{const{calendarLabel:i,schedule:s,setSchedule:a}=r;console.log("🗑️ rosterCalendarSync.ts: Processing removal for:",{date:n,shiftType:e,assignedName:t,calendarLabel:i});const o=t.replace(/\(R\)$/,"").trim().toUpperCase(),l=i.replace(/\(R\)$/,"").trim().toUpperCase();if(console.log("🔍 rosterCalendarSync.ts: Removal name matching check (handles R variants):",{assignedName:t,calendarLabel:i,assignedBaseName:o,calendarBaseName:l,namesMatch:o===l,note:"Both NARAYYA and NARAYYA(R) should match NARAYYA calendar"}),o!==l)return console.log(`❌ rosterCalendarSync.ts: Base names don't match for removal - skipping sync. Assigned base: "${o}", Calendar base: "${l}"`),!1;console.log(`✅ rosterCalendarSync.ts: Base names match for removal - proceeding with sync (${t} matches ${i})`);const d={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[e];if(!d)return console.log(`❌ rosterCalendarSync.ts: Cannot map shift type for removal: ${e}`),!1;const p=s[n]||[];if(console.log(`🔍 rosterCalendarSync.ts: Current shifts for ${n}:`,p),!p.includes(d))return console.log(`ℹ️ rosterCalendarSync.ts: Shift ${d} not found in calendar for ${n}`),!1;console.log(`🗑️ rosterCalendarSync.ts: Removing shift ${d} from calendar on ${n}`),a(f=>{const x={...f},y=p.filter(N=>N!==d);return y.length===0?(delete x[n],console.log(`🗑️ rosterCalendarSync.ts: No shifts left for ${n}, removing date entry completely`)):(x[n]=y,console.log(`🗑️ rosterCalendarSync.ts: Updated ${n} with remaining shifts:`,y)),console.log(`🗑️ rosterCalendarSync.ts: Schedule update completed for ${n}`),x}),console.log("🔔 rosterCalendarSync.ts: Creating removal notification...");const m=document.createElement("div");return m.style.cssText=`
    position: fixed;
    top: 80px;
    right: 20px;
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    padding: 16px 20px;
    border-radius: 12px;
    box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
    z-index: 999999;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: 14px;
    font-weight: 500;
    max-width: 320px;
    animation: slideInRight 0.3s ease-out;
    border: 2px solid rgba(255, 255, 255, 0.2);
  `,m.innerHTML=`
    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
      <div style="width: 8px; height: 8px; background: white; border-radius: 50%; opacity: 0.9;"></div>
      <strong style="font-size: 15px;">Calendar Updated</strong>
    </div>
    <div style="font-size: 13px; line-height: 1.4; opacity: 0.95;">
      <strong>${t}</strong> removed from <strong>${i}</strong>'s calendar<br>
      📅 <strong>${n}</strong> - ${e}
    </div>
  `,document.body.appendChild(m),console.log("🔔 rosterCalendarSync.ts: Removal notification created and added to DOM"),setTimeout(()=>{document.body.contains(m)&&(m.style.animation="slideInRight 0.3s ease-out reverse",setTimeout(()=>{document.body.contains(m)&&(document.body.removeChild(m),console.log("🔔 rosterCalendarSync.ts: Removal notification removed from DOM"))},300))},4e3),console.log(`✅ ROSTER SYNC: Calendar updated successfully for ${n}`),!0},eC=()=>{if(!document.querySelector("#roster-sync-styles")){const n=document.createElement("style");n.id="roster-sync-styles",n.textContent=`
      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    `,document.head.appendChild(n)}};eC();const hS=(n,e)=>{const{calendarLabel:t,schedule:r,specialDates:i,setSchedule:s,setSpecialDates:a}=e,{date:o,shiftType:l,assignedName:u,editorName:d,action:p}=n,m=window.batchImportMode===!0;console.log("🔄 ROSTER SYNC: Sync triggered with data:",{date:o,shiftType:l,assignedName:u,editorName:d,action:p,calendarLabel:t,isBatchImport:m,currentScheduleKeys:Object.keys(r).length,currentSpecialDates:Object.keys(i).length,currentScheduleForDate:r[o]||[]});const f=u.replace(/\(R\)$/,"").trim().toUpperCase(),x=t.replace(/\(R\)$/,"").trim().toUpperCase();if(console.log("🔍 ROSTER SYNC: Name matching check (handles R variants):",{assignedName:u,calendarLabel:t,assignedBaseName:f,calendarBaseName:x,namesMatch:f===x,note:"Both NARAYYA and NARAYYA(R) should match NARAYYA calendar"}),f!==x)return console.log(`❌ ROSTER SYNC: Base names don't match - skipping sync. Assigned base: "${f}", Calendar base: "${x}"`),!1;if(console.log(`✅ ROSTER SYNC: Base names match - proceeding with sync (${u} matches ${t})`),m&&(window.batchImportStats||(window.batchImportStats={count:0,staffName:t,dates:new Set}),window.batchImportStats.count++,window.batchImportStats.dates.add(o)),p==="removed")return console.log("🗑️ ROSTER SYNC: Processing removal action"),ZA(o,l,u,{calendarLabel:t,schedule:r,setSchedule:s});const y=e.entries||[],N=tC(o,y);console.log("🌟 ROSTER SYNC: Checking if roster date is special:",{date:o,isRosterSpecialDate:N,currentCalendarSpecial:i[o]});const w=QA(o,l),b=i[o]===!0;console.log("🔍 ROSTER SYNC: Special date analysis:",{date:o,shiftType:l,needsSpecial:w,currentIsSpecial:b,isRosterSpecialDate:N,dayOfWeek:new Date(o).getDay()});const C={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[l];if(!C)return console.log(`❌ ROSTER SYNC: Cannot map shift type: ${l}`),!1;console.log(`🔍 ROSTER SYNC: Mapped shift "${l}" to calendar ID "${C}"`);const T=r[o]||[];if(console.log(`🔍 ROSTER SYNC: Current shifts for ${o}:`,T),XA(o,l,T))return console.log(`❌ ROSTER SYNC: Shift conflict detected for ${C} on ${o} with existing shifts:`,T),!1;let P=!1;if((w||N)&&!b&&(console.log(`✅ ROSTER SYNC: Marking ${o} as special date`),a(A=>({...A,[o]:!0})),P=!0),T.includes(C)?console.log(`ℹ️ ROSTER SYNC: Shift ${C} already exists in calendar on ${o}`):(console.log(`✅ ROSTER SYNC: Adding shift ${C} to calendar on ${o}`),s(A=>({...A,[o]:[...T,C]})),P=!0),console.log(`🔍 ROSTER SYNC: Calendar updated: ${P}, Final schedule keys: ${Object.keys(r).length}`),P&&!m){const A=document.createElement("div");A.style.cssText=`
        position: fixed;
        top: 80px;
        right: 20px;
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        padding: 16px 20px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        z-index: 999999;
        font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        font-size: 14px;
        font-weight: 500;
        max-width: 320px;
        animation: slideInRight 0.3s ease-out;
        border: 2px solid rgba(255, 255, 255, 0.2);
      `,A.innerHTML=`
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
          <div style="width: 8px; height: 8px; background: white; border-radius: 50%; opacity: 0.9;"></div>
          <strong style="font-size: 15px;">Calendar Updated</strong>
        </div>
        <div style="font-size: 13px; line-height: 1.4; opacity: 0.95;">
          <strong>${u}</strong> added to <strong>${t}</strong>'s calendar<br>
          📅 <strong>${o}</strong> - ${l}
          ${w||N?"<br>📌 Date marked as special":""}
        </div>
      `,document.body.appendChild(A),setTimeout(()=>{document.body.contains(A)&&(A.style.animation="slideInRight 0.3s ease-out reverse",setTimeout(()=>{document.body.contains(A)&&document.body.removeChild(A)},300))},3e3)}return P},tC=(n,e)=>{console.log(`🌟 Checking if ${n} is special in roster entries...`);const t=e.filter(r=>r.date===n);console.log(`🌟 Found ${t.length} entries for ${n}`);for(const r of t)if(console.log(`🌟 Checking entry: ${r.assigned_name} - ${r.shift_type}`),console.log(`🌟 Change description: "${r.change_description}"`),r.change_description&&r.change_description.includes("Special Date:")){const i=r.change_description.match(/Special Date:\s*([^;]+)/);if(i&&i[1].trim())return console.log(`🌟 Found special date info: "${i[1].trim()}"`),!0}return console.log(`🌟 No special date info found for ${n}`),!1},nC=({currentDate:n,schedule:e,specialDates:t,onDateClick:r,onNavigateMonth:i,totalAmount:s,monthToDateAmount:a,onDateChange:o,scheduleTitle:l,onTitleUpdate:u,setSchedule:d,setSpecialDates:p})=>{const[m,f]=H.useState(!1),[x,y]=H.useState(!1),[N,w]=H.useState(l),[b,_]=H.useState(!1),[C,T]=H.useState(!1),[P,A]=H.useState(!1),[j,I]=H.useState(!1),[$,L]=H.useState(null),[M,D]=H.useState(null),[O,G]=H.useState(!1),[X,oe]=H.useState(!1),[J,ie]=H.useState(""),[ae,Ne]=H.useState(""),[E,q]=H.useState(!1),[Y,Z]=H.useState(null),te=H.useRef(null),ce=H.useRef(new Set),ge=new Date,de=n.getMonth(),_e=n.getFullYear(),Te=new Date(_e,de,1),ze=new Date(_e,de+1,0),Ie=Te.getDay(),nt=ze.getDate(),we=["January","February","March","April","May","June","July","August","September","October","November","December"],Q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];H.useEffect(()=>{const fe=setInterval(()=>{console.log("🕒 Auto-refresh check for month-to-date value")},6e4);return()=>clearInterval(fe)},[]),H.useEffect(()=>((m||X)&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[m,X]),H.useEffect(()=>{if(te.current){ce.current.clear();const fe=Array.from(te.current.querySelectorAll(".day-box")).filter(et=>et.getAttribute("data-day")!==null).sort((et,gt)=>{const jt=parseInt(et.getAttribute("data-day")||"0"),_t=parseInt(gt.getAttribute("data-day")||"0");return jt-_t});hr.set(fe,{opacity:0,x:30,scale:.95,force3D:!0,transformOrigin:"center center"});const Xe=te.current.querySelectorAll(".shift-text");hr.set(Xe,{opacity:0,x:10,scale:.9,force3D:!0});const mt=te.current.querySelectorAll(".special-text");hr.set(mt,{opacity:0,scale:.9,x:15,force3D:!0});const at=hr.timeline({defaults:{ease:"power2.out",force3D:!0}});fe.forEach((et,gt)=>{const jt=parseInt(et.getAttribute("data-day")||"0"),_t=et.querySelectorAll(".shift-text"),$t=et.querySelectorAll(".special-text");ce.current.add(et);const wn=(jt-1)*.04;at.to(et,{opacity:1,x:0,scale:1,duration:.6,delay:wn,ease:"back.out(1.2)"},0),_t.length>0&&(_t.forEach(Un=>ce.current.add(Un)),at.to(_t,{opacity:1,x:0,scale:1,duration:.4,stagger:.06,ease:"power2.out"},wn+.1)),$t.length>0&&($t.forEach(Un=>ce.current.add(Un)),at.to($t,{opacity:1,x:0,scale:1,duration:.4,ease:"elastic.out(1, 0.5)"},wn+.15))}),fe.forEach(et=>{const gt=et;gt.addEventListener("mouseenter",()=>{ce.current.has(gt)&&hr.to(gt,{scale:1.02,duration:.2,ease:"power2.out"})}),gt.addEventListener("mouseleave",()=>{ce.current.has(gt)&&hr.to(gt,{scale:1,duration:.2,ease:"power2.out"})}),gt.addEventListener("click",()=>{ce.current.has(gt)&&hr.to(gt,{scale:.98,duration:.1,ease:"power2.out",yoyo:!0,repeat:1})})})}},[n,e,t]),H.useEffect(()=>{const fe=Xe=>{Xe.key==="Escape"&&(f(!1),oe(!1))};if(m||X)return document.addEventListener("keydown",fe),()=>document.removeEventListener("keydown",fe)},[m,X]);const st=fe=>{fe.preventDefault(),fe.stopPropagation(),fe.target===fe.currentTarget&&f(!1)},qe=fe=>`${_e}-${(de+1).toString().padStart(2,"0")}-${fe.toString().padStart(2,"0")}`,Le=fe=>{const Xe=new Date;return Xe.getDate()===fe&&Xe.getMonth()===de&&Xe.getFullYear()===_e},Me=fe=>{const Xe=new Date,mt=new Date(_e,de,fe),at=new Date(Xe.getFullYear(),Xe.getMonth(),Xe.getDate());return mt<at},ee=fe=>new Date(_e,de,fe).getDay(),he=fe=>ee(fe)===0,xe=fe=>{const Xe=qe(fe);return t[Xe]===!0},ke=fe=>{const Xe=qe(fe),mt=e[Xe]||[];(fe===1||fe===2||fe===21)&&(console.log(`📅 CALENDAR DEBUG: Day ${fe} (${Xe}) has shifts:`,mt),console.log(`📅 CALENDAR DEBUG: Current month/year: ${de+1}/${_e}`),console.log("📅 CALENDAR DEBUG: Schedule keys:",Object.keys(e)));const at=["9-4","4-10","12-10","N"];return mt.sort((et,gt)=>{const jt=at.indexOf(et),_t=at.indexOf(gt);return(jt===-1?999:jt)-(_t===-1?999:_t)})},Ae=fe=>Mb.find(Xe=>Xe.id===fe),Ze=fe=>Le(fe)?"text-green-700 font-bold":he(fe)||xe(fe)?"text-red-600 font-bold":"text-gray-900",Be=fe=>KA(fe).formatted,rt=()=>{let fe=0,Xe=0;return Object.entries(e).forEach(([mt,at])=>{const et=new Date(mt);et.getMonth()===de&&et.getFullYear()===_e&&(fe+=at.length)}),{month:de,year:_e,totalShifts:fe,totalAmount:Xe}},Ve=()=>{const fe=Object.entries(e).some(([mt,at])=>{const et=new Date(mt);return et.getMonth()===de&&et.getFullYear()===_e&&at.length>0&&at.some(gt=>gt.trim()!=="")}),Xe=Object.entries(t).some(([mt,at])=>{const et=new Date(mt);return et.getMonth()===de&&et.getFullYear()===_e&&at===!0});return fe||Xe},ut=jc({onLongPress:()=>{G(!0),Ve()&&A(!0),setTimeout(()=>G(!1),500)},onPress:()=>{O||setTimeout(()=>{O||f(!0)},50)},delay:500}),We=fe=>{fe.type==="click"&&!O&&setTimeout(()=>{!O&&!m&&f(!0)},100)},Yt=(fe,Xe)=>{o(new Date(fe,Xe,1)),f(!1)},Nt=()=>{y(!0),w(l)},$n=()=>{u(N.trim()||"Work Schedule"),y(!1)},Et=()=>{w(l),y(!1)},Mt=fe=>{fe.key==="Enter"?$n():fe.key==="Escape"&&Et()},Bn=fe=>{r(fe)},Oe=(fe,Xe)=>{Xe.preventDefault();const mt=qe(fe),at=e[mt]&&e[mt].length>0,et=t[mt]===!0;if(!(at||et))return;const jt=setTimeout(()=>{L(mt),_(!0),D(null)},800);D(jt)},kt=()=>{M&&(clearTimeout(M),D(null))},ht=async fe=>new Promise((Xe,mt)=>{try{d(at=>{const et={...at};return delete et[fe],et}),p(at=>{const et={...at};return delete et[fe],et}),console.log(`✅ Successfully cleared date ${fe}`),Xe()}catch(at){console.error(`❌ Error clearing date ${fe}:`,at),mt(at)}}),me=async(fe,Xe)=>new Promise((mt,at)=>{try{const et=new Date(fe,Xe+1,0).getDate(),gt=[];for(let jt=1;jt<=et;jt++){const _t=`${fe}-${(Xe+1).toString().padStart(2,"0")}-${jt.toString().padStart(2,"0")}`;gt.push(_t)}d(jt=>{const _t={...jt};return gt.forEach($t=>{delete _t[$t]}),_t}),p(jt=>{const _t={...jt};return gt.forEach($t=>{delete _t[$t]}),_t}),console.log(`✅ Successfully cleared month ${Xe+1}/${fe}`),mt()}catch(et){console.error(`❌ Error clearing month ${Xe+1}/${fe}:`,et),at(et)}}),Fe=async()=>{if(!J||J.length<4){Ne("Please enter your authentication code");return}const fe=ui(J);if(!fe){Ne("Invalid authentication code");return}q(!0),Ne("");try{console.log(`📥 Importing roster entries for ${fe}...`);const Xe=await lS(),mt=fe.replace(/\(R\)$/,"").trim().toUpperCase(),at=Xe.filter(_t=>_t.assigned_name.replace(/\(R\)$/,"").trim().toUpperCase()===mt);console.log(`📊 Found ${at.length} roster entries for ${fe}`);let et=0,gt=0,jt=0;for(const _t of at)try{const $t={date:_t.date,shiftType:_t.shift_type,assignedName:_t.assigned_name,editorName:fe,action:"added"};hS($t,{calendarLabel:fe,schedule:e,specialDates:t,setSchedule:d,setSpecialDates:p})?(et++,console.log(`✅ Added ${_t.shift_type} on ${_t.date}`)):(gt++,console.log(`⏭️ Skipped ${_t.shift_type} on ${_t.date} (conflict or already exists)`))}catch($t){jt++,console.error(`❌ Error processing entry for ${_t.date}:`,$t)}Z({added:et,skipped:gt,errors:jt}),et>0&&console.log(`✅ Import completed: ${et} added, ${gt} skipped, ${jt} errors`)}catch(Xe){console.error("❌ Import failed:",Xe),Ne("Failed to import roster data. Please try again.")}finally{q(!1)}},$e=()=>{oe(!1),ie(""),Ne(""),Z(null)};H.useEffect(()=>{console.log("📅 CALENDAR DEBUG: Current calendar state:",{currentMonth:de+1,currentYear:_e,scheduleKeys:Object.keys(e),scheduleEntries:Object.entries(e).slice(0,5),specialDatesKeys:Object.keys(t),totalScheduleEntries:Object.keys(e).length,totalSpecialDates:Object.keys(t).length,sampleScheduleData:Object.entries(e).slice(0,3).map(([fe,Xe])=>({date:fe,shifts:Xe,dayOfWeek:new Date(fe).getDay()}))})},[e,t,de,_e]);const Ue=fe=>{i(fe)},Ke=ge.getMonth()===de&&ge.getFullYear()===_e,Tt=[];for(let fe=0;fe<Ie;fe++)Tt.push(null);for(let fe=1;fe<=nt;fe++)Tt.push(fe);const St=Tt.length,gi=Math.ceil(St/7),lt=(()=>{const fe=[];for(let Xe=0;Xe<gi;Xe++){let mt=0;for(let wn=0;wn<7;wn++){const Un=Xe*7+wn;if(Un<Tt.length){const Pr=Tt[Un];if(Pr){const Tr=ke(Pr),yi=xe(Pr);let vi=Tr.length;yi&&(vi+=1),vi=Math.min(vi,4),mt=Math.max(mt,vi)}}}const at=window.innerWidth>=640?60:50,et=window.innerWidth>=640?16:12,gt=window.innerWidth>=640?16:12,jt=at+mt*et+gt,_t=window.innerWidth>=640?70:55,$t=Math.max(jt,_t);fe.push(`${$t}px`)}return fe})();return c.jsxs("div",{className:"bg-white overflow-hidden select-none",style:{userSelect:"none",WebkitUserSelect:"none",width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)"},children:[c.jsxs("div",{className:"border-b border-gray-200",style:{padding:window.innerWidth>=640?"24px":"16px",paddingTop:window.innerWidth>=640?"24px":"16px"},children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[c.jsx(jr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-indigo-600"}),x?c.jsx("div",{className:"flex items-center space-x-2",children:c.jsx("input",{type:"text",value:N,onChange:fe=>w(fe.target.value),onKeyDown:Mt,onBlur:$n,className:"text-xl sm:text-3xl font-bold text-gray-900 text-center bg-transparent border-b-2 border-indigo-500 focus:outline-none min-w-[250px] sm:min-w-[300px]",autoFocus:!0})}):c.jsxs("button",{onClick:Nt,className:"flex items-center space-x-2 text-xl sm:text-3xl font-bold text-gray-900 text-center hover:text-indigo-600 transition-colors duration-200 group select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("span",{className:"select-none",children:l}),c.jsx(WN,{className:"w-4 h-4 sm:w-5 sm:h-5 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]})]}),c.jsxs("div",{className:"flex items-center justify-center space-x-3 sm:space-x-4",children:[c.jsx("button",{onClick:()=>Ue("prev"),className:"w-10 h-10 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-600 transition-colors duration-200 active:scale-95 select-none",style:{userSelect:"none",WebkitUserSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",padding:"0",margin:"0",border:"none",outline:"none"},children:c.jsx(Pw,{className:"w-5 h-5",style:{display:"block",margin:"0 auto"}})}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{...ut,onClick:We,className:"text-lg sm:text-xl font-bold text-gray-700 text-center px-3 sm:px-4 py-2 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:c.jsxs("span",{className:"select-none",children:[we[de]," ",_e]})})}),c.jsx("button",{onClick:()=>Ue("next"),className:"w-10 h-10 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-600 transition-colors duration-200 active:scale-95 select-none",style:{userSelect:"none",WebkitUserSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",padding:"0",margin:"0",border:"none",outline:"none"},children:c.jsx(Tw,{className:"w-5 h-5",style:{display:"block",margin:"0 auto"}})})]})]}),m&&xn.createPortal(c.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:window.innerWidth>window.innerHeight?"flex-start":"center",justifyContent:"center",zIndex:99999,padding:window.innerWidth>window.innerHeight?"8px":"16px",paddingTop:window.innerWidth>window.innerHeight?"4px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none"},onClick:st,onTouchStart:fe=>{fe.stopPropagation()},onTouchEnd:fe=>{fe.preventDefault(),fe.stopPropagation()},children:c.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",maxWidth:window.innerWidth>window.innerHeight?"90vw":"400px",width:"100%",maxHeight:window.innerWidth>window.innerHeight?"95vh":"90vh",display:"flex",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",margin:window.innerWidth>window.innerHeight?"4px 0":"16px 0"},onClick:fe=>{fe.stopPropagation(),fe.preventDefault()},onTouchStart:fe=>{fe.stopPropagation()},onTouchEnd:fe=>{fe.stopPropagation()},children:[c.jsxs("div",{style:{position:"relative",padding:window.innerWidth>window.innerHeight?"12px":"24px",paddingBottom:window.innerWidth>window.innerHeight?"8px":"16px",borderBottom:"1px solid #e5e7eb",flexShrink:0},children:[c.jsx("button",{onClick:fe=>{fe.preventDefault(),fe.stopPropagation(),f(!1)},onTouchEnd:fe=>{fe.preventDefault(),fe.stopPropagation(),f(!1)},style:{position:"absolute",top:"16px",right:"16px",padding:"8px",borderRadius:"8px",backgroundColor:"transparent",border:"none",color:"#6b7280",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:c.jsx(Ar,{style:{width:"20px",height:"20px"}})}),c.jsx("button",{onClick:()=>I(!0),className:"p-2 rounded-lg hover:bg-green-100 text-green-600 hover:text-green-700 transition-colors duration-200",title:"Export shifts to external calendar",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:c.jsx(vs,{className:"w-5 h-5"})}),c.jsx("div",{style:{textAlign:"center"},children:c.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#111827",marginBottom:"4px",margin:0},children:"Select Month & Year"})})]}),c.jsx("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"24px"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px",textAlign:"center"},children:"Year"}),c.jsx("select",{value:_e,onChange:fe=>Yt(Number(fe.target.value),de),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"8px",textAlign:"center",fontSize:"14px",touchAction:"manipulation"},children:Array.from({length:10},(fe,Xe)=>_e-5+Xe).map(fe=>c.jsx("option",{value:fe,children:fe},fe))})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px",textAlign:"center"},children:"Month"}),c.jsx("select",{value:de,onChange:fe=>Yt(_e,Number(fe.target.value)),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"8px",textAlign:"center",fontSize:"14px",touchAction:"manipulation"},children:we.map((fe,Xe)=>c.jsx("option",{value:Xe,children:fe},Xe))})]})]})}),c.jsx("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",paddingTop:0,flexShrink:0},children:c.jsx("button",{onClick:fe=>{fe.preventDefault(),fe.stopPropagation(),f(!1)},onTouchEnd:fe=>{fe.preventDefault(),fe.stopPropagation(),f(!1)},style:{width:"100%",padding:"12px",backgroundColor:"#4f46e5",color:"white",fontWeight:"600",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"16px",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:"Close"})})]})}),document.body),c.jsxs("div",{className:"p-3 sm:p-6",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 sm:gap-2 mb-3 sm:mb-4",children:Q.map((fe,Xe)=>c.jsx("div",{className:`p-2 sm:p-3 text-center font-semibold text-xs sm:text-sm select-none ${Xe===0?"text-red-600":"text-gray-600"}`,style:{userSelect:"none",WebkitUserSelect:"none"},children:fe},fe))}),c.jsx("div",{className:"mb-4 sm:mb-6 select-none w-full mx-auto",ref:te,style:{userSelect:"none",WebkitUserSelect:"none",display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:window.innerWidth>=640?"8px":"4px",justifyContent:"center",alignContent:"start",maxWidth:"100%",margin:"0 auto"},children:Tt.map((fe,Xe)=>{const mt=Math.floor(Xe/7),at=fe?ke(fe):[],et=fe?xe(fe):!1,gt=fe?Le(fe):!1;return fe&&Me(fe),c.jsx("div",{"data-day":fe,className:`day-box p-1 sm:p-2 rounded-lg border-2 transition-colors duration-200 overflow-hidden relative select-none ${fe?gt?"cursor-pointer border-indigo-400 shadow-lg bg-yellow-100 hover:bg-yellow-200 active:bg-yellow-200":"cursor-pointer hover:border-indigo-400 hover:shadow-lg bg-yellow-50 border-yellow-200 hover:bg-yellow-100 active:bg-yellow-200":"border-transparent"}`,style:{height:lt[mt],userSelect:"none",WebkitUserSelect:"none",display:"flex",flexDirection:"column"},onClick:()=>fe&&Bn(fe),onMouseDown:jt=>fe&&Oe(fe,jt),onMouseUp:kt,onMouseLeave:kt,onTouchStart:jt=>fe&&Oe(fe,jt),onTouchEnd:kt,children:fe&&c.jsxs("div",{className:"flex flex-col select-none h-full",children:[Me(fe)&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:c.jsx("div",{className:"text-gray-300 text-4xl sm:text-5xl font-bold opacity-30 select-none",children:"✕"})}),c.jsx("div",{className:`flex-shrink-0 mb-1.5 sm:mb-2 relative ${Me(fe)?"z-30":""}`,children:c.jsxs("div",{className:`text-sm sm:text-base text-center font-semibold ${Ze(fe)} relative select-none`,children:[gt&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-6 h-6 sm:w-7 sm:h-7 border-2 border-green-500 rounded-full animate-pulse",style:{boxShadow:"0 0 0 1px rgba(34, 197, 94, 0.2), 0 0 10px rgba(34, 197, 94, 0.3)",animation:"todayPulse 2s ease-in-out infinite"}})}),c.jsx("span",{className:"relative z-10 select-none",children:fe}),at.length>0&&at.some(jt=>jt.trim()!=="")&&c.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})}),c.jsxs("div",{className:`flex flex-col items-center justify-start space-y-0.5 sm:space-y-1 px-0.5 select-none min-w-0 flex-1 ${Me(fe)?"z-30":""}`,children:[et&&c.jsx("div",{className:"special-text text-[8px] sm:text-[9px] text-red-500 font-bold leading-none mt-0.5 flex justify-center select-none",children:c.jsx("div",{className:"text-center select-none",children:"SPECIAL"})}),at.map((jt,_t)=>{const $t=Ae(jt);return $t?c.jsx("div",{className:`shift-text text-[8px] sm:text-[11px] font-bold leading-tight text-black flex-shrink-0 w-full select-none whitespace-nowrap overflow-hidden ${Me(fe)?"opacity-60":""}`,children:c.jsx("div",{className:"text-center select-none truncate px-0.5",children:$t.time})},`${jt}-${_t}`):null})]})]})},Xe)})}),c.jsxs("div",{className:"space-y-3 sm:space-y-4 select-none mt-4 sm:mt-6",style:{userSelect:"none",WebkitUserSelect:"none",paddingBottom:Ke?"30px":"20px",marginBottom:"10px"},children:[Ke&&c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4 mb-4",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(nk,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),c.jsx("span",{className:"text-base sm:text-lg font-semibold text-green-800 select-none",children:"Month to Date"})]}),c.jsx("span",{className:"text-lg sm:text-2xl font-bold text-green-900 select-none",children:Be(a)})]}),c.jsxs("p",{className:"text-xs sm:text-sm text-green-600 mt-2 text-center select-none",children:["Amount earned from start of month to today (",ge.getDate(),"/",de+1,"/",_e,")"]})]}),c.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 sm:p-4",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(NN,{className:"w-4 h-4 sm:w-5 sm:h-5 text-indigo-600"}),c.jsx("span",{className:"text-base sm:text-lg font-semibold text-indigo-800 select-none",children:"Monthly Total"})]}),c.jsx("span",{className:"text-lg sm:text-2xl font-bold text-indigo-900 select-none",children:Be(s)})]}),c.jsxs("p",{className:"text-xs sm:text-sm text-indigo-600 mt-2 text-center select-none",children:["Total amount for all scheduled shifts in ",we[de]," ",_e]})]})]})]}),c.jsx(S6,{isOpen:b,selectedDate:$,schedule:e,specialDates:t,onConfirm:ht,onCancel:()=>{_(!1),L(null)}}),c.jsx(_6,{isOpen:C,selectedMonth:de,selectedYear:_e,onConfirm:me,onCancel:()=>T(!1)}),c.jsx(N6,{isOpen:P,monthData:rt(),onConfirm:me,onCancel:()=>A(!1)}),c.jsx(dS,{isOpen:j,onClose:()=>I(!1),currentMonth:n.getMonth(),currentYear:n.getFullYear()}),X&&xn.createPortal(c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:window.innerWidth>window.innerHeight?"flex-start":"center",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"8px":"16px",paddingTop:window.innerWidth>window.innerHeight?"4px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},onClick:fe=>{fe.target===fe.currentTarget&&$e()},children:c.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",maxWidth:window.innerWidth>window.innerHeight?"90vw":"400px",width:"100%",maxHeight:window.innerWidth>window.innerHeight?"95vh":"90vh",display:"flex",flexDirection:"column",margin:window.innerWidth>window.innerHeight?"4px 0":"16px 0"},onClick:fe=>fe.stopPropagation(),children:[c.jsxs("div",{style:{position:"relative",padding:window.innerWidth>window.innerHeight?"12px":"24px",paddingBottom:window.innerWidth>window.innerHeight?"8px":"16px",borderBottom:"1px solid #e5e7eb",flexShrink:0},children:[c.jsx("button",{onClick:$e,disabled:E,style:{position:"absolute",top:"16px",right:"16px",padding:"8px",borderRadius:"8px",backgroundColor:"transparent",border:"none",color:"#6b7280",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:c.jsx(Ar,{style:{width:"20px",height:"20px"}})}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:"#dbeafe",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px auto"},children:c.jsx(vs,{style:{width:"24px",height:"24px",color:"#2563eb"}})}),c.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#111827",marginBottom:"8px",margin:0},children:"Import Your Roster"}),c.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:0},children:"Import your assigned shifts from the roster database"})]})]}),c.jsx("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:Y?c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:"#dcfce7",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px auto"},children:c.jsx("svg",{style:{width:"24px",height:"24px",color:"#16a34a"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("h4",{style:{fontSize:"18px",fontWeight:"bold",color:"#111827",marginBottom:"16px",margin:"0 0 16px 0"},children:"Import Complete!"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#16a34a"},children:Y.added}),c.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Added"})]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f59e0b"},children:Y.skipped}),c.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Skipped"})]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#ef4444"},children:Y.errors}),c.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Errors"})]})]}),Y.added>0&&c.jsxs("p",{style:{fontSize:"14px",color:"#16a34a",marginBottom:"16px",margin:"0 0 16px 0"},children:["✅ ",Y.added," shifts added to your calendar!"]}),Y.skipped>0&&c.jsxs("p",{style:{fontSize:"12px",color:"#f59e0b",marginBottom:"16px",margin:"0 0 16px 0"},children:["⏭️ ",Y.skipped," shifts skipped (conflicts or already exist)"]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{marginBottom:"24px"},children:[c.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Your Authentication Code"}),c.jsx("input",{type:"text",value:J,onChange:fe=>ie(fe.target.value.toUpperCase()),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",textAlign:"center",fontFamily:"monospace",fontSize:"18px",letterSpacing:"0.1em",textTransform:"uppercase",touchAction:"manipulation"},placeholder:"Enter your code",maxLength:4,autoComplete:"off",autoFocus:!0})]}),ae&&c.jsx("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px"},children:c.jsx("p",{style:{fontSize:"14px",color:"#dc2626",textAlign:"center",margin:0},children:ae})}),c.jsxs("div",{style:{padding:"16px",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"8px",marginBottom:"24px"},children:[c.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#0369a1",marginBottom:"8px",margin:"0 0 8px 0"},children:"How it works:"}),c.jsxs("ul",{style:{fontSize:"12px",color:"#0c4a6e",margin:0,paddingLeft:"16px"},children:[c.jsx("li",{children:"Enter your authentication code"}),c.jsx("li",{children:"System finds all your roster assignments"}),c.jsx("li",{children:"Adds them to your personal calendar"}),c.jsx("li",{children:"Skips dates that already have shifts"}),c.jsx("li",{children:"Marks special dates automatically"})]})]})]})}),c.jsx("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",paddingTop:0,flexShrink:0},children:Y?c.jsx("button",{onClick:$e,style:{width:"100%",padding:"12px",backgroundColor:"#2563eb",color:"white",fontWeight:"600",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"16px",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:"Close"}):c.jsxs("div",{style:{display:"flex",gap:"12px"},children:[c.jsx("button",{onClick:$e,disabled:E,style:{flex:1,padding:"12px",backgroundColor:"#f3f4f6",color:"#374151",fontWeight:"600",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"16px",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",opacity:E?.5:1},children:"Cancel"}),c.jsx("button",{onClick:Fe,disabled:E||J.length<4,style:{flex:1,padding:"12px",backgroundColor:E||J.length<4?"#d1d5db":"#2563eb",color:"white",fontWeight:"600",borderRadius:"8px",border:"none",cursor:E||J.length<4?"not-allowed":"pointer",fontSize:"16px",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:E?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),c.jsx("span",{children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(vs,{style:{width:"16px",height:"16px"}}),c.jsx("span",{children:"Import"})]})})]})})]})}),document.body),c.jsx("style",{jsx:!0,children:`
        @keyframes todayPulse {
          0%, 100% {
            transform: scale(1);
            opacity: 1;
          }
          50% {
            transform: scale(1.1);
            opacity: 0.8;
          }
        }
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},rC=({selectedDate:n,schedule:e,specialDates:t,onToggleShift:r,onToggleSpecialDate:i,onClose:s})=>{const[a,o]=H.useState(!1),[l,u]=H.useState({});H.useEffect(()=>{n&&(o(t[n]===!0),u(e))},[n,t,e]),H.useEffect(()=>{u(e)},[e]);const d=A=>{if(!n)return;const j=l[n]||[];if(j.includes(A)){const I=j.filter($=>$!==A);u($=>({...$,[n]:I}))}else f(A,n)&&u(I=>({...I,[n]:[...j,A]}));r(A)},p=H.useCallback(()=>{if(n){const j=new Date(n).getDate();s(),setTimeout(()=>{const I=document.querySelector(`[data-day="${j}"]`);I?(console.log(`📍 Scrolling back to date ${j}`),I.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),I.style.transition="all 0.3s ease",I.style.transform="scale(1.05)",I.style.boxShadow="0 0 20px rgba(99, 102, 241, 0.5)",setTimeout(()=>{I.style.transform="",I.style.boxShadow=""},600)):console.warn(`⚠️ Could not find date element for day ${j}`)},100)}else s()},[n,s]);H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]);const m=A=>{A.target===A.currentTarget&&p()};if(H.useEffect(()=>{const A=j=>{j.key==="Escape"&&p()};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[p]),!n)return null;const f=(A,j)=>{const I=l[j]||[];return!(A==="9-4"&&I.includes("12-10")||A==="12-10"&&I.includes("9-4")||A==="12-10"&&I.includes("4-10")||A==="4-10"&&I.includes("12-10"))},x=A=>new Date(A).getDay(),y=(A,j)=>{const I=x(A),$=[];return j?$.push("9-4","4-10","N"):I===6?$.push("12-10","N"):I===0?$.push("9-4","4-10","N"):$.push("4-10","N"),Mb.filter(L=>$.includes(L.id))},N=A=>{const j=new Date(A),I=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],$=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],L=I[j.getDay()],M=j.getDate().toString().padStart(2,"0"),D=$[j.getMonth()],O=j.getFullYear();return{dayName:L,dateString:`${M}-${D}-${O}`}},w=async()=>{const A=!a;o(A),i(n,A);const j=e[n]||[];A?j.includes("12-10")&&r("12-10"):x(n)!==0&&j.includes("9-4")&&r("9-4")},{dayName:b,dateString:_}=N(n),C=x(n),T=C===0,P=y(n,a);return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",onClick:m,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,WebkitOverflowScrolling:"touch",touchAction:"pan-y",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",marginTop:window.innerWidth>window.innerHeight?"2px":"2rem",marginBottom:window.innerWidth>window.innerHeight?"2px":"2rem",maxWidth:window.innerWidth>window.innerHeight?"95vw":"28rem",maxHeight:window.innerWidth>window.innerHeight?"98vh":"none",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden"},onClick:A=>{A.stopPropagation()},children:[c.jsxs("div",{className:"relative pb-4 border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[c.jsx("button",{onClick:p,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200 select-none z-10",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Ar,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[c.jsx(Ew,{className:"w-4 h-4 text-green-600"}),c.jsx("span",{className:"text-sm text-green-600 font-medium select-none",children:"Changes saved automatically"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1 select-none",children:b}),c.jsx("p",{className:"text-lg text-gray-700 select-none",children:_})]})]}),c.jsxs("div",{className:"overflow-y-auto flex-1",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",maxHeight:window.innerWidth>window.innerHeight?"calc(98vh - 100px)":"70vh",padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[c.jsx("div",{className:"flex items-center justify-center space-x-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg mb-4",children:c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:a,onChange:w,className:"w-4 h-4 text-yellow-600 focus:ring-yellow-500 focus:ring-2 rounded"}),c.jsx("span",{className:"text-sm font-medium text-yellow-800 select-none",children:"Special Date"})]})}),T&&!a&&c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:c.jsxs("p",{className:"text-xs text-blue-800 text-center select-none",children:[c.jsx("strong",{children:"Sunday:"})," Available shifts for this day"]})}),a&&c.jsx("div",{className:"p-2 bg-yellow-100 border border-yellow-300 rounded-lg mb-4",children:c.jsxs("p",{className:"text-xs text-yellow-800 text-center select-none",children:[c.jsx("strong",{children:"Special Date:"})," ",T?"Sunday marked as special":"Available shifts for this special day"]})}),c.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg mb-4",children:c.jsxs("p",{className:"text-sm text-gray-700 text-center select-none",children:[c.jsx("strong",{children:a?"Special Date":C===0?"Sunday":C===6?"Saturday":"Weekday"})," • ",P.length," shift",P.length!==1?"s":""," available"]})}),c.jsx("div",{className:"space-y-3 mb-6",children:P.map(A=>{const j=(l[n]||[]).includes(A.id),I=f(A.id,n),$=!j&&!I;return c.jsx("button",{onClick:()=>d(A.id),disabled:$,className:`w-full p-4 rounded-lg border-2 text-center transition-all duration-200 select-none ${j?`${A.color} border-current shadow-md transform scale-[1.02]`:$?"bg-gray-50 text-gray-400 border-gray-200 cursor-not-allowed opacity-50":"bg-white border-gray-300 hover:border-gray-400 hover:bg-gray-50 active:bg-gray-100"}`,style:{userSelect:"none",WebkitUserSelect:"none",touchAction:"manipulation"},children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"text-left flex-1",children:[c.jsx("div",{className:"font-semibold select-none",children:A.label}),c.jsx("div",{className:"text-sm opacity-75 select-none",children:A.time}),$&&c.jsx("div",{className:"text-xs mt-1 text-red-500 select-none",children:"Cannot combine with current shifts"})]}),j&&c.jsx("div",{className:"w-6 h-6 bg-current rounded-full flex items-center justify-center",children:c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})},A.id)})}),!a&&c.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:c.jsx("p",{className:"text-xs text-gray-600 text-center select-none",children:C===6?c.jsx(c.Fragment,{children:"Not showing: Sunday/Special (9-4) and Evening (4-10) - only available on Sundays or Special dates"}):C===0?c.jsx(c.Fragment,{children:"Not showing: Saturday Regular (12-10) - only available on Saturdays"}):c.jsx(c.Fragment,{children:"Not showing: Saturday Regular (12-10) and Sunday/Special (9-4) - only available on weekends or special dates"})})}),c.jsx("div",{className:"h-8"})]})]})})},iC=({settings:n,onUpdateBasicSalary:e,onUpdateShiftHours:t})=>{var _,C,T;const[r,i]=H.useState(""),[s,a]=H.useState({}),o=P=>`Rs ${P.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,l=P=>`Rs ${P.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,u=P=>P.toLocaleString("en-US"),d=P=>parseInt(P.replace(/,/g,""),10)||0,p=P=>{const j=P.target.value.replace(/[^\d,]/g,""),I=d(j),$=u(I);i($),e(I)},m=()=>{i(u(n.basicSalary||0))},f=()=>{i("")},x=()=>r||`Rs ${u(n.basicSalary||0)}`,y=P=>P*((n==null?void 0:n.hourlyRate)||0),N=(P,A)=>{a(j=>({...j,[P]:A}))},w=P=>{const A=s[P]||"";let j=0;A!==""&&(j=parseFloat(A)||0,j<0&&(j=0)),t(P,j),a(I=>{const $={...I};return delete $[P],$})},b=P=>P.id in s?s[P.id]:P.hours===0?"":P.hours.toString();return n?!n.shiftCombinations||n.shiftCombinations.length===0?c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[c.jsx(Xm,{className:"w-6 h-6 text-amber-600"}),c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-amber-900 text-center",children:"Missing Shift Combinations"})]}),c.jsxs("div",{className:"text-center p-6 bg-amber-50 rounded-lg",children:[c.jsx("p",{className:"text-amber-700 mb-4",children:"Shift combinations are missing from settings. This will prevent amount calculations."}),c.jsxs("div",{className:"text-sm text-amber-600 space-y-1 mb-4",children:[c.jsx("p",{children:c.jsx("strong",{children:"Current Settings:"})}),c.jsxs("p",{children:["Basic Salary: Rs ",((_=n.basicSalary)==null?void 0:_.toLocaleString())||"Not set"]}),c.jsxs("p",{children:["Hourly Rate: Rs ",((C=n.hourlyRate)==null?void 0:C.toFixed(2))||"Not set"]}),c.jsxs("p",{children:["Shift Combinations: ",((T=n.shiftCombinations)==null?void 0:T.length)||0]})]}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"Reload Page"})]})]}):c.jsxs("div",{className:"bg-white",style:{width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",padding:window.innerWidth>=640?"24px":"16px",paddingTop:window.innerWidth>=640?"24px":"16px"},children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[c.jsx(Dw,{className:"w-6 h-6 text-indigo-600"}),c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 text-center",children:"Settings & Configuration"})]}),c.jsxs("div",{className:"mb-8 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-4 text-center",children:"Salary Configuration"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-center",children:"Basic Salary (Monthly)"}),c.jsx("div",{className:"relative max-w-xs mx-auto",children:c.jsx("input",{type:"text",value:x(),onChange:p,onFocus:m,onBlur:f,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center text-base font-medium",placeholder:"Rs 30,000"})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-center",children:"Hourly Rate (Auto-calculated)"}),c.jsx("div",{className:"relative max-w-xs mx-auto",children:c.jsx("input",{type:"text",value:l(n.hourlyRate||0),readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 text-center text-base font-medium"})}),c.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Formula: Basic Salary × 12 ÷ 52 ÷ 40"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-4 text-center",children:"Work Hours Configuration"}),c.jsx("div",{className:"block sm:hidden space-y-3",children:n.shiftCombinations.map(P=>c.jsxs("div",{className:"p-4 rounded-lg border bg-white",children:[c.jsx("div",{className:"text-center mb-3",children:c.jsx("div",{className:"font-semibold text-gray-800 text-sm mb-1",children:P.combination})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1 text-center",children:"Hours"}),c.jsx("input",{type:"text",inputMode:"decimal",value:b(P),onChange:A=>N(P.id,A.target.value),onBlur:()=>w(P.id),className:"w-full px-2 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center text-sm",placeholder:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1 text-center",children:"Amount"}),c.jsx("span",{className:"px-2 py-2 bg-gray-100 rounded text-center text-sm font-mono text-gray-700 block",children:o(y(P.hours||0))})]})]})]},P.id))}),c.jsx("div",{className:"hidden sm:block overflow-x-auto",children:c.jsxs("table",{className:"w-full border-collapse border border-gray-300 rounded-lg",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-100",children:[c.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700",children:"Shift Combination"}),c.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700",children:"Hours"}),c.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700",children:"Amount (Rs)"})]})}),c.jsx("tbody",{children:n.shiftCombinations.map(P=>c.jsxs("tr",{className:"bg-white",children:[c.jsx("td",{className:"border border-gray-300 px-4 py-3 font-medium text-gray-800 text-center",children:P.combination}),c.jsx("td",{className:"border border-gray-300 px-4 py-3 text-center",children:c.jsx("input",{type:"text",inputMode:"decimal",value:b(P),onChange:A=>N(P.id,A.target.value),onBlur:()=>w(P.id),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center",placeholder:"0"})}),c.jsx("td",{className:"border border-gray-300 px-4 py-3 font-mono text-gray-700 text-center",children:o(y(P.hours||0))})]},P.id))})]})})]})]}):c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[c.jsx(Xm,{className:"w-6 h-6 text-red-600"}),c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-900 text-center",children:"Settings Loading Error"})]}),c.jsxs("div",{className:"text-center p-6 bg-red-50 rounded-lg",children:[c.jsx("p",{className:"text-red-700 mb-4",children:"Settings data is not available. This may be due to:"}),c.jsxs("ul",{className:"text-sm text-red-600 space-y-1",children:[c.jsx("li",{children:"• Database initialization issues"}),c.jsx("li",{children:"• Import process incomplete"}),c.jsx("li",{children:"• Browser storage problems"})]}),c.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reload Page"})]})]})},sC=({onImportData:n,onExportData:e})=>{const[t,r]=H.useState(null);H.useEffect(()=>{(async()=>{})()},[]);const i=l=>{var d;const u=(d=l.target.files)==null?void 0:d[0];if(u){const p=new FileReader;p.onload=m=>{var f;try{const x=JSON.parse((f=m.target)==null?void 0:f.result);n(x)}catch{alert("Invalid file format. Please select a valid JSON file.")}},p.readAsText(u)}l.target.value=""},s=async()=>{try{const l=document.querySelector(".export-button");l&&(l.disabled=!0,l.textContent="Exporting..."),await e(),alert("✅ Data exported successfully! Check your downloads folder."),l&&(l.disabled=!1,l.textContent="Export Schedule")}catch(l){console.error("Export failed:",l),alert("❌ Export failed. Please try again.");const u=document.querySelector(".export-button");u&&(u.disabled=!1,u.textContent="Export Schedule")}},a=l=>{if(l===0)return"0 Bytes";const u=1024,d=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(l)/Math.log(u));return parseFloat((l/Math.pow(u,p)).toFixed(2))+" "+d[p]};return t?t.available===50*1024*1024?{isEstimate:!0,actualAvailable:"Several GB",note:"Actual storage is much larger - this is a browser limitation"}:{isEstimate:!1,actualAvailable:a(t.available),note:null}:null,c.jsxs("div",{className:"bg-white",style:{width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",padding:"24px",paddingTop:"24px"},children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-8",children:[c.jsx(Qm,{className:"w-6 h-6 text-indigo-600"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center",children:"Data Management"})]}),c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[c.jsx(Qm,{className:"w-5 h-5 text-gray-600"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 text-center",children:"Import & Export"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:c.jsx(vs,{className:"w-6 h-6 text-green-600"})}),c.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Export Data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Download your schedule, settings, and configurations as a backup file"})]}),c.jsxs("button",{onClick:s,className:"export-button w-full flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(vs,{className:"w-4 h-4"}),c.jsx("span",{children:"Export Schedule"})]})]}),c.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:c.jsx(_f,{className:"w-6 h-6 text-blue-600"})}),c.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Import Data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Restore your schedule from a previously exported backup file"})]}),c.jsxs("label",{className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg cursor-pointer transition-colors duration-200 font-medium",children:[c.jsx(_f,{className:"w-4 h-4"}),c.jsx("span",{children:"Import Schedule"}),c.jsx("input",{type:"file",accept:".json",onChange:i,className:"hidden"})]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[c.jsx(es,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h3",{className:"text-lg font-semibold text-indigo-800 text-center",children:"File Information"})]}),c.jsxs("div",{className:"space-y-3 text-sm text-indigo-700",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Export Format:"})," JSON (.json)"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"File Name:"})," Roster_dd-mm-yyyy.json"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Current Version:"})," 3.0 (IndexedDB powered)"]})]}),c.jsxs("div",{className:"border-t border-indigo-200 pt-3",children:[c.jsx("p",{className:"text-center font-medium mb-2",children:"Exported Data Includes:"}),c.jsxs("ul",{className:"space-y-1 text-center",children:[c.jsx("li",{children:"• All scheduled shifts and dates"}),c.jsx("li",{children:"• Special date markings"}),c.jsx("li",{children:"• Salary and hourly rate settings"}),c.jsx("li",{children:"• Work hours configuration"}),c.jsx("li",{children:"• Custom schedule title"}),c.jsx("li",{children:"• Export timestamp and version"})]})]}),c.jsxs("div",{className:"border-t border-indigo-200 pt-3",children:[c.jsx("p",{className:"text-center font-medium mb-2",children:"Import Compatibility:"}),c.jsxs("ul",{className:"space-y-1 text-center",children:[c.jsx("li",{children:"• Version 3.0+: Full IndexedDB compatibility"}),c.jsx("li",{children:"• Version 2.0+: Full compatibility with special dates"}),c.jsx("li",{children:"• Version 1.0: Basic compatibility (special dates reset)"})]})]}),(()=>{const l=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,u=/iPad|iPhone|iPod/.test(navigator.userAgent);return l&&u?c.jsxs("div",{className:"border-t border-indigo-200 pt-3",children:[c.jsx("p",{className:"text-center font-medium mb-2 text-amber-700",children:"📱 PWA Mode (Installed App):"}),c.jsxs("ul",{className:"space-y-1 text-center text-amber-600",children:[c.jsx("li",{children:"• Data will be copied to clipboard"}),c.jsx("li",{children:"• Use Notes app to save as file"}),c.jsx("li",{children:"• Or use browser version for direct download"})]})]}):null})()]})]}),c.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:c.jsx("div",{className:"text-center",children:c.jsxs("p",{className:"text-sm text-amber-800",children:[c.jsx("strong",{children:"⚠️ Important:"})," Importing data will replace your current schedule and settings. Make sure to export your current data first if you want to keep it as a backup."]})})})]})]})},aC=({activeTab:n,onTabChange:e})=>{Yg.useEffect(()=>{const f=document.createElement("style");return f.textContent=`
      @keyframes iconPulse {
        0%, 100% {
          transform: scale(1);
          opacity: 0.7;
        }
        50% {
          transform: scale(1.05);
          opacity: 1;
        }
      }
      
      @keyframes iconBounce {
        0%, 20%, 50%, 80%, 100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-2px);
        }
        60% {
          transform: translateY(-1px);
        }
      }
    `,document.head.appendChild(f),()=>{document.head.contains(f)&&document.head.removeChild(f)}},[]);const[t,r]=H.useState(null),[i,s]=H.useState(n);H.useEffect(()=>{s(n)},[n]);const a=f=>{if(f===i)return;const x=document.querySelector(`[data-tab-id="${f}"] .tab-icon`);x&&hr.to(x,{scale:1.2,duration:.15,ease:"power2.out",yoyo:!0,repeat:1,force3D:!0});const y=document.querySelector(".tab-background");y?hr.to(y,{scale:.95,opacity:.7,duration:.1,ease:"power2.out",force3D:!0,onComplete:()=>{s(f),hr.to(y,{scale:1,opacity:1,duration:.2,ease:"power2.out",force3D:!0})}}):s(f),e(f)},o=f=>{if(f===i)return;const x=document.querySelector(`[data-tab-id="${f}"] .tab-icon`);x&&hr.to(x,{scale:1.15,duration:.1,ease:"power2.out",force3D:!0,onComplete:()=>{hr.to(x,{scale:1,duration:.15,ease:"power2.out",force3D:!0})}}),s(f),e(f)},l=[{id:"calendar",icon:jr,label:"Calendar"},{id:"settings",icon:Dw,label:"Settings"},{id:"data",icon:Qm,label:"Data"},{id:"roster",icon:Zm,label:"Roster"}],d=(f=>l.findIndex(x=>x.id===f))(n),p=d,m=p!==-1;return c.jsx("div",{className:"w-full",children:c.jsx("div",{className:"relative bg-white/90 backdrop-blur-md shadow-lg border-b border-gray-200/50 p-2",style:{width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",borderRadius:"0px"},children:c.jsxs("div",{className:"relative grid grid-cols-4 w-full max-w-6xl mx-auto",children:[m&&c.jsx("div",{className:"tab-background absolute inset-y-0 bg-blue-500/10 rounded-xl transition-all duration-300 ease-out",style:{width:"calc(25% - 8px)",left:`calc(${p*25}% + 4px)`,top:"0px",bottom:"0px"}}),d!==-1&&c.jsx("div",{className:"absolute top-1 h-0.5 bg-blue-500 rounded-full transition-all duration-300 ease-out",style:{width:"calc(25% - 48px)",left:`calc(${d*25}% + 24px)`}}),l.map((f,x)=>{const y=f.icon,N=f.id===n,w=t===f.id,b=N||w;return c.jsx("button",{"data-tab-id":f.id,onClick:()=>a(f.id),onTouchStart:()=>o(f.id),onMouseEnter:()=>r(f.id),onMouseLeave:()=>r(null),className:"relative h-12 flex items-center transition-all duration-200 rounded-xl overflow-hidden px-2 pt-2",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:c.jsxs("div",{className:`flex items-center h-full w-full transition-all duration-300 ${b?"justify-center space-x-1":"justify-center"}`,children:[c.jsx(y,{className:"tab-icon w-5 h-5 transition-all duration-300 flex-shrink-0 hover:scale-[1.4] active:scale-95",style:{color:N?"#2563eb":w?"#3b82f6":"#4b5563",animation:N?"none":"iconPulse 2s ease-in-out infinite"}}),c.jsx("div",{className:`overflow-hidden transition-all duration-300 ${b?"max-w-[70px] opacity-100":"max-w-0 opacity-0"}`,children:c.jsx("span",{className:`text-[10px] font-medium whitespace-nowrap block transition-all duration-300 ${N?"text-blue-600":w?"text-blue-500":"text-gray-600"}`,children:f.label})})]})},f.id)})]})})})},oC=(n,e,t,r,i)=>{const{totalAmount:s,monthToDateAmount:a}=H.useMemo(()=>{var m;console.log("🔄 Calculating amounts with data:",{scheduleKeys:Object.keys(n||{}),scheduleCount:Object.keys(n||{}).length,settingsBasicSalary:e==null?void 0:e.basicSalary,settingsHourlyRate:e==null?void 0:e.hourlyRate,settingsCombinations:(m=e==null?void 0:e.shiftCombinations)==null?void 0:m.length,specialDatesCount:Object.keys(t||{}).length,refreshKey:i});let o=0,l=0;const u=new Date,d=r?r.getMonth():u.getMonth(),p=r?r.getFullYear():u.getFullYear();return!n||Object.keys(n).length===0?(console.log("❌ No schedule data available"),{totalAmount:0,monthToDateAmount:0}):!e||!e.shiftCombinations||e.shiftCombinations.length===0?(console.log("❌ No settings or shift combinations available"),{totalAmount:0,monthToDateAmount:0}):(console.log("✅ Processing schedule entries..."),Object.entries(n).forEach(([f,x])=>{if(!x||x.length===0)return;console.log(`📅 Processing date ${f} with shifts:`,x);const y=new Date(f),N=y.getMonth(),w=y.getFullYear();if(N!==d||w!==p){console.log(`⏭️ Skipping ${f} - not in current month/year`);return}const b=t&&t[f]===!0,_=y.getDay();if(console.log(`📊 Date ${f}: dayOfWeek=${_}, isSpecial=${b}`),x.forEach(C=>{console.log(`💰 Calculating shift: ${C}`);let T=e.shiftCombinations.find(P=>P.id.replace(/AM/g,"9-4")===C);if(T&&e.hourlyRate){const P=T.hours*e.hourlyRate;if(o+=P,console.log(`💰 Found single shift ${T.combination} (${T.hours}h) = Rs ${P.toFixed(2)}`),N===u.getMonth()&&w===u.getFullYear()){const A=y.getDate(),j=u.getDate();if(A<j){let I=!0;if(C==="N"){const $=new Date(y),L=new Date($);L.setDate(L.getDate()+1),L.setHours(9,0,0,0),I=u>=L}I&&(l+=P,console.log(`📈 Added to month-to-date (previous day): Rs ${P.toFixed(2)}`))}else if(A===j){const I=u.getHours(),$=u.getMinutes();let L=0;switch(C){case"9-4":L=16;break;case"4-10":L=22;break;case"12-10":L=22;break;case"N":L=9;break;default:L=16}let M=!1;if(C==="N"){const D=new Date(y),O=new Date(D);O.setDate(O.getDate()+1),O.setHours(9,0,0,0),M=u>=O}else M=I>L||I===L&&$>=0;M?(l+=P,console.log(`📈 Added to month-to-date (today, shift ended): Rs ${P.toFixed(2)}`)):console.log(`⏭️ Not adding to month-to-date (today, shift not ended yet): ${C}`)}}}else console.log(`❌ No single shift combination found for ${C}`)}),x.length>1){const T=[...x].sort().join("+");console.log(`🔍 Looking for multi-shift combination: ${T}`);const P=e.shiftCombinations.find(A=>A.id.replace(/AM/g,"9-4")===T);if(P&&e.hourlyRate){const A=x.reduce(($,L)=>{const M=e.shiftCombinations.find(D=>D.id===L);return $+(M?M.hours*e.hourlyRate:0)},0),I=P.hours*e.hourlyRate-A;if(o+=I,console.log(`💰 Found multi-combination ${P.combination}, adjusting by Rs ${I.toFixed(2)}`),N===u.getMonth()&&w===u.getFullYear()){const $=y.getDate(),L=u.getDate();if($<L){let M=!0;if(x.includes("N")){const D=new Date(y),O=new Date(D);O.setDate(O.getDate()+1),O.setHours(9,0,0,0),M=u>=O}M&&(l+=I)}else if($===L){let M=!0;for(const D of x)if(D==="N"){const O=new Date(y),G=new Date(O);if(G.setDate(G.getDate()+1),G.setHours(9,0,0,0),u<G){M=!1;break}}else{let O=0;switch(D){case"9-4":O=16;break;case"4-10":O=22;break;case"12-10":O=22;break;default:O=16}const G=u.getHours(),X=u.getMinutes();if(!(G>O||G===O&&X>=0)){M=!1;break}}M&&(l+=I,console.log(`📈 Added multi-shift to month-to-date: Rs ${I.toFixed(2)}`))}}}}}),console.log(`🎯 Final totals: Monthly=${o.toFixed(2)}, MTD=${l.toFixed(2)}`),{totalAmount:o,monthToDateAmount:l})},[n,e,t,r,i,JSON.stringify(n),JSON.stringify(e),JSON.stringify(t)]);return{totalAmount:s,monthToDateAmount:a}};class lC{constructor(){zt(this,"db",null);zt(this,"dbName","WorkScheduleDB");zt(this,"version",2);zt(this,"initPromise",null)}async init(){return this.initPromise?this.initPromise:(this.initPromise=this._init(),this.initPromise)}async _init(){return new Promise((e,t)=>{if(console.log("🔄 Initializing IndexedDB..."),!window.indexedDB){console.error("❌ IndexedDB not supported"),t(new Error("IndexedDB not supported"));return}const r=indexedDB.open(this.dbName,this.version);r.onerror=()=>{console.error("❌ Failed to open IndexedDB:",r.error),t(new Error(`Failed to open database: ${r.error}`))},r.onsuccess=()=>{this.db=r.result,console.log("✅ IndexedDB initialized successfully"),e()},r.onupgradeneeded=i=>{console.log("🔧 Upgrading IndexedDB schema...");const s=i.target.result;s.objectStoreNames.contains("schedule")||(console.log("📅 Creating schedule store"),s.createObjectStore("schedule",{keyPath:"date"})),s.objectStoreNames.contains("specialDates")||(console.log("⭐ Creating specialDates store"),s.createObjectStore("specialDates",{keyPath:"date"})),s.objectStoreNames.contains("settings")||(console.log("⚙️ Creating settings store"),s.createObjectStore("settings",{keyPath:"key"})),s.objectStoreNames.contains("metadata")||(console.log("📝 Creating metadata store"),s.createObjectStore("metadata",{keyPath:"key"})),console.log("✅ IndexedDB schema upgrade completed")},setTimeout(()=>{this.db||(console.error("❌ IndexedDB initialization timeout"),t(new Error("Database initialization timeout")))},1e4)})}async ensureDB(){if(this.db||await this.init(),!this.db)throw new Error("Database not initialized");return this.db}async getSchedule(){const e=await this.ensureDB();return new Promise((t,r)=>{const a=e.transaction(["schedule"],"readonly").objectStore("schedule").getAll();a.onsuccess=()=>{const o={};a.result.forEach(l=>{o[l.date]=l.shifts}),t(o)},a.onerror=()=>{r(new Error("Failed to get schedule"))}})}async setSchedule(e){const t=await this.ensureDB();return console.log("💾 Saving schedule to IndexedDB:",Object.keys(e).length,"entries"),new Promise((r,i)=>{const s=t.transaction(["schedule"],"readwrite"),a=s.objectStore("schedule");s.onerror=()=>{console.error("❌ Transaction error:",s.error),i(new Error(`Transaction failed: ${s.error}`))},s.oncomplete=()=>{console.log("✅ Schedule saved successfully"),r()};const o=a.clear();o.onsuccess=()=>{let l=0,u=0,d=!1;Object.entries(e).forEach(([p,m])=>{if(m.length>0){l++;const f=a.add({date:p,shifts:m});f.onsuccess=()=>{u++,u===l&&!d&&console.log(`✅ All ${u} schedule entries saved`)},f.onerror=()=>{d||(d=!0,console.error(`❌ Failed to add schedule for ${p}:`,f.error),i(new Error(`Failed to add schedule for ${p}: ${f.error}`)))}}}),l===0&&console.log("✅ No schedule data to save")},o.onerror=()=>{console.error("❌ Failed to clear schedule:",o.error),i(new Error(`Failed to clear schedule: ${o.error}`))}})}async getSpecialDates(){const e=await this.ensureDB();return new Promise((t,r)=>{const a=e.transaction(["specialDates"],"readonly").objectStore("specialDates").getAll();a.onsuccess=()=>{const o={};a.result.forEach(l=>{o[l.date]=l.isSpecial}),t(o)},a.onerror=()=>{r(new Error("Failed to get special dates"))}})}async setSpecialDates(e){const t=await this.ensureDB();return console.log("💾 Saving special dates to IndexedDB:",Object.keys(e).length,"entries"),new Promise((r,i)=>{const s=t.transaction(["specialDates"],"readwrite"),a=s.objectStore("specialDates");s.onerror=()=>{console.error("❌ Special dates transaction error:",s.error),i(new Error(`Transaction failed: ${s.error}`))},s.oncomplete=()=>{console.log("✅ Special dates saved successfully"),r()};const o=a.clear();o.onsuccess=()=>{let l=0,u=0,d=!1;Object.entries(e).forEach(([p,m])=>{if(m){l++;const f=a.add({date:p,isSpecial:m});f.onsuccess=()=>{u++,u===l&&!d&&console.log(`✅ All ${u} special dates saved`)},f.onerror=()=>{d||(d=!0,console.error(`❌ Failed to add special date for ${p}:`,f.error),i(new Error(`Failed to add special date for ${p}: ${f.error}`)))}}}),l===0&&console.log("✅ No special dates to save")},o.onerror=()=>{console.error("❌ Failed to clear special dates:",o.error),i(new Error(`Failed to clear special dates: ${o.error}`))}})}async getSetting(e){const t=await this.ensureDB();return new Promise((r,i)=>{const o=t.transaction(["settings"],"readonly").objectStore("settings").get(e);o.onsuccess=()=>{const l=o.result?o.result.value:null;if(e==="workSettings"&&l&&typeof l=="object"){!l.shiftCombinations||l.shiftCombinations.length;{console.log("🔧 Auto-fixing missing shift combinations in getSetting");const u={...l,shiftCombinations:Wl};this.setSetting(e,u).catch(d=>console.error("Failed to save fixed settings:",d)),r(u);return}}e==="authCodes"&&l&&console.log("📦 Loading auth codes from IndexedDB:",Array.isArray(l)?l.length:"invalid format"),r(l)},o.onerror=()=>{i(new Error(`Failed to get setting: ${e}`))}})}async setSetting(e,t){const r=await this.ensureDB();return console.log(`💾 Saving setting "${e}" to IndexedDB:`,t),new Promise((i,s)=>{const a=r.transaction(["settings"],"readwrite"),o=a.objectStore("settings");a.onerror=()=>{console.error(`❌ Settings transaction error for "${e}":`,a.error),s(new Error(`Transaction failed: ${a.error}`))},a.oncomplete=()=>{console.log(`✅ Setting "${e}" saved successfully`),i()};const l=o.put({key:e,value:t});l.onsuccess=()=>{console.log(`✅ Setting "${e}" put operation completed`)},l.onerror=()=>{console.error(`❌ Failed to set setting "${e}":`,l.error),s(new Error(`Failed to set setting: ${e} - ${l.error}`))}})}async getMetadata(e){const t=await this.ensureDB();return new Promise((r,i)=>{const o=t.transaction(["metadata"],"readonly").objectStore("metadata").get(e);o.onsuccess=()=>{r(o.result?o.result.value:null)},o.onerror=()=>{i(new Error(`Failed to get metadata: ${e}`))}})}async setMetadata(e,t){const r=await this.ensureDB();return console.log(`💾 Saving metadata "${e}" to IndexedDB:`,t),new Promise((i,s)=>{const a=r.transaction(["metadata"],"readwrite"),o=a.objectStore("metadata");a.onerror=()=>{console.error(`❌ Metadata transaction error for "${e}":`,a.error),s(new Error(`Transaction failed: ${a.error}`))},a.oncomplete=()=>{console.log(`✅ Metadata "${e}" saved successfully`),i()};const l=o.put({key:e,value:t});l.onsuccess=()=>{console.log(`✅ Metadata "${e}" put operation completed`)},l.onerror=()=>{console.error(`❌ Failed to set metadata "${e}":`,l.error),s(new Error(`Failed to set metadata: ${e} - ${l.error}`))}})}async exportAllData(){var l,u;console.log("🔄 Exporting all data from IndexedDB...");const e=()=>{const d=new Date,p=d.getDate().toString().padStart(2,"0"),m=(d.getMonth()+1).toString().padStart(2,"0"),f=d.getFullYear();return`Roster_${p}-${m}-${f}.json`},[t,r,i,s]=await Promise.all([this.getSchedule(),this.getSpecialDates(),this.getSetting("workSettings"),this.getMetadata("scheduleTitle")]),a=i||{basicSalary:35e3,hourlyRate:173.08,shiftCombinations:Wl};a&&(!a.shiftCombinations||a.shiftCombinations.length===0)&&(a.shiftCombinations=Wl);const o={schedule:t,specialDates:r,settings:a,scheduleTitle:s||"Work Schedule",exportDate:new Date().toISOString(),version:"3.0",filename:e().replace("Roster_","ANWH_")};return console.log("📦 Export data prepared:",{scheduleEntries:Object.keys(o.schedule).length,specialDatesEntries:Object.keys(o.specialDates).length,settingsIncluded:!!o.settings,shiftCombinations:((u=(l=o.settings)==null?void 0:l.shiftCombinations)==null?void 0:u.length)||0,filename:o.filename}),o}async importAllData(e){var r;console.log("🔄 Importing data to IndexedDB:",{hasSchedule:!!e.schedule,hasSpecialDates:!!e.specialDates,hasSettings:!!e.settings,hasTitle:!!e.scheduleTitle,version:e.version});const t=[];if(e.schedule&&(console.log("📅 Importing schedule with",Object.keys(e.schedule).length,"entries"),t.push(this.setSchedule(e.schedule))),e.specialDates&&(console.log("⭐ Importing special dates with",Object.keys(e.specialDates).length,"entries"),t.push(this.setSpecialDates(e.specialDates))),e.settings){const i={...e.settings};(!i.shiftCombinations||i.shiftCombinations.length===0)&&(console.log("🔧 Adding missing shift combinations to imported settings"),i.shiftCombinations=Wl),console.log("⚙️ Importing settings:",{basicSalary:i.basicSalary,hourlyRate:i.hourlyRate,shiftCombinations:((r=i.shiftCombinations)==null?void 0:r.length)||0}),t.push(this.setSetting("workSettings",i))}e.scheduleTitle&&(console.log("📝 Importing schedule title:",e.scheduleTitle),t.push(this.setMetadata("scheduleTitle",e.scheduleTitle))),await Promise.all(t),console.log("✅ All data imported successfully to IndexedDB")}async getStorageInfo(){if("storage"in navigator&&"estimate"in navigator.storage)try{const e=await navigator.storage.estimate();return console.log("📊 Storage estimate:",e),{used:e.usage||0,available:e.quota||0}}catch(e){console.warn("Storage estimate not available:",e)}return console.log("📊 Using fallback storage estimate for iPhone Safari"),{used:0,available:50*1024*1024}}}const ln=new lC,fS=Object.freeze(Object.defineProperty({__proto__:null,workScheduleDB:ln},Symbol.toStringTag,{value:"Module"}));function $v(n,e,t="setting"){const[r,i]=H.useState(e),[s,a]=H.useState(!0),[o,l]=H.useState(null),u=H.useCallback(async()=>{try{console.log(`🔄 Loading ${t} "${n}" from IndexedDB...`),a(!0),l(null),await ln.init();const p=t==="setting"?await ln.getSetting(n):await ln.getMetadata(n);if(console.log(`📦 Retrieved ${t} "${n}":`,p),p!==null)if(n==="workSettings"&&typeof p=="object"&&p!==null){const m=p;!m.shiftCombinations||m.shiftCombinations.length;{console.log(`🔧 Fixing missing shift combinations for ${n}`);const f={...m,shiftCombinations:Wl};await ln.setSetting(n,f),i(f),console.log(`✅ Fixed and saved ${n} with default shift combinations`)}}else i(p),console.log(`✅ Loaded ${t} "${n}" successfully`);else console.log(`🆕 No stored value for ${t} "${n}", using initial value:`,e),i(e),t==="setting"?await ln.setSetting(n,e):await ln.setMetadata(n,e),console.log(`💾 Saved initial value for ${t} "${n}"`)}catch(p){console.error(`❌ Error loading ${n} from IndexedDB:`,p),l(p instanceof Error?p.message:"Unknown error"),i(e)}finally{a(!1)}},[n,t,JSON.stringify(e)]);H.useEffect(()=>{u()},[u]);const d=H.useCallback(async p=>{try{l(null);const m=typeof p=="function"?p(r):p;console.log(`💾 Saving ${t} "${n}":`,m),i(m),await ln.init(),t==="setting"?await ln.setSetting(n,m):await ln.setMetadata(n,m),console.log(`✅ Saved ${t} "${n}" successfully`),await new Promise(f=>setTimeout(f,100))}catch(m){if(console.error(`❌ Error saving ${n} to IndexedDB:`,m),l(m instanceof Error?m.message:"Unknown error"),m instanceof Error&&m.message.includes("Transaction")){console.log("🔄 Retrying save operation...");try{await new Promise(f=>setTimeout(f,500)),t==="setting"?await ln.setSetting(n,valueToStore):await ln.setMetadata(n,valueToStore),console.log(`✅ Retry successful for ${t} "${n}"`),l(null)}catch(f){console.error(`❌ Retry failed for ${n}:`,f)}}}},[n,r,t]);return[r,d,{isLoading:s,error:o,refresh:u}]}function cC(){const[n,e]=H.useState({}),[t,r]=H.useState({}),[i,s]=H.useState(!0),[a,o]=H.useState(null),l=H.useCallback(async()=>{try{console.log("🔄 Loading schedule data from IndexedDB..."),s(!0),o(null),await ln.init();const[p,m]=await Promise.all([ln.getSchedule(),ln.getSpecialDates()]);console.log("📦 Retrieved schedule data:",{scheduleEntries:Object.keys(p).length,specialDatesEntries:Object.keys(m).length}),e(p),r(m),console.log("✅ Schedule data loaded successfully")}catch(p){console.error("❌ Error loading schedule data:",p),o(p instanceof Error?p.message:"Unknown error")}finally{s(!1)}},[]);H.useEffect(()=>{l()},[l]);const u=H.useCallback(async p=>{try{o(null);const m=typeof p=="function"?p(n):p;console.log("💾 Saving schedule data:",{entries:Object.keys(m).length}),e(m),await ln.init(),await ln.setSchedule(m),console.log("✅ Schedule data saved successfully"),await new Promise(f=>setTimeout(f,100))}catch(m){if(console.error("❌ Error saving schedule:",m),o(m instanceof Error?m.message:"Unknown error"),m instanceof Error&&m.message.includes("Transaction")){console.log("🔄 Retrying schedule save...");try{await new Promise(f=>setTimeout(f,500)),await ln.setSchedule(scheduleToStore),console.log("✅ Schedule retry successful"),o(null)}catch(f){console.error("❌ Schedule retry failed:",f)}}}},[n]),d=H.useCallback(async p=>{try{o(null);const m=typeof p=="function"?p(t):p;console.log("💾 Saving special dates data:",{entries:Object.keys(m).length}),r(m),await ln.init(),await ln.setSpecialDates(m),console.log("✅ Special dates data saved successfully"),await new Promise(f=>setTimeout(f,100))}catch(m){if(console.error("❌ Error saving special dates:",m),o(m instanceof Error?m.message:"Unknown error"),m instanceof Error&&m.message.includes("Transaction")){console.log("🔄 Retrying special dates save...");try{await new Promise(f=>setTimeout(f,500)),await ln.setSpecialDates(specialDatesToStore),console.log("✅ Special dates retry successful"),o(null)}catch(f){console.error("❌ Special dates retry failed:",f)}}}},[t]);return{schedule:n,specialDates:t,setSchedule:u,setSpecialDates:d,isLoading:i,error:a,refreshData:l}}class pS{constructor(e={}){zt(this,"options");zt(this,"modalDisplayCount",0);zt(this,"maxModalDisplayCount");zt(this,"isIOS");zt(this,"isAndroid");zt(this,"isStandaloneMode");zt(this,"isMobile");zt(this,"isChrome");zt(this,"isSafari");zt(this,"isFirefox");zt(this,"isEdge");zt(this,"isOpera");zt(this,"isSamsung");this.options={appName:"X-ray ANWH",appIconUrl:"/icon.png",maxModalDisplayCount:1,skipFirstVisit:!1,startDelay:3e3,lifespan:15e3,displayPace:999999,mustShowCustomPrompt:!1,...e},this.maxModalDisplayCount=this.options.maxModalDisplayCount||3;const t=navigator.userAgent;this.isIOS=/iPad|iPhone|iPod/.test(t),this.isAndroid=/Android/.test(t),this.isMobile=this.isIOS||this.isAndroid,this.isChrome=/Chrome/.test(t)&&!/Edge/.test(t),this.isSafari=/Safari/.test(t)&&!/Chrome/.test(t),this.isFirefox=/Firefox/.test(t),this.isEdge=/Edge/.test(t),this.isOpera=/Opera/.test(t)||/OPR/.test(t),this.isSamsung=/SamsungBrowser/.test(t),this.isStandaloneMode=this.isStandalone(),console.log("🔍 AddToHomescreen Detection:",{isIOS:this.isIOS,isAndroid:this.isAndroid,isMobile:this.isMobile,isChrome:this.isChrome,isSafari:this.isSafari,isSamsung:this.isSamsung,isFirefox:this.isFirefox,isStandalone:this.isStandaloneMode,userAgent:t});const r=localStorage.getItem("addToHomescreenModalCount");this.modalDisplayCount=r?parseInt(r,10):0}isStandalone(){const e=window.matchMedia("(display-mode: standalone)").matches,t=window.navigator.standalone===!0,r=document.referrer.includes("android-app://"),i=window.matchMedia("(display-mode: fullscreen)").matches,s=window.matchMedia("(display-mode: minimal-ui)").matches,a=window.location.search.includes("standalone=true"),o="matchMedia"in window&&window.matchMedia("(display-mode: standalone)").matches&&window.navigator.userAgent.includes("wv");return console.log("📱 Standalone Detection:",{isStandaloneDisplay:e,isIOSStandalone:t,isAndroidStandalone:r,isFullscreen:i,isMinimalUI:s,hasStandaloneInURL:a,isInWebApk:o,userAgent:navigator.userAgent}),e||t||r||i||s||a||o}canPrompt(){const e=localStorage.getItem("addToHomescreenShownOnce")==="true",t=!this.isStandaloneMode&&!e&&this.modalDisplayCount<this.maxModalDisplayCount&&this.isMobile&&(this.isAndroid||this.isIOS);return console.log("✅ Can Prompt Check:",{isStandalone:this.isStandaloneMode,hasBeenShown:e,displayCount:this.modalDisplayCount,maxCount:this.maxModalDisplayCount,isMobile:this.isMobile,isAndroid:this.isAndroid,isIOS:this.isIOS,canShow:t}),t||this.options.mustShowCustomPrompt}show(e){if(!this.canPrompt()&&!this.options.mustShowCustomPrompt){console.log("🚫 AddToHomescreen: Cannot show prompt");return}this.modalDisplayCount++,localStorage.setItem("addToHomescreenModalCount",this.modalDisplayCount.toString()),localStorage.setItem("addToHomescreenShownOnce","true");const t=e||this.getDefaultMessage();this.showModal(t)}clearModalDisplayCount(){this.modalDisplayCount=0,localStorage.removeItem("addToHomescreenModalCount"),localStorage.removeItem("addToHomescreenFirstVisit"),localStorage.removeItem("addToHomescreenShownOnce")}getDefaultMessage(){return this.isIOS&&this.isSafari?`Install ${this.options.appName} on your iPhone: tap the Share button and then "Add to Home Screen".`:this.isAndroid&&this.isChrome?`Install ${this.options.appName} on your Android device: tap the menu button and then "Add to Home Screen" or "Install App".`:this.isAndroid&&this.isSamsung?`Install ${this.options.appName} on your Samsung device: tap the menu button (⋮) and then "Add page to" or "Install App".`:this.isAndroid&&this.isFirefox?`Install ${this.options.appName} on your Android device: tap the menu button (⋮) and then "Install" or "Add to Home Screen".`:this.isAndroid?`Install ${this.options.appName} on your Android device: look for "Add to Home Screen", "Install App", or "Install" in your browser menu.`:`Add ${this.options.appName} to your device for quick access!`}showModal(e){const t=document.createElement("div");t.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 999999;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      animation: fadeIn 0.3s ease-out;
    `;const r=document.createElement("style");r.textContent=`
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      @keyframes slideUp {
        from { transform: translateY(30px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }
    `,document.head.appendChild(r);const i=document.createElement("div");i.style.cssText=`
      background: white;
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      text-align: center;
      position: relative;
      animation: slideUp 0.3s ease-out;
    `;const s=document.createElement("img");s.src=this.options.appIconUrl||"/icon.svg",s.style.cssText=`
      width: 64px;
      height: 64px;
      border-radius: 12px;
      margin-bottom: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    `,s.onerror=()=>{s.style.display="none"};const a=document.createElement("h3");a.textContent=`Install ${this.options.appName}`,a.style.cssText=`
      margin: 0 0 12px 0;
      font-size: 20px;
      font-weight: 600;
      color: #1a1a1a;
    `;const o=document.createElement("p");o.textContent=e,o.style.cssText=`
      margin: 0 0 24px 0;
      font-size: 16px;
      line-height: 1.5;
      color: #666;
    `;const l=document.createElement("div");l.style.cssText=`
      background: ${this.isIOS?"#f0f9ff":this.isAndroid?"#f0fdf4":"#f3f4f6"};
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      text-align: left;
    `,this.isIOS&&this.isSafari?l.innerHTML=`
        <div style="font-weight: 600; margin-bottom: 8px; color: #0369a1;">📱 How to install on iOS:</div>
        <div style="font-size: 14px; color: #0c4a6e; line-height: 1.5;">
          1. Tap the <strong>Share</strong> button <span style="font-size: 18px;">⬆️</span> in Safari<br>
          2. Scroll down and tap <strong>"Add to Home Screen"</strong><br>
          3. Tap <strong>"Add"</strong> to confirm installation
        </div>
      `:this.isAndroid?l.innerHTML=`
        <div style="font-weight: 600; margin-bottom: 8px; color: #166534;">🤖 How to install on Android:</div>
        <div style="font-size: 14px; color: #14532d; line-height: 1.5;">
          1. Tap the <strong>Menu</strong> button <span style="font-size: 18px;">⋮</span> (three dots)<br>
          2. Look for <strong>"Add to Home Screen"</strong>, <strong>"Install App"</strong>, or <strong>"Install"</strong><br>
          3. Tap <strong>"Install"</strong> or <strong>"Add"</strong> to confirm<br>
          <small style="color: #16a34a; margin-top: 4px; display: block;">📌 Works in Chrome, Samsung Browser, Firefox, and Edge</small>
        </div>
      `:l.innerHTML=`
        <div style="color: #374151; font-size: 14px; text-align: center;">
          Open this page in your mobile browser to install the app!
        </div>
      `;const u=document.createElement("button");u.textContent="Maybe Later",u.style.cssText=`
      background: #f3f4f6;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      font-size: 16px;
      font-weight: 500;
      color: #5f6368;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.2s;
    `,u.addEventListener("click",()=>{localStorage.setItem("addToHomescreenLastDismissed",Date.now().toString()),localStorage.setItem("appManuallyInstalled","true"),document.body.removeChild(t),document.head.removeChild(r)}),u.addEventListener("mouseover",()=>{u.style.backgroundColor="#e5e7eb"}),u.addEventListener("mouseout",()=>{u.style.backgroundColor="#f3f4f6"}),i.appendChild(s),i.appendChild(a),i.appendChild(o),i.appendChild(l),i.appendChild(u),t.appendChild(i),document.body.appendChild(t),t.addEventListener("click",d=>{d.target===t&&(localStorage.setItem("addToHomescreenLastDismissed",Date.now().toString()),document.body.removeChild(t),document.head.removeChild(r))}),setTimeout(()=>{document.body.contains(t)&&(localStorage.setItem("addToHomescreenLastDismissed",Date.now().toString()),document.body.removeChild(t),document.head.removeChild(r))},this.options.lifespan||15e3)}}window.addToHomescreen=n=>new pS(n);const uC=()=>{const[n,e]=H.useState([]),[t,r]=H.useState(!0),[i,s]=H.useState(null),[a,o]=H.useState("disconnected"),l=H.useRef(!0);H.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const u=H.useCallback(async()=>{if(!ft){s("Supabase not configured"),r(!1);return}try{s(null),console.log("🔄 Loading roster entries...");const{data:p,error:m}=await ft.from("roster_entries").select("*").order("date",{ascending:!1}).order("created_at",{ascending:!1});if(m)throw new Error(m.message);l.current&&(e(p||[]),console.log("✅ Loaded roster entries:",(p==null?void 0:p.length)||0))}catch(p){console.error("❌ Error loading roster entries:",p),l.current&&s(p instanceof Error?p.message:"Failed to load roster entries")}finally{l.current&&r(!1)}},[]),d=H.useCallback(async p=>{if(!ft)throw new Error("Supabase not configured");try{const{error:m}=await ft.from("roster_entries").delete().eq("id",p);if(m)throw new Error(m.message);l.current&&e(f=>f.filter(x=>x.id!==p))}catch(m){throw console.error("❌ Error removing entry:",m),m}},[]);return H.useEffect(()=>{if(!ft){console.log("⚠️ Supabase not available for real-time updates");return}console.log("📡 Setting up real-time subscription..."),o("connecting");const p=ft.channel("roster_changes").on("postgres_changes",{event:"*",schema:"public",table:"roster_entries"},m=>{try{if(console.log("📡 Real-time update received:",m),!l.current){console.log("⚠️ Component unmounted, ignoring real-time update");return}m.eventType==="INSERT"&&m.new?e(f=>f.some(y=>y.id===m.new.id)?f:[m.new,...f]):m.eventType==="UPDATE"&&m.new?e(f=>f.map(x=>x.id===m.new.id?m.new:x)):m.eventType==="DELETE"&&m.old&&e(f=>f.filter(x=>x.id!==m.old.id)),window.dispatchEvent(new CustomEvent("rosterRealtimeUpdate",{detail:m}))}catch(f){console.error("❌ Error handling real-time update:",f)}}).subscribe(m=>{console.log("📡 Real-time subscription status:",m),l.current&&(m==="SUBSCRIBED"?(o("connected"),console.log("✅ Real-time connection established")):m==="CHANNEL_ERROR"?(o("error"),console.log("❌ Real-time connection error")):m==="TIMED_OUT"?(o("error"),console.log("⏰ Real-time connection timed out")):m==="CLOSED"&&(o("disconnected"),console.log("🔌 Real-time connection closed")))});return u(),()=>{console.log("🧹 Cleaning up real-time subscription..."),ft.removeChannel(p)}},[u]),{entries:n,loading:t,error:i,realtimeStatus:a,loadEntries:u,removeEntry:d}},dC=n=>{const e=new Date(n),t=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getFullYear();return`${t}/${r}/${i}`},hC=n=>({"Morning Shift (9-4)":"Morning (9-4)","Evening Shift (4-10)":"Evening (4-10)","Saturday Regular (12-10)":"Saturday (12-10)","Night Duty":"Night Duty","Sunday/Public Holiday/Special":"Special (9-4)"})[n]||n,jg=(n,e)=>{console.log("🔍 parseNameChange called with:",{description:n,assignedName:e});const t=n.match(/\(Original PDF: ([^)]+)\)/);if(console.log("🔍 Original PDF match:",t),t){let s=t[1].trim();return s.includes("(R")&&!s.includes("(R)")&&(s=s.replace("(R","(R)")),console.log("🔍 Using original PDF assignment:",{oldName:s,newName:e}),{oldName:s,newName:e,isNameChange:!0}}const r=n.match(/Name changed from "([^"]+)" to "([^"]+)"/g);if(console.log("🔍 Name change matches found:",r),r&&r.length>0){const s=r[r.length-1];console.log("🔍 Using last match:",s);const a=s.match(/Name changed from "([^"]+)" to "([^"]+)"/);if(console.log("🔍 Parsed last match:",a),a){let o=a[1].trim(),l=a[2].trim();return o.includes("(R")&&!o.includes("(R)")&&(o=o.replace("(R","(R)")),l.includes("(R")&&!l.includes("(R)")&&(l=l.replace("(R","(R)")),console.log("🔍 Returning immediate change:",{oldName:o,newName:l}),{oldName:o,newName:l,isNameChange:!0}}}const i=n.match(/Name changed from "([^"]+)" to "([^"]+)"/);if(console.log("🔍 Single match fallback:",i),i){let s=i[1].trim(),a=i[2].trim();return s.includes("(R")&&!s.includes("(R)")&&(s=s.replace("(R","(R)")),a.includes("(R")&&!a.includes("(R)")&&(a=a.replace("(R","(R)")),console.log("🔍 Returning single match:",{oldName:s,newName:a}),{oldName:s,newName:a,isNameChange:!0}}return console.log("🔍 No name change detected"),{oldName:null,newName:null,isNameChange:!1}};class uy{constructor(e){zt(this,"timeline",null);zt(this,"options");zt(this,"isPaused",!1);zt(this,"scrollTimeout",null);this.options={pauseDuration:1,scrollDuration:2.5,easing:"power2.inOut",...e}}pause(){this.timeline&&!this.isPaused&&(this.timeline.pause(),this.isPaused=!0,console.log("⏸️ ScrollingText animation paused"))}resume(){this.timeline&&this.isPaused&&(this.timeline.resume(),this.isPaused=!1,console.log("▶️ ScrollingText animation resumed"))}handleScrollStart(){this.pause(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.resume(),this.scrollTimeout=null},150)}start(){this.stop();const{container:e,textElement:t,pauseDuration:r,scrollDuration:i,easing:s}=this.options;hr.set(t,{x:0}),e.offsetWidth,t.offsetWidth;const a=e.offsetWidth,o=t.scrollWidth;if(console.log("📏 ScrollingTextAnimator dimensions:",{containerWidth:a,textWidth:o,needsScrolling:o>a}),o<=a){console.log("✅ Text fits in container, no animation needed");return}const l=o-a;this.timeline=hr.timeline({repeat:-1,ease:s}),this.timeline.to(t,{duration:r,x:0,ease:"none"}).to(t,{duration:i,x:-l,ease:s}).to(t,{duration:r,x:-l,ease:"none"}).to(t,{duration:i,x:0,ease:s}),console.log("🎬 TweenMax animation started with enhanced timing for longer text")}stop(){this.timeline&&(this.timeline.kill(),this.timeline=null)}updateText(e){this.options.text=e,this.start()}static create(e){const t=new uy(e);return t.start(),t}}const fr=({text:n,className:e="",children:t,pauseDuration:r=1,scrollDuration:i=2.5,easing:s="power2.inOut"})=>{const a=H.useRef(null),o=H.useRef(null),[l,u]=H.useState(!1),d=H.useRef(null),p=H.useRef(null);return H.useEffect(()=>{const m=()=>{if(!a.current||!o.current)return;const y=a.current,N=o.current;d.current&&(d.current.stop(),d.current=null),p.current&&(window.removeEventListener("scroll",p.current,{passive:!0}),document.removeEventListener("scroll",p.current,{passive:!0}),p.current=null),y.offsetWidth,N.offsetWidth;const w=y.offsetWidth,b=N.scrollWidth,_=n||"children content",C=_.includes(" "),T=_.length>30;if(b>w){u(!0);const P=C&&T?3:r,A=C&&T?7:i,j=C&&T?"power1.inOut":s;d.current=uy.create({container:y,textElement:N,text:_,pauseDuration:P,scrollDuration:A,easing:j}),console.log("🎬 Started enhanced TweenMax animation for text:",_);const I=()=>{d.current&&d.current.handleScrollStart()};window.addEventListener("scroll",I,{passive:!0}),document.addEventListener("scroll",I,{passive:!0});let $=y.parentElement;for(;$;)($.scrollHeight>$.clientHeight||$.scrollWidth>$.clientWidth)&&$.addEventListener("scroll",I,{passive:!0}),$=$.parentElement;p.current=I}else u(!1),console.log("✅ Text fits in container, no animation needed")};m();const f=()=>{setTimeout(m,100)};window.addEventListener("resize",f);const x=new MutationObserver(()=>{setTimeout(m,50)});return a.current&&x.observe(a.current,{childList:!0,subtree:!0,characterData:!0}),()=>{window.removeEventListener("resize",f),x.disconnect(),p.current&&(window.removeEventListener("scroll",p.current,{passive:!0}),document.removeEventListener("scroll",p.current,{passive:!0}),p.current=null),d.current&&(d.current.stop(),d.current=null)}},[n,t,r,i,s]),H.useEffect(()=>()=>{p.current&&(window.removeEventListener("scroll",p.current,{passive:!0}),document.removeEventListener("scroll",p.current,{passive:!0}),p.current=null),d.current&&(d.current.stop(),d.current=null)},[]),c.jsx("div",{ref:a,className:`w-full ${e}`,style:{position:"relative",width:"100%",maxWidth:"100%",overflow:"hidden"},children:c.jsx("div",{ref:o,className:"whitespace-nowrap",style:{display:"inline-block",minWidth:"100%",maxWidth:"none",overflow:"hidden"},children:t||n})})},mS=({isOpen:n,entry:e,onClose:t})=>{if(!n||!e)return null;const r=a=>{try{const[o,l]=a.split(" "),[u,d,p]=o.split("-"),[m,f,x]=l.split(":"),y=new Date(parseInt(p),parseInt(d)-1,parseInt(u),parseInt(m),parseInt(f),parseInt(x||"0")),N=`${u}-${d}-${p}`,w=`${m}h${f}`;return`${N} at ${w}`}catch{return a}},i=jg(e.change_description||"",e.assigned_name),s=c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsxs("div",{className:"relative p-6 pb-4 border-b border-gray-200",children:[c.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Ar,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(Mw,{className:"w-6 h-6 text-blue-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Edit Details"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(jr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:dC(e.date)})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto select-none",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Shift Type"}),c.jsx(fr,{text:e.shift_type,className:"text-gray-900 font-semibold select-none"})]}),c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Current Assignment"}),c.jsx(fr,{text:e.assigned_name,className:"text-gray-900 font-semibold select-none"})]}),i.isNameChange&&c.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-yellow-800 mb-2 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Name Change"}),c.jsx(fr,{className:"select-none",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(Br,{className:"w-4 h-4 text-red-600 flex-shrink-0"}),c.jsx("span",{className:"text-red-600 font-medium line-through select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:i.oldName||"Unknown"}),c.jsx("span",{className:"text-gray-500 select-none flex-shrink-0",style:{userSelect:"none",WebkitUserSelect:"none"},children:"→"}),c.jsx(Br,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-green-600 font-medium select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:i.newName||e.assigned_name})]})})]}),e.change_description&&c.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-blue-800 mb-1 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Change Description"}),c.jsx(fr,{text:e.change_description.replace(/\s*\(Original PDF: [^)]+\)/,""),className:"text-blue-700 text-sm"})]}),i.isNameChange&&c.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-amber-800 mb-2 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Initial Assignment"}),c.jsx(fr,{className:"select-none",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(Br,{className:"w-4 h-4 text-amber-600 flex-shrink-0"}),c.jsx("span",{className:"text-amber-700 font-medium select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:i.oldName})]})})]}),e.last_edited_by&&c.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-green-800 mb-2 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Last Modified"}),c.jsxs("div",{className:"space-y-1 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(fr,{className:"select-none",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(Br,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-green-700 font-medium select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:e.last_edited_by})]})}),e.last_edited_at&&c.jsx(fr,{className:"select-none",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(F1,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-green-700 text-sm select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:r(e.last_edited_at)})]})})]})]})]}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:t,className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Close"})})]})]})});return xn.createPortal(s,document.body)},fC=({isOpen:n,date:e,currentSpecialInfo:t,onSave:r,onClose:i,authCode:s})=>{const[a,o]=H.useState(!1),[l,u]=H.useState(""),[d,p]=H.useState(!1),[m,f]=H.useState(null);if(H.useEffect(()=>{n&&t?(o(t.isSpecial),u(t.info||"")):n&&(o(!1),u(""))},[n,t]),H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{const w=b=>{b.key==="Escape"&&n&&i()};if(n)return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n,i]),!n||!e)return null;const x=w=>{const b=new Date(w),_=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],C=["January","February","March","April","May","June","July","August","September","October","November","December"],T=_[b.getDay()],P=b.getDate(),A=C[b.getMonth()],j=b.getFullYear();return`${T}, ${A} ${P}, ${j}`},y=()=>{d||(p(!0),f(null),r(a,a?l:"").then(()=>{i()}).catch(w=>{console.error("Failed to save special date:",w),f(w instanceof Error?w.message:"Failed to save special date")}).finally(()=>{p(!1)}))},N=w=>{w.target===w.currentTarget&&i()};return xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:N,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",maxHeight:"90vh",display:"flex",flexDirection:"column"},onClick:w=>w.stopPropagation(),children:[c.jsxs("div",{className:"relative p-6 pb-4 border-b border-gray-200 flex-shrink-0",children:[c.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200",children:c.jsx(Ar,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${a?"bg-red-100":"bg-blue-100"}`,children:c.jsx(Z2,{className:`w-6 h-6 ${a?"text-red-600":"text-blue-600"}`})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Mark Special Date"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[c.jsx(jr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:x(e)})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{className:"space-y-6",children:[m&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(In,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-sm text-red-700",children:m})]})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 p-4 bg-gray-50 rounded-lg",children:c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:a,onChange:w=>o(w.target.checked),className:"w-5 h-5 text-red-600 focus:ring-red-500 focus:ring-2 rounded"}),c.jsx("span",{className:"text-lg font-medium text-gray-800",children:"Mark as Special Date"})]})}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(In,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Special Date Effects:"}),c.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[c.jsx("li",{children:"• Date will appear red and pulsating in the table"}),c.jsx("li",{children:"• Info text will be added to all staff remarks for this date"}),c.jsx("li",{children:"• Helps identify important dates (holidays, events, etc.)"})]})]})]})}),a&&c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[c.jsx(es,{className:"w-4 h-4 inline mr-2"}),"Special Date Information"]}),c.jsx("textarea",{value:l,onChange:w=>u(w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none",rows:3,placeholder:"Enter information about this special date (e.g., 'Public Holiday - Independence Day')",maxLength:200}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[l.length,"/200 characters • This will be added to all staff remarks for this date"]})]}),a&&c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Preview:"}),c.jsxs("div",{className:"text-sm text-red-700",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("div",{className:"w-4 h-4 bg-red-500 rounded animate-pulse"}),c.jsxs("span",{className:"font-medium",children:[x(e)," - Special Date"]})]}),l&&c.jsx("div",{className:"bg-white p-2 rounded border",children:c.jsxs("span",{className:"text-gray-700",children:['Staff remarks: "',l,'"']})})]})]})]})}),c.jsx("div",{className:"border-t border-gray-200 p-6 flex-shrink-0",children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:i,disabled:d,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:y,disabled:d,className:`flex-1 px-4 py-3 ${a?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 flex items-center justify-center space-x-2`,children:d?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Saving..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Z2,{className:"w-4 h-4"}),c.jsx("span",{children:a?"Mark Special":"Remove Special"})]})})]})})]})}),document.body)},gS=({isOpen:n,entry:e,availableStaff:t,allEntriesForShift:r=[],onSelectStaff:i,onSelectStaffWithColor:s,onClose:a,authCode:o})=>{const[l,u]=H.useState(""),[d,p]=H.useState("#000000"),[m,f]=H.useState(!1);if(H.useEffect(()=>{console.log("🔍 StaffSelectionModal props:",{isOpen:n,entry:e==null?void 0:e.assigned_name,entryId:e==null?void 0:e.id,availableStaffLength:t==null?void 0:t.length,allEntriesForShiftLength:r==null?void 0:r.length,allEntriesForShift:r==null?void 0:r.map(P=>({id:P.id,assigned_name:P.assigned_name}))})},[n,e,t,r]),H.useEffect(()=>{o&&f(Ks(o))},[o]),H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{if(n&&e&&(u(e.assigned_name),m)){let P="#000000";if(e.text_color)P=e.text_color;else{const A=(()=>{if(!e.change_description)return!1;const I=e.change_description.match(/\(Original PDF: ([^)]+)\)/);if(I){let $=I[1].trim();return $.includes("(R")&&!$.includes("(R)")&&($=$.replace("(R","(R)")),e.assigned_name===$&&e.last_edited_by==="ADMIN"}return!1})(),j=e.change_description&&e.change_description.includes("Name changed from")&&e.last_edited_by;A?P="#059669":j?P="#dc2626":P="#000000"}p(P)}},[n,e,m]),!n||!e)return null;const x=P=>P.replace(/\(R\)$/,"").trim(),y=()=>{console.log("🔍 availableStaff:",t);const P=[],A=new Set;return t.forEach(j=>{const I=x(j);A.add(I)}),A.forEach(j=>{P.includes(j)||P.push(j);const I=`${j}(R)`;P.includes(I)||P.push(I)}),console.log("🔍 Generated variants:",P),console.log("🔍 NARAYYA variants:",P.filter(j=>j.includes("NARAYYA"))),Co(P)},w=(()=>{const P=y();if(console.log("🔍 allVariants:",P),console.log("🔍 entry:",e),console.log("🔍 allEntriesForShift:",r),!r||r.length===0){const $=P.filter(M=>M!=="ADMIN"),L=Co($);return console.log("🔍 Filtered staff (no entries):",L),L}const A=r.filter($=>$.id!==(e==null?void 0:e.id)).map($=>$.assigned_name);console.log("🔍 assignedStaff (excluding current entry):",A);let j=P.filter($=>$!=="ADMIN").filter($=>!A.includes($));if(console.log("🔍 filtered after removing assigned staff:",j),e!=null&&e.assigned_name.includes("(R)")){const $=x(e.assigned_name);j=j.filter(L=>L!==$),console.log("🔍 filtered after removing base name (current is R variant):",j)}if(e!=null&&e.assigned_name&&!e.assigned_name.includes("(R)")){const $=`${e.assigned_name}(R)`;j=j.filter(L=>L!==$),console.log("🔍 filtered after removing R variant (current is base name):",j)}A.forEach($=>{if($.includes("(R)")){const L=x($);j=j.filter(M=>M!==L),console.log(`🔍 filtered after removing base name ${L} (assigned is R variant ${$}):`,j)}else{const L=`${$}(R)`;j=j.filter(M=>M!==L),console.log(`🔍 filtered after removing R variant ${L} (assigned is base name ${$}):`,j)}});const I=Co(j);return console.log("🔍 Final filtered staff:",I),I})();console.log("🔍 filteredStaff:",w),console.log("🔍 NARAYYA in filteredStaff:",w.filter(P=>P.includes("NARAYYA")));const b=P=>{u(P)},_=P=>new Date(P).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),C=()=>{const P=l!==e.assigned_name;let A="#000000";if(e.text_color)A=e.text_color;else{const I=(()=>{if(!e.change_description)return!1;const L=e.change_description.match(/\(Original PDF: ([^)]+)\)/);if(L){let M=L[1].trim();return M.includes("(R")&&!M.includes("(R)")&&(M=M.replace("(R","(R)")),e.assigned_name===M&&e.last_edited_by==="ADMIN"}return!1})(),$=e.change_description&&e.change_description.includes("Name changed from")&&e.last_edited_by;I?A="#059669":$?A="#dc2626":A="#000000"}const j=m&&d!==A;l&&(P||j)&&(s&&m&&j||s&&m&&P?s(l,d):i(l)),a()},T=P=>{P.target===P.currentTarget&&a()};return xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[99999]",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"8px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},onClick:T,children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxWidth:window.innerWidth>window.innerHeight?"90vw":"28rem",maxHeight:"90vh",margin:window.innerWidth>window.innerHeight?"4px 0":"0",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"16px"},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1 text-center",children:"Select Staff Member"}),c.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[e.assigned_name," → ",l||e.assigned_name]})]}),c.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:c.jsx(Ar,{className:"w-5 h-5"})})]})}),c.jsx("div",{className:"border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"16px"},children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-700",children:[c.jsx(jr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:_(e.date)})]}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-700",children:[c.jsx(F1,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:e.shift_type})]}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Current Assignment"}),c.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.assigned_name})]})})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto",style:{padding:window.innerWidth>window.innerHeight?"8px":"16px",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-3 text-center",children:["Available Staff (",w.length,")"]}),w.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-gray-500 mb-2",children:"No available staff"}),c.jsx("div",{className:"text-xs text-gray-400",children:"All staff are already assigned to this shift"})]}):w.map(P=>c.jsx("button",{onClick:()=>b(P),className:`w-full p-4 rounded-lg border-2 text-left transition-all duration-200 ${l===P?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 bg-white hover:border-gray-300 hover:bg-gray-50"}`,style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:c.jsx(Br,{className:"w-5 h-5 text-gray-600"})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:P}),c.jsx("div",{className:"text-sm text-gray-500",children:x(P)})]})]}),l===P&&c.jsx(Ew,{className:"w-5 h-5 text-blue-600"})]})},P))]})}),c.jsx("div",{className:"border-t border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"16px"},children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:a,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:C,disabled:!l,className:`flex-1 px-4 py-3 rounded-lg font-medium transition-colors duration-200 ${l?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Confirm"})]})})]})}),document.body)},pC=()=>tr.filter(n=>n.name!=="ADMIN").map(n=>n.name).sort(),mC=({entry:n,onUpdate:e,onShowDetails:t,allEntriesForShift:r=[],isSpecialDate:i=!1,specialDateInfo:s})=>{const[a,o]=H.useState(!1),[l,u]=H.useState(""),[d,p]=H.useState(!1),[m,f]=H.useState(""),[x,y]=H.useState(!1),[N,w]=H.useState(!1),[b,_]=H.useState(!1);Yg.useEffect(()=>(d&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[d]);const C=D=>D.change_description&&D.change_description.includes("Name changed from")&&D.last_edited_by,T=D=>{if(!D.change_description)return!1;const O=D.change_description.match(/\(Original PDF: ([^)]+)\)/);if(O){let G=O[1].trim();return G.includes("(R")&&!G.includes("(R)")&&(G=G.replace("(R","(R)")),D.assigned_name===G}return!1},P=()=>n.text_color?n.text_color:T(n)?"#059669":C(n)?"#dc2626":"#000000",A=jc({onLongPress:()=>{console.log("🔥 Long press detected on entry:",n.id),p(!0)},onDoublePress:()=>{C(n)&&t&&n.last_edited_by!=="ADMIN"&&(console.log("👆👆 Double press detected on edited entry:",n.id),t(n))},delay:2500}),j=()=>{if(!ui(l)){f("Invalid authentication code");return}p(!1),o(!0),f("")},I=async D=>{await $(D)},$=async(D,O)=>{if(console.log("🎨 RosterEntryCell: handleStaffSelectWithColor called with:",{newStaffName:D,textColor:O,currentAssignedName:n.assigned_name,entryId:n.id}),D===n.assigned_name)if(console.log("🎨 RosterEntryCell: Name unchanged, checking color change..."),O&&O!==P())console.log("🎨 RosterEntryCell: Color-only change detected, proceeding with update");else{console.log("🎨 RosterEntryCell: No changes detected, closing modal"),o(!1);return}if(D===n.assigned_name&&!O){o(!1);return}y(!0),_(!0);try{const G=ui(l);if(!G)return;console.log("🎨 RosterEntryCell: Updating entry with:",{newStaffName:D,textColor:O,editorName:G});const X=await cS(n.id,{date:n.date,shiftType:n.shift_type,assignedName:D,changeDescription:`Name changed from "${n.assigned_name}" to "${D}"`,textColor:O},G);console.log("🎨 RosterEntryCell: Entry updated successfully:",X),e&&e(X),o(!1),u("")}catch(G){console.error("Failed to update entry:",G),alert("Failed to update entry. Please try again.")}finally{y(!1),setTimeout(()=>_(!1),1e3)}},L=()=>{p(!1),u(""),f("")},M=()=>{o(!1),u("")};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{...A,style:{padding:"4px 2px",margin:0,textAlign:"center",fontSize:window.innerWidth>window.innerHeight?"10px":"12px",fontWeight:"500",color:P(),cursor:"pointer",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",MozUserSelect:"none",msUserSelect:"none",outline:"none",background:"transparent",width:"100%",maxWidth:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"32px",position:"relative",zIndex:60,animation:b?"goldenPulse 1.2s ease-in-out infinite":i&&s&&s.trim()?"pulse 2s ease-in-out infinite":"none",transform:b?"scale(1.05)":"scale(1)",transition:"all 0.4s ease-out",boxShadow:b?"0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4), inset 0 0 10px rgba(255, 215, 0, 0.2)":"none",backgroundColor:b?"rgba(255, 215, 0, 0.15)":"transparent",borderRadius:b?"6px":"0",border:b?"2px solid #ffd700":"none"},children:[c.jsx(fr,{text:n.assigned_name,className:"text-center w-full",style:{color:P(),fontWeight:"500",fontSize:"inherit",textAlign:"center",width:"100%",border:"none",outline:"none",filter:b?"brightness(1.2) contrast(1.1)":"none",textShadow:b?"0 0 8px rgba(255, 215, 0, 0.6)":"none"}}),b&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{position:"absolute",top:"2px",left:"2px",width:"4px",height:"4px",backgroundColor:"#ffd700",borderRadius:"50%",animation:"sparkle1 2s ease-in-out infinite",zIndex:65}}),c.jsx("div",{style:{position:"absolute",bottom:"2px",right:"8px",width:"3px",height:"3px",backgroundColor:"#ffed4e",borderRadius:"50%",animation:"sparkle2 2.5s ease-in-out infinite",zIndex:65}}),c.jsx("div",{style:{position:"absolute",top:"50%",left:"1px",width:"2px",height:"2px",backgroundColor:"#fbbf24",borderRadius:"50%",animation:"sparkle3 1.8s ease-in-out infinite",zIndex:65}})]})]}),c.jsx("style",{jsx:!0,children:`
        @keyframes goldenPulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4);
          }
          50% {
            opacity: 0.9;
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 215, 0, 1), 0 0 60px rgba(255, 215, 0, 0.6);
          }
        }
        
        @keyframes goldenDot {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
            box-shadow: 0 0 8px rgba(255, 215, 0, 0.8);
          }
          50% {
            opacity: 0.7;
            transform: scale(1.3);
            box-shadow: 0 0 15px rgba(255, 215, 0, 1);
          }
        }
        
        @keyframes sparkle1 {
          0%, 100% {
            opacity: 0;
            transform: scale(0) rotate(0deg);
          }
          25% {
            opacity: 1;
            transform: scale(1) rotate(90deg);
          }
          50% {
            opacity: 0.8;
            transform: scale(1.2) rotate(180deg);
          }
          75% {
            opacity: 0.6;
            transform: scale(0.8) rotate(270deg);
          }
        }
        
        @keyframes sparkle2 {
          0%, 100% {
            opacity: 0;
            transform: scale(0);
          }
          30% {
            opacity: 1;
            transform: scale(1.5);
          }
          60% {
            opacity: 0.7;
            transform: scale(1);
          }
        }
        
        @keyframes sparkle3 {
          0%, 100% {
            opacity: 0;
            transform: scale(0) translateY(0);
          }
          40% {
            opacity: 1;
            transform: scale(1.8) translateY(-2px);
          }
          80% {
            opacity: 0.5;
            transform: scale(1) translateY(0);
          }
        }
      `}),d&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center p-4",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999999999,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",pointerEvents:"auto"},onWheel:D=>D.preventDefault(),onScroll:D=>D.preventDefault(),onClick:D=>{D.preventDefault(),D.stopPropagation(),D.target===D.currentTarget&&L()},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Authentication Required"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex space-x-3 mb-3",children:[0,1,2,3].map(D=>c.jsx("input",{type:N?"text":"password",value:l[D]||"",onChange:O=>{const G=O.target.value.toUpperCase();if(G.length<=1){const X=l.split("");if(X[D]=G,u(X.join("")),G&&D<3){const oe=document.querySelector(`input[data-index="${D+1}"]`);oe&&oe.focus()}}},onKeyDown:O=>{if(O.key==="Backspace"&&!l[D]&&D>0){const G=document.querySelector(`input[data-index="${D-1}"]`);G&&G.focus()}},"data-index":D,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:D===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},D))}),l.length===4&&c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onTouchStart:()=>w(!0),onTouchEnd:()=>w(!1),onMouseDown:()=>w(!0),onMouseUp:()=>w(!1),onMouseLeave:()=>w(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:N?c.jsx(Sc,{className:"w-5 h-5"}):c.jsx(_c,{className:"w-5 h-5"})})})]})]}),m&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:m})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:L,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:j,disabled:l.length<4,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200",children:"Continue"})]})]})})}),document.body),c.jsx(gS,{isOpen:a,entry:n,availableStaff:pC(),allEntriesForShift:r,onSelectStaff:I,onSelectStaffWithColor:$,onClose:M,authCode:l})]})},gC=({date:n,isToday:e,isPastDate:t,isFutureDate:r,onDoublePress:i,onLongPress:s,isSpecialDate:a=!1,specialDateInfo:o})=>c.jsx("td",{style:{padding:"4px",textAlign:"center",minHeight:"50px",margin:0,backgroundColor:e?"#bbf7d0":t?"#fef2f2":r?"#f0fdf4":"#ffffff",background:a?"#fecaca":e?"#bbf7d0":t?"#fef2f2":r?"#f0fdf4":"#ffffff",opacity:1,border:"2px solid #374151",width:"15%",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",WebkitTransform:"translate3d(0,0,0)",WebkitTouchCallout:"none"},children:c.jsxs("button",{...jc({onLongPress:s,onDoublePress:i,delay:2500}),className:`text-center w-full h-full p-1 rounded transition-colors duration-200 ${a?"bg-red-300":e?"bg-green-300":"hover:bg-gray-100"}`,style:{background:"transparent",cursor:"pointer",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",margin:0,padding:0,textAlign:"center",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",WebkitTransform:"translate3d(0,0,0)",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,border:"none",outline:"none",boxShadow:"none"},children:[c.jsxs("div",{className:`font-medium text-[10px] sm:text-[12px] leading-tight relative z-20 flex flex-col items-center justify-center ${a?"text-red-900":e?"text-green-900":"text-gray-900"}`,style:{textAlign:"center",width:"100%",display:"block",fontSize:window.innerWidth>window.innerHeight?"12px":"14px",fontWeight:"500",animation:a?"pulse 2s ease-in-out infinite":"none"},children:[c.jsx("div",{style:{textAlign:"center",fontSize:window.innerWidth>window.innerHeight?"10px":"12px",fontWeight:"bold"},children:(()=>{const l=new Date(n);return["SUN","MON","TUE","WED","THU","FRI","SAT"][l.getDay()]})()}),c.jsx("div",{style:{textAlign:"center",fontSize:window.innerWidth>window.innerHeight?"10px":"12px",fontWeight:"500"},children:(()=>{const l=new Date(n),u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=l.getDate(),p=u[l.getMonth()];return`${d}-${p}`})()}),c.jsx("div",{style:{textAlign:"center",fontSize:window.innerWidth>window.innerHeight?"10px":"12px",fontWeight:"500"},children:new Date(n).getFullYear()})]}),a&&o&&o.trim()!==""&&c.jsx("div",{className:"relative mt-1 left-0 right-0 z-20",style:{height:"20px",overflow:"hidden",padding:"0 2px",width:"100%"},children:c.jsx(fr,{text:o,className:"text-red-800 font-medium"})})]})}),yC=({entries:n,loading:e,realtimeStatus:t="disconnected",onRefresh:r,selectedDate:i,onDateChange:s,onExportToCalendar:a,setActiveTab:o})=>{H.useEffect(()=>{const me=Fe=>{const{month:$e,year:Ue}=Fe.detail;console.log(`📅 RosterTableView: Received navigation event to ${$e+1}/${Ue}`);const Ke=new Date(Ue,$e,1);s(Ke)};return window.addEventListener("navigateToMonth",me),()=>window.removeEventListener("navigateToMonth",me)},[s]);const[l,u]=H.useState(null),[d,p]=H.useState(!1),[m,f]=H.useState(0),[x,y]=H.useState(!1),[N,w]=H.useState(""),[b,_]=H.useState(null),[C,T]=H.useState(new Date().getFullYear()),[P,A]=H.useState(!1),[j,I]=H.useState(null),[$,L]=H.useState(!1),[M,D]=H.useState(!1),[O,G]=H.useState(!1),[X,oe]=H.useState(null),[J,ie]=H.useState(!1),[ae,Ne]=H.useState(""),[E,q]=H.useState(""),[Y,Z]=H.useState(null),[te,ce]=H.useState(""),[ge,de]=H.useState([]),[_e,Te]=H.useState(!1),[ze,Ie]=H.useState(!1),nt=H.useRef(!0),we=me=>{const Fe=new Date(i);me==="prev"?Fe.setMonth(Fe.getMonth()-1):Fe.setMonth(Fe.getMonth()+1),s(Fe)},Q=()=>`${["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()]} ${i.getFullYear()}`,st=(me,Fe)=>{const $e=new Date(Fe,me,1);s($e),L(!1)};H.useEffect(()=>(nt.current=!0,()=>{nt.current=!1}),[]);const qe=n.filter(me=>{const Fe=new Date(me.date);return Fe.getMonth()===i.getMonth()&&Fe.getFullYear()===i.getFullYear()});H.useEffect(()=>{const me=Fe=>{console.log("📡 Table view received real-time update:",Fe.detail)};return window.addEventListener("rosterRealtimeUpdate",me),()=>window.removeEventListener("rosterRealtimeUpdate",me)},[]);const Le=async me=>{y(!0);const Fe=new Date().toISOString().split("T")[0];_(Fe);try{console.log("🔄 Manual refresh triggered in table view"),await new Promise($e=>setTimeout($e,1e3)),w(new Date().toLocaleTimeString()),console.log("✅ Manual refresh completed")}catch($e){console.error("Manual refresh error:",$e)}finally{y(!1),_(null)}};H.useEffect(()=>{if(window.disableAutoScroll){console.log("🔍 TABLE TAB-SWITCH AUTO-SCROLL: Skipping due to PDF import in progress");return}if(console.log("🔍 TABLE TAB-SWITCH AUTO-SCROLL: Effect triggered"),!M&&!e&&qe.length>0){const me=new Date,Fe=i.getMonth()===me.getMonth()&&i.getFullYear()===me.getFullYear();if(console.log("🔍 TABLE TAB-SWITCH AUTO-SCROLL: Should auto-scroll?",{hasTabSwitched:M,loading:e,entriesLength:qe.length,isCurrentMonth:Fe}),Fe){const $e=me.toISOString().split("T")[0],Ue=qe.find(Ke=>Ke.date===$e);console.log("🔍 TABLE TAB-SWITCH AUTO-SCROLL: Today entry found?",{todayEntry:!!Ue,todayString:$e}),Ue&&(console.log(`📍 TABLE TAB-SWITCH AUTO-SCROLL: Scrolling to today: ${$e}`),setTimeout(()=>{const Ke=document.querySelector(`[data-date="${$e}"]`)||document.querySelector(`tr[data-date="${$e}"]`);Ke?(Ke.scrollIntoView({behavior:"smooth",block:"center"}),console.log(`📍 TABLE TAB-SWITCH AUTO-SCROLL: Successfully scrolled to: ${$e}`)):console.log(`❌ TABLE TAB-SWITCH AUTO-SCROLL: Element not found for: ${$e}`)},500))}D(!0)}},[e,qe,i,M]),H.useEffect(()=>{console.log("🔍 TABLE TAB-SWITCH: Component mounted, resetting tab switch flag"),D(!1)},[]),H.useEffect(()=>{const me=Fe=>{console.log("🔄 Table view: Roster updated, refreshing data..."),r&&r()};return window.addEventListener("rosterUpdated",me),()=>window.removeEventListener("rosterUpdated",me)},[r]);const Me=[...qe].sort((me,Fe)=>new Date(me.date).getTime()-new Date(Fe.date).getTime()),ee=Me.reduce((me,Fe)=>{const $e=Fe.date;return me[$e]||(me[$e]=[]),me[$e].push(Fe),me},{}),he=me=>{u(me),p(!0)},xe=me=>{if(!nt.current){console.warn("Component unmounted, skipping loadEntries call");return}r&&r()},ke=me=>{console.log("🌟 SPECIAL DATE: Double tap detected on date:",me),oe(me),Z("special"),ce(""),de([]),ie(!0),Ne(""),q("")},Ae=me=>{console.log("👥 ADD STAFF: Long press detected on date:",me),oe(me),Z("addStaff"),ce(""),de([]),ie(!0),Ne(""),q("")},Ze=()=>{console.log("🔐 AUTH: Submit clicked with:",{authCode:ae,actionType:Y,selectedSpecialDate:X});const me=ui(ae);if(!me||!Ks(ae)){q(me?"Admin access required for special date marking":"Invalid authentication code");return}console.log("✅ AUTH: Validation successful, editor:",me),Y==="special"&&X?(console.log("🌟 AUTH: Opening special date modal for:",X),ie(!1),Ne(""),q(""),setTimeout(()=>{console.log("🌟 AUTH: Actually opening special date modal now"),G(!0)},100)):(ie(!1),q(""))},Be=async(me,Fe)=>{if(X){console.log("💾 SPECIAL DATE: Saving special date:",{date:X,isSpecial:me,info:Fe});try{const $e=ui(ae)||"ADMIN";await JA(X,me?Fe.trim():"",$e),r&&await r(),f(Ue=>Ue+1),console.log("✅ SPECIAL DATE: Saved successfully")}catch($e){throw console.error("❌ SPECIAL DATE: Save failed:",$e),$e}}},rt=()=>{console.log("🌟 SPECIAL DATE: Closing modal"),G(!1),oe(null),Z(null)},Ve=me=>{de(Fe=>Fe.includes(me)?Fe.filter($e=>$e!==me):[...Fe,me])},ut=async()=>{if(!(!X||!te||!ae)){Te(!0);try{const me=ui(ae);if(!me)return;const $e=(ee[X]||[]).filter(St=>St.shift_type===te),Ue=$e.map(St=>St.assigned_name),Ke=ge.filter(St=>!Ue.includes(St)),Tt=Ue.filter(St=>!ge.includes(St));for(const St of $e)Tt.includes(St.assigned_name)&&await uS(St.id);for(const St of Ke)await cy({date:X,shiftType:te,assignedName:St,changeDescription:`Added by ${me}`},me);r&&await r(),We()}catch(me){console.error("Failed to update roster:",me),alert("Failed to update roster. Please try again.")}finally{Te(!1)}}},We=()=>{console.log("🔐 AUTH: Closing modal"),ie(!1),Ne(""),q(""),Z(null),oe(null),ce(""),de([])},Yt=me=>me.replace(/\(R\)$/,"").trim(),$n=(()=>{if(!X||!te)return yr;const $e=(ee[X]||[]).filter(Ke=>Ke.shift_type===te).map(Ke=>Ke.assigned_name);let Ue=[...yr].filter(Ke=>Ke!=="ADMIN");return Ue=Ue.filter(Ke=>!$e.includes(Ke)),$e.forEach(Ke=>{if(Ke.includes("(R)")){const Tt=Yt(Ke);Ue=Ue.filter(St=>St!==Tt)}else{const Tt=`${Ke}(R)`;Ue=Ue.filter(St=>St!==Tt)}}),Co(Ue)})(),Et=me=>{const Fe=new Date,$e=Fe.getFullYear()+"-"+String(Fe.getMonth()+1).padStart(2,"0")+"-"+String(Fe.getDate()).padStart(2,"0");return me===$e},Mt=me=>{const Fe=new Date,$e=Fe.getFullYear()+"-"+String(Fe.getMonth()+1).padStart(2,"0")+"-"+String(Fe.getDate()).padStart(2,"0");return me<$e},Bn=me=>{const Fe=new Date,$e=Fe.getFullYear()+"-"+String(Fe.getMonth()+1).padStart(2,"0")+"-"+String(Fe.getDate()).padStart(2,"0");return me>$e},Oe=me=>{const Fe=new Date(me),Ue=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][Fe.getDay()],Ke=Fe.getDate().toString().padStart(2,"0"),Tt=(Fe.getMonth()+1).toString().padStart(2,"0"),St=Fe.getFullYear().toString().slice(-2);return{dayName:Ue,dateString:`${Ke}-${Tt}-${St}`}},kt=me=>{const Fe=ee[me]||[];for(const $e of Fe)if($e.change_description&&$e.change_description.includes("Special Date:")){const Ue=$e.change_description.match(/Special Date:\s*([^;]+)/);if(Ue&&Ue[1].trim())return Ue[1].trim()}return null},ht=me=>kt(me)!==null;return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-white rounded-lg mb-4 p-4 shadow-sm sticky top-0 z-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex items-center justify-center flex-shrink-0",children:c.jsx("button",{onClick:a,className:"p-1 bg-green-600 hover:bg-green-700 text-white rounded transition-colors duration-200",title:"Export to Calendar",children:c.jsx(vs,{className:"w-3 h-3"})})}),c.jsx("div",{className:"flex items-center justify-center flex-1 min-w-0",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>we("prev"),className:"p-2 rounded-lg hover:bg-gray-100 text-gray-600 hover:text-gray-800 transition-colors duration-200",title:"Previous month",children:c.jsx(Pw,{className:"w-5 h-5"})}),c.jsx(jr,{className:"w-6 h-6 text-indigo-600 pointer-events-none"}),c.jsx("div",{className:"ml-2 relative",children:c.jsx("button",{onClick:()=>L(!0),disabled:x,className:"text-sm font-semibold text-gray-900 bg-transparent border-none outline-none cursor-pointer rounded px-2 py-1 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",style:{minWidth:"fit-content",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"140px",fontSize:window.innerWidth<=375?"12px":"14px"},children:Q()})}),c.jsx("button",{onClick:()=>we("next"),className:"p-2 rounded-lg hover:bg-gray-100 text-gray-600 hover:text-gray-800 transition-colors duration-200",title:"Next month",children:c.jsx(Tw,{className:"w-5 h-5"})})]})}),c.jsx("div",{className:"flex items-center justify-center flex-shrink-0",children:c.jsxs("button",{onClick:()=>Le(),disabled:x,className:"p-2 rounded-lg text-gray-600 transition-colors duration-200 relative z-50 flex items-center justify-center",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent",position:"relative",zIndex:50,transform:"translate3d(0,0,0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",WebkitTransform:"translate3d(0,0,0)",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"},title:"Manual refresh",children:[c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",position:"relative"},children:c.jsx("svg",{style:{width:"18px",height:"18px",animation:x?"spin 1s linear infinite":"none",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"12px",height:"12px",position:"relative"},children:c.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:t==="connected"?"#10b981":t==="connecting"?"#f59e0b":t==="error"?"#ef4444":"#6b7280",animation:t==="connecting"?"pulse 1.5s ease-in-out infinite":"none",boxShadow:t==="connected"?"0 0 8px rgba(16, 185, 129, 0.8)":"none",backfaceVisibility:"hidden"}})})]})})]})}),e?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):Me.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(jr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"No roster entries found"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"No entries available for this month"})]}):c.jsx("div",{className:"bg-white",style:{width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",overflowX:"hidden"},children:c.jsx("div",{style:{height:window.innerWidth>window.innerHeight?"60vh":"70vh",minHeight:"400px",maxHeight:"80vh",WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"auto"},children:c.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",tableLayout:"fixed"},children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{style:{position:"sticky",top:"-2px",zIndex:150,backgroundColor:"#000000",color:"white",padding:"8px",textAlign:"center",fontSize:"14px",fontWeight:"bold",border:"2px solid #374151",width:"15%"},children:"Date"}),c.jsx("th",{style:{position:"sticky",top:"-2px",zIndex:150,backgroundColor:"#000000",color:"white",padding:"8px",textAlign:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid #374151",width:"21.25%"},children:"9-4"}),c.jsx("th",{style:{position:"sticky",top:"-2px",zIndex:150,backgroundColor:"#000000",color:"white",padding:"8px",textAlign:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid #374151",width:"21.25%"},children:"12-10"}),c.jsx("th",{style:{position:"sticky",top:"-2px",zIndex:150,backgroundColor:"#000000",color:"white",padding:"8px",textAlign:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid #374151",width:"21.25%"},children:"4-10"}),c.jsx("th",{style:{position:"sticky",top:"-2px",zIndex:150,backgroundColor:"#000000",color:"white",padding:"8px",textAlign:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid #374151",width:"21.25%"},children:"N"})]})}),c.jsx("tbody",{children:Object.entries(ee).map(([me,Fe])=>c.jsxs("tr",{"data-date":me,style:{backgroundColor:Et(me)?"#bbf7d0":Mt(me)?"#fef2f2":Bn(me)?"#f0fdf4":"#ffffff",background:ht(me)?"#fecaca":Et(me)?"#bbf7d0":Mt(me)?"#fef2f2":Bn(me)?"#f0fdf4":"#ffffff"},children:[c.jsx(gC,{date:me,isToday:Et(me),isPastDate:Mt(me),isFutureDate:Bn(me),onDoublePress:()=>ke(me),onLongPress:()=>Ae(me),isSpecialDate:ht(me)&&kt(me)!==null,specialDateInfo:kt(me),formatTableDate:Oe}),mg.map($e=>{const Ue=Fe.filter(Tt=>Tt.shift_type===$e),Ke=Co(Ue.map(Tt=>Tt.assigned_name)).map(Tt=>Ue.find(St=>St.assigned_name===Tt)).filter(Boolean);return c.jsxs("td",{style:{padding:"0",margin:"0",textAlign:"center",minHeight:"50px",border:"2px solid #374151",position:"relative",width:"21.25%",overflow:"hidden",cursor:"pointer"},children:[c.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:5,touchAction:"manipulation",backgroundColor:"transparent",border:"none",outline:"none"}}),c.jsxs("div",{className:"space-y-1 relative z-60",style:{minHeight:"50px",padding:"4px 2px"},children:[Mt(me)&&Ue.length>0&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:c.jsx("div",{className:"font-bold select-none",style:{fontSize:window.innerWidth>window.innerHeight?"clamp(1.5rem, 6vw, 3rem)":"clamp(3rem, 10vw, 6rem)",lineHeight:"1",color:"#fca5a5",opacity:.2,transform:"scale(1.5)"},children:"X"})}),Ke.map((Tt,St)=>c.jsx(mC,{entry:Tt,onUpdate:xe,onShowDetails:he,allEntriesForShift:Ke,isSpecialDate:ht(me),specialDateInfo:kt(me)},Tt.id))]})]},$e)})]},me))})]})})}),J&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",overflow:"auto",overflowY:"auto",touchAction:"pan-y",WebkitOverflowScrolling:"touch"},onClick:me=>{me.target===me.currentTarget&&We()},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{userSelect:"none",WebkitUserSelect:"none",maxHeight:"90vh",maxWidth:"28rem",display:"flex",flexDirection:"column",backgroundColor:"#ffffff",zIndex:2147483647,touchAction:"auto",overflow:"hidden",margin:"0"},onClick:me=>me.stopPropagation(),children:c.jsxs("div",{style:{padding:"24px"},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Authentication Required"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex space-x-3 mb-3",children:[0,1,2,3].map(me=>c.jsx("input",{type:ze?"text":"password",value:ae[me]||"",onChange:Fe=>{const $e=Fe.target.value.toUpperCase();if($e.length<=1){const Ue=ae.split("");if(Ue[me]=$e,Ne(Ue.join("")),$e&&me<3){const Ke=document.querySelector(`input[data-index="${me+1}"]`);Ke&&Ke.focus()}}},onKeyDown:Fe=>{if(Fe.key==="Backspace"&&!ae[me]&&me>0){const $e=document.querySelector(`input[data-index="${me-1}"]`);$e&&$e.focus()}},"data-index":me,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:me===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},me))}),c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onTouchStart:()=>Ie(!0),onTouchEnd:()=>Ie(!1),onMouseDown:()=>Ie(!0),onMouseUp:()=>Ie(!1),onMouseLeave:()=>Ie(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:ze?c.jsx(Sc,{className:"w-5 h-5"}):c.jsx(_c,{className:"w-5 h-5"})})})]})]}),E&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:E})}),Y==="addStaff"&&c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Shift Type"}),c.jsxs("select",{value:te,onChange:me=>{if(ce(me.target.value),me.target.value&&X){const Ue=(ee[X]||[]).filter(Ke=>Ke.shift_type===me.target.value).map(Ke=>Ke.assigned_name);de(Ue)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[c.jsx("option",{value:"",children:"Select shift type"}),mg.map(me=>c.jsx("option",{value:me,children:me},me))]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:We,disabled:_e,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:Ze,disabled:ae.length<4||!Ks(ae)||_e||Y==="addStaff"&&!te,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200",children:"Continue"})]})]})})}),document.body),Y==="addStaff"&&X&&te&&ae&&!J&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxWidth:"28rem",maxHeight:"90vh",margin:"0",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsxs("div",{className:"border-b border-gray-200 flex-shrink-0",style:{padding:"24px",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Edit Staff Assignment"}),c.jsxs("p",{className:"text-sm text-gray-600 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[Oe(X).dateString," (",new Date(X).toLocaleDateString("en-US",{weekday:"long"}),") - ",te]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",style:{padding:"24px",WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:c.jsx("div",{className:"space-y-3",children:$n.map(me=>c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("input",{type:"checkbox",checked:ge.includes(me),onChange:()=>Ve(me),className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm font-medium text-gray-900 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:me})]},me))})}),c.jsx("div",{className:"border-t border-gray-200 flex-shrink-0",style:{padding:"24px",userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:We,disabled:_e,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Cancel"}),c.jsx("button",{onClick:ut,disabled:_e,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 flex items-center justify-center space-x-2 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:_e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Saving..."})]}):c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Save Changes"})})]})})]})}),document.body),$&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},onClick:me=>{me.target===me.currentTarget&&L(!1)},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{maxWidth:"28rem",userSelect:"none",WebkitUserSelect:"none"},onClick:me=>me.stopPropagation(),children:c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6 text-center",children:"Select Month and Year"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),c.jsx("select",{value:i.getMonth(),onChange:me=>{const Fe=parseInt(me.target.value);st(Fe,i.getFullYear())},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((me,Fe)=>c.jsx("option",{value:Fe,children:me},Fe))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),c.jsx("select",{value:i.getFullYear(),onChange:me=>{const Fe=parseInt(me.target.value);st(i.getMonth(),Fe)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center",children:Array.from({length:10},(me,Fe)=>new Date().getFullYear()-5+Fe).map(me=>c.jsx("option",{value:me,children:me},me))})]})]}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:()=>L(!1),className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})})]})})}),document.body),c.jsx(fC,{isOpen:O,date:X,currentSpecialInfo:{isSpecial:X?ht(X):!1,info:X&&kt(X)||""},onSave:Be,onClose:rt,authCode:ae}),c.jsx(mS,{isOpen:d,entry:l,onClose:()=>{p(!1),u(null)}})]})},vC=()=>tr.filter(n=>n.name!=="ADMIN").map(n=>n.name).sort(),xC=({entry:n,onUpdate:e,onShowDetails:t,allEntriesForShift:r=[],isSpecialDate:i=!1,specialDateInfo:s})=>{const[a,o]=H.useState(!1),[l,u]=H.useState(""),[d,p]=H.useState(!1),[m,f]=H.useState(""),[x,y]=H.useState(!1),[N,w]=H.useState(!1),[b,_]=H.useState(!1);Yg.useEffect(()=>(d&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[d]);const C=D=>D.change_description&&D.change_description.includes("Name changed from")&&D.last_edited_by,T=D=>{if(!D.change_description)return!1;const O=D.change_description.match(/\(Original PDF: ([^)]+)\)/);if(O){let G=O[1].trim();return G.includes("(R")&&!G.includes("(R)")&&(G=G.replace("(R","(R)")),D.assigned_name===G}return!1},P=()=>n.text_color?n.text_color:T(n)?"#059669":C(n)?"#dc2626":"#000000",A=jc({onLongPress:()=>{console.log("🔥 Long press detected on entry:",n.id),p(!0)},onDoublePress:()=>{C(n)&&t&&n.last_edited_by!=="ADMIN"&&(console.log("👆👆 Double press detected on edited entry:",n.id),t(n))},delay:5e3}),j=()=>{if(!ui(l)){f("Invalid authentication code");return}p(!1),o(!0),f("")},I=async D=>{await $(D)},$=async(D,O)=>{if(D===n.assigned_name){o(!1);return}y(!0),w(!0);try{const G=ui(l);if(!G)return;const X=await cS(n.id,{date:n.date,shiftType:n.shift_type,assignedName:D,changeDescription:`Name changed from "${n.assigned_name}" to "${D}"`,textColor:O},G);e&&e(X),o(!1),u("")}catch(G){console.error("Failed to update entry:",G),alert("Failed to update entry. Please try again.")}finally{y(!1),setTimeout(()=>w(!1),1e3)}},L=()=>{p(!1),u(""),f("")},M=()=>{o(!1),u("")};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{...A,style:{padding:"4px 2px",margin:0,textAlign:"center",fontSize:window.innerWidth>window.innerHeight?"10px":"12px",fontWeight:"500",color:P(),cursor:"pointer",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",MozUserSelect:"none",msUserSelect:"none",outline:"none",background:"transparent",width:"100%",maxWidth:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"32px",position:"relative",zIndex:60,animation:N?"goldenPulse 1.2s ease-in-out infinite":i&&s&&s.trim()?"pulse 2s ease-in-out infinite":"none",transform:N?"scale(1.05)":"scale(1)",transition:"all 0.4s ease-out",boxShadow:N?"0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4), inset 0 0 10px rgba(255, 215, 0, 0.2)":"none",backgroundColor:N?"rgba(255, 215, 0, 0.15)":"transparent",borderRadius:N?"6px":"0",border:N?"2px solid #ffd700":"none"},children:[c.jsx(fr,{text:n.assigned_name,className:"text-center w-full",style:{color:P(),fontWeight:"500",fontSize:"inherit",textAlign:"center",width:"100%",border:"none",outline:"none",filter:N?"brightness(1.2) contrast(1.1)":"none",textShadow:N?"0 0 8px rgba(255, 215, 0, 0.6)":"none"}}),N&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{position:"absolute",top:"2px",left:"2px",width:"4px",height:"4px",backgroundColor:"#ffd700",borderRadius:"50%",animation:"sparkle1 2s ease-in-out infinite",zIndex:65}}),c.jsx("div",{style:{position:"absolute",bottom:"2px",right:"8px",width:"3px",height:"3px",backgroundColor:"#ffed4e",borderRadius:"50%",animation:"sparkle2 2.5s ease-in-out infinite",zIndex:65}}),c.jsx("div",{style:{position:"absolute",top:"50%",left:"1px",width:"2px",height:"2px",backgroundColor:"#fbbf24",borderRadius:"50%",animation:"sparkle3 1.8s ease-in-out infinite",zIndex:65}})]})]}),c.jsx("style",{jsx:!0,children:`
        @keyframes goldenPulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4);
          }
          50% {
            opacity: 0.9;
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 215, 0, 1), 0 0 60px rgba(255, 215, 0, 0.6);
          }
        }
        
        @keyframes goldenDot {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
            box-shadow: 0 0 8px rgba(255, 215, 0, 0.8);
          }
          50% {
            opacity: 0.7;
            transform: scale(1.3);
            box-shadow: 0 0 15px rgba(255, 215, 0, 1);
          }
        }
        
        @keyframes sparkle1 {
          0%, 100% {
            opacity: 0;
            transform: scale(0) rotate(0deg);
          }
          25% {
            opacity: 1;
            transform: scale(1) rotate(90deg);
          }
          50% {
            opacity: 0.8;
            transform: scale(1.2) rotate(180deg);
          }
          75% {
            opacity: 0.6;
            transform: scale(0.8) rotate(270deg);
          }
        }
        
        @keyframes sparkle2 {
          0%, 100% {
            opacity: 0;
            transform: scale(0);
          }
          30% {
            opacity: 1;
            transform: scale(1.5);
          }
          60% {
            opacity: 0.7;
            transform: scale(1);
          }
        }
        
        @keyframes sparkle3 {
          0%, 100% {
            opacity: 0;
            transform: scale(0) translateY(0);
          }
          40% {
            opacity: 1;
            transform: scale(1.8) translateY(-2px);
          }
          80% {
            opacity: 0.5;
            transform: scale(1) translateY(0);
          }
        }
      `}),d&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center p-4",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999999999,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",pointerEvents:"auto"},onWheel:D=>D.preventDefault(),onScroll:D=>D.preventDefault(),onClick:D=>{D.preventDefault(),D.stopPropagation(),D.target===D.currentTarget&&L()},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Authentication Required"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex space-x-3 mb-3",children:[0,1,2,3].map(D=>c.jsx("input",{type:b?"text":"password",value:l[D]||"",onChange:O=>{const G=O.target.value.toUpperCase();if(G.length<=1){const X=l.split("");if(X[D]=G,u(X.join("")),G&&D<3){const oe=document.querySelector(`input[data-index="${D+1}"]`);oe&&oe.focus()}}},onKeyDown:O=>{if(O.key==="Backspace"&&!l[D]&&D>0){const G=document.querySelector(`input[data-index="${D-1}"]`);G&&G.focus()}},"data-index":D,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:D===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},D))}),l.length===4&&c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onTouchStart:()=>_(!0),onTouchEnd:()=>_(!1),onMouseDown:()=>_(!0),onMouseUp:()=>_(!1),onMouseLeave:()=>_(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:b?c.jsx(Sc,{className:"w-5 h-5"}):c.jsx(_c,{className:"w-5 h-5"})})})]})]}),m&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:m})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:L,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:j,disabled:l.length<4,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200",children:"Continue"})]})]})})}),document.body),c.jsx(gS,{isOpen:a,entry:n,availableStaff:vC(),allEntriesForShift:r,onSelectStaff:I,onSelectStaffWithColor:$,onClose:M,authCode:l})]})},wC=({date:n,onLongPress:e,isToday:t,realtimeStatus:r="disconnected",onManualRefresh:i,isRefreshing:s=!1})=>{const a=jc({onLongPress:e,delay:2500}),o=l=>{const u=new Date(l),d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=d[u.getDay()],f=u.getDate(),x=p[u.getMonth()],y=u.getFullYear(),N=`${m} ${f}-${x}-${y}`;return t(l)?`${N} (Today)`:N};return c.jsx("div",{...a,style:{position:"sticky",top:"0px",zIndex:150,padding:window.innerWidth>window.innerHeight?"8px 12px":"16px 16px",margin:"0",border:"none",fontSize:window.innerWidth>window.innerHeight?"14px":"18px",fontWeight:"bold",textAlign:"center",color:"white",backgroundColor:t(n)?"#059669":"#4f46e5",background:t(n)?"#059669":"#4f46e5",opacity:1,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",cursor:"pointer",touchAction:"manipulation",width:"100%",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",overflow:"hidden",contain:"layout style paint"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",position:"relative",minHeight:window.innerWidth>window.innerHeight?"20px":"24px",overflow:"hidden"},children:[c.jsx("div",{style:{display:"flex",alignItems:"center",flexShrink:0,width:window.innerWidth>window.innerHeight?"20px":"24px",justifyContent:"center"},children:c.jsx(jr,{style:{width:window.innerWidth>window.innerHeight?"16px":"20px",height:window.innerWidth>window.innerHeight?"16px":"20px",color:"white"}})}),c.jsxs("div",{style:{flex:1,textAlign:"center",fontWeight:"bold",fontSize:window.innerWidth>window.innerHeight?"14px":"16px",color:"white",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:window.innerWidth>window.innerHeight?"20px":"24px"},children:[c.jsx("span",{children:o(n)}),i&&c.jsxs("button",{onClick:l=>{l.stopPropagation(),i(n)},disabled:s,style:{background:"transparent",border:"none",padding:"2px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",opacity:s?.7:1,touchAction:"manipulation",WebkitTapHighlightColor:"transparent",flexShrink:0,width:"32px",height:"24px",justifyContent:"center",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden"},title:r==="connected"?"Manual refresh (Real-time active)":r==="connecting"?"Manual refresh (Connecting...)":r==="error"?"Manual refresh (Real-time failed)":"Manual refresh (Real-time disconnected)",children:[c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",position:"relative"},children:c.jsx("svg",{style:{width:"18px",height:"18px",animation:s?"spin 1s linear infinite":"none",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"12px",height:"12px",position:"relative"},children:c.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:r==="connected"?"#10b981":r==="connecting"?"#f59e0b":r==="error"?"#ef4444":"#6b7280",animation:r==="connecting"?"pulse 1.5s ease-in-out infinite":"none",boxShadow:r==="connected"?"0 0 8px rgba(16, 185, 129, 0.8)":"none",backfaceVisibility:"hidden"}})})]})]}),c.jsx("div",{style:{width:window.innerWidth>window.innerHeight?"20px":"24px",flexShrink:0,height:window.innerWidth>window.innerHeight?"20px":"24px"}})]})})},bC=({entries:n,loading:e,realtimeStatus:t="disconnected",onRefresh:r,selectedDate:i,onDateChange:s})=>{H.useEffect(()=>{const ee=he=>{const{month:xe,year:ke}=he.detail;console.log(`📅 RosterCardView: Received navigation event to ${xe+1}/${ke}`);const Ae=new Date(ke,xe,1);s(Ae)};return window.addEventListener("navigateToMonth",ee),()=>window.removeEventListener("navigateToMonth",ee)},[s]);const[a,o]=H.useState(null),[l,u]=H.useState(!1),[d,p]=H.useState(null),[m,f]=H.useState(!1),[x,y]=H.useState(""),[N,w]=H.useState(""),[b,_]=H.useState(""),[C,T]=H.useState([]),[P,A]=H.useState(!1),[j,I]=H.useState(0),[$,L]=H.useState(!1),[M,D]=H.useState(""),[O,G]=H.useState(null),[X,oe]=H.useState(!1),J=H.useRef(!0),ie=n.filter(ee=>{const he=new Date(ee.date);return he.getMonth()===i.getMonth()&&he.getFullYear()===i.getFullYear()});H.useEffect(()=>(J.current=!0,()=>{J.current=!1}),[]),H.useEffect(()=>{const ee=he=>{console.log("📡 Card view received real-time update:",he.detail)};return window.addEventListener("rosterRealtimeUpdate",ee),()=>window.removeEventListener("rosterRealtimeUpdate",ee)},[]);const ae=async ee=>{L(!0);const he=ee||new Date().toISOString().split("T")[0];G(he);try{console.log("🔄 Manual refresh triggered in card view"),await new Promise(xe=>setTimeout(xe,1e3)),D(new Date().toLocaleTimeString()),console.log("✅ Manual refresh completed")}catch(xe){console.error("Manual refresh error:",xe)}finally{L(!1),G(null)}};H.useEffect(()=>{const ee=()=>{console.log("📱 Card view: Orientation change detected"),console.log("📱 Card view: Orientation settled")};return window.addEventListener("orientationchange",ee),()=>window.removeEventListener("orientationchange",ee)},[]),H.useEffect(()=>{if(window.disableAutoScroll){console.log("🔍 CARD TAB-SWITCH AUTO-SCROLL: Skipping due to PDF import in progress");return}if(console.log("🔍 CARD TAB-SWITCH AUTO-SCROLL: Effect triggered"),!X&&!e&&ie.length>0){const ee=new Date,he=i.getMonth()===ee.getMonth()&&i.getFullYear()===ee.getFullYear();if(console.log("🔍 CARD TAB-SWITCH AUTO-SCROLL: Should auto-scroll?",{hasTabSwitched:X,loading:e,entriesLength:ie.length,isCurrentMonth:he}),he){const xe=ee.toISOString().split("T")[0],ke=ie.find(Ae=>Ae.date===xe);console.log("🔍 CARD TAB-SWITCH AUTO-SCROLL: Today entry found?",{todayEntry:!!ke,todayString:xe}),ke&&(console.log(`📍 CARD TAB-SWITCH AUTO-SCROLL: Scrolling to today: ${xe}`),setTimeout(()=>{const Ae=document.querySelector(`[data-date="${xe}"]`);Ae?(Ae.scrollIntoView({behavior:"smooth",block:"center"}),console.log(`📍 CARD TAB-SWITCH AUTO-SCROLL: Successfully scrolled to: ${xe}`)):console.log(`❌ CARD TAB-SWITCH AUTO-SCROLL: Element not found for: ${xe}`)},500))}oe(!0)}},[e,ie,i,X]),H.useEffect(()=>{console.log("🔍 CARD TAB-SWITCH: Component mounted, resetting tab switch flag"),oe(!1)},[]),H.useEffect(()=>{const ee=he=>{console.log("🔄 Card view: Roster updated, refreshing data..."),r&&r()};return window.addEventListener("rosterUpdated",ee),()=>window.removeEventListener("rosterUpdated",ee)},[r]);const Ne=[...ie].sort((ee,he)=>new Date(ee.date).getTime()-new Date(he.date).getTime()),E=Ne.reduce((ee,he)=>{const xe=he.date;return ee[xe]||(ee[xe]=[]),ee[xe].push(he),ee},{}),q=ee=>{const he=ee.map(Ae=>Ae.assigned_name),xe=Co(he),ke=new Map;return ee.forEach(Ae=>{ke.set(Ae.assigned_name,Ae)}),xe.map(Ae=>ke.get(Ae)).filter(Boolean)},Y=ee=>({"Morning Shift (9-4)":"bg-red-100 text-red-800 border-red-200","Evening Shift (4-10)":"bg-blue-100 text-blue-800 border-blue-200","Saturday Regular (12-10)":"bg-gray-100 text-gray-800 border-gray-200","Night Duty":"bg-green-100 text-green-800 border-green-200","Sunday/Public Holiday/Special":"bg-purple-100 text-purple-800 border-purple-200"})[ee]||"bg-gray-100 text-gray-800 border-gray-200",Z=ee=>{const he=new Date(ee),xe=he.getDate().toString().padStart(2,"0"),ke=(he.getMonth()+1).toString().padStart(2,"0"),Ae=he.getFullYear().toString().slice(-2);return`${xe}-${ke}-${Ae}`},te=ee=>{const he={};return ee.forEach(xe=>{he[xe.shift_type]||(he[xe.shift_type]=[]),he[xe.shift_type].push(xe)}),Object.keys(he).forEach(xe=>{he[xe]=q(he[xe])}),he},ce=["Morning Shift (9-4)","Saturday Regular (12-10)","Evening Shift (4-10)","Night Duty","Sunday/Public Holiday/Special"],ge=ee=>{o(ee),u(!0)},de=ee=>{if(!J.current){console.warn("Component unmounted, skipping loadEntries call");return}r&&r(),J.current&&r&&r()},_e=()=>{const ee=ui(x);if(!ee||!Ks(x)){w(ee?"Admin access required for date editing":"Invalid authentication code");return}if(f(!1),w(""),d&&b){const ke=(E[d]||[]).filter(Ae=>Ae.shift_type===b).map(Ae=>Ae.assigned_name);T(ke)}},Te=ee=>{T(he=>he.includes(ee)?he.filter(xe=>xe!==ee):[...he,ee])},ze=async()=>{if(!(!d||!b||!x)){A(!0);try{const ee=ui(x);if(!ee)return;const xe=(E[d]||[]).filter(Be=>Be.shift_type===b),ke=xe.map(Be=>Be.assigned_name),Ae=C.filter(Be=>!ke.includes(Be)),Ze=ke.filter(Be=>!C.includes(Be));for(const Be of xe)Ze.includes(Be.assigned_name)&&await uS(Be.id);for(const Be of Ae)await cy({date:d,shiftType:b,assignedName:Be,changeDescription:`Added by ${ee}`},ee);r&&await r(),I(Be=>Be+1),window.dispatchEvent(new CustomEvent("rosterUpdated",{detail:{type:"bulk_edit",date:d,shift:b,staffAdded:Ae,staffRemoved:Ze}})),Ie()}catch(ee){console.error("Failed to update roster:",ee),alert("Failed to update roster. Please try again.")}finally{A(!1)}}},Ie=()=>{p(null),_(""),T([]),y(""),w(""),f(!1)},nt=ee=>{const he=new Date,xe=he.getFullYear()+"-"+String(he.getMonth()+1).padStart(2,"0")+"-"+String(he.getDate()).padStart(2,"0");return ee===xe},we=ee=>{const he=new Date,xe=he.getFullYear()+"-"+String(he.getMonth()+1).padStart(2,"0")+"-"+String(he.getDate()).padStart(2,"0");return ee<xe},Q=ee=>{const he=E[ee]||[];for(const xe of he)if(xe.change_description&&xe.change_description.includes("Special Date:")){const ke=xe.change_description.match(/Special Date:\s*([^;]+)/);if(ke&&ke[1].trim())return ke[1].trim()}return null},st=ee=>Q(ee)!==null,qe=ee=>ee.replace(/\(R\)$/,"").trim(),Me=(()=>{if(!d||!b)return yr;const xe=(E[d]||[]).filter(Ae=>Ae.shift_type===b).map(Ae=>Ae.assigned_name);let ke=[...yr].filter(Ae=>Ae!=="ADMIN");return ke=ke.filter(Ae=>!xe.includes(Ae)),xe.forEach(Ae=>{if(Ae.includes("(R)")){const Ze=qe(Ae);ke=ke.filter(Be=>Be!==Ze)}else{const Ze=`${Ae}(R)`;ke=ke.filter(Be=>Be!==Ze)}}),Co(ke)})();return c.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",style:{height:window.innerWidth>window.innerHeight?"60vh":"70vh",minHeight:"400px",maxHeight:"80vh"},children:[e?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):Ne.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(jr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 text-lg font-medium",children:e?"Loading roster entries...":"No roster entries found"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:e?"Please wait while we fetch the data":"No entries available"})]}):c.jsx("div",{className:"h-full overflow-y-auto",style:{height:"100%",WebkitOverflowScrolling:"touch"},children:Object.entries(E).map(([ee,he])=>{const xe=te(he);return c.jsxs("div",{"data-date":ee,children:[c.jsx(wC,{date:ee,onLongPress:()=>{p(ee),f(!0)},isToday:nt,realtimeStatus:t,onManualRefresh:()=>ae(ee),isRefreshing:$&&O===ee}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:window.innerWidth>window.innerHeight?"repeat(4, 1fr)":"repeat(3, 1fr)",padding:window.innerWidth>window.innerHeight?"8px":"16px"},children:ce.map(ke=>{const Ae=xe[ke];return!Ae||Ae.length===0?null:c.jsxs("div",{className:"bg-white border border-gray-200 rounded-md overflow-hidden shadow-sm min-w-0 flex-1 relative",children:[c.jsx("div",{className:`text-center font-bold ${Y(ke)}`,style:{padding:window.innerWidth>window.innerHeight?"4px":"8px",fontSize:window.innerWidth>window.innerHeight?"10px":"12px"},children:c.jsx(fr,{text:ke==="Morning Shift (9-4)"?"Shift 9-4":ke==="Saturday Regular (12-10)"?"Shift 12-10":ke==="Evening Shift (4-10)"?"Shift 4-10":ke==="Night Duty"?"Night Duty":ke==="Sunday/Public Holiday/Special"?"Special 9-4":ke,className:"font-bold"})}),c.jsxs("div",{className:"space-y-1 relative",style:{zIndex:30,minHeight:window.innerWidth>window.innerHeight?"60px":"80px",position:"relative",padding:window.innerWidth>window.innerHeight?"4px":"8px"},children:[we(ee)&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:c.jsx("div",{className:"font-bold select-none",style:{fontSize:window.innerWidth>window.innerHeight?"clamp(1.5rem, 6vw, 3rem)":"clamp(3rem, 10vw, 6rem)",lineHeight:"1",color:"#fca5a5",opacity:.2,transform:"scale(1.5)"},children:"X"})}),Ae.map((Ze,Be)=>c.jsx("div",{className:"relative",style:{zIndex:30},children:c.jsx(xC,{entry:Ze,onShowDetails:ge,onUpdate:de,allEntriesForShift:Ae,isSpecialDate:st(ee),specialDateInfo:Q(ee)})},Ze.id))]})]},ke)})})]},ee)})}),c.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse {
          0%, 100% {
            opacity: 0.8;
            transform: scale(1);
          }
          50% {
            opacity: 1;
            transform: scale(1.1);
          }
        }
        @keyframes scroll-text {
          0% { transform: translateX(0%); }
          25% { transform: translateX(0%); }
          75% { transform: translateX(-100%); }
          100% { transform: translateX(-100%); }
        }
      `}),m&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:window.innerWidth>window.innerHeight?"flex-start":"center",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"8px":"16px",paddingTop:window.innerWidth>window.innerHeight?"4px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{maxWidth:window.innerWidth>window.innerHeight?"90vw":"28rem",maxHeight:window.innerWidth>window.innerHeight?"95vh":"none",margin:window.innerWidth>window.innerHeight?"4px 0":"16px 0"},children:c.jsxs("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px"},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Authentication Required"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex space-x-3 mb-3",children:[0,1,2,3].map(ee=>c.jsx("input",{type:showPassword?"text":"password",value:x[ee]||"",onChange:he=>{const xe=he.target.value.toUpperCase();if(xe.length<=1){const ke=x.split("");if(ke[ee]=xe,y(ke.join("")),xe&&ee<3){const Ae=document.querySelector(`input[data-index="${ee+1}"]`);Ae&&Ae.focus()}}},onKeyDown:he=>{if(he.key==="Backspace"&&!x[ee]&&ee>0){const xe=document.querySelector(`input[data-index="${ee-1}"]`);xe&&xe.focus()}},"data-index":ee,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:ee===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off"},ee))}),c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onTouchStart:()=>setShowPassword(!0),onTouchEnd:()=>setShowPassword(!1),onMouseDown:()=>setShowPassword(!0),onMouseUp:()=>setShowPassword(!1),onMouseLeave:()=>setShowPassword(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:showPassword?c.jsx(EyeOff,{className:"w-5 h-5"}):c.jsx(Eye,{className:"w-5 h-5"})})})]})]}),N&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:N})}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Shift Type"}),c.jsxs("select",{value:b,onChange:ee=>_(ee.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[c.jsx("option",{value:"",children:"Select shift type"}),mg.map(ee=>c.jsx("option",{value:ee,children:ee},ee))]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:Ie,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:_e,disabled:x.length<4||!b||!Ks(x),className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200",children:"Continue"})]})]})})}),document.body),d&&b&&x&&!m&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:window.innerWidth>window.innerHeight?"flex-start":"center",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"8px":"16px",paddingTop:window.innerWidth>window.innerHeight?"4px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxWidth:window.innerWidth>window.innerHeight?"90vw":"28rem",maxHeight:window.innerWidth>window.innerHeight?"95vh":"90vh",margin:window.innerWidth>window.innerHeight?"4px 0":"16px 0",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsxs("div",{className:"border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Edit Staff Assignment"}),c.jsxs("p",{className:"text-sm text-gray-600 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[Z(d)," (",new Date(d).toLocaleDateString("en-US",{weekday:"long"}),") - ",b]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:c.jsx("div",{className:"space-y-3",children:Me.map(ee=>c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("input",{type:"checkbox",checked:C.includes(ee),onChange:()=>Te(ee),className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm font-medium text-gray-900 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:ee})]},ee))})}),c.jsx("div",{className:"border-t border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:Ie,disabled:P,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Cancel"}),c.jsx("button",{onClick:ze,disabled:P,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 flex items-center justify-center space-x-2 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:P?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Saving..."})]}):c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Save Changes"})})]})})]})}),document.body),c.jsx(mS,{isOpen:l,entry:a,onClose:()=>{u(!1),o(null)}})]})},SC=({entries:n,loading:e,selectedDate:t})=>{const[r,i]=H.useState("all"),[s,a]=H.useState("all"),[o,l]=H.useState(0);H.useEffect(()=>{const b=_=>{console.log("📡 Log view received real-time update:",_.detail),l(C=>C+1)};return window.addEventListener("rosterRealtimeUpdate",b),()=>window.removeEventListener("rosterRealtimeUpdate",b)},[]);const u=t?n.filter(b=>{const _=new Date(b.date);return _.getMonth()===t.getMonth()&&_.getFullYear()===t.getFullYear()}):n,d=u.filter(b=>b.change_description&&(b.change_description==="Imported from PDF"||b.change_description.includes("Saturday 4-10 converted to 12-10"))||b.last_edited_by==="ADMIN"?!1:s==="nameChanges"?b.change_description&&b.change_description.includes("Name changed from")&&b.change_description.includes(" to "):b.change_description||b.last_edited_by),m=[...d.filter(b=>r==="all"?!0:b.last_edited_by===r)].sort((b,_)=>{const C=I=>{if(!I)return new Date(0);try{if(I.includes("-")&&I.includes(" ")){const[L,M]=I.split(" "),[D,O,G]=L.split("-"),[X,oe,J]=(M||"00:00:00").split(":");return new Date(parseInt(G),parseInt(O)-1,parseInt(D),parseInt(X||"0"),parseInt(oe||"0"),parseInt(J||"0"))}const $=new Date(I);return isNaN($.getTime())?new Date(0):$}catch($){return console.warn("Failed to parse timestamp:",I,$),new Date(0)}},T=I=>I.last_edited_at?C(I.last_edited_at):I.created_at?C(I.created_at):new Date,P=T(b),j=T(_).getTime()-P.getTime();return j===0?_.id.localeCompare(b.id):j}),x=(()=>{const b=new Set;return u.forEach(_=>{_.last_edited_by&&_.last_edited_by!=="ADMIN"&&b.add(_.last_edited_by)}),Array.from(b).sort()})(),y=b=>({"Morning Shift (9-4)":"text-red-600","Evening Shift (4-10)":"text-blue-600","Saturday Regular (12-10)":"text-gray-600","Night Duty":"text-green-600","Sunday/Public Holiday/Special":"text-purple-600"})[b]||"text-gray-600",N=b=>{try{const[_,C]=b.split(" "),[T,P,A]=_.split("-"),[j,I,$]=C.split(":"),L=new Date(parseInt(A),parseInt(P)-1,parseInt(T),parseInt(j),parseInt(I),parseInt($||"0")),M=`${T}-${P}-${A}`,D=`${j}h${I}`;return`${M} at ${D}`}catch{return b}},w=b=>{const _=new Date(b),C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],P=C[_.getDay()],A=_.getDate().toString().padStart(2,"0"),j=T[_.getMonth()],I=_.getFullYear();return`${P} ${A}-${j}-${I}`};return c.jsxs("div",{className:"bg-white rounded-lg",children:[c.jsx("div",{className:"p-2 sm:p-4 border-b border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(es,{className:"w-5 h-5 text-gray-600"}),c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),c.jsxs("select",{value:s,onChange:b=>a(b.target.value),className:"px-2 py-1 sm:px-3 sm:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[c.jsxs("option",{value:"all",children:["All Roster Edits",(()=>{const b=u.filter(_=>{var C;return(_.change_description||_.last_edited_by)&&!(_.change_description==="Imported from PDF"||(C=_.change_description)!=null&&C.includes("Saturday 4-10 converted to 12-10"))&&_.last_edited_by!=="ADMIN"}).length;return b>0?` (${b})`:""})()]}),c.jsxs("option",{value:"nameChanges",children:["Name Changes Only",(()=>{const b=u.filter(_=>{var C;return(C=_.change_description)==null?void 0:C.includes("Name changed from")}).length;return b>0?` (${b})`:""})()]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Br,{className:"w-5 h-5 text-gray-600"}),c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Staff:"}),c.jsxs("select",{value:r,onChange:b=>i(b.target.value),className:"px-2 py-1 sm:px-3 sm:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm flex-1 sm:flex-none",children:[c.jsxs("option",{value:"all",children:["All Staff",d.length>0?` (${d.length} entries)`:""]}),x.map(b=>c.jsx("option",{value:b,children:b},b))]})]})]})}),c.jsx("div",{className:"overflow-y-auto",children:e?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):m.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(es,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 text-lg font-medium",children:r==="all"?s==="all"?"No roster edits found":"No name changes found":`No ${s==="all"?"edits":"name changes"} found for ${r}`}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:r==="all"?s==="all"?"No activity to display":'Try selecting "All Roster Edits" to see more activity':"Try selecting a different staff member or filter type"})]}):c.jsx("div",{className:"divide-y divide-gray-100",children:m.map((b,_)=>c.jsx("div",{className:"p-2 sm:p-4 hover:bg-gray-50 transition-colors duration-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"flex-shrink-0 mt-1",children:c.jsx("div",{className:`w-3 h-3 rounded-full ${b.shift_type==="Saturday Regular (12-10)"?"bg-gray-600":y(b.shift_type).replace("text-","bg-")}`})}),c.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[c.jsx("div",{className:"w-full overflow-hidden",children:c.jsx(fr,{className:"w-full",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap",children:[c.jsx(jr,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),c.jsx("span",{className:"font-medium text-gray-900",children:w(b.date)}),c.jsx("span",{className:`font-medium ${y(b.shift_type)}`,children:hC(b.shift_type)})]})})}),(()=>{var T,P;const C=jg(b.change_description||"",b.assigned_name);return C.isNameChange?c.jsx("div",{className:"w-full overflow-hidden",children:c.jsx("div",{className:"w-full overflow-hidden",children:c.jsx(fr,{text:"",className:"w-full",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap",children:[c.jsxs("div",{className:"flex items-center space-x-1 bg-red-100 px-2 py-1 rounded-lg border border-red-200 flex-shrink-0",children:[c.jsx(Br,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-red-700 font-semibold line-through text-xs",children:C.oldName})]}),c.jsx(SN,{className:"w-6 h-6 text-black bg-white rounded-full p-1 border-2 border-gray-300 shadow-md flex-shrink-0"}),c.jsxs("div",{className:"flex items-center space-x-1 bg-green-100 px-2 py-1 rounded-lg border border-green-200 flex-shrink-0",children:[c.jsx(Br,{className:"w-4 h-4 text-green-600"}),c.jsx("span",{className:"text-green-700 font-semibold text-xs",children:C.newName})]})]})})})}):c.jsx("div",{className:"w-full overflow-hidden",children:c.jsx(fr,{className:"w-full",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap",children:[c.jsx(Br,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),c.jsx("span",{className:"text-gray-900 font-medium",children:b.assigned_name}),c.jsx("span",{className:"text-gray-500",children:(T=b.change_description)!=null&&T.includes("Added by")?"was added to":(P=b.change_description)!=null&&P.includes("Removed by")?"was removed from":"was assigned to"}),c.jsx("span",{className:`font-medium ${y(b.shift_type)}`,children:b.shift_type})]})})})})(),b.change_description&&(jg(b.change_description,b.assigned_name).isNameChange?null:c.jsx("div",{className:"w-full overflow-hidden",children:c.jsx(fr,{className:"w-full",children:c.jsxs("div",{className:"text-xs text-gray-700 whitespace-nowrap",children:[c.jsx("span",{className:"font-medium",children:"Note:"})," ",b.change_description]})})})),c.jsx("div",{className:"w-full overflow-hidden",children:b.last_edited_by&&c.jsx(fr,{className:"w-full",children:c.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 whitespace-nowrap",children:[c.jsx(Br,{className:"w-3 h-3 text-blue-600 flex-shrink-0"}),c.jsxs("span",{className:"text-blue-700 font-medium",children:["Modified by ",b.last_edited_by]}),b.last_edited_at&&c.jsxs(c.Fragment,{children:[c.jsx(F1,{className:"w-3 h-3 text-gray-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700 font-medium",children:N(b.last_edited_at)})]})]})})})]})]})},b.id))})}),!e&&m.length>0&&c.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:c.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Showing ",m.length," ",s==="all"?"roster edit":"name change"," ",m.length===1?"entry":"entries",r!=="all"&&` for ${r}`," (sorted by latest edit first)"]})})]})};class _C{constructor(){zt(this,"pdfjsLib",null)}async initialize(){if(!this.pdfjsLib)try{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",document.head.appendChild(e),await new Promise((t,r)=>{e.onload=()=>{this.pdfjsLib=window.pdfjsLib,this.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",t(void 0)},e.onerror=r})}catch{throw new Error("Failed to load PDF.js library")}}async loadPDF(e){await this.initialize();const t=await e.arrayBuffer();return await this.pdfjsLib.getDocument({data:t}).promise}async extractTextFromPage(e){const t=e.getViewport({scale:1}),i=(await e.getTextContent()).items.map(s=>({text:s.str.trim(),x:s.transform[4],y:t.height-s.transform[5]})).filter(s=>s.text.length>0);return console.log(`📄 Extracted ${i.length} text items from page`),i}}class NC{parsePageAsBoxes(e){const t=[],r=this.findAllStaffNames(e);for(let i=0;i<r.length;i++){const s=r[i],o=this.findDateAboveStaff(e,s)||null,u=this.findShiftInFirstColumn(e,s)||null;t.push({date:o,shiftType:u,assignedName:s.name})}return t}findAllStaffNames(e){const t=[];for(const r of e){const i=this.findMatchingStaffName(r.text);i?t.push({name:i,x:r.x,y:r.y}):this.isPotentialRemarksText(r.text)}return t}isPotentialRemarksText(e){const t=e.toLowerCase();return["public","holiday","cyclone","testing","working","fine","emergency","special","event","celebration","festival"].some(i=>t.includes(i))||e.includes("*")||/^[A-Za-z\s]{10,}/.test(e)}findDateAboveStaff(e,t){const r=e.filter(i=>i.y<t.y&&Math.abs(i.x-t.x)<50);r.sort((i,s)=>{const a=Math.sqrt(Math.pow(t.y-i.y,2)+Math.pow(t.x-i.x,2)),o=Math.sqrt(Math.pow(t.y-s.y,2)+Math.pow(t.x-s.x,2));return a-o});for(const i of r){const s=this.extractDateFromText(i.text);if(s)return s.date}return null}findShiftInFirstColumn(e,t){const i=e.map(o=>o.x).sort((o,l)=>o-l)[0],s=i+100,a=e.filter(o=>o.x>=i&&o.x<=s&&Math.abs(o.y-t.y)<30);a.sort((o,l)=>{const u=Math.abs(t.y-o.y),d=Math.abs(t.y-l.y);return u-d});for(const o of a){const l=this.identifyShiftTypeFromText(o.text);if(l)return l}return null}extractDateFromText(e){const t=e.trim();console.log(`📅 DATE DEBUG: Analyzing text: "${t}"`);const r=/^(\d{1,2})\s+(\d{1,2})\s+(\d{4})$/,i=t.match(r);if(i){const[,$,L,M]=i,D=`${M}-${L.padStart(2,"0")}-${$.padStart(2,"0")}`,O=new Date(D);if(this.isValidDate(O,parseInt(M),parseInt(L),parseInt($)))return console.log(`📅 Parsed DD MM YYYY format: "${t}" -> ${D}`),{date:D,dayOfWeek:O.getDay()}}const s=/^(\d{1,2})-(\d{1,2})-(\d{4})$/,a=t.match(s);if(a){const[,$,L,M]=a,D=`${M}-${L.padStart(2,"0")}-${$.padStart(2,"0")}`,O=new Date(D);if(this.isValidDate(O,parseInt(M),parseInt(L),parseInt($)))return console.log(`📅 Parsed DD-MM-YYYY format: "${t}" -> ${D}`),{date:D,dayOfWeek:O.getDay()}}const o=/^(\d{1,2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{4})$/i,l=t.match(o);if(l){const[,$,L,M]=l,D=this.getMonthNumber(L);if(D!==-1){const O=`${M}-${D.toString().padStart(2,"0")}-${$.padStart(2,"0")}`,G=new Date(O);if(this.isValidDate(G,parseInt(M),D,parseInt($)))return console.log(`📅 Parsed DD-MMM-YYYY format: "${t}" -> ${O}`),{date:O,dayOfWeek:G.getDay()}}}const u=/^(\d{1,2})\s+(\d{1,2})\s+(\d{2})$/,d=t.match(u);if(d){const[,$,L,M]=d,D=parseInt(M)>50?`19${M}`:`20${M}`,O=`${D}-${L.padStart(2,"0")}-${$.padStart(2,"0")}`,G=new Date(O);if(this.isValidDate(G,parseInt(D),parseInt(L),parseInt($)))return console.log(`📅 Parsed DD MM YY format: "${t}" -> ${O}`),{date:O,dayOfWeek:G.getDay()}}const p=/^(\d{1,2})-(\d{1,2})-(\d{2})$/,m=t.match(p);if(m){const[,$,L,M]=m,D=parseInt(M)>50?`19${M}`:`20${M}`,O=`${D}-${L.padStart(2,"0")}-${$.padStart(2,"0")}`,G=new Date(O);if(this.isValidDate(G,parseInt(D),parseInt(L),parseInt($)))return console.log(`📅 Parsed DD-MM-YY format: "${t}" -> ${O}`),{date:O,dayOfWeek:G.getDay()}}const f=/^(\d{1,2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2})$/i,x=t.match(f);if(x){const[,$,L,M]=x,D=this.getMonthNumber(L);if(D!==-1){const O=parseInt(M)>50?`19${M}`:`20${M}`,G=`${O}-${D.toString().padStart(2,"0")}-${$.padStart(2,"0")}`,X=new Date(G);if(this.isValidDate(X,parseInt(O),D,parseInt($)))return console.log(`📅 Parsed DD-MMM-YY format: "${t}" -> ${G}`),{date:G,dayOfWeek:X.getDay()}}}const y=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,N=t.match(y);if(N){const[,$,L,M]=N,D=`${M}-${L.padStart(2,"0")}-${$.padStart(2,"0")}`,O=new Date(D);if(this.isValidDate(O,parseInt(M),parseInt(L),parseInt($)))return console.log(`📅 Parsed DD/MM/YYYY format: "${t}" -> ${D}`),{date:D,dayOfWeek:O.getDay()}}const w=/^(\d{1,2})\/(\d{1,2})\/(\d{2})$/,b=t.match(w);if(b){const[,$,L,M]=b,D=parseInt(M)>50?`19${M}`:`20${M}`,O=`${D}-${L.padStart(2,"0")}-${$.padStart(2,"0")}`,G=new Date(O);if(this.isValidDate(G,parseInt(D),parseInt(L),parseInt($)))return console.log(`📅 Parsed DD/MM/YY format: "${t}" -> ${O}`),{date:O,dayOfWeek:G.getDay()}}const _=/^(\d{1,2})\/(\d{1,2})\/(\d{2})$/,C=t.match(_);if(C){const[,$,L,M]=C,D=parseInt(M)>50?`19${M}`:`20${M}`,O=`${D}-${L.padStart(2,"0")}-${$.padStart(2,"0")}`,G=new Date(O);if(this.isValidDate(G,parseInt(D),parseInt(L),parseInt($)))return console.log(`📅 Parsed D/M/YY format: "${t}" -> ${O}`),{date:O,dayOfWeek:G.getDay()}}const T=/^(\d{1,2})\s+(\d{1,2})\s+(\d{4})$/;t.match(T);const P=/^(\d{1,2})\s+(\d{1,2})$/,A=t.match(P);if(A&&parseInt(A[1])>=1&&parseInt(A[1])<=31&&parseInt(A[2])>=1&&parseInt(A[2])<=12){const $=A[1].padStart(2,"0"),L=A[2].padStart(2,"0"),M=`2025-${L}-${$}`,D=new Date(M);return this.isValidDate(D,2025,parseInt(L),parseInt($))?(console.log(`📅 Parsed DD MM fallback format: "${t}" -> ${M}`),{date:M,dayOfWeek:D.getDay()}):this.isValidDate(D,2025,parseInt(L),parseInt($))?{date:M,dayOfWeek:D.getDay()}:(console.log(`⚠️ Invalid date detected: "${e}" -> ${M}, clearing date field`),null)}const j=/^(\d{1,2})$/,I=t.match(j);if(I&&parseInt(I[1])>=1&&parseInt(I[1])<=31){const $=I[1].padStart(2,"0"),L=`2025-07-${$}`,M=new Date(L);if(!this.isValidDate(M,2025,7,parseInt($)))return console.log(`⚠️ Invalid date detected: "${e}" -> ${L}, clearing date field`),null;if(this.isValidDate(M,2025,7,parseInt($)))return console.log(`📅 Parsed single day fallback format: "${t}" -> ${L}`),{date:L,dayOfWeek:M.getDay()}}return console.log(`❌ DATE DEBUG: No pattern matched for: "${t}"`),null}getMonthNumber(e){return{jan:1,january:1,feb:2,february:2,mar:3,march:3,apr:4,april:4,may:5,may:5,jun:6,june:6,jul:7,july:7,aug:8,august:8,sep:9,september:9,oct:10,october:10,nov:11,november:11,dec:12,december:12}[e.toLowerCase()]||-1}isValidDate(e,t,r,i){if(isNaN(e.getTime()))return!1;const s=e.getFullYear(),a=e.getMonth()+1,o=e.getDate(),l=s===t&&a===r&&o===i;return l||console.log("📅 Date validation failed:",{expected:{year:t,month:r,day:i},actual:{year:s,month:a,day:o},dateString:e.toISOString()}),l}identifyShiftTypeFromText(e){const t=e.toLowerCase();return t.includes("4-10")||t.includes("16hrs-22hrs")||t.includes("16-22")||t.includes("evening")||t.includes("4pm")||t.includes("16:")?"Evening Shift (4-10)":e.trim()==="N"||t==="night"||t==="n"?"Night Duty":t.includes("9-4")||t.includes("9hrs-16hrs")?"Morning Shift (9-4)":t.includes("12-10")||t.includes("12hrs-22hrs")?"Saturday Regular (12-10)":t.includes("22hrs-9hrs")||t.includes("22-9")?"Night Duty":t.includes("morning")?"Morning Shift (9-4)":t.includes("saturday")?"Saturday Regular (12-10)":t.includes("sunday")||t.includes("special")||t.includes("holiday")?"Sunday/Public Holiday/Special":t.includes("duty")||t.includes("night")?"Night Duty":null}findMatchingStaffName(e){const t=e.trim().toUpperCase();if(t.length<3)return null;const r=[/^\d+$/,/^[A-Z]{1,2}$/,/SHIFT/i,/DUTY/i,/MORNING/i,/EVENING/i,/NIGHT/i,/SATURDAY/i,/SUNDAY/i,/HRS/i,/^AM$/i,/^PM$/i,/DATE/i,/TIME/i];for(const i of r)if(i.test(t))return null;for(const i of yr)if(t===i)return console.log(`✅ EXACT MATCH: "${t}" exactly matches "${i}"`),i;for(const i of yr){const s=i.replace(/\(R\)$/,"").trim();if(t.replace(/\(R\)$/,"").trim()===s&&s.length>=3)if(t.includes("(R)")){const o=yr.find(l=>l===s+"(R)");if(o)return console.log(`✅ BASE NAME MATCH WITH (R): "${t}" matches "${o}"`),o}else{const o=yr.find(l=>l===s&&!l.includes("(R)"));if(o)return console.log(`✅ BASE NAME MATCH WITHOUT (R): "${t}" matches "${o}"`),o}}return console.log(`❌ NO MATCH: "${t}" does not match any staff name (tried both exact and base name matching)`),null}}class kC{parsePageAsList(e){console.log("📋 LIST PARSER: Starting list-based parsing...");const t=[],r=this.groupTextItemsByRows(e);console.log(`📋 Found ${r.length} rows in the PDF`);for(let i=0;i<r.length;i++){const s=r[i];if(console.log(`📋 Processing row ${i+1} with ${s.length} items`),this.isHeaderRow(s)){console.log(`📋 Skipping header row ${i+1}`);continue}const a=this.extractDataFromRow(s);a?(t.push(a),console.log(`✅ Extracted: ${a.assignedName} | ${a.shiftType} | ${a.date}`)):console.log(`❌ Could not extract data from row ${i+1}`)}return console.log(`📋 LIST PARSER: Extracted ${t.length} entries`),t}groupTextItemsByRows(e){const t=[...e].sort((o,l)=>l.y-o.y),r=[];let i=[],s=null;const a=15;for(const o of t)s===null||Math.abs(o.y-s)<=a?(i.push(o),s=o.y):(i.length>0&&(i.sort((l,u)=>l.x-u.x),r.push(i)),i=[o],s=o.y);return i.length>0&&(i.sort((o,l)=>o.x-l.x),r.push(i)),this.mergeMultilineRemarks(r)}mergeMultilineRemarks(e){for(let t=0;t<e.length;t++){const r=e[t];if(r.length>=7&&t<e.length-1){const i=e[t+1];if(this.isRemarksContinuation(r,i)){console.log(`📝 MULTILINE: Merging row ${t+1} with row ${t+2} for multiline remarks`);const s=i.filter(a=>this.isPotentialRemarksText(a.text)).map(a=>a.text.trim()).join(" ");if(s)if(r.length>6){const o=r.length-1;r[o]={...r[o],text:r[o].text+" "+s}}else r.push({text:s,x:i[0].x,y:i[0].y});t++}}}return e}isHeaderRow(e){const t=e.map(s=>s.text.toLowerCase()).join(" ");return["date","day","shift type","assigned staff","last edited","morning","evening","saturday","night duty","staff"].filter(s=>t.includes(s)).length>=2}extractDataFromRow(e){if(e.length<4)return console.log(`📋 Row too short (${e.length} items), skipping`),null;console.log("📋 EXTRACTING ROW DATA:",e.map(o=>`"${o.text}"`).join(" | "));let t=null,r=null,i=null;if(e.length>0){const o=this.extractDateFromText(e[0].text);o&&(t=o.date,console.log(`📅 Found date in column 1: ${t}`))}if(e.length>2){const o=this.identifyShiftTypeFromText(e[2].text);o&&(r=o,console.log(`⏰ Found shift in column 3: ${r}`))}if(e.length>3){const o=this.findMatchingStaffName(e[3].text);o&&(i=o,console.log(`👤 Found staff in column 4: ${i}`))}let s=null;if(e.length>=7){const o=e.slice(6).map(l=>l.text.trim()).filter(l=>l&&l!==""&&l.toLowerCase()!=="remarks");o.length>0&&(s=o.join(" ").trim(),console.log(`📝 Found multiline remarks: ${s}`))}if(!t){console.log("📅 Date not found in column 1, searching all columns...");for(let o=0;o<Math.min(3,e.length);o++){const l=this.extractDateFromText(e[o].text);if(l){t=l.date,console.log(`📅 Found date in column ${o+1}: ${t}`);break}}}if(!r){console.log("⏰ Shift not found in column 3, searching all columns...");for(let o=0;o<e.length;o++){const l=this.identifyShiftTypeFromText(e[o].text);if(l){r=l,console.log(`⏰ Found shift in column ${o+1}: ${r}`);break}}}if(!i){console.log("👤 Staff not found in column 4, searching all columns...");for(let o=0;o<e.length;o++){const l=this.findMatchingStaffName(e[o].text);if(l){i=l,console.log(`👤 Found staff in column ${o+1}: ${i}`);break}}}if(!t||!r||!i)return console.log(`❌ Missing required fields: date=${t}, shift=${r}, staff=${i}`),null;console.log(`✅ EXTRACTED ENTRY: ${i} | ${r} | ${t}`);const a={date:t,shiftType:r,assignedName:i};return s?a.changeDescription=`Special Date: ${s}; Imported from PDF`:a.changeDescription="Imported from PDF",a}extractDateFromText(e){const t=e.trim();console.log(`📅 DATE DEBUG: Analyzing text: "${t}"`);const r=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,i=t.match(r);if(i){const[,T,P,A]=i,j=`${A}-${P.padStart(2,"0")}-${T.padStart(2,"0")}`,I=new Date(j);if(this.isValidDate(I,parseInt(A),parseInt(P),parseInt(T)))return console.log(`📅 Parsed DD/MM/YYYY format: "${t}" -> ${j}`),{date:j,dayOfWeek:I.getDay()}}const s=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,a=t.match(s);if(a){const[,T,P,A]=a,j=`${A}-${P.padStart(2,"0")}-${T.padStart(2,"0")}`,I=new Date(j);if(this.isValidDate(I,parseInt(A),parseInt(P),parseInt(T)))return console.log(`📅 Parsed DD/MM/YYYY format: "${t}" -> ${j}`),{date:j,dayOfWeek:I.getDay()}}const o=/^(\d{1,2})\/(\d{1,2})\/(\d{2})$/,l=t.match(o);if(l){const[,T,P,A]=l,j=parseInt(A)>50?`19${A}`:`20${A}`,I=`${j}-${P.padStart(2,"0")}-${T.padStart(2,"0")}`,$=new Date(I);if(this.isValidDate($,parseInt(j),parseInt(P),parseInt(T)))return console.log(`📅 Parsed DD/MM/YY format: "${t}" -> ${I}`),{date:I,dayOfWeek:$.getDay()}}const u=/^(\d{1,2})-(\d{1,2})-(\d{4})$/,d=t.match(u);if(d){const[,T,P,A]=d,j=`${A}-${P.padStart(2,"0")}-${T.padStart(2,"0")}`,I=new Date(j);if(this.isValidDate(I,parseInt(A),parseInt(P),parseInt(T)))return console.log(`📅 Parsed DD-MM-YYYY format: "${t}" -> ${j}`),{date:j,dayOfWeek:I.getDay()}}const p=/^(\d{1,2})-(\d{1,2})-(\d{2})$/,m=t.match(p);if(m){const[,T,P,A]=m,j=parseInt(A)>50?`19${A}`:`20${A}`,I=`${j}-${P.padStart(2,"0")}-${T.padStart(2,"0")}`,$=new Date(I);if(this.isValidDate($,parseInt(j),parseInt(P),parseInt(T)))return console.log(`📅 Parsed DD-MM-YY format: "${t}" -> ${I}`),{date:I,dayOfWeek:$.getDay()}}const f=/^(\d{1,2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{4})$/i,x=t.match(f);if(x){const[,T,P,A]=x,j=this.getMonthNumber(P);if(j!==-1){const I=`${A}-${j.toString().padStart(2,"0")}-${T.padStart(2,"0")}`,$=new Date(I);if(this.isValidDate($,parseInt(A),j,parseInt(T)))return console.log(`📅 Parsed DD-MMM-YYYY format: "${t}" -> ${I}`),{date:I,dayOfWeek:$.getDay()}}}const y=/^(\d{1,2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2})$/i,N=t.match(y);if(N){const[,T,P,A]=N,j=this.getMonthNumber(P);if(j!==-1){const I=parseInt(A)>50?`19${A}`:`20${A}`,$=`${I}-${j.toString().padStart(2,"0")}-${T.padStart(2,"0")}`,L=new Date($);if(this.isValidDate(L,parseInt(I),j,parseInt(T)))return console.log(`📅 Parsed DD-MMM-YY format: "${t}" -> ${$}`),{date:$,dayOfWeek:L.getDay()}}}const w=/^(\d{1,2})\s+(\d{1,2})\s+(\d{4})$/,b=t.match(w);if(b){const[,T,P,A]=b,j=`${A}-${P.padStart(2,"0")}-${T.padStart(2,"0")}`,I=new Date(j);if(this.isValidDate(I,parseInt(A),parseInt(P),parseInt(T)))return console.log(`📅 Parsed DD MM YYYY format: "${t}" -> ${j}`),{date:j,dayOfWeek:I.getDay()}}const _=/^(\d{1,2})\s+(\d{1,2})\s+(\d{2})$/,C=t.match(_);if(C){const[,T,P,A]=C,j=parseInt(A)>50?`19${A}`:`20${A}`,I=`${j}-${P.padStart(2,"0")}-${T.padStart(2,"0")}`,$=new Date(I);if(this.isValidDate($,parseInt(j),parseInt(P),parseInt(T)))return console.log(`📅 Parsed DD MM YY format: "${t}" -> ${I}`),{date:I,dayOfWeek:$.getDay()}}return console.log(`❌ DATE DEBUG: No pattern matched for: "${t}"`),null}isRemarksContinuation(e,t){if(t.length>=e.length)return!1;const r=t.some(l=>this.extractDateFromText(l.text)),i=t.some(l=>this.identifyShiftTypeFromText(l.text)),s=t.some(l=>this.findMatchingStaffName(l.text));if(r||i||s)return!1;const a=t.some(l=>this.isPotentialRemarksText(l.text));return e.length>=7&&a}isPotentialRemarksText(e){const t=e.toLowerCase().trim();if(t.length<3)return!1;const r=[/^\d+$/,/^[A-Z]{1,3}$/,/SHIFT/i,/DUTY/i,/MORNING/i,/EVENING/i,/NIGHT/i,/SATURDAY/i,/SUNDAY/i,/DATE/i,/TIME/i,/STAFF/i,/EDITED/i,/LAST/i,/BY/i,/AT/i];for(const l of r)if(l.test(t))return!1;const s=["public","holiday","cyclone","testing","working","fine","emergency","special","event","celebration","festival","is","on","that","everything","and","the","for"].some(l=>t.includes(l)),a=e.includes("*"),o=e.length>=8&&/^[A-Za-z\s*]+$/.test(e);return s||a||o}getMonthNumber(e){return{jan:1,january:1,feb:2,february:2,mar:3,march:3,apr:4,april:4,may:5,may:5,jun:6,june:6,jul:7,july:7,aug:8,august:8,sep:9,september:9,oct:10,october:10,nov:11,november:11,dec:12,december:12}[e.toLowerCase()]||-1}isValidDate(e,t,r,i){if(isNaN(e.getTime()))return!1;const s=e.getFullYear(),a=e.getMonth()+1,o=e.getDate(),l=s===t&&a===r&&o===i;return l||console.log("📅 Date validation failed:",{expected:{year:t,month:r,day:i},actual:{year:s,month:a,day:o}}),l}isHeaderRow(e){const t=e.map(a=>a.text.toLowerCase()).join(" ");console.log(`📋 HEADER CHECK: Row text: "${t}"`);const i=["date","day","shift type","assigned staff","last edited","staff","type"].filter(a=>t.includes(a)).length,s=i>=2;return console.log(`📋 HEADER CHECK: Found ${i} header keywords, isHeader: ${s}`),s}identifyShiftTypeFromText(e){const t=e.toLowerCase();return console.log(`🔍 SHIFT DEBUG: Analyzing text: "${e}"`),t.includes("evening")&&t.includes("(4-10)")?"Evening Shift (4-10)":t.includes("morning")&&t.includes("(9-4)")?"Morning Shift (9-4)":t.includes("saturday")&&t.includes("(12-10)")?"Saturday Regular (12-10)":t.includes("evening")&&t.includes("4-10")?"Evening Shift (4-10)":t.includes("morning")&&t.includes("9-4")?"Morning Shift (9-4)":t.includes("saturday")&&t.includes("12-10")?"Saturday Regular (12-10)":t.includes("night duty")||t==="night duty"?"Night Duty":t.includes("sunday")||t.includes("public holiday")||t.includes("special")?"Sunday/Public Holiday/Special":t.includes("4-10")||t.includes("16-22")?"Evening Shift (4-10)":t.includes("9-4")||t.includes("9-16")?"Morning Shift (9-4)":t.includes("12-10")||t.includes("12-22")?"Saturday Regular (12-10)":t==="n"||t==="night"?"Night Duty":(console.log(`❌ SHIFT DEBUG: No pattern matched for: "${e}"`),null)}findMatchingStaffName(e){const t=e.trim().toUpperCase();if(console.log(`👤 STAFF DEBUG: Analyzing text: "${t}"`),t.length<3)return console.log(`👤 STAFF DEBUG: Text too short: "${t}"`),null;const r=[/^\d+$/,/^[A-Z]{1,2}$/,/SHIFT/i,/DUTY/i,/MORNING/i,/EVENING/i,/NIGHT/i,/SATURDAY/i,/SUNDAY/i,/HRS/i,/^AM$/i,/^PM$/i,/DATE/i,/TIME/i,/SYSTEM/i,/EDITED/i,/LAST/i,/BY/i,/AT/i];for(const i of r)if(i.test(t))return console.log(`👤 STAFF DEBUG: Skipping pattern match: "${t}" matches ${i}`),null;for(const i of yr)if(t===i)return console.log(`✅ EXACT MATCH: "${t}" exactly matches "${i}"`),i;for(const i of yr){const s=i.replace(/\(R\)$/,"").trim();if(t.replace(/\(R\)$/,"").trim()===s&&s.length>=3)if(t.includes("(R)")){const o=yr.find(l=>l===s+"(R)");if(o)return console.log(`✅ BASE NAME MATCH WITH (R): "${t}" matches "${o}"`),o}else{const o=yr.find(l=>l===s&&!l.includes("(R)"));if(o)return console.log(`✅ BASE NAME MATCH WITHOUT (R): "${t}" matches "${o}"`),o}}return console.log(`❌ NO MATCH: "${t}" does not match any staff name`),null}}class jC{constructor(){zt(this,"pdfLoader",new _C);zt(this,"boxParser",new NC);zt(this,"listParser",new kC)}async parsePDF(e){const t={entries:[],errors:[],warnings:[]};try{console.log("📄 Starting smart PDF parsing...");const r=await this.pdfLoader.loadPDF(e);console.log("📄 PDF loaded successfully, pages:",r.numPages);const i=[];for(let o=1;o<=r.numPages;o++){console.log(`📄 Processing page ${o}...`);const l=await r.getPage(o),u=await this.pdfLoader.extractTextFromPage(l),d=this.boxParser.parsePageAsBoxes(u),p=this.listParser.parsePageAsList(u);console.log(`📄 Page ${o} parsing results:`,{boxEntries:d.length,listEntries:p.length});const m=p.filter(y=>y.date&&y.date!==""&&y.date!==null),f=d.filter(y=>y.date&&y.date!==""&&y.date!==null),x=m.length>f.length?p:d;console.log(`📄 Page ${o}: Using ${m.length>f.length?"list":"box"} parser (${x.length} total entries, ${m.length>f.length?m.length:f.length} valid)`),i.push(...x)}t.entries=i.filter(o=>{const l=o.date&&o.date!==""&&o.date!==null,u=o.shiftType&&o.shiftType!==""&&o.shiftType!==null,d=o.assignedName&&o.assignedName!==""&&o.assignedName!==null;return l||console.log(`❌ FILTERING OUT: Missing date - ${o.assignedName||"unknown"} | ${o.shiftType||"unknown shift"}`),u||console.log(`❌ FILTERING OUT: Missing shift - ${o.assignedName||"unknown"} | ${o.date||"unknown date"}`),d||console.log(`❌ FILTERING OUT: Missing staff - ${o.date||"unknown date"} | ${o.shiftType||"unknown shift"}`),l&&u&&d}).map(o=>({date:o.date,shiftType:o.shiftType,assignedName:o.assignedName,changeDescription:o.changeDescription||"Imported from PDF"}));const s=new Map;t.entries.forEach(o=>{const l=`${o.date}-${o.shiftType}-${o.assignedName}`;s.has(l)?console.log(`🔄 DUPLICATE REMOVED: ${o.assignedName} | ${o.shiftType} | ${o.date}`):s.set(l,o)}),t.entries=Array.from(s.values()),console.log("📊 PARSING ANALYSIS:"),console.log(`📊 Total parsed entries: ${i.length}`),console.log(`📊 Valid entries (after filtering and deduplication): ${t.entries.length}`);const a=t.entries.reduce((o,l)=>(o[l.date]||(o[l.date]=[]),o[l.date].push(l),o),{});console.log("📊 FIRST 10 ENTRIES (to check date format):"),t.entries.slice(0,10).forEach((o,l)=>{console.log(`${l+1}. ${o.assignedName} | ${o.shiftType} | ${o.date}`)}),console.log("📄 Box-based PDF parsing completed successfully!")}catch(r){console.error("❌ PDF parsing error:",r),t.errors.push(`Failed to parse PDF: ${r instanceof Error?r.message:"Unknown error"}`)}return t.entries=this.applySaturdayShiftLogic(t.entries),t}applySaturdayShiftLogic(e){const t=e.reduce((i,s)=>(i[s.date]||(i[s.date]=[]),i[s.date].push(s),i),{}),r=[];return Object.entries(t).forEach(([i,s])=>{new Date(i).getDay()===6?s.some(u=>u.shiftType==="Morning Shift (9-4)")?s.forEach(u=>{r.push(u)}):s.forEach(u=>{u.shiftType==="Evening Shift (4-10)"?r.push({...u,shiftType:"Saturday Regular (12-10)",changeDescription:"Imported from PDF (Saturday 4-10 converted to 12-10)"}):r.push(u)}):s.forEach(l=>{r.push(l)})}),r}}const AC=new jC,CC=({isOpen:n,onClose:e,onImport:t,isAdminAuthenticated:r=!1,adminName:i=null})=>{const[s,a]=H.useState(null),[o,l]=H.useState(!1),[u,d]=H.useState(null),[p,m]=H.useState(!1),[f,x]=H.useState(""),[y,N]=H.useState(""),[w,b]=H.useState(!1),_=H.useRef(null),C=j=>{var $;const I=($=j.target.files)==null?void 0:$[0];I&&I.type==="application/pdf"?(a(I),d(null),N("")):alert("Please select a valid PDF file")},T=async()=>{if(s){l(!0);try{console.log("🔄 Starting PDF parsing...");const j=await AC.parsePDF(s);d(j),console.log("✅ PDF parsing completed:",j)}catch(j){console.error("❌ PDF parsing failed:",j),alert("Failed to parse PDF. Please try again.")}finally{l(!1)}}},P=async()=>{if(!(u!=null&&u.entries)||u.entries.length===0)return;let j;if(r&&i)j=i;else{if(!f)return;const I=ui(f);if(!I||!Ks(f)){N(I?"Admin access required for PDF import":"Invalid authentication code");return}j=I}m(!0);try{await t(u.entries,j),e(),a(null),d(null),x(""),N("")}catch(I){console.error("❌ Import failed:",I),alert("Failed to import roster data. Please try again.")}finally{m(!1)}},A=()=>{o||p||(a(null),d(null),x(""),N(""),e())};return n?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",style:{display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxWidth:window.innerWidth>window.innerHeight?"98vw":"32rem",maxHeight:window.innerWidth>window.innerHeight?"98vh":"90vh",margin:window.innerWidth>window.innerHeight?"2px 0":"16px 0",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsxs("div",{className:"relative pb-4 border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px",userSelect:"none",WebkitUserSelect:"none"},children:[!o&&!p&&c.jsx("button",{onClick:A,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Ar,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(es,{className:"w-6 h-6 text-blue-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Import Roster from PDF"}),c.jsx("p",{className:"text-sm text-gray-600 text-center",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Upload a PDF file to automatically extract roster data"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px",WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:[!s&&c.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[c.jsx(_f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select PDF File"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Choose a PDF file containing roster data"}),c.jsx("input",{ref:_,type:"file",accept:".pdf",onChange:C,className:"hidden"}),c.jsx("button",{onClick:()=>{var j;return(j=_.current)==null?void 0:j.click()},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:"Choose PDF File"})]}),s&&!u&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(es,{className:"w-8 h-8 text-blue-600"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),c.jsxs("p",{className:"text-sm text-gray-600",children:[(s.size/1024/1024).toFixed(2)," MB"]})]})]})}),c.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(In,{className:"w-5 h-5 text-amber-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h5",{className:"font-medium text-amber-800 mb-1",children:"PDF Import Requirements"}),c.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[c.jsx("li",{children:"• PDF should contain dates in DD/MM/YYYY format"}),c.jsx("li",{children:"• Shift types should be clearly mentioned (Morning, Evening, Night, etc.)"}),c.jsx("li",{children:"• Staff names should match the available names in the system"}),c.jsx("li",{children:"• Only admin users can import PDF data"})]})]})]})}),c.jsx("button",{onClick:T,disabled:o,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:o?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Parsing PDF..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(es,{className:"w-4 h-4"}),c.jsx("span",{children:"Parse PDF"})]})})]}),u&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Parsing Results"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.entries.length}),c.jsx("div",{className:"text-sm text-gray-600",children:"Entries Found"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-amber-600",children:u.warnings.length}),c.jsx("div",{className:"text-sm text-gray-600",children:"Warnings"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.errors.length}),c.jsx("div",{className:"text-sm text-gray-600",children:"Errors"})]})]})]}),u.errors.length>0&&c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsxs("h5",{className:"font-medium text-red-800 mb-2 flex items-center",children:[c.jsx(In,{className:"w-4 h-4 mr-2"}),"Errors (",u.errors.length,")"]}),c.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:u.errors.map((j,I)=>c.jsxs("li",{children:["• ",j]},I))})]}),u.warnings.length>0&&c.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[c.jsxs("h5",{className:"font-medium text-amber-800 mb-2 flex items-center",children:[c.jsx(In,{className:"w-4 h-4 mr-2"}),"Warnings (",u.warnings.length,")"]}),c.jsx("ul",{className:"text-sm text-amber-700 space-y-1",children:u.warnings.map((j,I)=>c.jsxs("li",{children:["• ",j]},I))})]}),u.entries.length>0&&c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsxs("h5",{className:"font-medium text-green-800 mb-3 flex items-center",children:[c.jsx(Io,{className:"w-4 h-4 mr-2"}),"Found Entries (",u.entries.length,")"]}),c.jsxs("div",{className:"max-h-40 overflow-y-auto",children:[u.entries.slice(0,10).map((j,I)=>c.jsxs("div",{className:"text-sm text-green-700 py-1 border-b border-green-200 last:border-b-0",children:[c.jsx("span",{className:"font-medium",children:j.date})," -",c.jsx("span",{className:"mx-1",children:j.shiftType})," -",c.jsx("span",{className:"font-medium",children:j.assignedName})]},I)),u.entries.length>10&&c.jsxs("div",{className:"text-sm text-green-600 py-1 italic",children:["... and ",u.entries.length-10," more entries"]})]})]}),(u==null?void 0:u.entries.length)>0&&!r&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Authentication Code (Required)"}),c.jsxs("div",{className:"flex justify-center space-x-3 mb-3",children:[[0,1,2,3].map(j=>c.jsx("input",{type:w?"text":"password",value:f[j]||"",onChange:I=>{const $=I.target.value.toUpperCase();if($.length<=1){const L=f.split("");if(L[j]=$,x(L.join("")),$&&j<3){const M=document.querySelector(`input[data-index="${j+1}"]`);M&&M.focus()}}},onKeyDown:I=>{if(I.key==="Backspace"&&!f[j]&&j>0){const $=document.querySelector(`input[data-index="${j-1}"]`);$&&$.focus()}},"data-index":j,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:j===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},j)),c.jsx("button",{type:"button",onTouchStart:()=>b(!0),onTouchEnd:()=>b(!1),onMouseDown:()=>b(!0),onMouseUp:()=>b(!1),onMouseLeave:()=>b(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg ml-2",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:w?c.jsx(Sc,{className:"w-5 h-5"}):c.jsx(_c,{className:"w-5 h-5"})})]})]}),y&&c.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:y})})]}),(u==null?void 0:u.entries.length)>0&&r&&c.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-green-700 text-center",children:["✅ Authenticated as: ",c.jsx("strong",{children:i})]})})]})]}),u&&u.entries.length>0&&c.jsx("div",{className:"flex-shrink-0 pt-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:A,disabled:p,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:P,disabled:p||!r&&(f.length<4||!Ks(f)),className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:p?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Io,{className:"w-4 h-4"}),c.jsx("span",{children:"Import PDF"})]})})]})})]})}):null};function Wt(n){"@babel/helpers - typeof";return Wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(n)}var gr=Uint8Array,oi=Uint16Array,dy=Int32Array,cp=new gr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),up=new gr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ag=new gr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yS=function(n,e){for(var t=new oi(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new dy(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},vS=yS(cp,2),xS=vS.b,Cg=vS.r;xS[28]=258,Cg[258]=28;var wS=yS(up,0),EC=wS.b,Bv=wS.r,Eg=new oi(32768);for(var nn=0;nn<32768;++nn){var ma=(nn&43690)>>1|(nn&21845)<<1;ma=(ma&52428)>>2|(ma&13107)<<2,ma=(ma&61680)>>4|(ma&3855)<<4,Eg[nn]=((ma&65280)>>8|(ma&255)<<8)>>1}var ws=function(n,e,t){for(var r=n.length,i=0,s=new oi(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new oi(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new oi(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],d=e-n[i],p=a[n[i]-1]++<<d,m=p|(1<<d)-1;p<=m;++p)o[Eg[p]>>l]=u}else for(o=new oi(r),i=0;i<r;++i)n[i]&&(o[i]=Eg[a[n[i]-1]++]>>15-n[i]);return o},Wa=new gr(288);for(var nn=0;nn<144;++nn)Wa[nn]=8;for(var nn=144;nn<256;++nn)Wa[nn]=9;for(var nn=256;nn<280;++nn)Wa[nn]=7;for(var nn=280;nn<288;++nn)Wa[nn]=8;var cd=new gr(32);for(var nn=0;nn<32;++nn)cd[nn]=5;var PC=ws(Wa,9,0),TC=ws(Wa,9,1),LC=ws(cd,5,0),DC=ws(cd,5,1),Y0=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Hi=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},V0=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},hy=function(n){return(n+7)/8|0},bS=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new gr(n.subarray(e,t))},MC=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Gi=function(n,e,t){var r=new Error(e||MC[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Gi),!t)throw r;return r},IC=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new gr(0);var a=!t,o=a||e.i!=2,l=e.i;a&&(t=new gr(i*3));var u=function(Te){var ze=t.length;if(Te>ze){var Ie=new gr(Math.max(ze*2,Te));Ie.set(t),t=Ie}},d=e.f||0,p=e.p||0,m=e.b||0,f=e.l,x=e.d,y=e.m,N=e.n,w=i*8;do{if(!f){d=Hi(n,p,1);var b=Hi(n,p+1,3);if(p+=3,b)if(b==1)f=TC,x=DC,y=9,N=5;else if(b==2){var P=Hi(n,p,31)+257,A=Hi(n,p+10,15)+4,j=P+Hi(n,p+5,31)+1;p+=14;for(var I=new gr(j),$=new gr(19),L=0;L<A;++L)$[Ag[L]]=Hi(n,p+L*3,7);p+=A*3;for(var M=Y0($),D=(1<<M)-1,O=ws($,M,1),L=0;L<j;){var G=O[Hi(n,p,D)];p+=G&15;var _=G>>4;if(_<16)I[L++]=_;else{var X=0,oe=0;for(_==16?(oe=3+Hi(n,p,3),p+=2,X=I[L-1]):_==17?(oe=3+Hi(n,p,7),p+=3):_==18&&(oe=11+Hi(n,p,127),p+=7);oe--;)I[L++]=X}}var J=I.subarray(0,P),ie=I.subarray(P);y=Y0(J),N=Y0(ie),f=ws(J,y,1),x=ws(ie,N,1)}else Gi(1);else{var _=hy(p)+4,C=n[_-4]|n[_-3]<<8,T=_+C;if(T>i){l&&Gi(0);break}o&&u(m+C),t.set(n.subarray(_,T),m),e.b=m+=C,e.p=p=T*8,e.f=d;continue}if(p>w){l&&Gi(0);break}}o&&u(m+131072);for(var ae=(1<<y)-1,Ne=(1<<N)-1,E=p;;E=p){var X=f[V0(n,p)&ae],q=X>>4;if(p+=X&15,p>w){l&&Gi(0);break}if(X||Gi(2),q<256)t[m++]=q;else if(q==256){E=p,f=null;break}else{var Y=q-254;if(q>264){var L=q-257,Z=cp[L];Y=Hi(n,p,(1<<Z)-1)+xS[L],p+=Z}var te=x[V0(n,p)&Ne],ce=te>>4;te||Gi(3),p+=te&15;var ie=EC[ce];if(ce>3){var Z=up[ce];ie+=V0(n,p)&(1<<Z)-1,p+=Z}if(p>w){l&&Gi(0);break}o&&u(m+131072);var ge=m+Y;if(m<ie){var de=s-ie,_e=Math.min(ie,ge);for(de+m<0&&Gi(3);m<_e;++m)t[m]=r[de+m]}for(;m<ge;++m)t[m]=t[m-ie]}}e.l=f,e.p=E,e.b=m,e.f=d,f&&(d=1,e.m=y,e.d=x,e.n=N)}while(!d);return m!=t.length&&a?bS(t,0,m):t.subarray(0,m)},Ls=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},fu=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},G0=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:_S,l:0};if(i==1){var a=new gr(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(T,P){return T.f-P.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],u=0,d=1,p=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=t[t[u].f<t[p].f?u++:p++],l=t[u!=d&&t[u].f<t[p].f?u++:p++],t[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=s[0].s,r=1;r<i;++r)s[r].s>m&&(m=s[r].s);var f=new oi(m+1),x=Pg(t[d-1],f,0);if(x>e){var r=0,y=0,N=x-e,w=1<<N;for(s.sort(function(P,A){return f[A.s]-f[P.s]||P.f-A.f});r<i;++r){var b=s[r].s;if(f[b]>e)y+=w-(1<<x-f[b]),f[b]=e;else break}for(y>>=N;y>0;){var _=s[r].s;f[_]<e?y-=1<<e-f[_]++-1:++r}for(;r>=0&&y;--r){var C=s[r].s;f[C]==e&&(--f[C],++y)}x=e}return{t:new gr(f),l:x}},Pg=function(n,e,t){return n.s==-1?Math.max(Pg(n.l,e,t+1),Pg(n.r,e,t+1)):e[n.s]=t},Uv=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new oi(++e),r=0,i=n[0],s=1,a=function(l){t[r++]=l},o=1;o<=e;++o)if(n[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=n[o]}return{c:t.subarray(0,r),n:e}},pu=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},SS=function(n,e,t){var r=t.length,i=hy(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},zv=function(n,e,t,r,i,s,a,o,l,u,d){Ls(e,d++,t),++i[256];for(var p=G0(i,15),m=p.t,f=p.l,x=G0(s,15),y=x.t,N=x.l,w=Uv(m),b=w.c,_=w.n,C=Uv(y),T=C.c,P=C.n,A=new oi(19),j=0;j<b.length;++j)++A[b[j]&31];for(var j=0;j<T.length;++j)++A[T[j]&31];for(var I=G0(A,7),$=I.t,L=I.l,M=19;M>4&&!$[Ag[M-1]];--M);var D=u+5<<3,O=pu(i,Wa)+pu(s,cd)+a,G=pu(i,m)+pu(s,y)+a+14+3*M+pu(A,$)+2*A[16]+3*A[17]+7*A[18];if(l>=0&&D<=O&&D<=G)return SS(e,d,n.subarray(l,l+u));var X,oe,J,ie;if(Ls(e,d,1+(G<O)),d+=2,G<O){X=ws(m,f,0),oe=m,J=ws(y,N,0),ie=y;var ae=ws($,L,0);Ls(e,d,_-257),Ls(e,d+5,P-1),Ls(e,d+10,M-4),d+=14;for(var j=0;j<M;++j)Ls(e,d+3*j,$[Ag[j]]);d+=3*M;for(var Ne=[b,T],E=0;E<2;++E)for(var q=Ne[E],j=0;j<q.length;++j){var Y=q[j]&31;Ls(e,d,ae[Y]),d+=$[Y],Y>15&&(Ls(e,d,q[j]>>5&127),d+=q[j]>>12)}}else X=PC,oe=Wa,J=LC,ie=cd;for(var j=0;j<o;++j){var Z=r[j];if(Z>255){var Y=Z>>18&31;fu(e,d,X[Y+257]),d+=oe[Y+257],Y>7&&(Ls(e,d,Z>>23&31),d+=cp[Y]);var te=Z&31;fu(e,d,J[te]),d+=ie[te],te>3&&(fu(e,d,Z>>5&8191),d+=up[te])}else fu(e,d,X[Z]),d+=oe[Z]}return fu(e,d,X[256]),d+oe[256]},RC=new dy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_S=new gr(0),FC=function(n,e,t,r,i,s){var a=s.z||n.length,o=new gr(r+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(r,o.length-i),u=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=RC[e-1],m=p>>13,f=p&8191,x=(1<<t)-1,y=s.p||new oi(32768),N=s.h||new oi(x+1),w=Math.ceil(t/3),b=2*w,_=function(nt){return(n[nt]^n[nt+1]<<w^n[nt+2]<<b)&x},C=new dy(25e3),T=new oi(288),P=new oi(32),A=0,j=0,I=s.i||0,$=0,L=s.w||0,M=0;I+2<a;++I){var D=_(I),O=I&32767,G=N[D];if(y[O]=G,N[D]=O,L<=I){var X=a-I;if((A>7e3||$>24576)&&(X>423||!u)){d=zv(n,l,0,C,T,P,j,$,M,I-M,d),$=A=j=0,M=I;for(var oe=0;oe<286;++oe)T[oe]=0;for(var oe=0;oe<30;++oe)P[oe]=0}var J=2,ie=0,ae=f,Ne=O-G&32767;if(X>2&&D==_(I-Ne))for(var E=Math.min(m,X)-1,q=Math.min(32767,I),Y=Math.min(258,X);Ne<=q&&--ae&&O!=G;){if(n[I+J]==n[I+J-Ne]){for(var Z=0;Z<Y&&n[I+Z]==n[I+Z-Ne];++Z);if(Z>J){if(J=Z,ie=Ne,Z>E)break;for(var te=Math.min(Ne,Z-2),ce=0,oe=0;oe<te;++oe){var ge=I-Ne+oe&32767,de=y[ge],_e=ge-de&32767;_e>ce&&(ce=_e,G=ge)}}}O=G,G=y[O],Ne+=O-G&32767}if(ie){C[$++]=268435456|Cg[J]<<18|Bv[ie];var Te=Cg[J]&31,ze=Bv[ie]&31;j+=cp[Te]+up[ze],++T[257+Te],++P[ze],L=I+J,++A}else C[$++]=n[I],++T[n[I]]}}for(I=Math.max(I,L);I<a;++I)C[$++]=n[I],++T[n[I]];d=zv(n,l,u,C,T,P,j,$,M,I-M,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=N,s.p=y,s.i=I,s.w=L)}else{for(var I=s.w||0;I<a+u;I+=65535){var Ie=I+65535;Ie>=a&&(l[d/8|0]=u,Ie=a),d=SS(l,d+1,n.subarray(I,Ie))}s.i=a}return bS(o,0,r+hy(d)+i)},NS=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=t[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},OC=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new gr(s.length+n.length);a.set(s),a.set(n,s.length),n=a,i.w=s.length}return FC(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},kS=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},$C=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=NS();i.p(e.dictionary),kS(n,2,i.d())}},BC=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Gi(6,"invalid zlib data"),(n[1]>>5&1)==1&&Gi(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Tg(n,e){e||(e={});var t=NS();t.p(n);var r=OC(n,e,e.dictionary?6:2,4);return $C(r,e),kS(r,r.length-4,t.d()),r}function UC(n,e){return IC(n.subarray(BC(n),-4),{i:2},e,e)}var zC=typeof TextDecoder<"u"&&new TextDecoder,WC=0;try{zC.decode(_S,{stream:!0}),WC=1}catch{}var dt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function J0(){dt.console&&typeof dt.console.log=="function"&&dt.console.log.apply(dt.console,arguments)}var Jt={log:J0,warn:function(n){dt.console&&(typeof dt.console.warn=="function"?dt.console.warn.apply(dt.console,arguments):J0.call(null,arguments))},error:function(n){dt.console&&(typeof dt.console.error=="function"?dt.console.error.apply(dt.console,arguments):J0(n))}};function K0(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){mo(r.response,e,t)},r.onerror=function(){Jt.error("could not download file")},r.send()}function Wv(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Eh(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Ru,Lg,mo=dt.saveAs||((typeof window>"u"?"undefined":Wt(window))!=="object"||window!==dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=dt.URL||dt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?Wv(i.href)?K0(n,e,t):Eh(i,i.target="_blank"):Eh(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Eh(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Wv(n))K0(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Eh(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Wt(s)!=="object"&&(Jt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return K0(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(dt.HTMLElement)||dt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Wt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(n)}else{var l=dt.URL||dt.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jS(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,a=i.exec(n);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function X0(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=or(t,r,i,s,e[0],7,-680876936),s=or(s,t,r,i,e[1],12,-389564586),i=or(i,s,t,r,e[2],17,606105819),r=or(r,i,s,t,e[3],22,-1044525330),t=or(t,r,i,s,e[4],7,-176418897),s=or(s,t,r,i,e[5],12,1200080426),i=or(i,s,t,r,e[6],17,-1473231341),r=or(r,i,s,t,e[7],22,-45705983),t=or(t,r,i,s,e[8],7,1770035416),s=or(s,t,r,i,e[9],12,-1958414417),i=or(i,s,t,r,e[10],17,-42063),r=or(r,i,s,t,e[11],22,-1990404162),t=or(t,r,i,s,e[12],7,1804603682),s=or(s,t,r,i,e[13],12,-40341101),i=or(i,s,t,r,e[14],17,-1502002290),t=lr(t,r=or(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=lr(s,t,r,i,e[6],9,-1069501632),i=lr(i,s,t,r,e[11],14,643717713),r=lr(r,i,s,t,e[0],20,-373897302),t=lr(t,r,i,s,e[5],5,-701558691),s=lr(s,t,r,i,e[10],9,38016083),i=lr(i,s,t,r,e[15],14,-660478335),r=lr(r,i,s,t,e[4],20,-405537848),t=lr(t,r,i,s,e[9],5,568446438),s=lr(s,t,r,i,e[14],9,-1019803690),i=lr(i,s,t,r,e[3],14,-187363961),r=lr(r,i,s,t,e[8],20,1163531501),t=lr(t,r,i,s,e[13],5,-1444681467),s=lr(s,t,r,i,e[2],9,-51403784),i=lr(i,s,t,r,e[7],14,1735328473),t=cr(t,r=lr(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=cr(s,t,r,i,e[8],11,-2022574463),i=cr(i,s,t,r,e[11],16,1839030562),r=cr(r,i,s,t,e[14],23,-35309556),t=cr(t,r,i,s,e[1],4,-1530992060),s=cr(s,t,r,i,e[4],11,1272893353),i=cr(i,s,t,r,e[7],16,-155497632),r=cr(r,i,s,t,e[10],23,-1094730640),t=cr(t,r,i,s,e[13],4,681279174),s=cr(s,t,r,i,e[0],11,-358537222),i=cr(i,s,t,r,e[3],16,-722521979),r=cr(r,i,s,t,e[6],23,76029189),t=cr(t,r,i,s,e[9],4,-640364487),s=cr(s,t,r,i,e[12],11,-421815835),i=cr(i,s,t,r,e[15],16,530742520),t=ur(t,r=cr(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=ur(s,t,r,i,e[7],10,1126891415),i=ur(i,s,t,r,e[14],15,-1416354905),r=ur(r,i,s,t,e[5],21,-57434055),t=ur(t,r,i,s,e[12],6,1700485571),s=ur(s,t,r,i,e[3],10,-1894986606),i=ur(i,s,t,r,e[10],15,-1051523),r=ur(r,i,s,t,e[1],21,-2054922799),t=ur(t,r,i,s,e[8],6,1873313359),s=ur(s,t,r,i,e[15],10,-30611744),i=ur(i,s,t,r,e[6],15,-1560198380),r=ur(r,i,s,t,e[13],21,1309151649),t=ur(t,r,i,s,e[4],6,-145523070),s=ur(s,t,r,i,e[11],10,-1120210379),i=ur(i,s,t,r,e[2],15,718787259),r=ur(r,i,s,t,e[9],21,-343485551),n[0]=Ca(t,n[0]),n[1]=Ca(r,n[1]),n[2]=Ca(i,n[2]),n[3]=Ca(s,n[3])}function dp(n,e,t,r,i,s){return e=Ca(Ca(e,n),Ca(r,s)),Ca(e<<i|e>>>32-i,t)}function or(n,e,t,r,i,s,a){return dp(e&t|~e&r,n,e,i,s,a)}function lr(n,e,t,r,i,s,a){return dp(e&r|t&~r,n,e,i,s,a)}function cr(n,e,t,r,i,s,a){return dp(e^t^r,n,e,i,s,a)}function ur(n,e,t,r,i,s,a){return dp(t^(e|~r),n,e,i,s,a)}function AS(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)X0(r,HC(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(X0(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,X0(r,i),r}function HC(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Ru=dt.atob.bind(dt),Lg=dt.btoa.bind(dt);var Hv="0123456789abcdef".split("");function qC(n){for(var e="",t=0;t<4;t++)e+=Hv[n>>8*t+4&15]+Hv[n>>8*t&15];return e}function YC(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Dg(n){return AS(n).map(YC).join("")}var VC=function(n){for(var e=0;e<n.length;e++)n[e]=qC(n[e]);return n.join("")}(AS("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ca(n,e){if(VC){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Mg(n,e){var t,r,i,s;if(n!==t){for(var a=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+a.charCodeAt(l))%256,o[l]=o[u],o[u]=d}t=n,r=o}else o=r;var p=e.length,m=0,f=0,x="";for(l=0;l<p;l++)f=(f+(d=o[m=(m+1)%256]))%256,o[m]=o[f],o[f]=d,a=o[(o[m]+o[f])%256],x+=String.fromCharCode(e.charCodeAt(l)^a);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var qv={print:4,modify:8,copy:16,"annot-forms":32};function Al(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(o){if(qv.perm!==void 0)throw new Error("Invalid permission: "+o);i+=qv[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=Dg(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Mg(this.encryptionKey,this.padding)}function Cl(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function Yv(n){if(Wt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(n,r)}catch(o){dt.console&&Jt.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Df(n){if(!(this instanceof Df))return new Df(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function CS(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function yo(n,e,t,r,i){if(!(this instanceof yo))return new yo(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,CS.call(this,r,i)}function Hl(n,e,t,r,i){if(!(this instanceof Hl))return new Hl(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,CS.call(this,r,i)}function it(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,u="S",d=null;Wt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=Yv;var x="1.3",y=f.__private__.getPdfVersion=function(){return x};f.__private__.setPdfVersion=function(v){x=v};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return N};var w=f.__private__.getPageFormat=function(v){return N[v]};i=i||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},_=b.COMPAT;function C(){this.saveGraphicsState(),Q(new lt(We,0,0,-We,0,ta()*We).toString()+" cm"),this.setFontSize(this.getFontSize()/We),u="n",_=b.ADVANCED}function T(){this.restoreGraphicsState(),u="S",_=b.COMPAT}var P=f.__private__.combineFontStyleAndFontWeight=function(v,F){if(v=="bold"&&F=="normal"||v=="bold"&&F==400||v=="normal"&&F=="italic"||v=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(v=F==400||F==="normal"?v==="italic"?"italic":"normal":F!=700&&F!=="bold"||v!=="normal"?(F==700?"bold":F)+""+v:"bold"),v};f.advancedAPI=function(v){var F=_===b.COMPAT;return F&&C.call(this),typeof v!="function"||(v(this),F&&T.call(this)),this},f.compatAPI=function(v){var F=_===b.ADVANCED;return F&&T.call(this),typeof v!="function"||(v(this),F&&C.call(this)),this},f.isAdvancedAPI=function(){return _===b.ADVANCED};var A,j=function(v){if(_!==b.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=f.roundToPrecision=f.__private__.roundToPrecision=function(v,F){var K=e||F;if(isNaN(v)||isNaN(K))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(K).replace(/0+$/,"")};A=f.hpf=f.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return I(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return I(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return I(v,16)};var $=f.f2=f.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return I(v,2)},L=f.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return I(v,3)},M=f.scale=f.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return _===b.COMPAT?v*We:_===b.ADVANCED?v:void 0},D=function(v){return _===b.COMPAT?ta()-v:_===b.ADVANCED?v:void 0},O=function(v){return M(D(v))};f.__private__.setPrecision=f.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var G,X="00000000000000000000000000000000",oe=f.__private__.getFileId=function(){return X},J=f.__private__.setFileId=function(v){return X=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(rr=new Al(d.userPermissions,d.userPassword,d.ownerPassword,X)),X};f.setFileId=function(v){return J(v),this},f.getFileId=function(){return oe()};var ie=f.__private__.convertDateToPDFDate=function(v){var F=v.getTimezoneOffset(),K=F<0?"+":"-",ne=Math.floor(Math.abs(F/60)),pe=Math.abs(F%60),Se=[K,Y(ne),"'",Y(pe),"'"].join("");return["D:",v.getFullYear(),Y(v.getMonth()+1),Y(v.getDate()),Y(v.getHours()),Y(v.getMinutes()),Y(v.getSeconds()),Se].join("")},ae=f.__private__.convertPDFDateToDate=function(v){var F=parseInt(v.substr(2,4),10),K=parseInt(v.substr(6,2),10)-1,ne=parseInt(v.substr(8,2),10),pe=parseInt(v.substr(10,2),10),Se=parseInt(v.substr(12,2),10),De=parseInt(v.substr(14,2),10);return new Date(F,K,ne,pe,Se,De,0)},Ne=f.__private__.setCreationDate=function(v){var F;if(v===void 0&&(v=new Date),v instanceof Date)F=ie(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=v}return G=F},E=f.__private__.getCreationDate=function(v){var F=G;return v==="jsDate"&&(F=ae(G)),F};f.setCreationDate=function(v){return Ne(v),this},f.getCreationDate=function(v){return E(v)};var q,Y=f.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},Z=f.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},te=0,ce=[],ge=[],de=0,_e=[],Te=[],ze=!1,Ie=ge,nt=function(){te=0,de=0,ge=[],ce=[],_e=[],_t=et(),$t=et()};f.__private__.setCustomOutputDestination=function(v){ze=!0,Ie=v};var we=function(v){ze||(Ie=v)};f.__private__.resetCustomOutputDestination=function(){ze=!1,Ie=ge};var Q=f.__private__.out=function(v){return v=v.toString(),de+=v.length+1,Ie.push(v),Ie},st=f.__private__.write=function(v){return Q(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},qe=f.__private__.getArrayBuffer=function(v){for(var F=v.length,K=new ArrayBuffer(F),ne=new Uint8Array(K);F--;)ne[F]=v.charCodeAt(F);return K},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Le};var Me=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(v){return Me=_===b.ADVANCED?v/We:v,this};var ee,he=f.__private__.getFontSize=f.getFontSize=function(){return _===b.COMPAT?Me:Me*We},xe=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(v){return xe=v,this},f.__private__.getR2L=f.getR2L=function(){return xe};var ke,Ae=f.__private__.setZoomMode=function(v){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))ee=v;else if(isNaN(v)){if(F.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');ee=v}else ee=parseInt(v,10)};f.__private__.getZoomMode=function(){return ee};var Ze,Be=f.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');ke=v};f.__private__.getPageMode=function(){return ke};var rt=f.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Ze=v};f.__private__.getLayoutMode=function(){return Ze},f.__private__.setDisplayMode=f.setDisplayMode=function(v,F,K){return Ae(v),rt(F),Be(K),this};var Ve={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(v){if(Object.keys(Ve).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ve[v]},f.__private__.getDocumentProperties=function(){return Ve},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(v){for(var F in Ve)Ve.hasOwnProperty(F)&&v[F]&&(Ve[F]=v[F]);return this},f.__private__.setDocumentProperty=function(v,F){if(Object.keys(Ve).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ve[v]=F};var ut,We,Yt,Nt,$n,Et={},Mt={},Bn=[],Oe={},kt={},ht={},me={},Fe=null,$e=0,Ue=[],Ke=new Yv(f),Tt=n.hotfixes||[],St={},gi={},Fi=[],lt=function v(F,K,ne,pe,Se,De){if(!(this instanceof v))return new v(F,K,ne,pe,Se,De);isNaN(F)&&(F=1),isNaN(K)&&(K=0),isNaN(ne)&&(ne=0),isNaN(pe)&&(pe=1),isNaN(Se)&&(Se=0),isNaN(De)&&(De=0),this._matrix=[F,K,ne,pe,Se,De]};Object.defineProperty(lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),lt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(v)},lt.prototype.multiply=function(v){var F=v.sx*this.sx+v.shy*this.shx,K=v.sx*this.shy+v.shy*this.sy,ne=v.shx*this.sx+v.sy*this.shx,pe=v.shx*this.shy+v.sy*this.sy,Se=v.tx*this.sx+v.ty*this.shx+this.tx,De=v.tx*this.shy+v.ty*this.sy+this.ty;return new lt(F,K,ne,pe,Se,De)},lt.prototype.decompose=function(){var v=this.sx,F=this.shy,K=this.shx,ne=this.sy,pe=this.tx,Se=this.ty,De=Math.sqrt(v*v+F*F),Ge=(v/=De)*K+(F/=De)*ne;K-=v*Ge,ne-=F*Ge;var ot=Math.sqrt(K*K+ne*ne);return Ge/=ot,v*(ne/=ot)<F*(K/=ot)&&(v=-v,F=-F,Ge=-Ge,De=-De),{scale:new lt(De,0,0,ot,0,0),translate:new lt(1,0,0,1,pe,Se),rotate:new lt(v,F,-F,v,0,0),skew:new lt(1,0,Ge,1,0,0)}},lt.prototype.toString=function(v){return this.join(" ")},lt.prototype.inversed=function(){var v=this.sx,F=this.shy,K=this.shx,ne=this.sy,pe=this.tx,Se=this.ty,De=1/(v*ne-F*K),Ge=ne*De,ot=-F*De,xt=-K*De,yt=v*De;return new lt(Ge,ot,xt,yt,-Ge*pe-xt*Se,-ot*pe-yt*Se)},lt.prototype.applyToPoint=function(v){var F=v.x*this.sx+v.y*this.shx+this.tx,K=v.x*this.shy+v.y*this.sy+this.ty;return new el(F,K)},lt.prototype.applyToRectangle=function(v){var F=this.applyToPoint(v),K=this.applyToPoint(new el(v.x+v.w,v.y+v.h));return new Fc(F.x,F.y,K.x-F.x,K.y-F.y)},lt.prototype.clone=function(){var v=this.sx,F=this.shy,K=this.shx,ne=this.sy,pe=this.tx,Se=this.ty;return new lt(v,F,K,ne,pe,Se)},f.Matrix=lt;var fe=f.matrixMult=function(v,F){return F.multiply(v)},Xe=new lt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Xe;var mt=function(v,F){if(!kt[v]){var K=(F instanceof yo?"Sh":"P")+(Object.keys(Oe).length+1).toString(10);F.id=K,kt[v]=K,Oe[K]=F,Ke.publish("addPattern",F)}};f.ShadingPattern=yo,f.TilingPattern=Hl,f.addShadingPattern=function(v,F){return j("addShadingPattern()"),mt(v,F),this},f.beginTilingPattern=function(v){j("beginTilingPattern()"),Rd(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},f.endTilingPattern=function(v,F){j("endTilingPattern()"),F.stream=Te[q].join(`
`),mt(v,F),Ke.publish("endTilingPattern",F),Fi.pop().restore()};var at=f.__private__.newObject=function(){var v=et();return gt(v,!0),v},et=f.__private__.newObjectDeferred=function(){return te++,ce[te]=function(){return de},te},gt=function(v,F){return F=typeof F=="boolean"&&F,ce[v]=de,F&&Q(v+" 0 obj"),v},jt=f.__private__.newAdditionalObject=function(){var v={objId:et(),content:""};return _e.push(v),v},_t=et(),$t=et(),wn=f.__private__.decodeColorString=function(v){var F=v.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var K=parseFloat(F[0]);F=[K,K,K,"r"]}for(var ne="#",pe=0;pe<3;pe++)ne+=("0"+Math.floor(255*parseFloat(F[pe])).toString(16)).slice(-2);return ne},Un=f.__private__.encodeColorString=function(v){var F;typeof v=="string"&&(v={ch1:v});var K=v.ch1,ne=v.ch2,pe=v.ch3,Se=v.ch4,De=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof K=="string"&&K.charAt(0)!=="#"){var Ge=new jS(K);if(Ge.ok)K=Ge.toHex();else if(!/^\d*\.?\d*$/.test(K))throw new Error('Invalid color "'+K+'" passed to jsPDF.encodeColorString.')}if(typeof K=="string"&&/^#[0-9A-Fa-f]{3}$/.test(K)&&(K="#"+K[1]+K[1]+K[2]+K[2]+K[3]+K[3]),typeof K=="string"&&/^#[0-9A-Fa-f]{6}$/.test(K)){var ot=parseInt(K.substr(1),16);K=ot>>16&255,ne=ot>>8&255,pe=255&ot}if(ne===void 0||Se===void 0&&K===ne&&ne===pe)if(typeof K=="string")F=K+" "+De[0];else switch(v.precision){case 2:F=$(K/255)+" "+De[0];break;case 3:default:F=L(K/255)+" "+De[0]}else if(Se===void 0||Wt(Se)==="object"){if(Se&&!isNaN(Se.a)&&Se.a===0)return F=["1.","1.","1.",De[1]].join(" ");if(typeof K=="string")F=[K,ne,pe,De[1]].join(" ");else switch(v.precision){case 2:F=[$(K/255),$(ne/255),$(pe/255),De[1]].join(" ");break;default:case 3:F=[L(K/255),L(ne/255),L(pe/255),De[1]].join(" ")}}else if(typeof K=="string")F=[K,ne,pe,Se,De[2]].join(" ");else switch(v.precision){case 2:F=[$(K),$(ne),$(pe),$(Se),De[2]].join(" ");break;case 3:default:F=[L(K),L(ne),L(pe),L(Se),De[2]].join(" ")}return F},Pr=f.__private__.getFilters=function(){return a},Tr=f.__private__.putStream=function(v){var F=(v=v||{}).data||"",K=v.filters||Pr(),ne=v.alreadyAppliedFilters||[],pe=v.addLength1||!1,Se=F.length,De=v.objectId,Ge=function(ir){return ir};if(d!==null&&De===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ge=rr.encryptor(De,0));var ot={};K===!0&&(K=["FlateEncode"]);var xt=v.additionalKeyValues||[],yt=(ot=it.API.processDataByFilters!==void 0?it.API.processDataByFilters(F,K):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(ne)?ne.join(" "):ne.toString());if(ot.data.length!==0&&(xt.push({key:"Length",value:ot.data.length}),pe===!0&&xt.push({key:"Length1",value:Se})),yt.length!=0)if(yt.split("/").length-1==1)xt.push({key:"Filter",value:yt});else{xt.push({key:"Filter",value:"["+yt+"]"});for(var Dt=0;Dt<xt.length;Dt+=1)if(xt[Dt].key==="DecodeParms"){for(var on=[],pn=0;pn<ot.reverseChain.split("/").length-1;pn+=1)on.push("null");on.push(xt[Dt].value),xt[Dt].value="["+on.join(" ")+"]"}}Q("<<");for(var En=0;En<xt.length;En++)Q("/"+xt[En].key+" "+xt[En].value);Q(">>"),ot.data.length!==0&&(Q("stream"),Q(Ge(ot.data)),Q("endstream"))},yi=f.__private__.putPage=function(v){var F=v.number,K=v.data,ne=v.objId,pe=v.contentsObjId;gt(ne,!0),Q("<</Type /Page"),Q("/Parent "+v.rootDictionaryObjId+" 0 R"),Q("/Resources "+v.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(A(v.mediaBox.bottomLeftX))+" "+parseFloat(A(v.mediaBox.bottomLeftY))+" "+A(v.mediaBox.topRightX)+" "+A(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&Q("/CropBox ["+A(v.cropBox.bottomLeftX)+" "+A(v.cropBox.bottomLeftY)+" "+A(v.cropBox.topRightX)+" "+A(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&Q("/BleedBox ["+A(v.bleedBox.bottomLeftX)+" "+A(v.bleedBox.bottomLeftY)+" "+A(v.bleedBox.topRightX)+" "+A(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&Q("/TrimBox ["+A(v.trimBox.bottomLeftX)+" "+A(v.trimBox.bottomLeftY)+" "+A(v.trimBox.topRightX)+" "+A(v.trimBox.topRightY)+"]"),v.artBox!==null&&Q("/ArtBox ["+A(v.artBox.bottomLeftX)+" "+A(v.artBox.bottomLeftY)+" "+A(v.artBox.topRightX)+" "+A(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&Q("/UserUnit "+v.userUnit),Ke.publish("putPage",{objId:ne,pageContext:Ue[F],pageNumber:F,page:K}),Q("/Contents "+pe+" 0 R"),Q(">>"),Q("endobj");var Se=K.join(`
`);return _===b.ADVANCED&&(Se+=`
Q`),gt(pe,!0),Tr({data:Se,filters:Pr(),objectId:pe}),Q("endobj"),ne},vi=f.__private__.putPages=function(){var v,F,K=[];for(v=1;v<=$e;v++)Ue[v].objId=et(),Ue[v].contentsObjId=et();for(v=1;v<=$e;v++)K.push(yi({number:v,data:Te[v],objId:Ue[v].objId,contentsObjId:Ue[v].contentsObjId,mediaBox:Ue[v].mediaBox,cropBox:Ue[v].cropBox,bleedBox:Ue[v].bleedBox,trimBox:Ue[v].trimBox,artBox:Ue[v].artBox,userUnit:Ue[v].userUnit,rootDictionaryObjId:_t,resourceDictionaryObjId:$t}));gt(_t,!0),Q("<</Type /Pages");var ne="/Kids [";for(F=0;F<$e;F++)ne+=K[F]+" 0 R ";Q(ne+"]"),Q("/Count "+$e),Q(">>"),Q("endobj"),Ke.publish("postPutPages")},zo=function(v){Ke.publish("putFont",{font:v,out:Q,newObject:at,putStream:Tr}),v.isAlreadyPutted!==!0&&(v.objectNumber=at(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Cl(v.postScriptName)),Q("/Subtype /Type1"),typeof v.encoding=="string"&&Q("/Encoding /"+v.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},Wo=function(){for(var v in Et)Et.hasOwnProperty(v)&&(p===!1||p===!0&&m.hasOwnProperty(v))&&zo(Et[v])},Ho=function(v){v.objectNumber=at();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[A(v.x),A(v.y),A(v.x+v.width),A(v.y+v.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var K=v.pages[1].join(`
`);Tr({data:K,additionalKeyValues:F,objectId:v.objectNumber}),Q("endobj")},qo=function(){for(var v in St)St.hasOwnProperty(v)&&Ho(St[v])},vd=function(v,F){var K,ne=[],pe=1/(F-1);for(K=0;K<1;K+=pe)ne.push(K);if(ne.push(1),v[0].offset!=0){var Se={offset:0,color:v[0].color};v.unshift(Se)}if(v[v.length-1].offset!=1){var De={offset:1,color:v[v.length-1].color};v.push(De)}for(var Ge="",ot=0,xt=0;xt<ne.length;xt++){for(K=ne[xt];K>v[ot+1].offset;)ot++;var yt=v[ot].offset,Dt=(K-yt)/(v[ot+1].offset-yt),on=v[ot].color,pn=v[ot+1].color;Ge+=Z(Math.round((1-Dt)*on[0]+Dt*pn[0]).toString(16))+Z(Math.round((1-Dt)*on[1]+Dt*pn[1]).toString(16))+Z(Math.round((1-Dt)*on[2]+Dt*pn[2]).toString(16))}return Ge.trim()},yp=function(v,F){F||(F=21);var K=at(),ne=vd(v.colors,F),pe=[];pe.push({key:"FunctionType",value:"0"}),pe.push({key:"Domain",value:"[0.0 1.0]"}),pe.push({key:"Size",value:"["+F+"]"}),pe.push({key:"BitsPerSample",value:"8"}),pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Tr({data:ne,additionalKeyValues:pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:K}),Q("endobj"),v.objectNumber=at(),Q("<< /ShadingType "+v.type),Q("/ColorSpace /DeviceRGB");var Se="/Coords ["+A(parseFloat(v.coords[0]))+" "+A(parseFloat(v.coords[1]))+" ";v.type===2?Se+=A(parseFloat(v.coords[2]))+" "+A(parseFloat(v.coords[3])):Se+=A(parseFloat(v.coords[2]))+" "+A(parseFloat(v.coords[3]))+" "+A(parseFloat(v.coords[4]))+" "+A(parseFloat(v.coords[5])),Q(Se+="]"),v.matrix&&Q("/Matrix ["+v.matrix.toString()+"]"),Q("/Function "+K+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},vp=function(v,F){var K=et(),ne=at();F.push({resourcesOid:K,objectOid:ne}),v.objectNumber=ne;var pe=[];pe.push({key:"Type",value:"/Pattern"}),pe.push({key:"PatternType",value:"1"}),pe.push({key:"PaintType",value:"1"}),pe.push({key:"TilingType",value:"1"}),pe.push({key:"BBox",value:"["+v.boundingBox.map(A).join(" ")+"]"}),pe.push({key:"XStep",value:A(v.xStep)}),pe.push({key:"YStep",value:A(v.yStep)}),pe.push({key:"Resources",value:K+" 0 R"}),v.matrix&&pe.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Tr({data:v.stream,additionalKeyValues:pe,objectId:v.objectNumber}),Q("endobj")},Yo=function(v){var F;for(F in Oe)Oe.hasOwnProperty(F)&&(Oe[F]instanceof yo?yp(Oe[F]):Oe[F]instanceof Hl&&vp(Oe[F],v))},xd=function(v){for(var F in v.objectNumber=at(),Q("<<"),v)switch(F){case"opacity":Q("/ca "+$(v[F]));break;case"stroke-opacity":Q("/CA "+$(v[F]))}Q(">>"),Q("endobj")},xp=function(){var v;for(v in ht)ht.hasOwnProperty(v)&&xd(ht[v])},Ac=function(){for(var v in Q("/XObject <<"),St)St.hasOwnProperty(v)&&St[v].objectNumber>=0&&Q("/"+v+" "+St[v].objectNumber+" 0 R");Ke.publish("putXobjectDict"),Q(">>")},wp=function(){rr.oid=at(),Q("<<"),Q("/Filter /Standard"),Q("/V "+rr.v),Q("/R "+rr.r),Q("/U <"+rr.toHexString(rr.U)+">"),Q("/O <"+rr.toHexString(rr.O)+">"),Q("/P "+rr.P),Q(">>"),Q("endobj")},wd=function(){for(var v in Q("/Font <<"),Et)Et.hasOwnProperty(v)&&(p===!1||p===!0&&m.hasOwnProperty(v))&&Q("/"+v+" "+Et[v].objectNumber+" 0 R");Q(">>")},bp=function(){if(Object.keys(Oe).length>0){for(var v in Q("/Shading <<"),Oe)Oe.hasOwnProperty(v)&&Oe[v]instanceof yo&&Oe[v].objectNumber>=0&&Q("/"+v+" "+Oe[v].objectNumber+" 0 R");Ke.publish("putShadingPatternDict"),Q(">>")}},Vo=function(v){if(Object.keys(Oe).length>0){for(var F in Q("/Pattern <<"),Oe)Oe.hasOwnProperty(F)&&Oe[F]instanceof f.TilingPattern&&Oe[F].objectNumber>=0&&Oe[F].objectNumber<v&&Q("/"+F+" "+Oe[F].objectNumber+" 0 R");Ke.publish("putTilingPatternDict"),Q(">>")}},Sp=function(){if(Object.keys(ht).length>0){var v;for(v in Q("/ExtGState <<"),ht)ht.hasOwnProperty(v)&&ht[v].objectNumber>=0&&Q("/"+v+" "+ht[v].objectNumber+" 0 R");Ke.publish("putGStateDict"),Q(">>")}},bn=function(v){gt(v.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),wd(),bp(),Vo(v.objectOid),Sp(),Ac(),Q(">>"),Q("endobj")},bd=function(){var v=[];Wo(),xp(),qo(),Yo(v),Ke.publish("putResources"),v.forEach(bn),bn({resourcesOid:$t,objectOid:Number.MAX_SAFE_INTEGER}),Ke.publish("postPutResources")},Sd=function(){Ke.publish("putAdditionalObjects");for(var v=0;v<_e.length;v++){var F=_e[v];gt(F.objId,!0),Q(F.content),Q("endobj")}Ke.publish("postPutAdditionalObjects")},_d=function(v){Mt[v.fontName]=Mt[v.fontName]||{},Mt[v.fontName][v.fontStyle]=v.id},Cc=function(v,F,K,ne,pe){var Se={id:"F"+(Object.keys(Et).length+1).toString(10),postScriptName:v,fontName:F,fontStyle:K,encoding:ne,isStandardFont:pe||!1,metadata:{}};return Ke.publish("addFont",{font:Se,instance:this}),Et[Se.id]=Se,_d(Se),Se.id},_p=function(v){for(var F=0,K=Le.length;F<K;F++){var ne=Cc.call(this,v[F][0],v[F][1],v[F][2],Le[F][3],!0);p===!1&&(m[ne]=!0);var pe=v[F][0].split("-");_d({id:ne,fontName:pe[0],fontStyle:pe[1]||""})}Ke.publish("addFonts",{fonts:Et,dictionary:Mt})},Oi=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(ne){var F=ne.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var K="Error in function "+F.split(`
`)[0].split("<")[0]+": "+ne.message;if(!dt.console)throw new Error(K);dt.console.error(K,ne),dt.alert&&alert(K)}},v.foo.bar=v,v.foo},Go=function(v,F){var K,ne,pe,Se,De,Ge,ot,xt,yt;if(pe=(F=F||{}).sourceEncoding||"Unicode",De=F.outputEncoding,(F.autoencode||De)&&Et[ut].metadata&&Et[ut].metadata[pe]&&Et[ut].metadata[pe].encoding&&(Se=Et[ut].metadata[pe].encoding,!De&&Et[ut].encoding&&(De=Et[ut].encoding),!De&&Se.codePages&&(De=Se.codePages[0]),typeof De=="string"&&(De=Se[De]),De)){for(ot=!1,Ge=[],K=0,ne=v.length;K<ne;K++)(xt=De[v.charCodeAt(K)])?Ge.push(String.fromCharCode(xt)):Ge.push(v[K]),Ge[K].charCodeAt(0)>>8&&(ot=!0);v=Ge.join("")}for(K=v.length;ot===void 0&&K!==0;)v.charCodeAt(K-1)>>8&&(ot=!0),K--;if(!ot)return v;for(Ge=F.noBOM?[]:[254,255],K=0,ne=v.length;K<ne;K++){if((yt=(xt=v.charCodeAt(K))>>8)>>8)throw new Error("Character at position "+K+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ge.push(yt),Ge.push(xt-(yt<<8))}return String.fromCharCode.apply(void 0,Ge)},Lr=f.__private__.pdfEscape=f.pdfEscape=function(v,F){return Go(v,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ec=f.__private__.beginPage=function(v){Te[++$e]=[],Ue[$e]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},kd($e),we(Te[q])},Nd=function(v,F){var K,ne,pe;switch(t=F||t,typeof v=="string"&&(K=w(v.toLowerCase()),Array.isArray(K)&&(ne=K[0],pe=K[1])),Array.isArray(v)&&(ne=v[0]*We,pe=v[1]*We),isNaN(ne)&&(ne=i[0],pe=i[1]),(ne>14400||pe>14400)&&(Jt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ne=Math.min(14400,ne),pe=Math.min(14400,pe)),i=[ne,pe],t.substr(0,1)){case"l":pe>ne&&(i=[pe,ne]);break;case"p":ne>pe&&(i=[pe,ne])}Ec(i),Td(Dc),Q($i),Ic!==0&&Q(Ic+" J"),Rc!==0&&Q(Rc+" j"),Ke.publish("addPage",{pageNumber:$e})},Np=function(v){v>0&&v<=$e&&(Te.splice(v,1),Ue.splice(v,1),$e--,q>$e&&(q=$e),this.setPage(q))},kd=function(v){v>0&&v<=$e&&(q=v)},kp=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Te.length-1},jd=function(v,F,K){var ne,pe=void 0;return K=K||{},v=v!==void 0?v:Et[ut].fontName,F=F!==void 0?F:Et[ut].fontStyle,ne=v.toLowerCase(),Mt[ne]!==void 0&&Mt[ne][F]!==void 0?pe=Mt[ne][F]:Mt[v]!==void 0&&Mt[v][F]!==void 0?pe=Mt[v][F]:K.disableWarning===!1&&Jt.warn("Unable to look up font label for font '"+v+"', '"+F+"'. Refer to getFontList() for available fonts."),pe||K.noFallback||(pe=Mt.times[F])==null&&(pe=Mt.times.normal),pe},jp=f.__private__.putInfo=function(){var v=at(),F=function(ne){return ne};for(var K in d!==null&&(F=rr.encryptor(v,0)),Q("<<"),Q("/Producer ("+Lr(F("jsPDF "+it.version))+")"),Ve)Ve.hasOwnProperty(K)&&Ve[K]&&Q("/"+K.substr(0,1).toUpperCase()+K.substr(1)+" ("+Lr(F(Ve[K]))+")");Q("/CreationDate ("+Lr(F(G))+")"),Q(">>"),Q("endobj")},Pc=f.__private__.putCatalog=function(v){var F=(v=v||{}).rootDictionaryObjId||_t;switch(at(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+F+" 0 R"),ee||(ee="fullwidth"),ee){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var K=""+ee;K.substr(K.length-1)==="%"&&(ee=parseInt(ee)/100),typeof ee=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+$(ee)+"]")}switch(Ze||(Ze="continuous"),Ze){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}ke&&Q("/PageMode /"+ke),Ke.publish("putCatalog"),Q(">>"),Q("endobj")},Ap=f.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(te+1)),Q("/Root "+te+" 0 R"),Q("/Info "+(te-1)+" 0 R"),d!==null&&Q("/Encrypt "+rr.oid+" 0 R"),Q("/ID [ <"+X+"> <"+X+"> ]"),Q(">>")},Cp=f.__private__.putHeader=function(){Q("%PDF-"+x),Q("%ºß¬à")},Ep=f.__private__.putXRef=function(){var v="0000000000";Q("xref"),Q("0 "+(te+1)),Q("0000000000 65535 f ");for(var F=1;F<=te;F++)typeof ce[F]=="function"?Q((v+ce[F]()).slice(-10)+" 00000 n "):ce[F]!==void 0?Q((v+ce[F]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},_s=f.__private__.buildDocument=function(){nt(),we(ge),Ke.publish("buildDocument"),Cp(),vi(),Sd(),bd(),d!==null&&wp(),jp(),Pc();var v=de;return Ep(),Ap(),Q("startxref"),Q(""+v),Q("%%EOF"),we(Te[q]),ge.join(`
`)},Jo=f.__private__.getBlob=function(v){return new Blob([qe(v)],{type:"application/pdf"})},Ko=f.output=f.__private__.output=Oi(function(v,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",v){case void 0:return _s();case"save":f.save(F.filename);break;case"arraybuffer":return qe(_s());case"blob":return Jo(_s());case"bloburi":case"bloburl":if(dt.URL!==void 0&&typeof dt.URL.createObjectURL=="function")return dt.URL&&dt.URL.createObjectURL(Jo(_s()))||void 0;Jt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var K="",ne=_s();try{K=Lg(ne)}catch{K=Lg(unescape(encodeURIComponent(ne)))}return"data:application/pdf;filename="+F.filename+";base64,"+K;case"pdfobjectnewwindow":if(Object.prototype.toString.call(dt)==="[object Window]"){var pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Se=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(pe=F.pdfObjectUrl,Se="");var De='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pe+'"'+Se+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",Ge=dt.open();return Ge!==null&&Ge.document.write(De),Ge}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(dt)==="[object Window]"){var ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',xt=dt.open();if(xt!==null){xt.document.write(ot);var yt=this;xt.document.documentElement.querySelector("#pdfViewer").onload=function(){xt.document.title=F.filename,xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yt.output("bloburl"))}}return xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(dt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',on=dt.open();if(on!==null&&(on.document.write(Dt),on.document.title=F.filename),on||typeof safari>"u")return on;break;case"datauri":case"dataurl":return dt.document.location.href=this.output("datauristring",F);default:return null}}),Ad=function(v){return Array.isArray(Tt)===!0&&Tt.indexOf(v)>-1};switch(r){case"pt":We=1;break;case"mm":We=72/25.4;break;case"cm":We=72/2.54;break;case"in":We=72;break;case"px":We=Ad("px_scaling")==1?.75:96/72;break;case"pc":case"em":We=12;break;case"ex":We=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);We=r}var rr=null;Ne(),J();var Pp=function(v){return d!==null?rr.encryptor(v,0):function(F){return F}},Cd=f.__private__.getPageInfo=f.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ue[v].objId,pageNumber:v,pageContext:Ue[v]}},pt=f.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in Ue)if(Ue[F].objId===v)break;return Cd(F)},Tp=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ue[q].objId,pageNumber:q,pageContext:Ue[q]}};f.addPage=function(){return Nd.apply(this,arguments),this},f.setPage=function(){return kd.apply(this,arguments),we.call(this,Te[q]),this},f.insertPage=function(v){return this.addPage(),this.movePage(q,v),this},f.movePage=function(v,F){var K,ne;if(v>F){K=Te[v],ne=Ue[v];for(var pe=v;pe>F;pe--)Te[pe]=Te[pe-1],Ue[pe]=Ue[pe-1];Te[F]=K,Ue[F]=ne,this.setPage(F)}else if(v<F){K=Te[v],ne=Ue[v];for(var Se=v;Se<F;Se++)Te[Se]=Te[Se+1],Ue[Se]=Ue[Se+1];Te[F]=K,Ue[F]=ne,this.setPage(F)}return this},f.deletePage=function(){return Np.apply(this,arguments),this},f.__private__.text=f.text=function(v,F,K,ne,pe){var Se,De,Ge,ot,xt,yt,Dt,on,pn,En=(ne=ne||{}).scope||this;if(typeof v=="number"&&typeof F=="number"&&(typeof K=="string"||Array.isArray(K))){var ir=K;K=F,F=v,v=ir}if(arguments[3]instanceof lt?(j("The transform parameter of text() with a Matrix value"),pn=pe):(Ge=arguments[4],ot=arguments[5],Wt(Dt=arguments[3])==="object"&&Dt!==null||(typeof Ge=="string"&&(ot=Ge,Ge=null),typeof Dt=="string"&&(ot=Dt,Dt=null),typeof Dt=="number"&&(Ge=Dt,Dt=null),ne={flags:Dt,angle:Ge,align:ot})),isNaN(F)||isNaN(K)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return En;var zn="",Bi=!1,Qr=typeof ne.lineHeightFactor=="number"?ne.lineHeightFactor:Xa,as=En.internal.scaleFactor;function Fd(Xt){return Xt=Xt.split("	").join(Array(ne.TabLen||9).join(" ")),Lr(Xt,Dt)}function Uc(Xt){for(var Qt,_n=Xt.concat(),Rn=[],Cs=_n.length;Cs--;)typeof(Qt=_n.shift())=="string"?Rn.push(Qt):Array.isArray(Xt)&&(Qt.length===1||Qt[1]===void 0&&Qt[2]===void 0)?Rn.push(Qt[0]):Rn.push([Qt[0],Qt[1],Qt[2]]);return Rn}function zc(Xt,Qt){var _n;if(typeof Xt=="string")_n=Qt(Xt)[0];else if(Array.isArray(Xt)){for(var Rn,Cs,Kc=Xt.concat(),dl=[],zd=Kc.length;zd--;)typeof(Rn=Kc.shift())=="string"?dl.push(Qt(Rn)[0]):Array.isArray(Rn)&&typeof Rn[0]=="string"&&(Cs=Qt(Rn[0],Rn[1],Rn[2]),dl.push([Cs[0],Cs[1],Cs[2]]));_n=dl}return _n}var nl=!1,Wc=!0;if(typeof v=="string")nl=!0;else if(Array.isArray(v)){var Hc=v.concat();De=[];for(var rl,Kn=Hc.length;Kn--;)(typeof(rl=Hc.shift())!="string"||Array.isArray(rl)&&typeof rl[0]!="string")&&(Wc=!1);nl=Wc}if(nl===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var il=Me/En.internal.scaleFactor,sl=il*(Qr-1);switch(ne.baseline){case"bottom":K-=sl;break;case"top":K+=il-sl;break;case"hanging":K+=il-2*sl;break;case"middle":K+=il/2-sl}if((yt=ne.maxWidth||0)>0&&(typeof v=="string"?v=En.splitTextToSize(v,yt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Xt,Qt){return Xt.concat(En.splitTextToSize(Qt,yt))},[]))),Se={text:v,x:F,y:K,options:ne,mutex:{pdfEscape:Lr,activeFontKey:ut,fonts:Et,activeFontSize:Me}},Ke.publish("preProcessText",Se),v=Se.text,Ge=(ne=Se.options).angle,!(pn instanceof lt)&&Ge&&typeof Ge=="number"){Ge*=Math.PI/180,ne.rotationDirection===0&&(Ge=-Ge),_===b.ADVANCED&&(Ge=-Ge);var al=Math.cos(Ge),qc=Math.sin(Ge);pn=new lt(al,qc,-qc,al,0,0)}else Ge&&Ge instanceof lt&&(pn=Ge);_!==b.ADVANCED||pn||(pn=Xe),(xt=ne.charSpace||Zo)!==void 0&&(zn+=A(M(xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(on=ne.horizontalScale)!==void 0&&(zn+=A(100*on)+` Tz
`),ne.lang;var Dr=-1,Up=ne.renderingMode!==void 0?ne.renderingMode:ne.stroke,Yc=En.internal.getCurrentPageInfo().pageContext;switch(Up){case 0:case!1:case"fill":Dr=0;break;case 1:case!0:case"stroke":Dr=1;break;case 2:case"fillThenStroke":Dr=2;break;case 3:case"invisible":Dr=3;break;case 4:case"fillAndAddForClipping":Dr=4;break;case 5:case"strokeAndAddPathForClipping":Dr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Dr=6;break;case 7:case"addToPathForClipping":Dr=7}var Od=Yc.usedRenderingMode!==void 0?Yc.usedRenderingMode:-1;Dr!==-1?zn+=Dr+` Tr
`:Od!==-1&&(zn+=`0 Tr
`),Dr!==-1&&(Yc.usedRenderingMode=Dr),ot=ne.align||"left";var xi,ol=Me*Qr,$d=En.internal.pageSize.getWidth(),Bd=Et[ut];xt=ne.charSpace||Zo,yt=ne.maxWidth||0,Dt=Object.assign({autoencode:!0,noBOM:!0},ne.flags);var na=[],eo=function(Xt){return En.getStringUnitWidth(Xt,{font:Bd,charSpace:xt,fontSize:Me,doKerning:!1})*Me/as};if(Object.prototype.toString.call(v)==="[object Array]"){var Mr;De=Uc(v),ot!=="left"&&(xi=De.map(eo));var wr,ra=0;if(ot==="right"){F-=xi[0],v=[],Kn=De.length;for(var ks=0;ks<Kn;ks++)ks===0?(wr=ss(F),Mr=Ns(K)):(wr=M(ra-xi[ks]),Mr=-ol),v.push([De[ks],wr,Mr]),ra=xi[ks]}else if(ot==="center"){F-=xi[0]/2,v=[],Kn=De.length;for(var js=0;js<Kn;js++)js===0?(wr=ss(F),Mr=Ns(K)):(wr=M((ra-xi[js])/2),Mr=-ol),v.push([De[js],wr,Mr]),ra=xi[js]}else if(ot==="left"){v=[],Kn=De.length;for(var ll=0;ll<Kn;ll++)v.push(De[ll])}else if(ot==="justify"&&Bd.encoding==="Identity-H"){v=[],Kn=De.length,yt=yt!==0?yt:$d;for(var As=0,Sn=0;Sn<Kn;Sn++)if(Mr=Sn===0?Ns(K):-ol,wr=Sn===0?ss(F):As,Sn<Kn-1){var Vc=M((yt-xi[Sn])/(De[Sn].split(" ").length-1)),br=De[Sn].split(" ");v.push([br[0]+" ",wr,Mr]),As=0;for(var wi=1;wi<br.length;wi++){var cl=(eo(br[wi-1]+" "+br[wi])-eo(br[wi]))*as+Vc;wi==br.length-1?v.push([br[wi],cl,0]):v.push([br[wi]+" ",cl,0]),As-=cl}}else v.push([De[Sn],wr,Mr]);v.push(["",As,0])}else{if(ot!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Kn=De.length,yt=yt!==0?yt:$d,Sn=0;Sn<Kn;Sn++)Mr=Sn===0?Ns(K):-ol,wr=Sn===0?ss(F):0,Sn<Kn-1?na.push(A(M((yt-xi[Sn])/(De[Sn].split(" ").length-1)))):na.push(0),v.push([De[Sn],wr,Mr])}}var Ud=typeof ne.R2L=="boolean"?ne.R2L:xe;Ud===!0&&(v=zc(v,function(Xt,Qt,_n){return[Xt.split("").reverse().join(""),Qt,_n]})),Se={text:v,x:F,y:K,options:ne,mutex:{pdfEscape:Lr,activeFontKey:ut,fonts:Et,activeFontSize:Me}},Ke.publish("postProcessText",Se),v=Se.text,Bi=Se.mutex.isHex||!1;var Gc=Et[ut].encoding;Gc!=="WinAnsiEncoding"&&Gc!=="StandardEncoding"||(v=zc(v,function(Xt,Qt,_n){return[Fd(Xt),Qt,_n]})),De=Uc(v),v=[];for(var to,no,ia,ro=0,ul=1,io=Array.isArray(De[0])?ul:ro,sa="",Jc=function(Xt,Qt,_n){var Rn="";return _n instanceof lt?(_n=typeof ne.angle=="number"?fe(_n,new lt(1,0,0,1,Xt,Qt)):fe(new lt(1,0,0,1,Xt,Qt),_n),_===b.ADVANCED&&(_n=fe(new lt(1,0,0,-1,0,0),_n)),Rn=_n.join(" ")+` Tm
`):Rn=A(Xt)+" "+A(Qt)+` Td
`,Rn},bi=0;bi<De.length;bi++){switch(sa="",io){case ul:ia=(Bi?"<":"(")+De[bi][0]+(Bi?">":")"),to=parseFloat(De[bi][1]),no=parseFloat(De[bi][2]);break;case ro:ia=(Bi?"<":"(")+De[bi]+(Bi?">":")"),to=ss(F),no=Ns(K)}na!==void 0&&na[bi]!==void 0&&(sa=na[bi]+` Tw
`),bi===0?v.push(sa+Jc(to,no,pn)+ia):io===ro?v.push(sa+ia):io===ul&&v.push(sa+Jc(to,no,pn)+ia)}v=io===ro?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var Si=`BT
/`;return Si+=ut+" "+Me+` Tf
`,Si+=A(Me*Qr)+` TL
`,Si+=Qa+`
`,Si+=zn,Si+=v,Q(Si+="ET"),m[ut]=!0,En};var Lp=f.__private__.clip=f.clip=function(v){return Q(v==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Lp("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Q("n"),this};var is=f.__private__.isValidStyle=function(v){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(F=!0),F};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(v){return is(v)&&(u=v),this};var Ed=f.__private__.getStyle=f.getStyle=function(v){var F=u;switch(v){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=v}return F},Pd=f.close=function(){return Q("h"),this};f.stroke=function(){return Q("S"),this},f.fill=function(v){return Xo("f",v),this},f.fillEvenOdd=function(v){return Xo("f*",v),this},f.fillStroke=function(v){return Xo("B",v),this},f.fillStrokeEvenOdd=function(v){return Xo("B*",v),this};var Xo=function(v,F){Wt(F)==="object"?Mp(F,v):Q(v)},Tc=function(v){v===null||_===b.ADVANCED&&v===void 0||(v=Ed(v),Q(v))};function Dp(v,F,K,ne,pe){var Se=new Hl(F||this.boundingBox,K||this.xStep,ne||this.yStep,this.gState,pe||this.matrix);Se.stream=this.stream;var De=v+"$$"+this.cloneIndex+++"$$";return mt(De,Se),Se}var Mp=function(v,F){var K=kt[v.key],ne=Oe[K];if(ne instanceof yo)Q("q"),Q(Ip(F)),ne.gState&&f.setGState(ne.gState),Q(v.matrix.toString()+" cm"),Q("/"+K+" sh"),Q("Q");else if(ne instanceof Hl){var pe=new lt(1,0,0,-1,0,ta());v.matrix&&(pe=pe.multiply(v.matrix||Xe),K=Dp.call(ne,v.key,v.boundingBox,v.xStep,v.yStep,pe).id),Q("q"),Q("/Pattern cs"),Q("/"+K+" scn"),ne.gState&&f.setGState(ne.gState),Q(F),Q("Q")}},Ip=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Lc=f.moveTo=function(v,F){return Q(A(M(v))+" "+A(O(F))+" m"),this},Ka=f.lineTo=function(v,F){return Q(A(M(v))+" "+A(O(F))+" l"),this},Zs=f.curveTo=function(v,F,K,ne,pe,Se){return Q([A(M(v)),A(O(F)),A(M(K)),A(O(ne)),A(M(pe)),A(O(Se)),"c"].join(" ")),this};f.__private__.line=f.line=function(v,F,K,ne,pe){if(isNaN(v)||isNaN(F)||isNaN(K)||isNaN(ne)||!is(pe))throw new Error("Invalid arguments passed to jsPDF.line");return _===b.COMPAT?this.lines([[K-v,ne-F]],v,F,[1,1],pe||"S"):this.lines([[K-v,ne-F]],v,F,[1,1]).stroke()},f.__private__.lines=f.lines=function(v,F,K,ne,pe,Se){var De,Ge,ot,xt,yt,Dt,on,pn,En,ir,zn,Bi;if(typeof v=="number"&&(Bi=K,K=F,F=v,v=Bi),ne=ne||[1,1],Se=Se||!1,isNaN(F)||isNaN(K)||!Array.isArray(v)||!Array.isArray(ne)||!is(pe)||typeof Se!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Lc(F,K),De=ne[0],Ge=ne[1],xt=v.length,ir=F,zn=K,ot=0;ot<xt;ot++)(yt=v[ot]).length===2?(ir=yt[0]*De+ir,zn=yt[1]*Ge+zn,Ka(ir,zn)):(Dt=yt[0]*De+ir,on=yt[1]*Ge+zn,pn=yt[2]*De+ir,En=yt[3]*Ge+zn,ir=yt[4]*De+ir,zn=yt[5]*Ge+zn,Zs(Dt,on,pn,En,ir,zn));return Se&&Pd(),Tc(pe),this},f.path=function(v){for(var F=0;F<v.length;F++){var K=v[F],ne=K.c;switch(K.op){case"m":Lc(ne[0],ne[1]);break;case"l":Ka(ne[0],ne[1]);break;case"c":Zs.apply(this,ne);break;case"h":Pd()}}return this},f.__private__.rect=f.rect=function(v,F,K,ne,pe){if(isNaN(v)||isNaN(F)||isNaN(K)||isNaN(ne)||!is(pe))throw new Error("Invalid arguments passed to jsPDF.rect");return _===b.COMPAT&&(ne=-ne),Q([A(M(v)),A(O(F)),A(M(K)),A(M(ne)),"re"].join(" ")),Tc(pe),this},f.__private__.triangle=f.triangle=function(v,F,K,ne,pe,Se,De){if(isNaN(v)||isNaN(F)||isNaN(K)||isNaN(ne)||isNaN(pe)||isNaN(Se)||!is(De))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[K-v,ne-F],[pe-K,Se-ne],[v-pe,F-Se]],v,F,[1,1],De,!0),this},f.__private__.roundedRect=f.roundedRect=function(v,F,K,ne,pe,Se,De){if(isNaN(v)||isNaN(F)||isNaN(K)||isNaN(ne)||isNaN(pe)||isNaN(Se)||!is(De))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ge=4/3*(Math.SQRT2-1);return pe=Math.min(pe,.5*K),Se=Math.min(Se,.5*ne),this.lines([[K-2*pe,0],[pe*Ge,0,pe,Se-Se*Ge,pe,Se],[0,ne-2*Se],[0,Se*Ge,-pe*Ge,Se,-pe,Se],[2*pe-K,0],[-pe*Ge,0,-pe,-Se*Ge,-pe,-Se],[0,2*Se-ne],[0,-Se*Ge,pe*Ge,-Se,pe,-Se]],v+pe,F,[1,1],De,!0),this},f.__private__.ellipse=f.ellipse=function(v,F,K,ne,pe){if(isNaN(v)||isNaN(F)||isNaN(K)||isNaN(ne)||!is(pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Se=4/3*(Math.SQRT2-1)*K,De=4/3*(Math.SQRT2-1)*ne;return Lc(v+K,F),Zs(v+K,F-De,v+Se,F-ne,v,F-ne),Zs(v-Se,F-ne,v-K,F-De,v-K,F),Zs(v-K,F+De,v-Se,F+ne,v,F+ne),Zs(v+Se,F+ne,v+K,F+De,v+K,F),Tc(pe),this},f.__private__.circle=f.circle=function(v,F,K,ne){if(isNaN(v)||isNaN(F)||isNaN(K)||!is(ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,F,K,K,ne)},f.setFont=function(v,F,K){return K&&(F=P(F,K)),ut=jd(v,F,{disableWarning:!1}),this};var Rp=f.__private__.getFont=f.getFont=function(){return Et[jd.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var v,F,K={};for(v in Mt)if(Mt.hasOwnProperty(v))for(F in K[v]=[],Mt[v])Mt[v].hasOwnProperty(F)&&K[v].push(F);return K},f.addFont=function(v,F,K,ne,pe){var Se=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Se.indexOf(arguments[3])!==-1?pe=arguments[3]:arguments[3]&&Se.indexOf(arguments[3])==-1&&(K=P(K,ne)),pe=pe||"Identity-H",Cc.call(this,v,F,K,pe)};var Xa,Dc=n.lineWidth||.200025,Qo=f.__private__.getLineWidth=f.getLineWidth=function(){return Dc},Td=f.__private__.setLineWidth=f.setLineWidth=function(v){return Dc=v,Q(A(M(v))+" w"),this};f.__private__.setLineDash=it.API.setLineDash=it.API.setLineDashPattern=function(v,F){if(v=v||[],F=F||0,isNaN(F)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(K){return A(M(K))}).join(" "),F=A(M(F)),Q("["+v+"] "+F+" d"),this};var Ld=f.__private__.getLineHeight=f.getLineHeight=function(){return Me*Xa};f.__private__.getLineHeight=f.getLineHeight=function(){return Me*Xa};var Dd=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(Xa=v),this},Md=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Xa};Dd(n.lineHeight);var ss=f.__private__.getHorizontalCoordinate=function(v){return M(v)},Ns=f.__private__.getVerticalCoordinate=function(v){return _===b.ADVANCED?v:Ue[q].mediaBox.topRightY-Ue[q].mediaBox.bottomLeftY-M(v)},Fp=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(v){return A(ss(v))},ea=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(v){return A(Ns(v))},$i=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return wn($i)},f.__private__.setStrokeColor=f.setDrawColor=function(v,F,K,ne){return $i=Un({ch1:v,ch2:F,ch3:K,ch4:ne,pdfColorType:"draw",precision:2}),Q($i),this};var Mc=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return wn(Mc)},f.__private__.setFillColor=f.setFillColor=function(v,F,K,ne){return Mc=Un({ch1:v,ch2:F,ch3:K,ch4:ne,pdfColorType:"fill",precision:2}),Q(Mc),this};var Qa=n.textColor||"0 g",Op=f.__private__.getTextColor=f.getTextColor=function(){return wn(Qa)};f.__private__.setTextColor=f.setTextColor=function(v,F,K,ne){return Qa=Un({ch1:v,ch2:F,ch3:K,ch4:ne,pdfColorType:"text",precision:3}),this};var Zo=n.charSpace,$p=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Zo||0)};f.__private__.setCharSpace=f.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zo=v,this};var Ic=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(v){var F=f.CapJoinStyles[v];if(F===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ic=F,Q(F+" J"),this};var Rc=0;f.__private__.setLineJoin=f.setLineJoin=function(v){var F=f.CapJoinStyles[v];if(F===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Rc=F,Q(F+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(A(M(v))+" M"),this},f.GState=Df,f.setGState=function(v){(v=typeof v=="string"?ht[me[v]]:Id(null,v)).equals(Fe)||(Q("/"+v.id+" gs"),Fe=v)};var Id=function(v,F){if(!v||!me[v]){var K=!1;for(var ne in ht)if(ht.hasOwnProperty(ne)&&ht[ne].equals(F)){K=!0;break}if(K)F=ht[ne];else{var pe="GS"+(Object.keys(ht).length+1).toString(10);ht[pe]=F,F.id=pe}return v&&(me[v]=F.id),Ke.publish("addGState",F),F}};f.addGState=function(v,F){return Id(v,F),this},f.saveGraphicsState=function(){return Q("q"),Bn.push({key:ut,size:Me,color:Qa}),this},f.restoreGraphicsState=function(){Q("Q");var v=Bn.pop();return ut=v.key,Me=v.size,Qa=v.color,Fe=null,this},f.setCurrentTransformationMatrix=function(v){return Q(v.toString()+" cm"),this},f.comment=function(v){return Q("#"+v),this};var el=function(v,F){var K=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return K},set:function(Se){isNaN(Se)||(K=parseFloat(Se))}});var ne=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ne},set:function(Se){isNaN(Se)||(ne=parseFloat(Se))}});var pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pe},set:function(Se){pe=Se.toString()}}),this},Fc=function(v,F,K,ne){el.call(this,v,F),this.type="rect";var pe=K||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pe},set:function(De){isNaN(De)||(pe=parseFloat(De))}});var Se=ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Se},set:function(De){isNaN(De)||(Se=parseFloat(De))}}),this},Oc=function(){this.page=$e,this.currentPage=q,this.pages=Te.slice(0),this.pagesContext=Ue.slice(0),this.x=Yt,this.y=Nt,this.matrix=$n,this.width=Za(q),this.height=ta(q),this.outputDestination=Ie,this.id="",this.objectNumber=-1};Oc.prototype.restore=function(){$e=this.page,q=this.currentPage,Ue=this.pagesContext,Te=this.pages,Yt=this.x,Nt=this.y,$n=this.matrix,$c(q,this.width),Bc(q,this.height),Ie=this.outputDestination};var Rd=function(v,F,K,ne,pe){Fi.push(new Oc),$e=q=0,Te=[],Yt=v,Nt=F,$n=pe,Ec([K,ne])},Bp=function(v){if(gi[v])Fi.pop().restore();else{var F=new Oc,K="Xo"+(Object.keys(St).length+1).toString(10);F.id=K,gi[v]=K,St[K]=F,Ke.publish("addFormObject",F),Fi.pop().restore()}};for(var tl in f.beginFormObject=function(v,F,K,ne,pe){return Rd(v,F,K,ne,pe),this},f.endFormObject=function(v){return Bp(v),this},f.doFormObject=function(v,F){var K=St[gi[v]];return Q("q"),Q(F.toString()+" cm"),Q("/"+K.id+" Do"),Q("Q"),this},f.getFormObject=function(v){var F=St[gi[v]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},f.save=function(v,F){return v=v||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(mo(Jo(_s()),v),typeof mo.unload=="function"&&dt.setTimeout&&setTimeout(mo.unload,911),this):new Promise(function(K,ne){try{var pe=mo(Jo(_s()),v);typeof mo.unload=="function"&&dt.setTimeout&&setTimeout(mo.unload,911),K(pe)}catch(Se){ne(Se.message)}})},it.API)it.API.hasOwnProperty(tl)&&(tl==="events"&&it.API.events.length?function(v,F){var K,ne,pe;for(pe=F.length-1;pe!==-1;pe--)K=F[pe][0],ne=F[pe][1],v.subscribe.apply(v,[K].concat(typeof ne=="function"?[ne]:ne))}(Ke,it.API.events):f[tl]=it.API[tl]);var Za=f.getPageWidth=function(v){return(Ue[v=v||q].mediaBox.topRightX-Ue[v].mediaBox.bottomLeftX)/We},$c=f.setPageWidth=function(v,F){Ue[v].mediaBox.topRightX=F*We+Ue[v].mediaBox.bottomLeftX},ta=f.getPageHeight=function(v){return(Ue[v=v||q].mediaBox.topRightY-Ue[v].mediaBox.bottomLeftY)/We},Bc=f.setPageHeight=function(v,F){Ue[v].mediaBox.topRightY=F*We+Ue[v].mediaBox.bottomLeftY};return f.internal={pdfEscape:Lr,getStyle:Ed,getFont:Rp,getFontSize:he,getCharSpace:$p,getTextColor:Op,getLineHeight:Ld,getLineHeightFactor:Md,getLineWidth:Qo,write:st,getHorizontalCoordinate:ss,getVerticalCoordinate:Ns,getCoordinateString:Fp,getVerticalCoordinateString:ea,collections:{},newObject:at,newAdditionalObject:jt,newObjectDeferred:et,newObjectDeferredBegin:gt,getFilters:Pr,putStream:Tr,events:Ke,scaleFactor:We,pageSize:{getWidth:function(){return Za(q)},setWidth:function(v){$c(q,v)},getHeight:function(){return ta(q)},setHeight:function(v){Bc(q,v)}},encryptionOptions:d,encryption:rr,getEncryptor:Pp,output:Ko,getNumberOfPages:kp,pages:Te,out:Q,f2:$,f3:L,getPageInfo:Cd,getPageInfoByObjId:pt,getCurrentPageInfo:Tp,getPDFVersion:y,Point:el,Rectangle:Fc,Matrix:lt,hasHotfix:Ad},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Za(q)},set:function(v){$c(q,v)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return ta(q)},set:function(v){Bc(q,v)},enumerable:!0,configurable:!0}),_p.call(f,Le),ut="F1",Nd(i,t),Ke.publish("initialized"),f}Al.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Al.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Al.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Al.prototype.processOwnerPassword=function(n,e){return Mg(Dg(e).substr(0,5),n)},Al.prototype.encryptor=function(n,e){var t=Dg(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Mg(t,r)}},Df.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Wt(n)!==Wt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},it.API={events:[]},it.version="3.0.1";var gn=it.API,fy=1,Uo=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_l=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vt=function(n){return n.toFixed(2)},ga=function(n){return n.toFixed(5)};gn.__acroform__={};var Xr=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Vv=function(n){return n*fy},cs=function(n){var e=new PS,t=tt.internal.getHeight(n)||0,r=tt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(vt(r)),Number(vt(t))],e},GC=gn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},JC=gn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},KC=gn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},jn=gn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return KC(n,e-1)},An=gn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return GC(n,e-1)},Cn=gn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return JC(n,e-1)},XC=gn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],a=n[2],o=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=t(i+a)||0,l.upperRight_Y=r(s)||0,[Number(vt(l.lowerLeft_X)),Number(vt(l.lowerLeft_Y)),Number(vt(l.upperRight_X)),Number(vt(l.upperRight_Y))]},QC=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Ig(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+vt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=cs(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Ig=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(L){return L.split(`
`)}):i.map(function(L){return[L]});var s=t,a=tt.internal.getHeight(n)||0;a=a<0?-a:a;var o=tt.internal.getWidth(n)||0;o=o<0?-o:o;var l=function(L,M,D){if(L+1<i.length){var O=M+" "+i[L+1][0];return Ph(O,n,D).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,p=Ph("3",n,s).height,m=n.multiline?a-s:(a-p)/2,f=m+=2,x=0,y=0,N=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ph(e,n,s=12).width+", FieldWidth:"+o+`
`;break}for(var w="",b=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var C=!1;if(i[_].length!==1&&N!==i[_].length-1){if((p+2)*(b+2)+2>a)continue e;w+=i[_][N],C=!0,y=_,_--}else{w=(w+=i[_][N]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var T=parseInt(_),P=l(T,w,s),A=_>=i.length-1;if(P&&!A){w+=" ",N=0;continue}if(P||A){if(A)y=T;else if(n.multiline&&(p+2)*(b+2)+2>a)continue e}else{if(!n.multiline||(p+2)*(b+2)+2>a)continue e;y=T}}for(var j="",I=x;I<=y;I++){var $=i[I];if(n.multiline){if(I===y){j+=$[N]+" ",N=(N+1)%$.length;continue}if(I===x){j+=$[$.length-1]+" ";continue}}j+=$[0]+" "}switch(j=j.substr(j.length-1)==" "?j.substr(0,j.length-1):j,d=Ph(j,n,s).width,n.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=vt(u)+" "+vt(f)+` Td
`,e+="("+Uo(j)+`) Tj
`,e+=-vt(u)+` 0 Td
`,f=-(s+2),d=0,x=C?y:y+1,b++,w=""}break}return r.text=e,r.fontSize=s,r},Ph=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},ZC={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},e8=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},t8=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Wt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},n8=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ns.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(ZC)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fy=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new TS,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&e8(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],u=o.Rect;if(o.Rect&&(o.Rect=XC(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=tt.createDefaultAppearanceStream(o),Wt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=QC(o);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var p="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var f=o.appearanceStreamContent[m];if(p+="/"+m+" ",p+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var x=f[a];typeof x=="function"&&(x=x.call(i,o)),p+="/"+a+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=f)=="function"&&(x=x.call(i,o)),p+="/"+a+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&t8(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},ES=gn.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),Wt(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Uo(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Q0=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Uo(r(n))+")"},ms=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ms.prototype.toString=function(){return this.objId+" 0 R"},ms.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ms.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:ES(i,this.objId,this.scope)}):i instanceof ms?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var PS=function(){ms.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Xr(PS,ms);var TS=function(){ms.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Uo(t(n))+")"}},set:function(t){n=t}})};Xr(TS,ms);var ns=function n(){ms.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!jn(e,3)},set:function(w){w?this.F=An(e,3):this.F=Cn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Mf)return;s="FieldObject"+n.FieldNum++}var w=function(b){return b};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Uo(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/fy:u},set:function(w){u=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Mf||this instanceof Eo))return Q0(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=w}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Vn?m:Q0(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof Vn?w:w.substr(0,1)==="("?_l(w.substr(1,w.length-2)):_l(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vn?_l(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof Vn?"/"+w:w}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Vn?f:Q0(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=this instanceof Vn?w:w.substr(0,1)==="("?_l(w.substr(1,w.length-2)):_l(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vn?_l(f.substr(1,f.length-1)):f},set:function(w){w=w.toString(),f=this instanceof Vn?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(w){w=!!w,y=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(w){x=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,1)},set:function(w){w?this.Ff=An(this.Ff,1):this.Ff=Cn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,2)},set:function(w){w?this.Ff=An(this.Ff,2):this.Ff=Cn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,3)},set:function(w){w?this.Ff=An(this.Ff,3):this.Ff=Cn(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');N=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(N){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:N=2;break;case"center":case 1:N=1;break;case"left":case 0:default:N=0}}})};Xr(ns,ms);var ec=function(){ns.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ES(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,u=[];l=a.exec(s);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,18)},set:function(t){t?this.Ff=An(this.Ff,18):this.Ff=Cn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=An(this.Ff,19):this.Ff=Cn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,20)},set:function(t){t?(this.Ff=An(this.Ff,20),e.sort()):this.Ff=Cn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,22)},set:function(t){t?this.Ff=An(this.Ff,22):this.Ff=Cn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,23)},set:function(t){t?this.Ff=An(this.Ff,23):this.Ff=Cn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,27)},set:function(t){t?this.Ff=An(this.Ff,27):this.Ff=Cn(this.Ff,27)}}),this.hasAppearanceStream=!1};Xr(ec,ns);var tc=function(){ec.call(this),this.fontName="helvetica",this.combo=!1};Xr(tc,ec);var nc=function(){tc.call(this),this.combo=!0};Xr(nc,tc);var Gh=function(){nc.call(this),this.edit=!0};Xr(Gh,nc);var Vn=function(){ns.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,15)},set:function(t){t?this.Ff=An(this.Ff,15):this.Ff=Cn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,16)},set:function(t){t?this.Ff=An(this.Ff,16):this.Ff=Cn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,17)},set:function(t){t?this.Ff=An(this.Ff,17):this.Ff=Cn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,26)},set:function(t){t?this.Ff=An(this.Ff,26):this.Ff=Cn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Uo(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Wt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Xr(Vn,ns);var Jh=function(){Vn.call(this),this.pushButton=!0};Xr(Jh,Vn);var rc=function(){Vn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Xr(rc,Vn);var Mf=function(){var n,e;ns.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Uo(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Wt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xr(Mf,ns),rc.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},rc.prototype.createOption=function(n){var e=new Mf;return e.Parent=this,e.optionName=n,this.Kids.push(e),r8.call(this.scope,e),e};var Kh=function(){Vn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tt.CheckBox.createAppearanceStream()};Xr(Kh,Vn);var Eo=function(){ns.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,13)},set:function(e){e?this.Ff=An(this.Ff,13):this.Ff=Cn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,21)},set:function(e){e?this.Ff=An(this.Ff,21):this.Ff=Cn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,23)},set:function(e){e?this.Ff=An(this.Ff,23):this.Ff=Cn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,24)},set:function(e){e?this.Ff=An(this.Ff,24):this.Ff=Cn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,25)},set:function(e){e?this.Ff=An(this.Ff,25):this.Ff=Cn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,26)},set:function(e){e?this.Ff=An(this.Ff,26):this.Ff=Cn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xr(Eo,ns);var Xh=function(){Eo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,14)},set:function(n){n?this.Ff=An(this.Ff,14):this.Ff=Cn(this.Ff,14)}}),this.password=!0};Xr(Xh,Eo);var tt={CheckBox:{createAppearanceStream:function(){return{N:{On:tt.CheckBox.YesNormal},D:{On:tt.CheckBox.YesPushDown,Off:tt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=cs(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=Ig(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+vt(tt.internal.getWidth(n))+" "+vt(tt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+vt(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=cs(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=tt.internal.getHeight(n),a=tt.internal.getWidth(n),o=Ig(n,n.caption);return i.push("1 g"),i.push("0 0 "+vt(a)+" "+vt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+vt(a-1)+" "+vt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+vt(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=cs(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vt(tt.internal.getWidth(n))+" "+vt(tt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:tt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=tt.RadioButton.Circle.YesNormal,e.D[n]=tt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=cs(n);e.scope=n.scope;var t=[],r=tt.internal.getWidth(n)<=tt.internal.getHeight(n)?tt.internal.getWidth(n)/4:tt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=tt.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+ga(tt.internal.getWidth(n)/2)+" "+ga(tt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=cs(n);e.scope=n.scope;var t=[],r=tt.internal.getWidth(n)<=tt.internal.getHeight(n)?tt.internal.getWidth(n)/4:tt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*tt.internal.Bezier_C).toFixed(5)),a=Number((r*tt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ga(tt.internal.getWidth(n)/2)+" "+ga(tt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+ga(tt.internal.getWidth(n)/2)+" "+ga(tt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=cs(n);e.scope=n.scope;var t=[],r=tt.internal.getWidth(n)<=tt.internal.getHeight(n)?tt.internal.getWidth(n)/4:tt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*tt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ga(tt.internal.getWidth(n)/2)+" "+ga(tt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:tt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=tt.RadioButton.Cross.YesNormal,e.D[n]=tt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=cs(n);e.scope=n.scope;var t=[],r=tt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+vt(tt.internal.getWidth(n)-2)+" "+vt(tt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(vt(r.x1.x)+" "+vt(r.x1.y)+" m"),t.push(vt(r.x2.x)+" "+vt(r.x2.y)+" l"),t.push(vt(r.x4.x)+" "+vt(r.x4.y)+" m"),t.push(vt(r.x3.x)+" "+vt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=cs(n);e.scope=n.scope;var t=tt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+vt(tt.internal.getWidth(n))+" "+vt(tt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+vt(tt.internal.getWidth(n)-2)+" "+vt(tt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(vt(t.x1.x)+" "+vt(t.x1.y)+" m"),r.push(vt(t.x2.x)+" "+vt(t.x2.y)+" l"),r.push(vt(t.x4.x)+" "+vt(t.x4.y)+" m"),r.push(vt(t.x3.x)+" "+vt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=cs(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vt(tt.internal.getWidth(n))+" "+vt(tt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};tt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=tt.internal.getWidth(n),t=tt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},tt.internal.getWidth=function(n){var e=0;return Wt(n)==="object"&&(e=Vv(n.Rect[2])),e},tt.internal.getHeight=function(n){var e=0;return Wt(n)==="object"&&(e=Vv(n.Rect[3])),e};var r8=gn.addField=function(n){if(n8(this,n),!(n instanceof ns))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};gn.AcroFormChoiceField=ec,gn.AcroFormListBox=tc,gn.AcroFormComboBox=nc,gn.AcroFormEditBox=Gh,gn.AcroFormButton=Vn,gn.AcroFormPushButton=Jh,gn.AcroFormRadioButton=rc,gn.AcroFormCheckBox=Kh,gn.AcroFormTextField=Eo,gn.AcroFormPasswordField=Xh,gn.AcroFormAppearance=tt,gn.AcroForm={ChoiceField:ec,ListBox:tc,ComboBox:nc,EditBox:Gh,Button:Vn,PushButton:Jh,RadioButton:rc,CheckBox:Kh,TextField:Eo,PasswordField:Xh,Appearance:tt},it.AcroForm={ChoiceField:ec,ListBox:tc,ComboBox:nc,EditBox:Gh,Button:Vn,PushButton:Jh,RadioButton:rc,CheckBox:Kh,TextField:Eo,PasswordField:Xh,Appearance:tt};it.AcroForm;function LS(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(L,M){var D,O,G,X,oe,J=e;if((M=M||e)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(P(L))for(oe in t)for(G=t[oe],D=0;D<G.length;D+=1){for(X=!0,O=0;O<G[D].length;O+=1)if(G[D][O]!==void 0&&G[D][O]!==L[O]){X=!1;break}if(X===!0){J=oe;break}}else for(oe in t)for(G=t[oe],D=0;D<G.length;D+=1){for(X=!0,O=0;O<G[D].length;O+=1)if(G[D][O]!==void 0&&G[D][O]!==L.charCodeAt(O)){X=!1;break}if(X===!0){J=oe;break}}return J===e&&M!==e&&(J=M),J},i=function L(M){for(var D=this.internal.write,O=this.internal.putStream,G=(0,this.internal.getFilters)();G.indexOf("FlateEncode")!==-1;)G.splice(G.indexOf("FlateEncode"),1);M.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:M.width}),X.push({key:"Height",value:M.height}),M.colorSpace===N.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(M.palette.length/3-1)+" "+("sMask"in M&&M.sMask!==void 0?M.objectId+2:M.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+M.colorSpace}),M.colorSpace===N.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:M.bitsPerComponent}),"decodeParameters"in M&&M.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+M.decodeParameters+">>"}),"transparency"in M&&Array.isArray(M.transparency)){for(var oe="",J=0,ie=M.transparency.length;J<ie;J++)oe+=M.transparency[J]+" "+M.transparency[J]+" ";X.push({key:"Mask",value:"["+oe+"]"})}M.sMask!==void 0&&X.push({key:"SMask",value:M.objectId+1+" 0 R"});var ae=M.filter!==void 0?["/"+M.filter]:void 0;if(O({data:M.data,additionalKeyValues:X,alreadyAppliedFilters:ae,objectId:M.objectId}),D("endobj"),"sMask"in M&&M.sMask!==void 0){var Ne="/Predictor "+M.predictor+" /Colors 1 /BitsPerComponent "+M.bitsPerComponent+" /Columns "+M.width,E={width:M.width,height:M.height,colorSpace:"DeviceGray",bitsPerComponent:M.bitsPerComponent,decodeParameters:Ne,data:M.sMask};"filter"in M&&(E.filter=M.filter),L.call(this,E)}if(M.colorSpace===N.INDEXED){var q=this.internal.newObject();O({data:j(new Uint8Array(M.palette)),objectId:q}),D("endobj")}},s=function(){var L=this.internal.collections.addImage_images;for(var M in L)i.call(this,L[M])},a=function(){var L,M=this.internal.collections.addImage_images,D=this.internal.write;for(var O in M)D("/I"+(L=M[O]).index,L.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var L=this.internal.collections.addImage_images;return o.call(this),L},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(L){return typeof n["process"+L.toUpperCase()]=="function"},p=function(L){return Wt(L)==="object"&&L.nodeType===1},m=function(L,M){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var D=""+L.getAttribute("src");if(D.indexOf("data:image/")===0)return Ru(unescape(D).split("base64,").pop());var O=n.loadFile(D,!0);if(O!==void 0)return O}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var G;switch(M){case"PNG":G="image/png";break;case"WEBP":G="image/webp";break;case"JPEG":case"JPG":default:G="image/jpeg"}return Ru(L.toDataURL(G,1).split("base64,").pop())}},f=function(L){var M=this.internal.collections.addImage_images;if(M){for(var D in M)if(L===M[D].alias)return M[D]}},x=function(L,M,D){return L||M||(L=-96,M=-96),L<0&&(L=-1*D.width*72/L/this.internal.scaleFactor),M<0&&(M=-1*D.height*72/M/this.internal.scaleFactor),L===0&&(L=M*D.width/D.height),M===0&&(M=L*D.height/D.width),[L,M]},y=function(L,M,D,O,G,X){var oe=x.call(this,D,O,G),J=this.internal.getCoordinateString,ie=this.internal.getVerticalCoordinateString,ae=l.call(this);if(D=oe[0],O=oe[1],ae[G.index]=G,X){X*=Math.PI/180;var Ne=Math.cos(X),E=Math.sin(X),q=function(Z){return Z.toFixed(4)},Y=[q(Ne),q(E),q(-1*E),q(Ne),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,J(L),ie(M+O),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([J(D),"0","0",J(O),"0","0","cm"].join(" "))):this.internal.write([J(D),"0","0",J(O),J(L),ie(M+O),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+G.index+" Do"),this.internal.write("Q")},N=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=n.__addimage__.sHashCode=function(L){var M,D,O=0;if(typeof L=="string")for(D=L.length,M=0;M<D;M++)O=(O<<5)-O+L.charCodeAt(M),O|=0;else if(P(L))for(D=L.byteLength/2,M=0;M<D;M++)O=(O<<5)-O+L[M],O|=0;return O},_=n.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var M=!0;return L.length===0&&(M=!1),L.length%4!=0&&(M=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(M=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(M=!1),M},C=n.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var M=L.indexOf(",");return M<0?null:L.substring(0,M).trim().endsWith("base64")?L.substring(M+1):null},T=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(L){return T()&&L instanceof ArrayBuffer};var P=n.__addimage__.isArrayBufferView=function(L){return T()&&typeof Uint32Array<"u"&&(L instanceof Int8Array||L instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array)},A=n.__addimage__.binaryStringToUint8Array=function(L){for(var M=L.length,D=new Uint8Array(M),O=0;O<M;O++)D[O]=L.charCodeAt(O);return D},j=n.__addimage__.arrayBufferToBinaryString=function(L){for(var M="",D=P(L)?L:new Uint8Array(L),O=0;O<D.length;O+=8192)M+=String.fromCharCode.apply(null,D.subarray(O,O+8192));return M};n.addImage=function(){var L,M,D,O,G,X,oe,J,ie;if(typeof arguments[1]=="number"?(M=e,D=arguments[1],O=arguments[2],G=arguments[3],X=arguments[4],oe=arguments[5],J=arguments[6],ie=arguments[7]):(M=arguments[1],D=arguments[2],O=arguments[3],G=arguments[4],X=arguments[5],oe=arguments[6],J=arguments[7],ie=arguments[8]),Wt(L=arguments[0])==="object"&&!p(L)&&"imageData"in L){var ae=L;L=ae.imageData,M=ae.format||M||e,D=ae.x||D||0,O=ae.y||O||0,G=ae.w||ae.width||G,X=ae.h||ae.height||X,oe=ae.alias||oe,J=ae.compression||J,ie=ae.rotation||ae.angle||ie}var Ne=this.internal.getFilters();if(J===void 0&&Ne.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(D)||isNaN(O))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var E=I.call(this,L,M,oe,J);return y.call(this,D,O,G,X,E,ie),this};var I=function(L,M,D,O){var G,X,oe;if(typeof L=="string"&&r(L)===e){L=unescape(L);var J=$(L,!1);(J!==""||(J=n.loadFile(L,!0))!==void 0)&&(L=J)}if(p(L)&&(L=m(L,M)),M=r(L,M),!d(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(((oe=D)==null||oe.length===0)&&(D=function(ie){return typeof ie=="string"||P(ie)?b(ie):P(ie.data)?b(ie.data):null}(L)),(G=f.call(this,D))||(T()&&(L instanceof Uint8Array||M==="RGBA"||(X=L,L=A(L))),G=this["process"+M.toUpperCase()](L,u.call(this),D,function(ie){return ie&&typeof ie=="string"&&(ie=ie.toUpperCase()),ie in n.image_compression?ie:w.NONE}(O),X)),!G)throw new Error("An unknown error occurred whilst processing the image.");return G},$=n.__addimage__.convertBase64ToBinaryString=function(L,M){M=typeof M!="boolean"||M;var D,O="";if(typeof L=="string"){var G;D=(G=C(L))!==null&&G!==void 0?G:L;try{O=Ru(D)}catch(X){if(M)throw _(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return O};n.getImageProperties=function(L){var M,D,O="";if(p(L)&&(L=m(L)),typeof L=="string"&&r(L)===e&&((O=$(L,!1))===""&&(O=n.loadFile(L)||""),L=O),D=r(L),!d(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(!T()||L instanceof Uint8Array||(L=A(L)),!(M=this["process"+D.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return M.fileType=D,M}})(it.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};it.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,d=!1,p=0;p<u.length&&!d;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var f=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(y.objId),b=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+f(w(r.contents))+")",s+=" /Popup "+N.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(w(b))+") >>",y.content=s;var _=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(s+=" /Open true"),s+=" >>",N.content=s,this.internal.write(y.objId,"0 R",N.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var C=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var T=this.annotations._nameMap[r.options.name];r.options.pageNumber=T.page,r.options.top=T.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var P=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+i),h:u(r+s)},options:a,type:"link"})},n.textWithLink=function(t,r,i,s){var a,o,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(t,o).length;a=Math.ceil(u*d)}else o=l,a=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,o,a,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(it.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=n.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&i.indexOf(y.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(y){var N=0,w=t,b="",_=0;for(N=0;N<y.length;N+=1)w[y.charCodeAt(N)]!==void 0?(_++,typeof(w=w[y.charCodeAt(N)])=="number"&&(b+=String.fromCharCode(w),w=t,_=0),N===y.length-1&&(w=t,b+=y.charAt(N-(_-1)),N-=_-1,_=0)):(w=t,b+=y.charAt(N-_),N-=_,_=0);return b};n.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(y,N,w){return a(y)?s(y)===!1?-1:!u(y)||!a(N)&&!a(w)||!a(w)&&o(N)||o(y)&&!a(N)||o(y)&&l(N)||o(y)&&o(N)?0:d(y)&&a(N)&&!o(N)&&a(w)&&u(w)?3:o(y)||!a(w)?1:2:-1},f=function(y){var N=0,w=0,b=0,_="",C="",T="",P=(y=y||"").split("\\s+"),A=[];for(N=0;N<P.length;N+=1){for(A.push(""),w=0;w<P[N].length;w+=1)_=P[N][w],C=P[N][w-1],T=P[N][w+1],a(_)?(b=m(_,C,T),A[N]+=b!==-1?String.fromCharCode(e[_.charCodeAt(0)][b]):_):A[N]+=_;A[N]=p(A[N])}return A.join(" ")},x=n.__arabicParser__.processArabic=n.processArabic=function(){var y,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(N)){var b=0;for(w=[],b=0;b<N.length;b+=1)Array.isArray(N[b])?w.push([f(N[b][0]),N[b][1],N[b][2]]):w.push([f(N[b])]);y=w}else y=f(N);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};n.events.push(["preProcessText",x])}(it.API),it.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(it.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(y){x=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,f=0,x=0,y=0,N=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=u.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,C){return _.concat(N.splitTextToSize(C,w))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)f<(y=this.getStringUnitWidth(l[b],{font:p})*d)&&(f=y);return f!==0&&(x=l.length),{w:f/=m,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,f&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,d,p,m){if(r.call(this),!d)throw new Error("No data for PDF table.");var f,x,y,N,w=[],b=[],_=[],C={},T={},P=[],A=[],j=(m=m||{}).autoSize||!1,I=m.printHeaders!==!1,$=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,L=m.margins||Object.assign({width:this.getPageWidth()},e),M=typeof m.padding=="number"?m.padding:3,D=m.headerBackgroundColor||"#c8c8c8",O=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=$,this.internal.__cell__.padding=M,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=O,this.setFontSize($),p==null)b=w=Object.keys(d[0]),_=w.map(function(){return"left"});else if(Array.isArray(p)&&Wt(p[0])==="object")for(w=p.map(function(ae){return ae.name}),b=p.map(function(ae){return ae.prompt||ae.name||""}),_=p.map(function(ae){return ae.align||"left"}),f=0;f<p.length;f+=1)T[p[f].name]=p[f].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(b=w=p,_=w.map(function(){return"left"}));if(j||Array.isArray(p)&&typeof p[0]=="string")for(f=0;f<w.length;f+=1){for(C[N=w[f]]=d.map(function(ae){return ae[N]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(b[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=C[N],this.setFont(void 0,"normal"),y=0;y<x.length;y+=1)P.push(this.getTextDimensions(x[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);T[N]=Math.max.apply(null,P)+M+M,P=[]}if(I){var G={};for(f=0;f<w.length;f+=1)G[w[f]]={},G[w[f]].text=b[f],G[w[f]].align=_[f];var X=o.call(this,G,T);A=w.map(function(ae){return new s(l,u,T[ae],X,G[ae].text,void 0,G[ae].align)}),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var oe=p.reduce(function(ae,Ne){return ae[Ne.name]=Ne.align,ae},{});for(f=0;f<d.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:d[f]},this);var J=o.call(this,d[f],T);for(y=0;y<w.length;y+=1){var ie=d[f][w[y]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:y,data:ie},this),a.call(this,new s(l,u,T[w[y]],J,ie,f+2,oe[w[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(f){var x=l[f];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*p/m+d+d},this).reduce(function(f,x){return Math.max(f,x)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}}(it.API);var DS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},MS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Rg=LS(MS),IS=[100,200,300,400,500,600,700,800,900],i8=LS(IS);function Fg(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return DS[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof Rg[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function Gv(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var s8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Jv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Kv(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function a8(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},s8,t.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=Fg(e[o])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){a=n[s.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+Kv(s)+"' and default family '"+r+"'.");if(a=function(l,u){if(u[l])return u[l];var d=Rg[l],p=d<=Rg.normal?-1:1,m=Gv(u,MS,d,p);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,a),a=function(l,u){if(u[l])return u[l];for(var d=DS[l],p=0;p<d.length;++p)if(u[d[p]])return u[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=i8[l],p=Gv(u,IS,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Kv(s)+"'.");return a}function Xv(n){return n.trimLeft()}function o8(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function l8(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Th,Qv,Zv,Z0=["times"];(function(n){var e,t,r,i,s,a,o,l,u,d=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new l,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new a,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new a,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var p=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=E;Object.defineProperty(this,"pdf",{get:function(){return q}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(we){Y=!!we}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(we){Z=!!we}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(we){isNaN(we)||(te=we)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(we){isNaN(we)||(ce=we)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(we){var Q;typeof we=="number"?Q=[we,we,we,we]:((Q=new Array(4))[0]=we[0],Q[1]=we.length>=2?we[1]:Q[0],Q[2]=we.length>=3?we[2]:Q[0],Q[3]=we.length>=4?we[3]:Q[1]),u.margin=Q}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(we){ge=we}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(we){de=we}});var _e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return _e},set:function(we){_e=we}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(we){we instanceof d&&(u=we)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(we){u.path=we}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(we){Te=we}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(we){var Q;Q=m(we),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(we){var Q=m(we);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(we){["butt","round","square"].indexOf(we)!==-1&&(this.ctx.lineCap=we,this.pdf.setLineCap(we))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(we){isNaN(we)||(this.ctx.lineWidth=we,this.pdf.setLineWidth(we))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(we){["bevel","round","miter"].indexOf(we)!==-1&&(this.ctx.lineJoin=we,this.pdf.setLineJoin(we))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(we){isNaN(we)||(this.ctx.miterLimit=we,this.pdf.setMiterLimit(we))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(we){this.ctx.textBaseline=we}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(we){["right","end","center","left","start"].indexOf(we)!==-1&&(this.ctx.textAlign=we)}});var ze=null;function Ie(we,Q){if(ze===null){var st=function(qe){var Le=[];return Object.keys(qe).forEach(function(Me){qe[Me].forEach(function(ee){var he=null;switch(ee){case"bold":he={family:Me,weight:"bold"};break;case"italic":he={family:Me,style:"italic"};break;case"bolditalic":he={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":he={family:Me}}he!==null&&(he.ref={name:Me,style:ee},Le.push(he))})}),Le}(we.getFontList());ze=function(qe){for(var Le={},Me=0;Me<qe.length;++Me){var ee=Fg(qe[Me]),he=ee.family,xe=ee.stretch,ke=ee.style,Ae=ee.weight;Le[he]=Le[he]||{},Le[he][xe]=Le[he][xe]||{},Le[he][xe][ke]=Le[he][xe][ke]||{},Le[he][xe][ke][Ae]=ee}return Le}(st.concat(Q))}return ze}var nt=null;Object.defineProperty(this,"fontFaces",{get:function(){return nt},set:function(we){ze=null,nt=we}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(we){var Q;if(this.ctx.font=we,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(we))!==null){var st=Q[1];Q[2];var qe=Q[3],Le=Q[4];Q[5];var Me=Q[6],ee=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(ee==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:ee==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var he=function(Ve){var ut,We,Yt=[],Nt=Ve.trim();if(Nt==="")return Z0;if(Nt in Jv)return[Jv[Nt]];for(;Nt!=="";){switch(We=null,ut=(Nt=Xv(Nt)).charAt(0)){case'"':case"'":We=o8(Nt.substring(1),ut);break;default:We=l8(Nt)}if(We===null||(Yt.push(We[0]),(Nt=Xv(We[1]))!==""&&Nt.charAt(0)!==","))return Z0;Nt=Nt.replace(/^,/,"")}return Yt}(Me);if(this.fontFaces){var xe=a8(Ie(this.pdf,this.fontFaces),he.map(function(Ve){return{family:Ve,stretch:"normal",weight:qe,style:st}}));this.pdf.setFont(xe.ref.name,xe.ref.style)}else{var ke="";(qe==="bold"||parseInt(qe,10)>=700||st==="bold")&&(ke="bold"),st==="italic"&&(ke+="italic"),ke.length===0&&(ke="normal");for(var Ae="",Ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Be=0;Be<he.length;Be++){if(this.pdf.internal.getFont(he[Be],ke,{noFallback:!0,disableWarning:!0})!==void 0){Ae=he[Be];break}if(ke==="bolditalic"&&this.pdf.internal.getFont(he[Be],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ae=he[Be],ke="bold";else if(this.pdf.internal.getFont(he[Be],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ae=he[Be],ke="normal";break}}if(Ae===""){for(var rt=0;rt<he.length;rt++)if(Ze[he[rt]]){Ae=Ze[he[rt]];break}}Ae=Ae===""?"Times":Ae,this.pdf.setFont(Ae,ke)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(we){this.ctx.globalCompositeOperation=we}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(we){this.ctx.globalAlpha=we}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(we){this.ctx.lineDashOffset=we,Ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(we){this.ctx.lineDash=we,Ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(we){this.ctx.ignoreClearRect=!!we}})};p.prototype.setLineDash=function(E){this.lineDash=E},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){C.call(this,"fill",!1)},p.prototype.stroke=function(){C.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(E,q){if(isNaN(E)||isNaN(q))throw Jt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new a(E,q));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(E,q)},p.prototype.closePath=function(){var E=new a(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Wt(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){E=new a(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(E.x,E.y)},p.prototype.lineTo=function(E,q){if(isNaN(E)||isNaN(q))throw Jt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new a(E,q));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(Y.x,Y.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},p.prototype.quadraticCurveTo=function(E,q,Y,Z){if(isNaN(Y)||isNaN(Z)||isNaN(E)||isNaN(q))throw Jt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new a(Y,Z)),ce=this.ctx.transform.applyToPoint(new a(E,q));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:te.x,y:te.y}),this.ctx.lastPoint=new a(te.x,te.y)},p.prototype.bezierCurveTo=function(E,q,Y,Z,te,ce){if(isNaN(te)||isNaN(ce)||isNaN(E)||isNaN(q)||isNaN(Y)||isNaN(Z))throw Jt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new a(te,ce)),de=this.ctx.transform.applyToPoint(new a(E,q)),_e=this.ctx.transform.applyToPoint(new a(Y,Z));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:_e.x,y2:_e.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new a(ge.x,ge.y)},p.prototype.arc=function(E,q,Y,Z,te,ce){if(isNaN(E)||isNaN(q)||isNaN(Y)||isNaN(Z)||isNaN(te))throw Jt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new a(E,q));E=ge.x,q=ge.y;var de=this.ctx.transform.applyToPoint(new a(0,Y)),_e=this.ctx.transform.applyToPoint(new a(0,0));Y=Math.sqrt(Math.pow(de.x-_e.x,2)+Math.pow(de.y-_e.y,2))}Math.abs(te-Z)>=2*Math.PI&&(Z=0,te=2*Math.PI),this.path.push({type:"arc",x:E,y:q,radius:Y,startAngle:Z,endAngle:te,counterclockwise:ce})},p.prototype.arcTo=function(E,q,Y,Z,te){throw new Error("arcTo not implemented.")},p.prototype.rect=function(E,q,Y,Z){if(isNaN(E)||isNaN(q)||isNaN(Y)||isNaN(Z))throw Jt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,q),this.lineTo(E+Y,q),this.lineTo(E+Y,q+Z),this.lineTo(E,q+Z),this.lineTo(E,q),this.lineTo(E+Y,q),this.lineTo(E,q)},p.prototype.fillRect=function(E,q,Y,Z){if(isNaN(E)||isNaN(q)||isNaN(Y)||isNaN(Z))throw Jt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,q,Y,Z),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},p.prototype.strokeRect=function(E,q,Y,Z){if(isNaN(E)||isNaN(q)||isNaN(Y)||isNaN(Z))throw Jt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(E,q,Y,Z),this.stroke())},p.prototype.clearRect=function(E,q,Y,Z){if(isNaN(E)||isNaN(q)||isNaN(Y)||isNaN(Z))throw Jt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,q,Y,Z))},p.prototype.save=function(E){E=typeof E!="boolean"||E;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},p.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(q),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(E){var q,Y,Z,te;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))q=0,Y=0,Z=0,te=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(ce!==null)q=parseInt(ce[1]),Y=parseInt(ce[2]),Z=parseInt(ce[3]),te=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)q=parseInt(ce[1]),Y=parseInt(ce[2]),Z=parseInt(ce[3]),te=parseFloat(ce[4]);else{if(te=1,typeof E=="string"&&E.charAt(0)!=="#"){var ge=new jS(E);E=ge.ok?ge.toHex():"#000000"}E.length===4?(q=E.substring(1,2),q+=q,Y=E.substring(2,3),Y+=Y,Z=E.substring(3,4),Z+=Z):(q=E.substring(1,3),Y=E.substring(3,5),Z=E.substring(5,7)),q=parseInt(q,16),Y=parseInt(Y,16),Z=parseInt(Z,16)}}return{r:q,g:Y,b:Z,a:te,style:E}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(E,q,Y,Z){if(isNaN(q)||isNaN(Y)||typeof E!="string")throw Jt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!f.call(this)){var te=J(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;M.call(this,{text:E,x:q,y:Y,scale:ce,angle:te,align:this.textAlign,maxWidth:Z})}},p.prototype.strokeText=function(E,q,Y,Z){if(isNaN(q)||isNaN(Y)||typeof E!="string")throw Jt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){Z=isNaN(Z)?void 0:Z;var te=J(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;M.call(this,{text:E,x:q,y:Y,scale:ce,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:Z})}},p.prototype.measureText=function(E){if(typeof E!="string")throw Jt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,Y=this.pdf.internal.scaleFactor,Z=q.internal.getFontSize(),te=q.getStringUnitWidth(E)*Z/q.internal.scaleFactor,ce=function(ge){var de=(ge=ge||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new ce({width:te*=Math.round(96*Y/72*1e4)/1e4})},p.prototype.scale=function(E,q){if(isNaN(E)||isNaN(q))throw Jt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new l(E,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.rotate=function(E){if(isNaN(E))throw Jt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new l(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},p.prototype.translate=function(E,q){if(isNaN(E)||isNaN(q))throw Jt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new l(1,0,0,1,E,q);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.transform=function(E,q,Y,Z,te,ce){if(isNaN(E)||isNaN(q)||isNaN(Y)||isNaN(Z)||isNaN(te)||isNaN(ce))throw Jt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new l(E,q,Y,Z,te,ce);this.ctx.transform=this.ctx.transform.multiply(ge)},p.prototype.setTransform=function(E,q,Y,Z,te,ce){E=isNaN(E)?1:E,q=isNaN(q)?0:q,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?1:Z,te=isNaN(te)?0:te,ce=isNaN(ce)?0:ce,this.ctx.transform=new l(E,q,Y,Z,te,ce)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(E,q,Y,Z,te,ce,ge,de,_e){var Te=this.pdf.getImageProperties(E),ze=1,Ie=1,nt=1,we=1;Z!==void 0&&de!==void 0&&(nt=de/Z,we=_e/te,ze=Te.width/Z*de/Z,Ie=Te.height/te*_e/te),ce===void 0&&(ce=q,ge=Y,q=0,Y=0),Z!==void 0&&de===void 0&&(de=Z,_e=te),Z===void 0&&de===void 0&&(de=Te.width,_e=Te.height);for(var Q,st=this.ctx.transform.decompose(),qe=J(st.rotate.shx),Le=new l,Me=(Le=(Le=(Le=Le.multiply(st.translate)).multiply(st.skew)).multiply(st.scale)).applyToRectangle(new o(ce-q*nt,ge-Y*we,Z*ze,te*Ie)),ee=N.call(this,Me),he=[],xe=0;xe<ee.length;xe+=1)he.indexOf(ee[xe])===-1&&he.push(ee[xe]);if(_(he),this.autoPaging)for(var ke=he[0],Ae=he[he.length-1],Ze=ke;Ze<Ae+1;Ze++){this.pdf.setPage(Ze);var Be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rt=Ze===1?this.posY+this.margin[0]:this.margin[0],Ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=Ze===1?0:Ve+(Ze-2)*ut;if(this.ctx.clip_path.length!==0){var Yt=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Q,this.posX+this.margin[3],-We+rt+this.ctx.prevPageLastElemOffset),T.call(this,"fill",!0),this.path=Yt}var Nt=JSON.parse(JSON.stringify(Me));Nt=b([Nt],this.posX+this.margin[3],-We+rt+this.ctx.prevPageLastElemOffset)[0];var $n=(Ze>ke||Ze<Ae)&&y.call(this);$n&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,ut,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",Nt.x,Nt.y,Nt.w,Nt.h,null,null,qe),$n&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,qe)};var N=function(E,q,Y){var Z=[];q=q||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":Z.push(Math.floor((E.y+te)/Y)+1);break;case"arc":Z.push(Math.floor((E.y+te-E.radius)/Y)+1),Z.push(Math.floor((E.y+te+E.radius)/Y)+1);break;case"qct":var ce=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);Z.push(Math.floor((ce.y+te)/Y)+1),Z.push(Math.floor((ce.y+ce.h+te)/Y)+1);break;case"bct":var ge=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);Z.push(Math.floor((ge.y+te)/Y)+1),Z.push(Math.floor((ge.y+ge.h+te)/Y)+1);break;case"rect":Z.push(Math.floor((E.y+te)/Y)+1),Z.push(Math.floor((E.y+E.h+te)/Y)+1)}for(var de=0;de<Z.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<Z[de];)w.call(this);return Z},w=function(){var E=this.fillStyle,q=this.strokeStyle,Y=this.font,Z=this.lineCap,te=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=q,this.font=Y,this.lineCap=Z,this.lineWidth=te,this.lineJoin=ce},b=function(E,q,Y){for(var Z=0;Z<E.length;Z++)switch(E[Z].type){case"bct":E[Z].x2+=q,E[Z].y2+=Y;case"qct":E[Z].x1+=q,E[Z].y1+=Y;case"mt":case"lt":case"arc":default:E[Z].x+=q,E[Z].y+=Y}return E},_=function(E){return E.sort(function(q,Y){return q-Y})},C=function(E,q){for(var Y,Z,te=this.fillStyle,ce=this.strokeStyle,ge=this.lineCap,de=this.lineWidth,_e=Math.abs(de*this.ctx.transform.scaleX),Te=this.lineJoin,ze=JSON.parse(JSON.stringify(this.path)),Ie=JSON.parse(JSON.stringify(this.path)),nt=[],we=0;we<Ie.length;we++)if(Ie[we].x!==void 0)for(var Q=N.call(this,Ie[we]),st=0;st<Q.length;st+=1)nt.indexOf(Q[st])===-1&&nt.push(Q[st]);for(var qe=0;qe<nt.length;qe++)for(;this.pdf.internal.getNumberOfPages()<nt[qe];)w.call(this);if(_(nt),this.autoPaging)for(var Le=nt[0],Me=nt[nt.length-1],ee=Le;ee<Me+1;ee++){this.pdf.setPage(ee),this.fillStyle=te,this.strokeStyle=ce,this.lineCap=ge,this.lineWidth=_e,this.lineJoin=Te;var he=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xe=ee===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ae=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=ee===1?0:ke+(ee-2)*Ae;if(this.ctx.clip_path.length!==0){var Be=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Y,this.posX+this.margin[3],-Ze+xe+this.ctx.prevPageLastElemOffset),T.call(this,E,!0),this.path=Be}if(Z=JSON.parse(JSON.stringify(ze)),this.path=b(Z,this.posX+this.margin[3],-Ze+xe+this.ctx.prevPageLastElemOffset),q===!1||ee===0){var rt=(ee>Le||ee<Me)&&y.call(this);rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],he,Ae,null).clip().discardPath()),T.call(this,E,q),rt&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=_e,T.call(this,E,q),this.lineWidth=de;this.path=ze},T=function(E,q){if((E!=="stroke"||q||!x.call(this))&&(E==="stroke"||q||!f.call(this))){for(var Y,Z,te=[],ce=this.path,ge=0;ge<ce.length;ge++){var de=ce[ge];switch(de.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:de,deltas:[],abs:[]});break;case"lt":var _e=te.length;if(ce[ge-1]&&!isNaN(ce[ge-1].x)&&(Y=[de.x-ce[ge-1].x,de.y-ce[ge-1].y],_e>0)){for(;_e>=0;_e--)if(te[_e-1].close!==!0&&te[_e-1].begin!==!0){te[_e-1].deltas.push(Y),te[_e-1].abs.push(de);break}}break;case"bct":Y=[de.x1-ce[ge-1].x,de.y1-ce[ge-1].y,de.x2-ce[ge-1].x,de.y2-ce[ge-1].y,de.x-ce[ge-1].x,de.y-ce[ge-1].y],te[te.length-1].deltas.push(Y);break;case"qct":var Te=ce[ge-1].x+2/3*(de.x1-ce[ge-1].x),ze=ce[ge-1].y+2/3*(de.y1-ce[ge-1].y),Ie=de.x+2/3*(de.x1-de.x),nt=de.y+2/3*(de.y1-de.y),we=de.x,Q=de.y;Y=[Te-ce[ge-1].x,ze-ce[ge-1].y,Ie-ce[ge-1].x,nt-ce[ge-1].y,we-ce[ge-1].x,Q-ce[ge-1].y],te[te.length-1].deltas.push(Y);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(de)}}Z=q?null:E==="stroke"?"stroke":"fill";for(var st=!1,qe=0;qe<te.length;qe++)if(te[qe].arc)for(var Le=te[qe].abs,Me=0;Me<Le.length;Me++){var ee=Le[Me];ee.type==="arc"?j.call(this,ee.x,ee.y,ee.radius,ee.startAngle,ee.endAngle,ee.counterclockwise,void 0,q,!st):D.call(this,ee.x,ee.y),st=!0}else if(te[qe].close===!0)this.pdf.internal.out("h"),st=!1;else if(te[qe].begin!==!0){var he=te[qe].start.x,xe=te[qe].start.y;O.call(this,te[qe].deltas,he,xe),st=!0}Z&&I.call(this,Z),q&&$.call(this)}},P=function(E){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-Y;case"top":return E+q-Y;case"hanging":return E+q-2*Y;case"middle":return E+q/2-Y;case"ideographic":return E;case"alphabetic":default:return E}},A=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(q,Y){this.colorStops.push([q,Y])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(E,q,Y,Z,te,ce,ge,de,_e){for(var Te=X.call(this,Y,Z,te,ce),ze=0;ze<Te.length;ze++){var Ie=Te[ze];ze===0&&(_e?L.call(this,Ie.x1+E,Ie.y1+q):D.call(this,Ie.x1+E,Ie.y1+q)),G.call(this,E,q,Ie.x2,Ie.y2,Ie.x3,Ie.y3,Ie.x4,Ie.y4)}de?$.call(this):I.call(this,ge)},I=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(E,q){this.pdf.internal.out(t(E)+" "+r(q)+" m")},M=function(E){var q;switch(E.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var Y=this.pdf.getTextDimensions(E.text),Z=P.call(this,E.y),te=A.call(this,Z)-Y.h,ce=this.ctx.transform.applyToPoint(new a(E.x,Z)),ge=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var _e,Te,ze,Ie=this.ctx.transform.applyToRectangle(new o(E.x,Z,Y.w,Y.h)),nt=de.applyToRectangle(new o(E.x,te,Y.w,Y.h)),we=N.call(this,nt),Q=[],st=0;st<we.length;st+=1)Q.indexOf(we[st])===-1&&Q.push(we[st]);if(_(Q),this.autoPaging)for(var qe=Q[0],Le=Q[Q.length-1],Me=qe;Me<Le+1;Me++){this.pdf.setPage(Me);var ee=Me===1?this.posY+this.margin[0]:this.margin[0],he=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xe=this.pdf.internal.pageSize.height-this.margin[2],ke=xe-this.margin[0],Ae=this.pdf.internal.pageSize.width-this.margin[1],Ze=Ae-this.margin[3],Be=Me===1?0:he+(Me-2)*ke;if(this.ctx.clip_path.length!==0){var rt=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(_e,this.posX+this.margin[3],-1*Be+ee),T.call(this,"fill",!0),this.path=rt}var Ve=b([JSON.parse(JSON.stringify(nt))],this.posX+this.margin[3],-Be+ee+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*E.scale),ze=this.lineWidth,this.lineWidth=ze*E.scale);var ut=this.autoPaging!=="text";if(ut||Ve.y+Ve.h<=xe){if(ut||Ve.y>=ee&&Ve.x<=Ae){var We=ut?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||Ae-Ve.x)[0],Yt=b([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-Be+ee+this.ctx.prevPageLastElemOffset)[0],Nt=ut&&(Me>qe||Me<Le)&&y.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,ke,null).clip().discardPath()),this.pdf.text(We,Yt.x,Yt.y,{angle:E.angle,align:q,renderingMode:E.renderingMode}),Nt&&this.pdf.restoreGraphicsState()}}else Ve.y<xe&&(this.ctx.prevPageLastElemOffset+=xe-Ve.y);E.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=ze)}else E.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*E.scale),ze=this.lineWidth,this.lineWidth=ze*E.scale),this.pdf.text(E.text,ce.x+this.posX,ce.y+this.posY,{angle:E.angle,align:q,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=ze)},D=function(E,q,Y,Z){Y=Y||0,Z=Z||0,this.pdf.internal.out(t(E+Y)+" "+r(q+Z)+" l")},O=function(E,q,Y){return this.pdf.lines(E,q,Y,null,null)},G=function(E,q,Y,Z,te,ce,ge,de){this.pdf.internal.out([e(i(Y+E)),e(s(Z+q)),e(i(te+E)),e(s(ce+q)),e(i(ge+E)),e(s(de+q)),"c"].join(" "))},X=function(E,q,Y,Z){for(var te=2*Math.PI,ce=Math.PI/2;q>Y;)q-=te;var ge=Math.abs(Y-q);ge<te&&Z&&(ge=te-ge);for(var de=[],_e=Z?-1:1,Te=q;ge>1e-5;){var ze=Te+_e*Math.min(ge,ce);de.push(oe.call(this,E,Te,ze)),ge-=Math.abs(ze-Te),Te=ze}return de},oe=function(E,q,Y){var Z=(Y-q)/2,te=E*Math.cos(Z),ce=E*Math.sin(Z),ge=te,de=-ce,_e=ge*ge+de*de,Te=_e+ge*te+de*ce,ze=4/3*(Math.sqrt(2*_e*Te)-Te)/(ge*ce-de*te),Ie=ge-ze*de,nt=de+ze*ge,we=Ie,Q=-nt,st=Z+q,qe=Math.cos(st),Le=Math.sin(st);return{x1:E*Math.cos(q),y1:E*Math.sin(q),x2:Ie*qe-nt*Le,y2:Ie*Le+nt*qe,x3:we*qe-Q*Le,y3:we*Le+Q*qe,x4:E*Math.cos(Y),y4:E*Math.sin(Y)}},J=function(E){return 180*E/Math.PI},ie=function(E,q,Y,Z,te,ce){var ge=E+.5*(Y-E),de=q+.5*(Z-q),_e=te+.5*(Y-te),Te=ce+.5*(Z-ce),ze=Math.min(E,te,ge,_e),Ie=Math.max(E,te,ge,_e),nt=Math.min(q,ce,de,Te),we=Math.max(q,ce,de,Te);return new o(ze,nt,Ie-ze,we-nt)},ae=function(E,q,Y,Z,te,ce,ge,de){var _e,Te,ze,Ie,nt,we,Q,st,qe,Le,Me,ee,he,xe,ke=Y-E,Ae=Z-q,Ze=te-Y,Be=ce-Z,rt=ge-te,Ve=de-ce;for(Te=0;Te<41;Te++)qe=(Q=(ze=E+(_e=Te/40)*ke)+_e*((nt=Y+_e*Ze)-ze))+_e*(nt+_e*(te+_e*rt-nt)-Q),Le=(st=(Ie=q+_e*Ae)+_e*((we=Z+_e*Be)-Ie))+_e*(we+_e*(ce+_e*Ve-we)-st),Te==0?(Me=qe,ee=Le,he=qe,xe=Le):(Me=Math.min(Me,qe),ee=Math.min(ee,Le),he=Math.max(he,qe),xe=Math.max(xe,Le));return new o(Math.round(Me),Math.round(ee),Math.round(he-Me),Math.round(xe-ee))},Ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,q,Y=(E=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:q}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(it.API),function(n){var e=function(s){var a,o,l,u,d,p,m,f,x,y;for(o=[],l=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(y=d%85))/85)-(x=d%85))/85)-(f=d%85))/85)-(m=d%85))/85)%85,o.push(p+33,m+33,f+33,x+33,y+33)):o.push(122);return function(N,w){for(var b=w;b>0;b--)N.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(s){var a,o,l,u,d,p=String,m="length",f=255,x="charCodeAt",y="slice",N="replace";for(s[y](-2),s=s[y](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),l=[],u=0,d=(s+=a="uuuuu"[y](s[m]%5||5))[m];d>u;u+=5)o=52200625*(s[x](u)-33)+614125*(s[x](u+1)-33)+7225*(s[x](u+2)-33)+85*(s[x](u+3)-33)+(s[x](u+4)-33),l.push(f&o>>24,f&o>>16,f&o>>8,f&o);return function(w,b){for(var _=b;_>0;_--)w.pop()}(l,a[m]),p.fromCharCode.apply(p,l)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=Tg(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var o=0,l=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(it.API),function(n){n.loadFile=function(e,t,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,u,d){var p=new XMLHttpRequest,m=0,f=function(x){var y=x.length,N=[],w=String.fromCharCode;for(m=0;m<y;m+=1)N.push(w(255&x.charCodeAt(m)));return N.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?d(f(this.responseText)):d(void 0)}),p.send(null),u&&p.status===200)return f(p.responseText)}(i,s,a)}catch{}return o}(e,t,r)},n.loadImageFile=n.loadFile}(it.API),function(n){function e(){return(dt.html2canvas?Promise.resolve(dt.html2canvas):Jr(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(dt.DOMPurify?Promise.resolve(dt.DOMPurify):Jr(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=Wt(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var l=document.createElement(a);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},s=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||p.appendChild(l(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var f=u[m],x=f.src.find(function(y){return y.format==="truetype"});x&&l.addFont(x.url,f.ref.name,f.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),o(this.prop.container,p)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||it.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,l,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,l,u){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,u),p}).then(u,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,a,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,it.getPageSize=function(a,o,l){if(Wt(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var f,x=0,y=0;if(m.hasOwnProperty(p))x=m[p][1]/d,y=m[p][0]/d;else try{x=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",y>x&&(f=y,y=x,x=f);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",x>y&&(f=y,y=x,x=f)}return{width:y,height:x,unit:o,k:d,orientation:a}},n.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Fg):null;var l=new s(o);return o.worker?l:l.from(a).doCallback()}}(it.API),it.API.addJS=function(n){return Zv=n,this.internal.events.subscribe("postPutResources",function(){Th=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Th+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Qv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Zv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Th!==void 0&&Qv!==void 0&&this.internal.out("/Names <</JavaScript "+Th+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var p=t.internal.newObject();d.push(p);var m=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<d.length;s++)t.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(it.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,a,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(p){for(var m,f=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,y={width:0,height:0,numcomponents:1},N=4;N<x;N+=2){if(N+=f,e.indexOf(p.charCodeAt(N+1))!==-1){m=256*p.charCodeAt(N+5)+p.charCodeAt(N+6),y={width:256*p.charCodeAt(N+7)+p.charCodeAt(N+8),height:m,numcomponents:p.charCodeAt(N+9)};break}f=256*p.charCodeAt(N+2)+p.charCodeAt(N+3)}return y}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}}(it.API);var Nl,Lh,ex,tx,nx,c8=function(){var n,e,t;function r(s){var a,o,l,u,d,p,m,f,x,y,N,w,b,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(a=this.readUInt32(),x=(function(){var C,T;for(T=[],C=0;C<4;++C)T.push(String.fromCharCode(this.data[this.pos++]));return T}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*d/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,a-=4),s=(p!=null?p.data:void 0)||this.imgData,w=0;0<=a?w<a:w>a;0<=a?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(b=0;0<=y?b<y:b>y;0<=y?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":m=(N=this.read(a)).indexOf(0),f=String.fromCharCode.apply(String,N.slice(0,m)),this.text[f]=String.fromCharCode.apply(String,N.slice(m+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,m,f,x){var y,N,w,b,_,C,T,P,A,j,I,$,L,M,D,O,G,X,oe,J,ie,ae=Math.ceil((u.width-p)/f),Ne=Math.ceil((u.height-m)/x),E=u.width==ae&&u.height==Ne;for(M=a*ae,$=E?o:new Uint8Array(M*Ne),C=s.length,L=0,N=0;L<Ne&&l<C;){switch(s[l++]){case 0:for(b=G=0;G<M;b=G+=1)$[N++]=s[l++];break;case 1:for(b=X=0;X<M;b=X+=1)y=s[l++],_=b<a?0:$[N-a],$[N++]=(y+_)%256;break;case 2:for(b=oe=0;oe<M;b=oe+=1)y=s[l++],w=(b-b%a)/a,D=L&&$[(L-1)*M+w*a+b%a],$[N++]=(D+y)%256;break;case 3:for(b=J=0;J<M;b=J+=1)y=s[l++],w=(b-b%a)/a,_=b<a?0:$[N-a],D=L&&$[(L-1)*M+w*a+b%a],$[N++]=(y+Math.floor((_+D)/2))%256;break;case 4:for(b=ie=0;ie<M;b=ie+=1)y=s[l++],w=(b-b%a)/a,_=b<a?0:$[N-a],L===0?D=O=0:(D=$[(L-1)*M+w*a+b%a],O=w&&$[(L-1)*M+(w-1)*a+b%a]),T=_+D-O,P=Math.abs(T-_),j=Math.abs(T-D),I=Math.abs(T-O),A=P<=j&&P<=I?_:j<=I?D:O,$[N++]=(y+A)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!E){var q=((m+L*x)*u.width+p)*a,Y=L*M;for(b=0;b<ae;b+=1){for(var Z=0;Z<a;Z+=1)o[q++]=$[Y++];q+=(f-1)*a}}L++}}return s=UC(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var s,a,o,l,u,d,p,m,f;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,s=0,a=p=0,m=o.length;p<m;a=p+=3)u[l++]=o[a],u[l++]=o[a+1],u[l++]=o[a+2],u[l++]=(f=d[s++])!=null?f:255;return u},r.prototype.copyToImageData=function(s,a){var o,l,u,d,p,m,f,x,y,N,w;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,o=!0),x=(u=s.data||s).length,p=y||a,d=m=0,l===1)for(;d<x;)f=y?4*a[d/4]:m,N=p[f++],u[d++]=N,u[d++]=N,u[d++]=N,u[d++]=o?p[f++]:255,m=f;else for(;d<x;)f=y?4*a[d/4]:m,u[d++]=p[f++],u[d++]=p[f++],u[d++]=p[f++],u[d++]=o?p[f++]:255,m=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(dt)==="[object Window]"){try{e=dt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var a;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,o,l,u,d,p,m,f;if(this.animation){for(f=[],o=d=0,p=(m=this.animation.frames).length;d<p;o=++d)a=m[o],l=s.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,u),a.imageData=l,f.push(a.image=n(l));return f}},r.prototype.renderFrame=function(s,a){var o,l,u;return o=(l=this.animation.frames)[a],u=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var a,o,l,u,d,p,m=this;return o=0,p=this.animation,u=p.numFrames,l=p.frames,d=p.numPlays,(a=function(){var f,x;if(f=o++%u,x=l[f],m.renderFrame(s,f),u>1&&o/u<d)return m.animation._timeout=setTimeout(a,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function u8(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,a=1<<(7&i)+1;n[e++],n[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var u=!0,d=[],p=0,m=null,f=0,x=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,x=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=n[e++];p=n[e++]|n[e++]<<8,m=n[e++],!(1&y)&&(m=null),f=y>>2&7,e++;break;case 254:for(;;){if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var N=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,_=n[e++]|n[e++]<<8,C=n[e++],T=C>>6&1,P=1<<(7&C)+1,A=o,j=l,I=!1;C>>7&&(I=!0,A=e,j=P,e+=3*P);var $=e;for(e++;;){var L;if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}d.push({x:N,y:w,width:b,height:_,has_local_palette:I,palette_offset:A,palette_size:j,data_offset:$,data_length:e-$,transparent_index:m,interlaced:!!T,delay:p,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(M){if(M<0||M>=d.length)throw new Error("Frame index out of range.");return d[M]},this.decodeAndBlitFrameBGRA=function(M,D){var O=this.frameInfo(M),G=O.width*O.height,X=new Uint8Array(G);rx(n,O.data_offset,X,G);var oe=O.palette_offset,J=O.transparent_index;J===null&&(J=256);var ie=O.width,ae=t-ie,Ne=ie,E=4*(O.y*t+O.x),q=4*((O.y+O.height)*t+O.x),Y=E,Z=4*ae;O.interlaced===!0&&(Z+=4*t*7);for(var te=8,ce=0,ge=X.length;ce<ge;++ce){var de=X[ce];if(Ne===0&&(Ne=ie,(Y+=Z)>=q&&(Z=4*ae+4*t*(te-1),Y=E+(ie+ae)*(te<<1),te>>=1)),de===J)Y+=4;else{var _e=n[oe+3*de],Te=n[oe+3*de+1],ze=n[oe+3*de+2];D[Y++]=ze,D[Y++]=Te,D[Y++]=_e,D[Y++]=255}--Ne}},this.decodeAndBlitFrameRGBA=function(M,D){var O=this.frameInfo(M),G=O.width*O.height,X=new Uint8Array(G);rx(n,O.data_offset,X,G);var oe=O.palette_offset,J=O.transparent_index;J===null&&(J=256);var ie=O.width,ae=t-ie,Ne=ie,E=4*(O.y*t+O.x),q=4*((O.y+O.height)*t+O.x),Y=E,Z=4*ae;O.interlaced===!0&&(Z+=4*t*7);for(var te=8,ce=0,ge=X.length;ce<ge;++ce){var de=X[ce];if(Ne===0&&(Ne=ie,(Y+=Z)>=q&&(Z=4*ae+4*t*(te-1),Y=E+(ie+ae)*(te<<1),te>>=1)),de===J)Y+=4;else{var _e=n[oe+3*de],Te=n[oe+3*de+1],ze=n[oe+3*de+2];D[Y++]=_e,D[Y++]=Te,D[Y++]=ze,D[Y++]=255}--Ne}}}function rx(n,e,t,r){for(var i=n[e++],s=1<<i,a=s+1,o=a+1,l=i+1,u=(1<<l)-1,d=0,p=0,m=0,f=n[e++],x=new Int32Array(4096),y=null;;){for(;d<16&&f!==0;)p|=n[e++]<<d,d+=8,f===1?f=n[e++]:--f;if(d<l)break;var N=p&u;if(p>>=l,d-=l,N!==s){if(N===a)break;for(var w=N<o?N:y,b=0,_=w;_>s;)_=x[_]>>8,++b;var C=_;if(m+b+(w!==N?1:0)>r)return void Jt.log("Warning, gif stream longer than expected.");t[m++]=C;var T=m+=b;for(w!==N&&(t[m++]=C),_=w;b--;)_=x[_],t[--T]=255&_,_>>=8;y!==null&&o<4096&&(x[o++]=y<<8|C,o>=u+1&&l<12&&(++l,u=u<<1|1)),y=N}else o=a+1,u=(1<<(l=i+1))-1,y=null}return m!==r&&Jt.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function em(n){var e,t,r,i,s,a=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),p=new Array(65535),m=new Array(65535),f=new Array(64),x=new Array(64),y=[],N=0,w=7,b=new Array(64),_=new Array(64),C=new Array(64),T=new Array(256),P=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(E,q){for(var Y=0,Z=0,te=new Array,ce=1;ce<=16;ce++){for(var ge=1;ge<=E[ce];ge++)te[q[Z]]=[],te[q[Z]][0]=Y,te[q[Z]][1]=ce,Z++,Y++;Y*=2}return te}function oe(E){for(var q=E[0],Y=E[1]-1;Y>=0;)q&1<<Y&&(N|=1<<w),Y--,--w<0&&(N==255?(J(255),J(0)):J(N),w=7,N=0)}function J(E){y.push(E)}function ie(E){J(E>>8&255),J(255&E)}function ae(E,q,Y,Z,te){for(var ce,ge=te[0],de=te[240],_e=function(Le,Me){var ee,he,xe,ke,Ae,Ze,Be,rt,Ve,ut,We=0;for(Ve=0;Ve<8;++Ve){ee=Le[We],he=Le[We+1],xe=Le[We+2],ke=Le[We+3],Ae=Le[We+4],Ze=Le[We+5],Be=Le[We+6];var Yt=ee+(rt=Le[We+7]),Nt=ee-rt,$n=he+Be,Et=he-Be,Mt=xe+Ze,Bn=xe-Ze,Oe=ke+Ae,kt=ke-Ae,ht=Yt+Oe,me=Yt-Oe,Fe=$n+Mt,$e=$n-Mt;Le[We]=ht+Fe,Le[We+4]=ht-Fe;var Ue=.707106781*($e+me);Le[We+2]=me+Ue,Le[We+6]=me-Ue;var Ke=.382683433*((ht=kt+Bn)-($e=Et+Nt)),Tt=.5411961*ht+Ke,St=1.306562965*$e+Ke,gi=.707106781*(Fe=Bn+Et),Fi=Nt+gi,lt=Nt-gi;Le[We+5]=lt+Tt,Le[We+3]=lt-Tt,Le[We+1]=Fi+St,Le[We+7]=Fi-St,We+=8}for(We=0,Ve=0;Ve<8;++Ve){ee=Le[We],he=Le[We+8],xe=Le[We+16],ke=Le[We+24],Ae=Le[We+32],Ze=Le[We+40],Be=Le[We+48];var fe=ee+(rt=Le[We+56]),Xe=ee-rt,mt=he+Be,at=he-Be,et=xe+Ze,gt=xe-Ze,jt=ke+Ae,_t=ke-Ae,$t=fe+jt,wn=fe-jt,Un=mt+et,Pr=mt-et;Le[We]=$t+Un,Le[We+32]=$t-Un;var Tr=.707106781*(Pr+wn);Le[We+16]=wn+Tr,Le[We+48]=wn-Tr;var yi=.382683433*(($t=_t+gt)-(Pr=at+Xe)),vi=.5411961*$t+yi,zo=1.306562965*Pr+yi,Wo=.707106781*(Un=gt+at),Ho=Xe+Wo,qo=Xe-Wo;Le[We+40]=qo+vi,Le[We+24]=qo-vi,Le[We+8]=Ho+zo,Le[We+56]=Ho-zo,We++}for(Ve=0;Ve<64;++Ve)ut=Le[Ve]*Me[Ve],f[Ve]=ut>0?ut+.5|0:ut-.5|0;return f}(E,q),Te=0;Te<64;++Te)x[A[Te]]=_e[Te];var ze=x[0]-Y;Y=x[0],ze==0?oe(Z[0]):(oe(Z[m[ce=32767+ze]]),oe(p[ce]));for(var Ie=63;Ie>0&&x[Ie]==0;)Ie--;if(Ie==0)return oe(ge),Y;for(var nt,we=1;we<=Ie;){for(var Q=we;x[we]==0&&we<=Ie;)++we;var st=we-Q;if(st>=16){nt=st>>4;for(var qe=1;qe<=nt;++qe)oe(de);st&=15}ce=32767+x[we],oe(te[(st<<4)+m[ce]]),oe(p[ce]),we++}return Ie!=63&&oe(ge),Y}function Ne(E){E=Math.min(Math.max(E,1),100),s!=E&&(function(q){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var te=a((Y[Z]*q+50)/100);te=Math.min(Math.max(te,1),255),o[A[Z]]=te}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var de=a((ce[ge]*q+50)/100);de=Math.min(Math.max(de,1),255),l[A[ge]]=de}for(var _e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,ze=0;ze<8;ze++)for(var Ie=0;Ie<8;Ie++)u[Te]=1/(o[A[Te]]*_e[ze]*_e[Ie]*8),d[Te]=1/(l[A[Te]]*_e[ze]*_e[Ie]*8),Te++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),s=E)}this.encode=function(E,q){q&&Ne(q),y=new Array,N=0,w=7,ie(65496),ie(65504),ie(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),ie(1),ie(1),J(0),J(0),function(){ie(65499),ie(132),J(0);for(var he=0;he<64;he++)J(o[he]);J(1);for(var xe=0;xe<64;xe++)J(l[xe])}(),function(he,xe){ie(65472),ie(17),J(8),ie(xe),ie(he),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(E.width,E.height),function(){ie(65476),ie(418),J(0);for(var he=0;he<16;he++)J(j[he+1]);for(var xe=0;xe<=11;xe++)J(I[xe]);J(16);for(var ke=0;ke<16;ke++)J($[ke+1]);for(var Ae=0;Ae<=161;Ae++)J(L[Ae]);J(1);for(var Ze=0;Ze<16;Ze++)J(M[Ze+1]);for(var Be=0;Be<=11;Be++)J(D[Be]);J(17);for(var rt=0;rt<16;rt++)J(O[rt+1]);for(var Ve=0;Ve<=161;Ve++)J(G[Ve])}(),ie(65498),ie(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var Y=0,Z=0,te=0;N=0,w=7,this.encode.displayName="_encode_";for(var ce,ge,de,_e,Te,ze,Ie,nt,we,Q=E.data,st=E.width,qe=E.height,Le=4*st,Me=0;Me<qe;){for(ce=0;ce<Le;){for(Te=Le*Me+ce,Ie=-1,nt=0,we=0;we<64;we++)ze=Te+(nt=we>>3)*Le+(Ie=4*(7&we)),Me+nt>=qe&&(ze-=Le*(Me+1+nt-qe)),ce+Ie>=Le&&(ze-=ce+Ie-Le+4),ge=Q[ze++],de=Q[ze++],_e=Q[ze++],b[we]=(P[ge]+P[de+256>>0]+P[_e+512>>0]>>16)-128,_[we]=(P[ge+768>>0]+P[de+1024>>0]+P[_e+1280>>0]>>16)-128,C[we]=(P[ge+1280>>0]+P[de+1536>>0]+P[_e+1792>>0]>>16)-128;Y=ae(b,u,Y,e,r),Z=ae(_,d,Z,t,i),te=ae(C,d,te,t,i),ce+=32}Me+=8}if(w>=0){var ee=[];ee[1]=w+1,ee[0]=(1<<w+1)-1,oe(ee)}return ie(65497),new Uint8Array(y)},n=n||50,function(){for(var E=String.fromCharCode,q=0;q<256;q++)T[q]=E(q)}(),e=X(j,I),t=X(M,D),r=X($,L),i=X(O,G),function(){for(var E=1,q=2,Y=1;Y<=15;Y++){for(var Z=E;Z<q;Z++)m[32767+Z]=Y,p[32767+Z]=[],p[32767+Z][1]=Y,p[32767+Z][0]=Z;for(var te=-(q-1);te<=-E;te++)m[32767+te]=Y,p[32767+te]=[],p[32767+te][1]=Y,p[32767+te][0]=q-1+te;E<<=1,q<<=1}}(),function(){for(var E=0;E<256;E++)P[E]=19595*E,P[E+256>>0]=38470*E,P[E+512>>0]=7471*E+32768,P[E+768>>0]=-11059*E,P[E+1024>>0]=-21709*E,P[E+1280>>0]=32768*E+8421375,P[E+1536>>0]=-27439*E,P[E+1792>>0]=-5329*E}(),Ne(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function qi(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ix(n){function e(j){if(!j)throw Error("assert :P")}function t(j,I,$){for(var L=0;4>L;L++)if(j[I+L]!=$.charCodeAt(L))return!0;return!1}function r(j,I,$,L,M){for(var D=0;D<M;D++)j[I+D]=$[L+D]}function i(j,I,$,L){for(var M=0;M<L;M++)j[I+M]=$}function s(j){return new Int32Array(j)}function a(j,I){for(var $=[],L=0;L<j;L++)$.push(new I);return $}function o(j,I){var $=[];return function L(M,D,O){for(var G=O[D],X=0;X<G&&(M.push(O.length>D+1?[]:new I),!(O.length<D+1));X++)L(M[X],D+1,O)}($,0,j),$}var l=function(){var j=this;function I(h,g){for(var S=1<<g-1>>>0;h&S;)S>>>=1;return S?(h&S-1)+S:h}function $(h,g,S,k,R){e(!(k%S));do h[g+(k-=S)]=R;while(0<k)}function L(h,g,S,k,R){if(e(2328>=R),512>=R)var B=s(512);else if((B=s(R))==null)return 0;return function(U,z,W,V,re,ye){var ve,ue,Ee=z,be=1<<W,se=s(16),le=s(16);for(e(re!=0),e(V!=null),e(U!=null),e(0<W),ue=0;ue<re;++ue){if(15<V[ue])return 0;++se[V[ue]]}if(se[0]==re)return 0;for(le[1]=0,ve=1;15>ve;++ve){if(se[ve]>1<<ve)return 0;le[ve+1]=le[ve]+se[ve]}for(ue=0;ue<re;++ue)ve=V[ue],0<V[ue]&&(ye[le[ve]++]=ue);if(le[15]==1)return(V=new M).g=0,V.value=ye[0],$(U,Ee,1,be,V),be;var je,Pe=-1,Ce=be-1,Je=0,He=1,ct=1,Ye=1<<W;for(ue=0,ve=1,re=2;ve<=W;++ve,re<<=1){if(He+=ct<<=1,0>(ct-=se[ve]))return 0;for(;0<se[ve];--se[ve])(V=new M).g=ve,V.value=ye[ue++],$(U,Ee+Je,re,Ye,V),Je=I(Je,ve)}for(ve=W+1,re=2;15>=ve;++ve,re<<=1){if(He+=ct<<=1,0>(ct-=se[ve]))return 0;for(;0<se[ve];--se[ve]){if(V=new M,(Je&Ce)!=Pe){for(Ee+=Ye,je=1<<(Pe=ve)-W;15>Pe&&!(0>=(je-=se[Pe]));)++Pe,je<<=1;be+=Ye=1<<(je=Pe-W),U[z+(Pe=Je&Ce)].g=je+W,U[z+Pe].value=Ee-z-Pe}V.g=ve-W,V.value=ye[ue++],$(U,Ee+(Je>>W),re,Ye,V),Je=I(Je,ve)}}return He!=2*le[15]-1?0:be}(h,g,S,k,R,B)}function M(){this.value=this.g=0}function D(){this.value=this.g=0}function O(){this.G=a(5,M),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Kn,D)}function G(h,g,S,k){e(h!=null),e(g!=null),e(2147483648>k),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=g,h.pa=S,h.Jd=g,h.Yc=S+k,h.Zc=4<=k?S+k-4+1:S,ce(h)}function X(h,g){for(var S=0;0<g--;)S|=de(h,128)<<g;return S}function oe(h,g){var S=X(h,g);return ge(h)?-S:S}function J(h,g,S,k){var R,B=0;for(e(h!=null),e(g!=null),e(4294967288>k),h.Sb=k,h.Ra=0,h.u=0,h.h=0,4<k&&(k=4),R=0;R<k;++R)B+=g[S+R]<<8*R;h.Ra=B,h.bb=k,h.oa=g,h.pa=S}function ie(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<al-8>>>0,++h.bb,h.u-=8;Y(h)&&(h.h=1,h.u=0)}function ae(h,g){if(e(0<=g),!h.h&&g<=sl){var S=q(h)&il[g];return h.u+=g,ie(h),S}return h.h=1,h.u=0}function Ne(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(h){return h.Ra>>>(h.u&al-1)>>>0}function Y(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>al}function Z(h,g){h.u=g,h.h=Y(h)}function te(h){h.u>=qc&&(e(h.u>=qc),ie(h))}function ce(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ge(h){return X(h,1)}function de(h,g){var S=h.Ca;0>h.b&&ce(h);var k=h.b,R=S*g>>>8,B=(h.I>>>k>R)+0;for(B?(S-=R,h.I-=R+1<<k>>>0):S=R+1,k=S,R=0;256<=k;)R+=8,k>>=8;return k=7^R+Dr[k],h.b-=k,h.Ca=(S<<k)-1,B}function _e(h,g,S){h[g+0]=S>>24&255,h[g+1]=S>>16&255,h[g+2]=S>>8&255,h[g+3]=S>>0&255}function Te(h,g){return h[g+0]<<0|h[g+1]<<8}function ze(h,g){return Te(h,g)|h[g+2]<<16}function Ie(h,g){return Te(h,g)|Te(h,g+2)<<16}function nt(h,g){var S=1<<g;return e(h!=null),e(0<g),h.X=s(S),h.X==null?0:(h.Mb=32-g,h.Xa=g,1)}function we(h,g){e(h!=null),e(g!=null),e(h.Xa==g.Xa),r(g.X,0,h.X,0,1<<g.Xa)}function Q(){this.X=[],this.Xa=this.Mb=0}function st(h,g,S,k){e(S!=null),e(k!=null);var R=S[0],B=k[0];return R==0&&(R=(h*B+g/2)/g),B==0&&(B=(g*R+h/2)/h),0>=R||0>=B?0:(S[0]=R,k[0]=B,1)}function qe(h,g){return h+(1<<g)-1>>>g}function Le(h,g){return((4278255360&h)+(4278255360&g)>>>0&4278255360)+((16711935&h)+(16711935&g)>>>0&16711935)>>>0}function Me(h,g){j[g]=function(S,k,R,B,U,z,W){var V;for(V=0;V<U;++V){var re=j[h](z[W+V-1],R,B+V);z[W+V]=Le(S[k+V],re)}}}function ee(){this.ud=this.hd=this.jd=0}function he(h,g){return((4278124286&(h^g))>>>1)+(h&g)>>>0}function xe(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function ke(h,g){return xe(h+(h-g+.5>>1))}function Ae(h,g,S){return Math.abs(g-S)-Math.abs(h-S)}function Ze(h,g,S,k,R,B,U){for(k=B[U-1],S=0;S<R;++S)B[U+S]=k=Le(h[g+S],k)}function Be(h,g,S,k,R){var B;for(B=0;B<S;++B){var U=h[g+B],z=U>>8&255,W=16711935&(W=(W=16711935&U)+((z<<16)+z));k[R+B]=(4278255360&U)+W>>>0}}function rt(h,g){g.jd=h>>0&255,g.hd=h>>8&255,g.ud=h>>16&255}function Ve(h,g,S,k,R,B){var U;for(U=0;U<k;++U){var z=g[S+U],W=z>>>8,V=z,re=255&(re=(re=z>>>16)+((h.jd<<24>>24)*(W<<24>>24)>>>5));V=255&(V=(V=V+((h.hd<<24>>24)*(W<<24>>24)>>>5))+((h.ud<<24>>24)*(re<<24>>24)>>>5)),R[B+U]=(4278255360&z)+(re<<16)+V}}function ut(h,g,S,k,R){j[g]=function(B,U,z,W,V,re,ye,ve,ue){for(W=ye;W<ve;++W)for(ye=0;ye<ue;++ye)V[re++]=R(z[k(B[U++])])},j[h]=function(B,U,z,W,V,re,ye){var ve=8>>B.b,ue=B.Ea,Ee=B.K[0],be=B.w;if(8>ve)for(B=(1<<B.b)-1,be=(1<<ve)-1;U<z;++U){var se,le=0;for(se=0;se<ue;++se)se&B||(le=k(W[V++])),re[ye++]=R(Ee[le&be]),le>>=ve}else j["VP8LMapColor"+S](W,V,Ee,be,re,ye,U,z,ue)}}function We(h,g,S,k,R){for(S=g+S;g<S;){var B=h[g++];k[R++]=B>>16&255,k[R++]=B>>8&255,k[R++]=B>>0&255}}function Yt(h,g,S,k,R){for(S=g+S;g<S;){var B=h[g++];k[R++]=B>>16&255,k[R++]=B>>8&255,k[R++]=B>>0&255,k[R++]=B>>24&255}}function Nt(h,g,S,k,R){for(S=g+S;g<S;){var B=(U=h[g++])>>16&240|U>>12&15,U=U>>0&240|U>>28&15;k[R++]=B,k[R++]=U}}function $n(h,g,S,k,R){for(S=g+S;g<S;){var B=(U=h[g++])>>16&248|U>>13&7,U=U>>5&224|U>>3&31;k[R++]=B,k[R++]=U}}function Et(h,g,S,k,R){for(S=g+S;g<S;){var B=h[g++];k[R++]=B>>0&255,k[R++]=B>>8&255,k[R++]=B>>16&255}}function Mt(h,g,S,k,R,B){if(B==0)for(S=g+S;g<S;)_e(k,((B=h[g++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),R+=32;else r(k,R,h,g,S)}function Bn(h,g){j[g][0]=j[h+"0"],j[g][1]=j[h+"1"],j[g][2]=j[h+"2"],j[g][3]=j[h+"3"],j[g][4]=j[h+"4"],j[g][5]=j[h+"5"],j[g][6]=j[h+"6"],j[g][7]=j[h+"7"],j[g][8]=j[h+"8"],j[g][9]=j[h+"9"],j[g][10]=j[h+"10"],j[g][11]=j[h+"11"],j[g][12]=j[h+"12"],j[g][13]=j[h+"13"],j[g][14]=j[h+"0"],j[g][15]=j[h+"0"]}function Oe(h){return h==Hp||h==qp||h==Gd||h==Yp}function kt(){this.eb=[],this.size=this.A=this.fb=0}function ht(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function me(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new kt,this.f.kb=new ht,this.sd=null}function Fe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function $e(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ue(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Ke(h,g){var S=h.T,k=g.ba.f.RGBA,R=k.eb,B=k.fb+h.ka*k.A,U=Ni[g.ba.S],z=h.y,W=h.O,V=h.f,re=h.N,ye=h.ea,ve=h.W,ue=g.cc,Ee=g.dc,be=g.Mc,se=g.Nc,le=h.ka,je=h.ka+h.T,Pe=h.U,Ce=Pe+1>>1;for(le==0?U(z,W,null,null,V,re,ye,ve,V,re,ye,ve,R,B,null,null,Pe):(U(g.ec,g.fc,z,W,ue,Ee,be,se,V,re,ye,ve,R,B-k.A,R,B,Pe),++S);le+2<je;le+=2)ue=V,Ee=re,be=ye,se=ve,re+=h.Rc,ve+=h.Rc,B+=2*k.A,U(z,(W+=2*h.fa)-h.fa,z,W,ue,Ee,be,se,V,re,ye,ve,R,B-k.A,R,B,Pe);return W+=h.fa,h.j+je<h.o?(r(g.ec,g.fc,z,W,Pe),r(g.cc,g.dc,V,re,Ce),r(g.Mc,g.Nc,ye,ve,Ce),S--):1&je||U(z,W,null,null,V,re,ye,ve,V,re,ye,ve,R,B+k.A,null,null,Pe),S}function Tt(h,g,S){var k=h.F,R=[h.J];if(k!=null){var B=h.U,U=g.ba.S,z=U==Vd||U==Gd;g=g.ba.f.RGBA;var W=[0],V=h.ka;W[0]=h.T,h.Kb&&(V==0?--W[0]:(--V,R[0]-=h.width),h.j+h.ka+h.T==h.o&&(W[0]=h.o-h.j-V));var re=g.eb;V=g.fb+V*g.A,h=Qt(k,R[0],h.width,B,W,re,V+(z?0:3),g.A),e(S==W),h&&Oe(U)&&Si(re,V,z,B,W,g.A)}return 0}function St(h){var g=h.ma,S=g.ba.S,k=11>S,R=S==qd||S==Yd||S==Vd||S==Wp||S==12||Oe(S);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Wc(g.Oa,h,R?11:12))return 0;if(R&&Oe(S)&&De(),h.da)alert("todo:use_scaling");else{if(k){if(g.Ib=Ue,h.Kb){if(S=h.U+1>>1,g.memory=s(h.U+2*S),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+h.U,g.Mc=g.cc,g.Nc=g.dc+S,g.Ib=Ke,De()}}else alert("todo:EmitYUV");R&&(g.Jb=Tt,k&&pe())}if(k&&!_y){for(h=0;256>h;++h)S_[h]=89858*(h-128)+Kd>>Jd,k_[h]=-22014*(h-128)+Kd,N_[h]=-45773*(h-128),__[h]=113618*(h-128)+Kd>>Jd;for(h=Qc;h<Jp;++h)g=76283*(h-16)+Kd>>Jd,j_[h-Qc]=Qr(g,255),A_[h-Qc]=Qr(g+8>>4,15);_y=1}return 1}function gi(h){var g=h.ma,S=h.U,k=h.T;return e(!(1&h.ka)),0>=S||0>=k?0:(S=g.Ib(h,g),g.Jb!=null&&g.Jb(h,g,S),g.Dc+=S,1)}function Fi(h){h.ma.memory=null}function lt(h,g,S,k){return ae(h,8)!=47?0:(g[0]=ae(h,14)+1,S[0]=ae(h,14)+1,k[0]=ae(h,1),ae(h,3)!=0?0:!h.h)}function fe(h,g){if(4>h)return h+1;var S=h-2>>1;return(2+(1&h)<<S)+ae(g,S)+1}function Xe(h,g){return 120<g?g-120:1<=(S=((S=l_[g-1])>>4)*h+(8-(15&S)))?S:1;var S}function mt(h,g,S){var k=q(S),R=h[g+=255&k].g-8;return 0<R&&(Z(S,S.u+8),k=q(S),g+=h[g].value,g+=k&(1<<R)-1),Z(S,S.u+h[g].g),h[g].value}function at(h,g,S){return S.g+=h.g,S.value+=h.value<<g>>>0,e(8>=S.g),h.g}function et(h,g,S){var k=h.xc;return e((g=k==0?0:h.vc[h.md*(S>>k)+(g>>k)])<h.Wb),h.Ya[g]}function gt(h,g,S,k){var R=h.ab,B=h.c*g,U=h.C;g=U+g;var z=S,W=k;for(k=h.Ta,S=h.Ua;0<R--;){var V=h.gc[R],re=U,ye=g,ve=z,ue=W,Ee=(W=k,z=S,V.Ea);switch(e(re<ye),e(ye<=V.nc),V.hc){case 2:Od(ve,ue,(ye-re)*Ee,W,z);break;case 0:var be=re,se=ye,le=W,je=z,Pe=(Ye=V).Ea;be==0&&(Up(ve,ue,null,null,1,le,je),Ze(ve,ue+1,0,0,Pe-1,le,je+1),ue+=Pe,je+=Pe,++be);for(var Ce=1<<Ye.b,Je=Ce-1,He=qe(Pe,Ye.b),ct=Ye.K,Ye=Ye.w+(be>>Ye.b)*He;be<se;){var Ot=ct,Bt=Ye,It=1;for(Yc(ve,ue,le,je-Pe,1,le,je);It<Pe;){var Pt=(It&~Je)+Ce;Pt>Pe&&(Pt=Pe),(0,na[Ot[Bt++]>>8&15])(ve,ue+ +It,le,je+It-Pe,Pt-It,le,je+It),It=Pt}ue+=Pe,je+=Pe,++be&Je||(Ye+=He)}ye!=V.nc&&r(W,z-Ee,W,z+(ye-re-1)*Ee,Ee);break;case 1:for(Ee=ve,se=ue,Pe=(ve=V.Ea)-(je=ve&~(le=(ue=1<<V.b)-1)),be=qe(ve,V.b),Ce=V.K,V=V.w+(re>>V.b)*be;re<ye;){for(Je=Ce,He=V,ct=new ee,Ye=se+je,Ot=se+ve;se<Ye;)rt(Je[He++],ct),eo(ct,Ee,se,ue,W,z),se+=ue,z+=ue;se<Ot&&(rt(Je[He++],ct),eo(ct,Ee,se,Pe,W,z),se+=Pe,z+=Pe),++re&le||(V+=be)}break;case 3:if(ve==W&&ue==z&&0<V.b){for(se=W,ve=Ee=z+(ye-re)*Ee-(je=(ye-re)*qe(V.Ea,V.b)),ue=W,le=z,be=[],je=(Pe=je)-1;0<=je;--je)be[je]=ue[le+je];for(je=Pe-1;0<=je;--je)se[ve+je]=be[je];xi(V,re,ye,W,Ee,W,z)}else xi(V,re,ye,ve,ue,W,z)}z=k,W=S}W!=S&&r(k,S,z,W,B)}function jt(h,g){var S=h.V,k=h.Ba+h.c*h.C,R=g-h.C;if(e(g<=h.l.o),e(16>=R),0<R){var B=h.l,U=h.Ta,z=h.Ua,W=B.width;if(gt(h,R,S,k),R=z=[z],e((S=h.C)<(k=g)),e(B.v<B.va),k>B.o&&(k=B.o),S<B.j){var V=B.j-S;S=B.j,R[0]+=V*W}if(S>=k?S=0:(R[0]+=4*B.v,B.ka=S-B.j,B.U=B.va-B.v,B.T=k-S,S=1),S){if(z=z[0],11>(S=h.ca).S){var re=S.f.RGBA,ye=(k=S.S,R=B.U,B=B.T,V=re.eb,re.A),ve=B;for(re=re.fb+h.Ma*re.A;0<ve--;){var ue=U,Ee=z,be=R,se=V,le=re;switch(k){case Hd:Mr(ue,Ee,be,se,le);break;case qd:wr(ue,Ee,be,se,le);break;case Hp:wr(ue,Ee,be,se,le),Si(se,le,0,be,1,0);break;case py:js(ue,Ee,be,se,le);break;case Yd:Mt(ue,Ee,be,se,le,1);break;case qp:Mt(ue,Ee,be,se,le,1),Si(se,le,0,be,1,0);break;case Vd:Mt(ue,Ee,be,se,le,0);break;case Gd:Mt(ue,Ee,be,se,le,0),Si(se,le,1,be,1,0);break;case Wp:ra(ue,Ee,be,se,le);break;case Yp:ra(ue,Ee,be,se,le),Xt(se,le,be,1,0);break;case my:ks(ue,Ee,be,se,le);break;default:e(0)}z+=W,re+=ye}h.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=S.height)}}h.C=g,e(h.C<=h.i)}function _t(h){var g;if(0<h.ua)return 0;for(g=0;g<h.Wb;++g){var S=h.Ya[g].G,k=h.Ya[g].H;if(0<S[1][k[1]+0].g||0<S[2][k[2]+0].g||0<S[3][k[3]+0].g)return 0}return 1}function $t(h,g,S,k,R,B){if(h.Z!=0){var U=h.qd,z=h.rd;for(e(oa[h.Z]!=null);g<S;++g)oa[h.Z](U,z,k,R,k,R,B),U=k,z=R,R+=B;h.qd=U,h.rd=z}}function wn(h,g){var S=h.l.ma,k=S.Z==0||S.Z==1?h.l.j:h.C;if(k=h.C<k?k:h.C,e(g<=h.l.o),g>k){var R=h.l.width,B=S.ca,U=S.tb+R*k,z=h.V,W=h.Ba+h.c*k,V=h.gc;e(h.ab==1),e(V[0].hc==3),$d(V[0],k,g,z,W,B,U),$t(S,k,g,B,U,R)}h.C=h.Ma=g}function Un(h,g,S,k,R,B,U){var z=h.$/k,W=h.$%k,V=h.m,re=h.s,ye=S+h.$,ve=ye;R=S+k*R;var ue=S+k*B,Ee=280+re.ua,be=h.Pb?z:16777216,se=0<re.ua?re.Wa:null,le=re.wc,je=ye<ue?et(re,W,z):null;e(h.C<B),e(ue<=R);var Pe=!1;e:for(;;){for(;Pe||ye<ue;){var Ce=0;if(z>=be){var Je=ye-S;e((be=h).Pb),be.wd=be.m,be.xd=Je,0<be.s.ua&&we(be.s.Wa,be.s.vb),be=z+u_}if(W&le||(je=et(re,W,z)),e(je!=null),je.Qb&&(g[ye]=je.qb,Pe=!0),!Pe)if(te(V),je.jc){Ce=V,Je=g;var He=ye,ct=je.pd[q(Ce)&Kn-1];e(je.jc),256>ct.g?(Z(Ce,Ce.u+ct.g),Je[He]=ct.value,Ce=0):(Z(Ce,Ce.u+ct.g-256),e(256<=ct.value),Ce=ct.value),Ce==0&&(Pe=!0)}else Ce=mt(je.G[0],je.H[0],V);if(V.h)break;if(Pe||256>Ce){if(!Pe)if(je.nd)g[ye]=(je.qb|Ce<<8)>>>0;else{if(te(V),Pe=mt(je.G[1],je.H[1],V),te(V),Je=mt(je.G[2],je.H[2],V),He=mt(je.G[3],je.H[3],V),V.h)break;g[ye]=(He<<24|Pe<<16|Ce<<8|Je)>>>0}if(Pe=!1,++ye,++W>=k&&(W=0,++z,U!=null&&z<=B&&!(z%16)&&U(h,z),se!=null))for(;ve<ye;)Ce=g[ve++],se.X[(506832829*Ce&4294967295)>>>se.Mb]=Ce}else if(280>Ce){if(Ce=fe(Ce-256,V),Je=mt(je.G[4],je.H[4],V),te(V),Je=Xe(k,Je=fe(Je,V)),V.h)break;if(ye-S<Je||R-ye<Ce)break e;for(He=0;He<Ce;++He)g[ye+He]=g[ye+He-Je];for(ye+=Ce,W+=Ce;W>=k;)W-=k,++z,U!=null&&z<=B&&!(z%16)&&U(h,z);if(e(ye<=R),W&le&&(je=et(re,W,z)),se!=null)for(;ve<ye;)Ce=g[ve++],se.X[(506832829*Ce&4294967295)>>>se.Mb]=Ce}else{if(!(Ce<Ee))break e;for(Pe=Ce-280,e(se!=null);ve<ye;)Ce=g[ve++],se.X[(506832829*Ce&4294967295)>>>se.Mb]=Ce;Ce=ye,e(!(Pe>>>(Je=se).Xa)),g[Ce]=Je.X[Pe],Pe=!0}Pe||e(V.h==Y(V))}if(h.Pb&&V.h&&ye<R)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&we(h.s.vb,h.s.Wa);else{if(V.h)break e;U!=null&&U(h,z>B?B:z),h.a=0,h.$=ye-S}return 1}return h.a=3,0}function Pr(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var g=h.Wa;g!=null&&(g.X=null),h.vb=null,e(h!=null)}function Tr(){var h=new Bp;return h==null?null:(h.a=0,h.xb=vy,Bn("Predictor","VP8LPredictors"),Bn("Predictor","VP8LPredictors_C"),Bn("PredictorAdd","VP8LPredictorsAdd"),Bn("PredictorAdd","VP8LPredictorsAdd_C"),Od=Be,eo=Ve,Mr=We,wr=Yt,ra=Nt,ks=$n,js=Et,j.VP8LMapColor32b=ol,j.VP8LMapColor8b=Bd,h)}function yi(h,g,S,k,R){var B=1,U=[h],z=[g],W=k.m,V=k.s,re=null,ye=0;e:for(;;){if(S)for(;B&&ae(W,1);){var ve=U,ue=z,Ee=k,be=1,se=Ee.m,le=Ee.gc[Ee.ab],je=ae(se,2);if(Ee.Oc&1<<je)B=0;else{switch(Ee.Oc|=1<<je,le.hc=je,le.Ea=ve[0],le.nc=ue[0],le.K=[null],++Ee.ab,e(4>=Ee.ab),je){case 0:case 1:le.b=ae(se,3)+2,be=yi(qe(le.Ea,le.b),qe(le.nc,le.b),0,Ee,le.K),le.K=le.K[0];break;case 3:var Pe,Ce=ae(se,8)+1,Je=16<Ce?0:4<Ce?1:2<Ce?2:3;if(ve[0]=qe(le.Ea,Je),le.b=Je,Pe=be=yi(Ce,1,0,Ee,le.K)){var He,ct=Ce,Ye=le,Ot=1<<(8>>Ye.b),Bt=s(Ot);if(Bt==null)Pe=0;else{var It=Ye.K[0],Pt=Ye.w;for(Bt[0]=Ye.K[0][0],He=1;He<1*ct;++He)Bt[He]=Le(It[Pt+He],Bt[He-1]);for(;He<4*Ot;++He)Bt[He]=0;Ye.K[0]=null,Ye.K[0]=Bt,Pe=1}}be=Pe;break;case 2:break;default:e(0)}B=be}}if(U=U[0],z=z[0],B&&ae(W,1)&&!(B=1<=(ye=ae(W,4))&&11>=ye)){k.a=3;break e}var Vt;if(Vt=B)t:{var qt,wt,Pn,Ir=k,Tn=U,Rr=z,Ut=ye,ei=S,ti=Ir.m,Wn=Ir.s,Xn=[null],Sr=1,ki=0,os=c_[Ut];n:for(;;){if(ei&&ae(ti,1)){var Hn=ae(ti,3)+2,Ps=qe(Tn,Hn),so=qe(Rr,Hn),hl=Ps*so;if(!yi(Ps,so,0,Ir,Xn))break n;for(Xn=Xn[0],Wn.xc=Hn,qt=0;qt<hl;++qt){var la=Xn[qt]>>8&65535;Xn[qt]=la,la>=Sr&&(Sr=la+1)}}if(ti.h)break n;for(wt=0;5>wt;++wt){var mn=gy[wt];!wt&&0<Ut&&(mn+=1<<Ut),ki<mn&&(ki=mn)}var Kp=a(Sr*os,M),jy=Sr,Ay=a(jy,O);if(Ay==null)var Qd=null;else e(65536>=jy),Qd=Ay;var Zc=s(ki);if(Qd==null||Zc==null||Kp==null){Ir.a=1;break n}var Zd=Kp;for(qt=Pn=0;qt<Sr;++qt){var zi=Qd[qt],fl=zi.G,pl=zi.H,Cy=0,eh=1,Ey=0;for(wt=0;5>wt;++wt){mn=gy[wt],fl[wt]=Zd,pl[wt]=Pn,!wt&&0<Ut&&(mn+=1<<Ut);i:{var th,Xp=mn,nh=Ir,eu=Zc,P_=Zd,T_=Pn,Qp=0,ca=nh.m,L_=ae(ca,1);if(i(eu,0,0,Xp),L_){var D_=ae(ca,1)+1,M_=ae(ca,1),Py=ae(ca,M_==0?1:8);eu[Py]=1,D_==2&&(eu[Py=ae(ca,8)]=1);var rh=1}else{var Ty=s(19),Ly=ae(ca,4)+4;if(19<Ly){nh.a=3;var ih=0;break i}for(th=0;th<Ly;++th)Ty[o_[th]]=ae(ca,3);var Zp=void 0,tu=void 0,Dy=nh,I_=Ty,sh=Xp,My=eu,e0=0,ua=Dy.m,Iy=8,Ry=a(128,M);r:for(;L(Ry,0,7,I_,19);){if(ae(ua,1)){var R_=2+2*ae(ua,3);if((Zp=2+ae(ua,R_))>sh)break r}else Zp=sh;for(tu=0;tu<sh&&Zp--;){te(ua);var Fy=Ry[0+(127&q(ua))];Z(ua,ua.u+Fy.g);var ml=Fy.value;if(16>ml)My[tu++]=ml,ml!=0&&(Iy=ml);else{var F_=ml==16,Oy=ml-16,O_=s_[Oy],$y=ae(ua,i_[Oy])+O_;if(tu+$y>sh)break r;for(var $_=F_?Iy:0;0<$y--;)My[tu++]=$_}}e0=1;break r}e0||(Dy.a=3),rh=e0}(rh=rh&&!ca.h)&&(Qp=L(P_,T_,8,eu,Xp)),rh&&Qp!=0?ih=Qp:(nh.a=3,ih=0)}if(ih==0)break n;if(eh&&a_[wt]==1&&(eh=Zd[Pn].g==0),Cy+=Zd[Pn].g,Pn+=ih,3>=wt){var nu,t0=Zc[0];for(nu=1;nu<mn;++nu)Zc[nu]>t0&&(t0=Zc[nu]);Ey+=t0}}if(zi.nd=eh,zi.Qb=0,eh&&(zi.qb=(fl[3][pl[3]+0].value<<24|fl[1][pl[1]+0].value<<16|fl[2][pl[2]+0].value)>>>0,Cy==0&&256>fl[0][pl[0]+0].value&&(zi.Qb=1,zi.qb+=fl[0][pl[0]+0].value<<8)),zi.jc=!zi.Qb&&6>Ey,zi.jc){var ah,Ts=zi;for(ah=0;ah<Kn;++ah){var da=ah,ha=Ts.pd[da],oh=Ts.G[0][Ts.H[0]+da];256<=oh.value?(ha.g=oh.g+256,ha.value=oh.value):(ha.g=0,ha.value=0,da>>=at(oh,8,ha),da>>=at(Ts.G[1][Ts.H[1]+da],16,ha),da>>=at(Ts.G[2][Ts.H[2]+da],0,ha),at(Ts.G[3][Ts.H[3]+da],24,ha))}}}Wn.vc=Xn,Wn.Wb=Sr,Wn.Ya=Qd,Wn.yc=Kp,Vt=1;break t}Vt=0}if(!(B=Vt)){k.a=3;break e}if(0<ye){if(V.ua=1<<ye,!nt(V.Wa,ye)){k.a=1,B=0;break e}}else V.ua=0;var n0=k,By=U,B_=z,r0=n0.s,i0=r0.xc;if(n0.c=By,n0.i=B_,r0.md=qe(By,i0),r0.wc=i0==0?-1:(1<<i0)-1,S){k.xb=y_;break e}if((re=s(U*z))==null){k.a=1,B=0;break e}B=(B=Un(k,re,0,U,z,z,null))&&!W.h;break e}return B?(R!=null?R[0]=re:(e(re==null),e(S)),k.$=0,S||Pr(V)):Pr(V),B}function vi(h,g){var S=h.c*h.i,k=S+g+16*g;return e(h.c<=g),h.V=s(k),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+S+g,1)}function zo(h,g){var S=h.C,k=g-S,R=h.V,B=h.Ba+h.c*S;for(e(g<=h.l.o);0<k;){var U=16<k?16:k,z=h.l.ma,W=h.l.width,V=W*U,re=z.ca,ye=z.tb+W*S,ve=h.Ta,ue=h.Ua;gt(h,U,R,B),_n(ve,ue,re,ye,V),$t(z,S,S+U,re,ye,W),k-=U,R+=U*h.c,S+=U}e(S==g),h.C=h.Ma=g}function Wo(){this.ub=this.yd=this.td=this.Rb=0}function Ho(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qo(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function vd(){this.Yb=function(){var h=[];return function g(S,k,R){for(var B=R[k],U=0;U<B&&(S.push(R.length>k+1?[]:0),!(R.length<k+1));U++)g(S[U],k+1,R)}(h,0,[3,11]),h}()}function yp(){this.jb=s(3),this.Wc=o([4,8],vd),this.Xc=o([4,17],vd)}function vp(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Yo(){this.ld=this.La=this.dd=this.tc=0}function xd(){this.Na=this.la=0}function xp(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ac(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function wp(){this.uc=this.M=this.Nb=0,this.wa=Array(new Yo),this.Y=0,this.ya=Array(new Ac),this.aa=0,this.l=new Vo}function wd(){this.y=s(16),this.f=s(8),this.ea=s(8)}function bp(){this.cb=this.a=0,this.sc="",this.m=new Ne,this.Od=new Wo,this.Kc=new Ho,this.ed=new vp,this.Qa=new qo,this.Ic=this.$c=this.Aa=0,this.D=new wp,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Ne),this.ia=0,this.pb=a(4,xp),this.Pa=new yp,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new wd),this.Hd=0,this.rb=Array(new xd),this.sb=0,this.wa=Array(new Yo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ac),this.L=this.aa=0,this.gd=o([4,2],Yo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Sp(){var h=new bp;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Xc||(Xc=_d)),h}function bn(h,g,S){return h.a==0&&(h.a=g,h.sc=S,h.cb=0),0}function bd(h,g,S){return 3<=S&&h[g+0]==157&&h[g+1]==1&&h[g+2]==42}function Sd(h,g){if(h==null)return 0;if(h.a=0,h.sc="OK",g==null)return bn(h,2,"null VP8Io passed to VP8GetHeaders()");var S=g.data,k=g.w,R=g.ha;if(4>R)return bn(h,7,"Truncated header.");var B=S[k+0]|S[k+1]<<8|S[k+2]<<16,U=h.Od;if(U.Rb=!(1&B),U.td=B>>1&7,U.yd=B>>4&1,U.ub=B>>5,3<U.td)return bn(h,3,"Incorrect keyframe parameters.");if(!U.yd)return bn(h,4,"Frame not displayable.");k+=3,R-=3;var z=h.Kc;if(U.Rb){if(7>R)return bn(h,7,"cannot parse picture header");if(!bd(S,k,R))return bn(h,3,"Bad code word");z.c=16383&(S[k+4]<<8|S[k+3]),z.Td=S[k+4]>>6,z.i=16383&(S[k+6]<<8|S[k+5]),z.Ud=S[k+6]>>6,k+=7,R-=7,h.za=z.c+15>>4,h.Ub=z.i+15>>4,g.width=z.c,g.height=z.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((B=h.Pa).jb,0,255,B.jb.length),e((B=h.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,i(B.Zb,0,0,B.Zb.length),i(B.Lb,0,0,B.Lb)}if(U.ub>R)return bn(h,7,"bad partition length");G(B=h.m,S,k,U.ub),k+=U.ub,R-=U.ub,U.Rb&&(z.Ld=ge(B),z.Kd=ge(B)),z=h.Qa;var W,V=h.Pa;if(e(B!=null),e(z!=null),z.Cb=ge(B),z.Cb){if(z.Bb=ge(B),ge(B)){for(z.Fb=ge(B),W=0;4>W;++W)z.Zb[W]=ge(B)?oe(B,7):0;for(W=0;4>W;++W)z.Lb[W]=ge(B)?oe(B,6):0}if(z.Bb)for(W=0;3>W;++W)V.jb[W]=ge(B)?X(B,8):255}else z.Bb=0;if(B.Ka)return bn(h,3,"cannot parse segment header");if((z=h.ed).zd=ge(B),z.Tb=X(B,6),z.wb=X(B,3),z.Pc=ge(B),z.Pc&&ge(B)){for(V=0;4>V;++V)ge(B)&&(z.vd[V]=oe(B,6));for(V=0;4>V;++V)ge(B)&&(z.od[V]=oe(B,6))}if(h.L=z.Tb==0?0:z.zd?1:2,B.Ka)return bn(h,3,"cannot parse filter header");var re=R;if(R=W=k,k=W+re,z=re,h.Xb=(1<<X(h.m,2))-1,re<3*(V=h.Xb))S=7;else{for(W+=3*V,z-=3*V,re=0;re<V;++re){var ye=S[R+0]|S[R+1]<<8|S[R+2]<<16;ye>z&&(ye=z),G(h.Jc[+re],S,W,ye),W+=ye,z-=ye,R+=3}G(h.Jc[+V],S,W,z),S=W<k?0:5}if(S!=0)return bn(h,S,"cannot parse partitions");for(S=X(W=h.m,7),R=ge(W)?oe(W,4):0,k=ge(W)?oe(W,4):0,z=ge(W)?oe(W,4):0,V=ge(W)?oe(W,4):0,W=ge(W)?oe(W,4):0,re=h.Qa,ye=0;4>ye;++ye){if(re.Cb){var ve=re.Zb[ye];re.Fb||(ve+=S)}else{if(0<ye){h.pb[ye]=h.pb[0];continue}ve=S}var ue=h.pb[ye];ue.Sc[0]=Vp[Qr(ve+R,127)],ue.Sc[1]=Gp[Qr(ve+0,127)],ue.Eb[0]=2*Vp[Qr(ve+k,127)],ue.Eb[1]=101581*Gp[Qr(ve+z,127)]>>16,8>ue.Eb[1]&&(ue.Eb[1]=8),ue.Qc[0]=Vp[Qr(ve+V,117)],ue.Qc[1]=Gp[Qr(ve+W,127)],ue.lc=ve+W}if(!U.Rb)return bn(h,4,"Not a key frame.");for(ge(B),U=h.Pa,S=0;4>S;++S){for(R=0;8>R;++R)for(k=0;3>k;++k)for(z=0;11>z;++z)V=de(B,m_[S][R][k][z])?X(B,8):f_[S][R][k][z],U.Wc[S][R].Yb[k][z]=V;for(R=0;17>R;++R)U.Xc[S][R]=U.Wc[S][g_[R]]}return h.kc=ge(B),h.kc&&(h.Bd=X(B,8)),h.cb=1}function _d(h,g,S,k,R,B,U){var z=g[R].Yb[S];for(S=0;16>R;++R){if(!de(h,z[S+0]))return R;for(;!de(h,z[S+1]);)if(z=g[++R].Yb[0],S=0,R==16)return 16;var W=g[R+1].Yb;if(de(h,z[S+2])){var V=h,re=0;if(de(V,(ve=z)[(ye=S)+3]))if(de(V,ve[ye+6])){for(z=0,ye=2*(re=de(V,ve[ye+8]))+(ve=de(V,ve[ye+9+re])),re=0,ve=d_[ye];ve[z];++z)re+=re+de(V,ve[z]);re+=3+(8<<ye)}else de(V,ve[ye+7])?(re=7+2*de(V,165),re+=de(V,145)):re=5+de(V,159);else re=de(V,ve[ye+4])?3+de(V,ve[ye+5]):2;z=W[2]}else re=1,z=W[1];W=U+h_[R],0>(V=h).b&&ce(V);var ye,ve=V.b,ue=(ye=V.Ca>>1)-(V.I>>ve)>>31;--V.b,V.Ca+=ue,V.Ca|=1,V.I-=(ye+1&ue)<<ve,B[W]=((re^ue)-ue)*k[(0<R)+0]}return 16}function Cc(h){var g=h.rb[h.sb-1];g.la=0,g.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function _p(h,g){if(h==null)return 0;if(g==null)return bn(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!Sd(h,g))return 0;if(e(h.cb),g.ac==null||g.ac(g)){g.ob&&(h.L=0);var S=Xd[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=g.v-S>>4,h.zb=g.j-S>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=g.o+15+S>>4,h.Hb=g.va+15+S>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var k=h.ed;for(S=0;4>S;++S){var R;if(h.Qa.Cb){var B=h.Qa.Lb[S];h.Qa.Fb||(B+=k.Tb)}else B=k.Tb;for(R=0;1>=R;++R){var U=h.gd[S][R],z=B;if(k.Pc&&(z+=k.vd[0],R&&(z+=k.od[0])),0<(z=0>z?0:63<z?63:z)){var W=z;0<k.wb&&(W=4<k.wb?W>>2:W>>1)>9-k.wb&&(W=9-k.wb),1>W&&(W=1),U.dd=W,U.tc=2*z+W,U.ld=40<=z?2:15<=z?1:0}else U.tc=0;U.La=R}}}S=0}else bn(h,6,"Frame setup failed"),S=h.a;if(S=S==0){if(S){h.$c=0,0<h.Aa||(h.Ic=E_);e:{S=h.Ic,k=4*(W=h.za);var V=32*W,re=W+1,ye=0<h.L?W*(0<h.Aa?2:1):0,ve=(h.Aa==2?2:1)*W;if((U=k+832+(R=3*(16*S+Xd[h.L])/2*V)+(B=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=U)S=0;else{if(U>h.Vb){if(h.Vb=0,h.Ec=s(U),h.Fc=0,h.Ec==null){S=bn(h,1,"no memory during frame initialization.");break e}h.Vb=U}U=h.Ec,z=h.Fc,h.Ac=U,h.Bc=z,z+=k,h.Gd=a(V,wd),h.Hd=0,h.rb=a(re+1,xd),h.sb=1,h.wa=ye?a(ye,Yo):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=W),e(!0),h.oc=U,h.pc=z,z+=832,h.ya=a(ve,Ac),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=W),h.R=16*W,h.B=8*W,W=(V=Xd[h.L])*h.R,V=V/2*h.B,h.sa=U,h.ta=z+W,h.qa=h.sa,h.ra=h.ta+16*S*h.R+V,h.Ha=h.qa,h.Ia=h.ra+8*S*h.B+V,h.$c=0,z+=R,h.mb=B?U:null,h.nb=B?z:null,e(z+B<=h.Fc+h.Vb),Cc(h),i(h.Ac,h.Bc,0,k),S=1}}if(S){if(g.ka=0,g.y=h.sa,g.O=h.ta,g.f=h.qa,g.N=h.ra,g.ea=h.Ha,g.Vd=h.Ia,g.fa=h.R,g.Rc=h.B,g.F=null,g.J=0,!zd){for(S=-255;255>=S;++S)Rn[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)Cs[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)Kc[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)dl[255+S]=0>S?0:255<S?255:S;zd=1}ll=jp,As=Np,Vc=kd,br=kp,wi=jd,Sn=Nd,cl=Mc,Ud=Qa,Gc=$p,to=Ic,no=Op,ia=Zo,ro=Rc,ul=Id,io=Md,sa=ss,Jc=Ns,bi=Fp,Ui[0]=is,Ui[1]=Ap,Ui[2]=Tp,Ui[3]=Lp,Ui[4]=Ed,Ui[5]=Xo,Ui[6]=Pd,Ui[7]=Tc,Ui[8]=Mp,Ui[9]=Dp,aa[0]=Ad,aa[1]=Ep,aa[2]=_s,aa[3]=Jo,aa[4]=rr,aa[5]=Pp,aa[6]=Cd,Es[0]=Zs,Es[1]=Cp,Es[2]=Ip,Es[3]=Lc,Es[4]=Xa,Es[5]=Rp,Es[6]=Dc,S=1}else S=0}S&&(S=function(ue,Ee){for(ue.M=0;ue.M<ue.Va;++ue.M){var be,se=ue.Jc[ue.M&ue.Xb],le=ue.m,je=ue;for(be=0;be<je.za;++be){var Pe=le,Ce=je,Je=Ce.Ac,He=Ce.Bc+4*be,ct=Ce.zc,Ye=Ce.ya[Ce.aa+be];if(Ce.Qa.Bb?Ye.$b=de(Pe,Ce.Pa.jb[0])?2+de(Pe,Ce.Pa.jb[2]):de(Pe,Ce.Pa.jb[1]):Ye.$b=0,Ce.kc&&(Ye.Ad=de(Pe,Ce.Bd)),Ye.Za=!de(Pe,145)+0,Ye.Za){var Ot=Ye.Ob,Bt=0;for(Ce=0;4>Ce;++Ce){var It,Pt=ct[0+Ce];for(It=0;4>It;++It){Pt=p_[Je[He+It]][Pt];for(var Vt=yy[de(Pe,Pt[0])];0<Vt;)Vt=yy[2*Vt+de(Pe,Pt[Vt])];Pt=-Vt,Je[He+It]=Pt}r(Ot,Bt,Je,He,4),Bt+=4,ct[0+Ce]=Pt}}else Pt=de(Pe,156)?de(Pe,128)?1:3:de(Pe,163)?2:0,Ye.Ob[0]=Pt,i(Je,He,Pt,4),i(ct,0,Pt,4);Ye.Dd=de(Pe,142)?de(Pe,114)?de(Pe,183)?1:3:2:0}if(je.m.Ka)return bn(ue,7,"Premature end-of-partition0 encountered.");for(;ue.ja<ue.za;++ue.ja){if(je=se,Pe=(le=ue).rb[le.sb-1],Je=le.rb[le.sb+le.ja],be=le.ya[le.aa+le.ja],He=le.kc?be.Ad:0)Pe.la=Je.la=0,be.Za||(Pe.Na=Je.Na=0),be.Hc=0,be.Gc=0,be.ia=0;else{var qt,wt;if(Pe=Je,Je=je,He=le.Pa.Xc,ct=le.ya[le.aa+le.ja],Ye=le.pb[ct.$b],Ce=ct.ad,Ot=0,Bt=le.rb[le.sb-1],Pt=It=0,i(Ce,Ot,0,384),ct.Za)var Pn=0,Ir=He[3];else{Vt=s(16);var Tn=Pe.Na+Bt.Na;if(Tn=Xc(Je,He[1],Tn,Ye.Eb,0,Vt,0),Pe.Na=Bt.Na=(0<Tn)+0,1<Tn)ll(Vt,0,Ce,Ot);else{var Rr=Vt[0]+3>>3;for(Vt=0;256>Vt;Vt+=16)Ce[Ot+Vt]=Rr}Pn=1,Ir=He[0]}var Ut=15&Pe.la,ei=15&Bt.la;for(Vt=0;4>Vt;++Vt){var ti=1&ei;for(Rr=wt=0;4>Rr;++Rr)Ut=Ut>>1|(ti=(Tn=Xc(Je,Ir,Tn=ti+(1&Ut),Ye.Sc,Pn,Ce,Ot))>Pn)<<7,wt=wt<<2|(3<Tn?3:1<Tn?2:Ce[Ot+0]!=0),Ot+=16;Ut>>=4,ei=ei>>1|ti<<7,It=(It<<8|wt)>>>0}for(Ir=Ut,Pn=ei>>4,qt=0;4>qt;qt+=2){for(wt=0,Ut=Pe.la>>4+qt,ei=Bt.la>>4+qt,Vt=0;2>Vt;++Vt){for(ti=1&ei,Rr=0;2>Rr;++Rr)Tn=ti+(1&Ut),Ut=Ut>>1|(ti=0<(Tn=Xc(Je,He[2],Tn,Ye.Qc,0,Ce,Ot)))<<3,wt=wt<<2|(3<Tn?3:1<Tn?2:Ce[Ot+0]!=0),Ot+=16;Ut>>=2,ei=ei>>1|ti<<5}Pt|=wt<<4*qt,Ir|=Ut<<4<<qt,Pn|=(240&ei)<<qt}Pe.la=Ir,Bt.la=Pn,ct.Hc=It,ct.Gc=Pt,ct.ia=43690&Pt?0:Ye.ia,He=!(It|Pt)}if(0<le.L&&(le.wa[le.Y+le.ja]=le.gd[be.$b][be.Za],le.wa[le.Y+le.ja].La|=!He),je.Ka)return bn(ue,7,"Premature end-of-file encountered.")}if(Cc(ue),le=Ee,je=1,be=(se=ue).D,Pe=0<se.L&&se.M>=se.zb&&se.M<=se.Va,se.Aa==0)e:{if(be.M=se.M,be.uc=Pe,zc(se,be),je=1,be=(wt=se.D).Nb,Pe=(Pt=Xd[se.L])*se.R,Je=Pt/2*se.B,Vt=16*be*se.R,Rr=8*be*se.B,He=se.sa,ct=se.ta-Pe+Vt,Ye=se.qa,Ce=se.ra-Je+Rr,Ot=se.Ha,Bt=se.Ia-Je+Rr,ei=(Ut=wt.M)==0,It=Ut>=se.Va-1,se.Aa==2&&zc(se,wt),wt.uc)for(ti=(Tn=se).D.M,e(Tn.D.uc),wt=Tn.yb;wt<Tn.Hb;++wt){Pn=wt,Ir=ti;var Wn=(Xn=(mn=Tn).D).Nb;qt=mn.R;var Xn=Xn.wa[Xn.Y+Pn],Sr=mn.sa,ki=mn.ta+16*Wn*qt+16*Pn,os=Xn.dd,Hn=Xn.tc;if(Hn!=0)if(e(3<=Hn),mn.L==1)0<Pn&&sa(Sr,ki,qt,Hn+4),Xn.La&&bi(Sr,ki,qt,Hn),0<Ir&&io(Sr,ki,qt,Hn+4),Xn.La&&Jc(Sr,ki,qt,Hn);else{var Ps=mn.B,so=mn.qa,hl=mn.ra+8*Wn*Ps+8*Pn,la=mn.Ha,mn=mn.Ia+8*Wn*Ps+8*Pn;Wn=Xn.ld,0<Pn&&(Ud(Sr,ki,qt,Hn+4,os,Wn),to(so,hl,la,mn,Ps,Hn+4,os,Wn)),Xn.La&&(ia(Sr,ki,qt,Hn,os,Wn),ul(so,hl,la,mn,Ps,Hn,os,Wn)),0<Ir&&(cl(Sr,ki,qt,Hn+4,os,Wn),Gc(so,hl,la,mn,Ps,Hn+4,os,Wn)),Xn.La&&(no(Sr,ki,qt,Hn,os,Wn),ro(so,hl,la,mn,Ps,Hn,os,Wn))}}if(se.ia&&alert("todo:DitherRow"),le.put!=null){if(wt=16*Ut,Ut=16*(Ut+1),ei?(le.y=se.sa,le.O=se.ta+Vt,le.f=se.qa,le.N=se.ra+Rr,le.ea=se.Ha,le.W=se.Ia+Rr):(wt-=Pt,le.y=He,le.O=ct,le.f=Ye,le.N=Ce,le.ea=Ot,le.W=Bt),It||(Ut-=Pt),Ut>le.o&&(Ut=le.o),le.F=null,le.J=null,se.Fa!=null&&0<se.Fa.length&&wt<Ut&&(le.J=Bc(se,le,wt,Ut-wt),le.F=se.mb,le.F==null&&le.F.length==0)){je=bn(se,3,"Could not decode alpha data.");break e}wt<le.j&&(Pt=le.j-wt,wt=le.j,e(!(1&Pt)),le.O+=se.R*Pt,le.N+=se.B*(Pt>>1),le.W+=se.B*(Pt>>1),le.F!=null&&(le.J+=le.width*Pt)),wt<Ut&&(le.O+=le.v,le.N+=le.v>>1,le.W+=le.v>>1,le.F!=null&&(le.J+=le.v),le.ka=wt-le.j,le.U=le.va-le.v,le.T=Ut-wt,je=le.put(le))}be+1!=se.Ic||It||(r(se.sa,se.ta-Pe,He,ct+16*se.R,Pe),r(se.qa,se.ra-Je,Ye,Ce+8*se.B,Je),r(se.Ha,se.Ia-Je,Ot,Bt+8*se.B,Je))}if(!je)return bn(ue,6,"Output aborted.")}return 1}(h,g)),g.bc!=null&&g.bc(g),S&=1}return S?(h.cb=0,S):0}function Oi(h,g,S,k,R){R=h[g+S+32*k]+(R>>3),h[g+S+32*k]=-256&R?0>R?0:255:R}function Go(h,g,S,k,R,B){Oi(h,g,0,S,k+R),Oi(h,g,1,S,k+B),Oi(h,g,2,S,k-B),Oi(h,g,3,S,k-R)}function Lr(h){return(20091*h>>16)+h}function Ec(h,g,S,k){var R,B=0,U=s(16);for(R=0;4>R;++R){var z=h[g+0]+h[g+8],W=h[g+0]-h[g+8],V=(35468*h[g+4]>>16)-Lr(h[g+12]),re=Lr(h[g+4])+(35468*h[g+12]>>16);U[B+0]=z+re,U[B+1]=W+V,U[B+2]=W-V,U[B+3]=z-re,B+=4,g++}for(R=B=0;4>R;++R)z=(h=U[B+0]+4)+U[B+8],W=h-U[B+8],V=(35468*U[B+4]>>16)-Lr(U[B+12]),Oi(S,k,0,0,z+(re=Lr(U[B+4])+(35468*U[B+12]>>16))),Oi(S,k,1,0,W+V),Oi(S,k,2,0,W-V),Oi(S,k,3,0,z-re),B++,k+=32}function Nd(h,g,S,k){var R=h[g+0]+4,B=35468*h[g+4]>>16,U=Lr(h[g+4]),z=35468*h[g+1]>>16;Go(S,k,0,R+U,h=Lr(h[g+1]),z),Go(S,k,1,R+B,h,z),Go(S,k,2,R-B,h,z),Go(S,k,3,R-U,h,z)}function Np(h,g,S,k,R){Ec(h,g,S,k),R&&Ec(h,g+16,S,k+4)}function kd(h,g,S,k){As(h,g+0,S,k,1),As(h,g+32,S,k+128,1)}function kp(h,g,S,k){var R;for(h=h[g+0]+4,R=0;4>R;++R)for(g=0;4>g;++g)Oi(S,k,g,R,h)}function jd(h,g,S,k){h[g+0]&&br(h,g+0,S,k),h[g+16]&&br(h,g+16,S,k+4),h[g+32]&&br(h,g+32,S,k+128),h[g+48]&&br(h,g+48,S,k+128+4)}function jp(h,g,S,k){var R,B=s(16);for(R=0;4>R;++R){var U=h[g+0+R]+h[g+12+R],z=h[g+4+R]+h[g+8+R],W=h[g+4+R]-h[g+8+R],V=h[g+0+R]-h[g+12+R];B[0+R]=U+z,B[8+R]=U-z,B[4+R]=V+W,B[12+R]=V-W}for(R=0;4>R;++R)U=(h=B[0+4*R]+3)+B[3+4*R],z=B[1+4*R]+B[2+4*R],W=B[1+4*R]-B[2+4*R],V=h-B[3+4*R],S[k+0]=U+z>>3,S[k+16]=V+W>>3,S[k+32]=U-z>>3,S[k+48]=V-W>>3,k+=64}function Pc(h,g,S){var k,R=g-32,B=Zr,U=255-h[R-1];for(k=0;k<S;++k){var z,W=B,V=U+h[g-1];for(z=0;z<S;++z)h[g+z]=W[V+h[R+z]];g+=32}}function Ap(h,g){Pc(h,g,4)}function Cp(h,g){Pc(h,g,8)}function Ep(h,g){Pc(h,g,16)}function _s(h,g){var S;for(S=0;16>S;++S)r(h,g+32*S,h,g-32,16)}function Jo(h,g){var S;for(S=16;0<S;--S)i(h,g,h[g-1],16),g+=32}function Ko(h,g,S){var k;for(k=0;16>k;++k)i(g,S+32*k,h,16)}function Ad(h,g){var S,k=16;for(S=0;16>S;++S)k+=h[g-1+32*S]+h[g+S-32];Ko(k>>5,h,g)}function rr(h,g){var S,k=8;for(S=0;16>S;++S)k+=h[g-1+32*S];Ko(k>>4,h,g)}function Pp(h,g){var S,k=8;for(S=0;16>S;++S)k+=h[g+S-32];Ko(k>>4,h,g)}function Cd(h,g){Ko(128,h,g)}function pt(h,g,S){return h+2*g+S+2>>2}function Tp(h,g){var S,k=g-32;for(k=new Uint8Array([pt(h[k-1],h[k+0],h[k+1]),pt(h[k+0],h[k+1],h[k+2]),pt(h[k+1],h[k+2],h[k+3]),pt(h[k+2],h[k+3],h[k+4])]),S=0;4>S;++S)r(h,g+32*S,k,0,k.length)}function Lp(h,g){var S=h[g-1],k=h[g-1+32],R=h[g-1+64],B=h[g-1+96];_e(h,g+0,16843009*pt(h[g-1-32],S,k)),_e(h,g+32,16843009*pt(S,k,R)),_e(h,g+64,16843009*pt(k,R,B)),_e(h,g+96,16843009*pt(R,B,B))}function is(h,g){var S,k=4;for(S=0;4>S;++S)k+=h[g+S-32]+h[g-1+32*S];for(k>>=3,S=0;4>S;++S)i(h,g+32*S,k,4)}function Ed(h,g){var S=h[g-1+0],k=h[g-1+32],R=h[g-1+64],B=h[g-1-32],U=h[g+0-32],z=h[g+1-32],W=h[g+2-32],V=h[g+3-32];h[g+0+96]=pt(k,R,h[g-1+96]),h[g+1+96]=h[g+0+64]=pt(S,k,R),h[g+2+96]=h[g+1+64]=h[g+0+32]=pt(B,S,k),h[g+3+96]=h[g+2+64]=h[g+1+32]=h[g+0+0]=pt(U,B,S),h[g+3+64]=h[g+2+32]=h[g+1+0]=pt(z,U,B),h[g+3+32]=h[g+2+0]=pt(W,z,U),h[g+3+0]=pt(V,W,z)}function Pd(h,g){var S=h[g+1-32],k=h[g+2-32],R=h[g+3-32],B=h[g+4-32],U=h[g+5-32],z=h[g+6-32],W=h[g+7-32];h[g+0+0]=pt(h[g+0-32],S,k),h[g+1+0]=h[g+0+32]=pt(S,k,R),h[g+2+0]=h[g+1+32]=h[g+0+64]=pt(k,R,B),h[g+3+0]=h[g+2+32]=h[g+1+64]=h[g+0+96]=pt(R,B,U),h[g+3+32]=h[g+2+64]=h[g+1+96]=pt(B,U,z),h[g+3+64]=h[g+2+96]=pt(U,z,W),h[g+3+96]=pt(z,W,W)}function Xo(h,g){var S=h[g-1+0],k=h[g-1+32],R=h[g-1+64],B=h[g-1-32],U=h[g+0-32],z=h[g+1-32],W=h[g+2-32],V=h[g+3-32];h[g+0+0]=h[g+1+64]=B+U+1>>1,h[g+1+0]=h[g+2+64]=U+z+1>>1,h[g+2+0]=h[g+3+64]=z+W+1>>1,h[g+3+0]=W+V+1>>1,h[g+0+96]=pt(R,k,S),h[g+0+64]=pt(k,S,B),h[g+0+32]=h[g+1+96]=pt(S,B,U),h[g+1+32]=h[g+2+96]=pt(B,U,z),h[g+2+32]=h[g+3+96]=pt(U,z,W),h[g+3+32]=pt(z,W,V)}function Tc(h,g){var S=h[g+0-32],k=h[g+1-32],R=h[g+2-32],B=h[g+3-32],U=h[g+4-32],z=h[g+5-32],W=h[g+6-32],V=h[g+7-32];h[g+0+0]=S+k+1>>1,h[g+1+0]=h[g+0+64]=k+R+1>>1,h[g+2+0]=h[g+1+64]=R+B+1>>1,h[g+3+0]=h[g+2+64]=B+U+1>>1,h[g+0+32]=pt(S,k,R),h[g+1+32]=h[g+0+96]=pt(k,R,B),h[g+2+32]=h[g+1+96]=pt(R,B,U),h[g+3+32]=h[g+2+96]=pt(B,U,z),h[g+3+64]=pt(U,z,W),h[g+3+96]=pt(z,W,V)}function Dp(h,g){var S=h[g-1+0],k=h[g-1+32],R=h[g-1+64],B=h[g-1+96];h[g+0+0]=S+k+1>>1,h[g+2+0]=h[g+0+32]=k+R+1>>1,h[g+2+32]=h[g+0+64]=R+B+1>>1,h[g+1+0]=pt(S,k,R),h[g+3+0]=h[g+1+32]=pt(k,R,B),h[g+3+32]=h[g+1+64]=pt(R,B,B),h[g+3+64]=h[g+2+64]=h[g+0+96]=h[g+1+96]=h[g+2+96]=h[g+3+96]=B}function Mp(h,g){var S=h[g-1+0],k=h[g-1+32],R=h[g-1+64],B=h[g-1+96],U=h[g-1-32],z=h[g+0-32],W=h[g+1-32],V=h[g+2-32];h[g+0+0]=h[g+2+32]=S+U+1>>1,h[g+0+32]=h[g+2+64]=k+S+1>>1,h[g+0+64]=h[g+2+96]=R+k+1>>1,h[g+0+96]=B+R+1>>1,h[g+3+0]=pt(z,W,V),h[g+2+0]=pt(U,z,W),h[g+1+0]=h[g+3+32]=pt(S,U,z),h[g+1+32]=h[g+3+64]=pt(k,S,U),h[g+1+64]=h[g+3+96]=pt(R,k,S),h[g+1+96]=pt(B,R,k)}function Ip(h,g){var S;for(S=0;8>S;++S)r(h,g+32*S,h,g-32,8)}function Lc(h,g){var S;for(S=0;8>S;++S)i(h,g,h[g-1],8),g+=32}function Ka(h,g,S){var k;for(k=0;8>k;++k)i(g,S+32*k,h,8)}function Zs(h,g){var S,k=8;for(S=0;8>S;++S)k+=h[g+S-32]+h[g-1+32*S];Ka(k>>4,h,g)}function Rp(h,g){var S,k=4;for(S=0;8>S;++S)k+=h[g+S-32];Ka(k>>3,h,g)}function Xa(h,g){var S,k=4;for(S=0;8>S;++S)k+=h[g-1+32*S];Ka(k>>3,h,g)}function Dc(h,g){Ka(128,h,g)}function Qo(h,g,S){var k=h[g-S],R=h[g+0],B=3*(R-k)+zp[1020+h[g-2*S]-h[g+S]],U=Wd[112+(B+4>>3)];h[g-S]=Zr[255+k+Wd[112+(B+3>>3)]],h[g+0]=Zr[255+R-U]}function Td(h,g,S,k){var R=h[g+0],B=h[g+S];return _i[255+h[g-2*S]-h[g-S]]>k||_i[255+B-R]>k}function Ld(h,g,S,k){return 4*_i[255+h[g-S]-h[g+0]]+_i[255+h[g-2*S]-h[g+S]]<=k}function Dd(h,g,S,k,R){var B=h[g-3*S],U=h[g-2*S],z=h[g-S],W=h[g+0],V=h[g+S],re=h[g+2*S],ye=h[g+3*S];return 4*_i[255+z-W]+_i[255+U-V]>k?0:_i[255+h[g-4*S]-B]<=R&&_i[255+B-U]<=R&&_i[255+U-z]<=R&&_i[255+ye-re]<=R&&_i[255+re-V]<=R&&_i[255+V-W]<=R}function Md(h,g,S,k){var R=2*k+1;for(k=0;16>k;++k)Ld(h,g+k,S,R)&&Qo(h,g+k,S)}function ss(h,g,S,k){var R=2*k+1;for(k=0;16>k;++k)Ld(h,g+k*S,1,R)&&Qo(h,g+k*S,1)}function Ns(h,g,S,k){var R;for(R=3;0<R;--R)Md(h,g+=4*S,S,k)}function Fp(h,g,S,k){var R;for(R=3;0<R;--R)ss(h,g+=4,S,k)}function ea(h,g,S,k,R,B,U,z){for(B=2*B+1;0<R--;){if(Dd(h,g,S,B,U))if(Td(h,g,S,z))Qo(h,g,S);else{var W=h,V=g,re=S,ye=W[V-2*re],ve=W[V-re],ue=W[V+0],Ee=W[V+re],be=W[V+2*re],se=27*(je=zp[1020+3*(ue-ve)+zp[1020+ye-Ee]])+63>>7,le=18*je+63>>7,je=9*je+63>>7;W[V-3*re]=Zr[255+W[V-3*re]+je],W[V-2*re]=Zr[255+ye+le],W[V-re]=Zr[255+ve+se],W[V+0]=Zr[255+ue-se],W[V+re]=Zr[255+Ee-le],W[V+2*re]=Zr[255+be-je]}g+=k}}function $i(h,g,S,k,R,B,U,z){for(B=2*B+1;0<R--;){if(Dd(h,g,S,B,U))if(Td(h,g,S,z))Qo(h,g,S);else{var W=h,V=g,re=S,ye=W[V-re],ve=W[V+0],ue=W[V+re],Ee=Wd[112+((be=3*(ve-ye))+4>>3)],be=Wd[112+(be+3>>3)],se=Ee+1>>1;W[V-2*re]=Zr[255+W[V-2*re]+se],W[V-re]=Zr[255+ye+be],W[V+0]=Zr[255+ve-Ee],W[V+re]=Zr[255+ue-se]}g+=k}}function Mc(h,g,S,k,R,B){ea(h,g,S,1,16,k,R,B)}function Qa(h,g,S,k,R,B){ea(h,g,1,S,16,k,R,B)}function Op(h,g,S,k,R,B){var U;for(U=3;0<U;--U)$i(h,g+=4*S,S,1,16,k,R,B)}function Zo(h,g,S,k,R,B){var U;for(U=3;0<U;--U)$i(h,g+=4,1,S,16,k,R,B)}function $p(h,g,S,k,R,B,U,z){ea(h,g,R,1,8,B,U,z),ea(S,k,R,1,8,B,U,z)}function Ic(h,g,S,k,R,B,U,z){ea(h,g,1,R,8,B,U,z),ea(S,k,1,R,8,B,U,z)}function Rc(h,g,S,k,R,B,U,z){$i(h,g+4*R,R,1,8,B,U,z),$i(S,k+4*R,R,1,8,B,U,z)}function Id(h,g,S,k,R,B,U,z){$i(h,g+4,1,R,8,B,U,z),$i(S,k+4,1,R,8,B,U,z)}function el(){this.ba=new me,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new $e,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Oc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Rd(){this.ua=0,this.Wa=new Q,this.vb=new Q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new O,this.yc=new M}function Bp(){this.xb=this.a=0,this.l=new Vo,this.ca=new me,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Rd,this.ab=0,this.gc=a(4,Oc),this.Oc=0}function tl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Za(h,g,S,k,R,B,U){for(h=h==null?0:h[g+0],g=0;g<U;++g)R[B+g]=h+S[k+g]&255,h=R[B+g]}function $c(h,g,S,k,R,B,U){var z;if(h==null)Za(null,null,S,k,R,B,U);else for(z=0;z<U;++z)R[B+z]=h[g+z]+S[k+z]&255}function ta(h,g,S,k,R,B,U){if(h==null)Za(null,null,S,k,R,B,U);else{var z,W=h[g+0],V=W,re=W;for(z=0;z<U;++z)V=re+(W=h[g+z])-V,re=S[k+z]+(-256&V?0>V?0:255:V)&255,V=W,R[B+z]=re}}function Bc(h,g,S,k){var R=g.width,B=g.o;if(e(h!=null&&g!=null),0>S||0>=k||S+k>B)return null;if(!h.Cc){if(h.ga==null){var U;if(h.ga=new tl,(U=h.ga==null)||(U=g.width*g.o,e(h.Gb.length==0),h.Gb=s(U),h.Uc=0,h.Gb==null?U=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,U=1),U=!U),!U){U=h.ga;var z=h.Fa,W=h.P,V=h.qc,re=h.mb,ye=h.nb,ve=W+1,ue=V-1,Ee=U.l;if(e(z!=null&&re!=null&&g!=null),oa[0]=null,oa[1]=Za,oa[2]=$c,oa[3]=ta,U.ca=re,U.tb=ye,U.c=g.width,U.i=g.height,e(0<U.c&&0<U.i),1>=V)g=0;else if(U.$a=z[W+0]>>0&3,U.Z=z[W+0]>>2&3,U.Lc=z[W+0]>>4&3,W=z[W+0]>>6&3,0>U.$a||1<U.$a||4<=U.Z||1<U.Lc||W)g=0;else if(Ee.put=gi,Ee.ac=St,Ee.bc=Fi,Ee.ma=U,Ee.width=g.width,Ee.height=g.height,Ee.Da=g.Da,Ee.v=g.v,Ee.va=g.va,Ee.j=g.j,Ee.o=g.o,U.$a)e:{e(U.$a==1),g=Tr();t:for(;;){if(g==null){g=0;break e}if(e(U!=null),U.mc=g,g.c=U.c,g.i=U.i,g.l=U.l,g.l.ma=U,g.l.width=U.c,g.l.height=U.i,g.a=0,J(g.m,z,ve,ue),!yi(U.c,U.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&_t(g.s)?(U.ic=1,z=g.c*g.i,g.Ta=null,g.Ua=0,g.V=s(z),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(U.ic=0,g=vi(g,U.c)),!g))break t;g=1;break e}U.mc=null,g=0}else g=ue>=U.c*U.i;U=!g}if(U)return null;h.ga.Lc!=1?h.Ga=0:k=B-S}e(h.ga!=null),e(S+k<=B);e:{if(g=(z=h.ga).c,B=z.l.o,z.$a==0){if(ve=h.rc,ue=h.Vc,Ee=h.Fa,W=h.P+1+S*g,V=h.mb,re=h.nb+S*g,e(W<=h.P+h.qc),z.Z!=0)for(e(oa[z.Z]!=null),U=0;U<k;++U)oa[z.Z](ve,ue,Ee,W,V,re,g),ve=V,ue=re,re+=g,W+=g;else for(U=0;U<k;++U)r(V,re,Ee,W,g),ve=V,ue=re,re+=g,W+=g;h.rc=ve,h.Vc=ue}else{if(e(z.mc!=null),g=S+k,e((U=z.mc)!=null),e(g<=U.i),U.C>=g)g=1;else if(z.ic||pe(),z.ic){z=U.V,ve=U.Ba,ue=U.c;var be=U.i,se=(Ee=1,W=U.$/ue,V=U.$%ue,re=U.m,ye=U.s,U.$),le=ue*be,je=ue*g,Pe=ye.wc,Ce=se<je?et(ye,V,W):null;e(se<=le),e(g<=be),e(_t(ye));t:for(;;){for(;!re.h&&se<je;){if(V&Pe||(Ce=et(ye,V,W)),e(Ce!=null),te(re),256>(be=mt(Ce.G[0],Ce.H[0],re)))z[ve+se]=be,++se,++V>=ue&&(V=0,++W<=g&&!(W%16)&&wn(U,W));else{if(!(280>be)){Ee=0;break t}be=fe(be-256,re);var Je,He=mt(Ce.G[4],Ce.H[4],re);if(te(re),!(se>=(He=Xe(ue,He=fe(He,re)))&&le-se>=be)){Ee=0;break t}for(Je=0;Je<be;++Je)z[ve+se+Je]=z[ve+se+Je-He];for(se+=be,V+=be;V>=ue;)V-=ue,++W<=g&&!(W%16)&&wn(U,W);se<je&&V&Pe&&(Ce=et(ye,V,W))}e(re.h==Y(re))}wn(U,W>g?g:W);break t}!Ee||re.h&&se<le?(Ee=0,U.a=re.h?5:3):U.$=se,g=Ee}else g=Un(U,U.V,U.Ba,U.c,U.i,g,zo);if(!g){k=0;break e}}S+k>=B&&(h.Cc=1),k=1}if(!k)return null;if(h.Cc&&((k=h.ga)!=null&&(k.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+S*R}function v(h,g,S,k,R,B){for(;0<R--;){var U,z=h,W=g+(S?1:0),V=h,re=g+(S?0:3);for(U=0;U<k;++U){var ye=V[re+4*U];ye!=255&&(ye*=32897,z[W+4*U+0]=z[W+4*U+0]*ye>>23,z[W+4*U+1]=z[W+4*U+1]*ye>>23,z[W+4*U+2]=z[W+4*U+2]*ye>>23)}g+=B}}function F(h,g,S,k,R){for(;0<k--;){var B;for(B=0;B<S;++B){var U=h[g+2*B+0],z=15&(V=h[g+2*B+1]),W=4369*z,V=(240&V|V>>4)*W>>16;h[g+2*B+0]=(240&U|U>>4)*W>>16&240|(15&U|U<<4)*W>>16>>4&15,h[g+2*B+1]=240&V|z}g+=R}}function K(h,g,S,k,R,B,U,z){var W,V,re=255;for(V=0;V<R;++V){for(W=0;W<k;++W){var ye=h[g+W];B[U+4*W]=ye,re&=ye}g+=S,U+=z}return re!=255}function ne(h,g,S,k,R){var B;for(B=0;B<R;++B)S[k+B]=h[g+B]>>8}function pe(){Si=v,Xt=F,Qt=K,_n=ne}function Se(h,g,S){j[h]=function(k,R,B,U,z,W,V,re,ye,ve,ue,Ee,be,se,le,je,Pe){var Ce,Je=Pe-1>>1,He=z[W+0]|V[re+0]<<16,ct=ye[ve+0]|ue[Ee+0]<<16;e(k!=null);var Ye=3*He+ct+131074>>2;for(g(k[R+0],255&Ye,Ye>>16,be,se),B!=null&&(Ye=3*ct+He+131074>>2,g(B[U+0],255&Ye,Ye>>16,le,je)),Ce=1;Ce<=Je;++Ce){var Ot=z[W+Ce]|V[re+Ce]<<16,Bt=ye[ve+Ce]|ue[Ee+Ce]<<16,It=He+Ot+ct+Bt+524296,Pt=It+2*(Ot+ct)>>3;Ye=Pt+He>>1,He=(It=It+2*(He+Bt)>>3)+Ot>>1,g(k[R+2*Ce-1],255&Ye,Ye>>16,be,se+(2*Ce-1)*S),g(k[R+2*Ce-0],255&He,He>>16,be,se+(2*Ce-0)*S),B!=null&&(Ye=It+ct>>1,He=Pt+Bt>>1,g(B[U+2*Ce-1],255&Ye,Ye>>16,le,je+(2*Ce-1)*S),g(B[U+2*Ce+0],255&He,He>>16,le,je+(2*Ce+0)*S)),He=Ot,ct=Bt}1&Pe||(Ye=3*He+ct+131074>>2,g(k[R+Pe-1],255&Ye,Ye>>16,be,se+(Pe-1)*S),B!=null&&(Ye=3*ct+He+131074>>2,g(B[U+Pe-1],255&Ye,Ye>>16,le,je+(Pe-1)*S)))}}function De(){Ni[Hd]=v_,Ni[qd]=xy,Ni[py]=x_,Ni[Yd]=wy,Ni[Vd]=by,Ni[Wp]=Sy,Ni[my]=w_,Ni[Hp]=xy,Ni[qp]=wy,Ni[Gd]=by,Ni[Yp]=Sy}function Ge(h){return h&-16384?0>h?0:255:h>>b_}function ot(h,g){return Ge((19077*h>>8)+(26149*g>>8)-14234)}function xt(h,g,S){return Ge((19077*h>>8)-(6419*g>>8)-(13320*S>>8)+8708)}function yt(h,g){return Ge((19077*h>>8)+(33050*g>>8)-17685)}function Dt(h,g,S,k,R){k[R+0]=ot(h,S),k[R+1]=xt(h,g,S),k[R+2]=yt(h,g)}function on(h,g,S,k,R){k[R+0]=yt(h,g),k[R+1]=xt(h,g,S),k[R+2]=ot(h,S)}function pn(h,g,S,k,R){var B=xt(h,g,S);g=B<<3&224|yt(h,g)>>3,k[R+0]=248&ot(h,S)|B>>5,k[R+1]=g}function En(h,g,S,k,R){var B=240&yt(h,g)|15;k[R+0]=240&ot(h,S)|xt(h,g,S)>>4,k[R+1]=B}function ir(h,g,S,k,R){k[R+0]=255,Dt(h,g,S,k,R+1)}function zn(h,g,S,k,R){on(h,g,S,k,R),k[R+3]=255}function Bi(h,g,S,k,R){Dt(h,g,S,k,R),k[R+3]=255}function Qr(h,g){return 0>h?0:h>g?g:h}function as(h,g,S){j[h]=function(k,R,B,U,z,W,V,re,ye){for(var ve=re+(-2&ye)*S;re!=ve;)g(k[R+0],B[U+0],z[W+0],V,re),g(k[R+1],B[U+0],z[W+0],V,re+S),R+=2,++U,++W,re+=2*S;1&ye&&g(k[R+0],B[U+0],z[W+0],V,re)}}function Fd(h,g,S){return S==0?h==0?g==0?6:5:g==0?4:0:S}function Uc(h,g,S,k,R){switch(h>>>30){case 3:As(g,S,k,R,0);break;case 2:Sn(g,S,k,R);break;case 1:br(g,S,k,R)}}function zc(h,g){var S,k,R=g.M,B=g.Nb,U=h.oc,z=h.pc+40,W=h.oc,V=h.pc+584,re=h.oc,ye=h.pc+600;for(S=0;16>S;++S)U[z+32*S-1]=129;for(S=0;8>S;++S)W[V+32*S-1]=129,re[ye+32*S-1]=129;for(0<R?U[z-1-32]=W[V-1-32]=re[ye-1-32]=129:(i(U,z-32-1,127,21),i(W,V-32-1,127,9),i(re,ye-32-1,127,9)),k=0;k<h.za;++k){var ve=g.ya[g.aa+k];if(0<k){for(S=-1;16>S;++S)r(U,z+32*S-4,U,z+32*S+12,4);for(S=-1;8>S;++S)r(W,V+32*S-4,W,V+32*S+4,4),r(re,ye+32*S-4,re,ye+32*S+4,4)}var ue=h.Gd,Ee=h.Hd+k,be=ve.ad,se=ve.Hc;if(0<R&&(r(U,z-32,ue[Ee].y,0,16),r(W,V-32,ue[Ee].f,0,8),r(re,ye-32,ue[Ee].ea,0,8)),ve.Za){var le=U,je=z-32+16;for(0<R&&(k>=h.za-1?i(le,je,ue[Ee].y[15],4):r(le,je,ue[Ee+1].y,0,4)),S=0;4>S;S++)le[je+128+S]=le[je+256+S]=le[je+384+S]=le[je+0+S];for(S=0;16>S;++S,se<<=2)le=U,je=z+Ny[S],Ui[ve.Ob[S]](le,je),Uc(se,be,16*+S,le,je)}else if(le=Fd(k,R,ve.Ob[0]),aa[le](U,z),se!=0)for(S=0;16>S;++S,se<<=2)Uc(se,be,16*+S,U,z+Ny[S]);for(S=ve.Gc,le=Fd(k,R,ve.Dd),Es[le](W,V),Es[le](re,ye),se=be,le=W,je=V,255&(ve=S>>0)&&(170&ve?Vc(se,256,le,je):wi(se,256,le,je)),ve=re,se=ye,255&(S>>=8)&&(170&S?Vc(be,320,ve,se):wi(be,320,ve,se)),R<h.Ub-1&&(r(ue[Ee].y,0,U,z+480,16),r(ue[Ee].f,0,W,V+224,8),r(ue[Ee].ea,0,re,ye+224,8)),S=8*B*h.B,ue=h.sa,Ee=h.ta+16*k+16*B*h.R,be=h.qa,ve=h.ra+8*k+S,se=h.Ha,le=h.Ia+8*k+S,S=0;16>S;++S)r(ue,Ee+S*h.R,U,z+32*S,16);for(S=0;8>S;++S)r(be,ve+S*h.B,W,V+32*S,8),r(se,le+S*h.B,re,ye+32*S,8)}}function nl(h,g,S,k,R,B,U,z,W){var V=[0],re=[0],ye=0,ve=W!=null?W.kd:0,ue=W??new Fc;if(h==null||12>S)return 7;ue.data=h,ue.w=g,ue.ha=S,g=[g],S=[S],ue.gb=[ue.gb];e:{var Ee=g,be=S,se=ue.gb;if(e(h!=null),e(be!=null),e(se!=null),se[0]=0,12<=be[0]&&!t(h,Ee[0],"RIFF")){if(t(h,Ee[0]+8,"WEBP")){se=3;break e}var le=Ie(h,Ee[0]+4);if(12>le||4294967286<le){se=3;break e}if(ve&&le>be[0]-8){se=7;break e}se[0]=le,Ee[0]+=12,be[0]-=12}se=0}if(se!=0)return se;for(le=0<ue.gb[0],S=S[0];;){e:{var je=h;be=g,se=S;var Pe=V,Ce=re,Je=Ee=[0];if((Ye=ye=[ye])[0]=0,8>se[0])se=7;else{if(!t(je,be[0],"VP8X")){if(Ie(je,be[0]+4)!=10){se=3;break e}if(18>se[0]){se=7;break e}var He=Ie(je,be[0]+8),ct=1+ze(je,be[0]+12);if(2147483648<=ct*(je=1+ze(je,be[0]+15))){se=3;break e}Je!=null&&(Je[0]=He),Pe!=null&&(Pe[0]=ct),Ce!=null&&(Ce[0]=je),be[0]+=18,se[0]-=18,Ye[0]=1}se=0}}if(ye=ye[0],Ee=Ee[0],se!=0)return se;if(be=!!(2&Ee),!le&&ye)return 3;if(B!=null&&(B[0]=!!(16&Ee)),U!=null&&(U[0]=be),z!=null&&(z[0]=0),U=V[0],Ee=re[0],ye&&be&&W==null){se=0;break}if(4>S){se=7;break}if(le&&ye||!le&&!ye&&!t(h,g[0],"ALPH")){S=[S],ue.na=[ue.na],ue.P=[ue.P],ue.Sa=[ue.Sa];e:{He=h,se=g,le=S;var Ye=ue.gb;Pe=ue.na,Ce=ue.P,Je=ue.Sa,ct=22,e(He!=null),e(le!=null),je=se[0];var Ot=le[0];for(e(Pe!=null),e(Je!=null),Pe[0]=null,Ce[0]=null,Je[0]=0;;){if(se[0]=je,le[0]=Ot,8>Ot){se=7;break e}var Bt=Ie(He,je+4);if(4294967286<Bt){se=3;break e}var It=8+Bt+1&-2;if(ct+=It,0<Ye&&ct>Ye){se=3;break e}if(!t(He,je,"VP8 ")||!t(He,je,"VP8L")){se=0;break e}if(Ot[0]<It){se=7;break e}t(He,je,"ALPH")||(Pe[0]=He,Ce[0]=je+8,Je[0]=Bt),je+=It,Ot-=It}}if(S=S[0],ue.na=ue.na[0],ue.P=ue.P[0],ue.Sa=ue.Sa[0],se!=0)break}S=[S],ue.Ja=[ue.Ja],ue.xa=[ue.xa];e:if(Ye=h,se=g,le=S,Pe=ue.gb[0],Ce=ue.Ja,Je=ue.xa,He=se[0],je=!t(Ye,He,"VP8 "),ct=!t(Ye,He,"VP8L"),e(Ye!=null),e(le!=null),e(Ce!=null),e(Je!=null),8>le[0])se=7;else{if(je||ct){if(Ye=Ie(Ye,He+4),12<=Pe&&Ye>Pe-12){se=3;break e}if(ve&&Ye>le[0]-8){se=7;break e}Ce[0]=Ye,se[0]+=8,le[0]-=8,Je[0]=ct}else Je[0]=5<=le[0]&&Ye[He+0]==47&&!(Ye[He+4]>>5),Ce[0]=le[0];se=0}if(S=S[0],ue.Ja=ue.Ja[0],ue.xa=ue.xa[0],g=g[0],se!=0)break;if(4294967286<ue.Ja)return 3;if(z==null||be||(z[0]=ue.xa?2:1),U=[U],Ee=[Ee],ue.xa){if(5>S){se=7;break}z=U,ve=Ee,be=B,h==null||5>S?h=0:5<=S&&h[g+0]==47&&!(h[g+4]>>5)?(le=[0],Ye=[0],Pe=[0],J(Ce=new E,h,g,S),lt(Ce,le,Ye,Pe)?(z!=null&&(z[0]=le[0]),ve!=null&&(ve[0]=Ye[0]),be!=null&&(be[0]=Pe[0]),h=1):h=0):h=0}else{if(10>S){se=7;break}z=Ee,h==null||10>S||!bd(h,g+3,S-3)?h=0:(ve=h[g+0]|h[g+1]<<8|h[g+2]<<16,be=16383&(h[g+7]<<8|h[g+6]),h=16383&(h[g+9]<<8|h[g+8]),1&ve||3<(ve>>1&7)||!(ve>>4&1)||ve>>5>=ue.Ja||!be||!h?h=0:(U&&(U[0]=be),z&&(z[0]=h),h=1))}if(!h||(U=U[0],Ee=Ee[0],ye&&(V[0]!=U||re[0]!=Ee)))return 3;W!=null&&(W[0]=ue,W.offset=g-W.w,e(4294967286>g-W.w),e(W.offset==W.ha-S));break}return se==0||se==7&&ye&&W==null?(B!=null&&(B[0]|=ue.na!=null&&0<ue.na.length),k!=null&&(k[0]=U),R!=null&&(R[0]=Ee),0):se}function Wc(h,g,S){var k=g.width,R=g.height,B=0,U=0,z=k,W=R;if(g.Da=h!=null&&0<h.Da,g.Da&&(z=h.cd,W=h.bd,B=h.v,U=h.j,11>S||(B&=-2,U&=-2),0>B||0>U||0>=z||0>=W||B+z>k||U+W>R))return 0;if(g.v=B,g.j=U,g.va=B+z,g.o=U+W,g.U=z,g.T=W,g.da=h!=null&&0<h.da,g.da){if(!st(z,W,S=[h.ib],B=[h.hb]))return 0;g.ib=S[0],g.hb=B[0]}return g.ob=h!=null&&h.ob,g.Kb=h==null||!h.Sd,g.da&&(g.ob=g.ib<3*k/4&&g.hb<3*R/4,g.Kb=0),1}function Hc(h){if(h==null)return 2;if(11>h.S){var g=h.f.RGBA;g.fb+=(h.height-1)*g.A,g.A=-g.A}else g=h.f.kb,h=h.height,g.O+=(h-1)*g.fa,g.fa=-g.fa,g.N+=(h-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(h-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(h-1)*g.lb,g.lb=-g.lb);return 0}function rl(h,g,S,k){if(k==null||0>=h||0>=g)return 2;if(S!=null){if(S.Da){var R=S.cd,B=S.bd,U=-2&S.v,z=-2&S.j;if(0>U||0>z||0>=R||0>=B||U+R>h||z+B>g)return 2;h=R,g=B}if(S.da){if(!st(h,g,R=[S.ib],B=[S.hb]))return 2;h=R[0],g=B[0]}}k.width=h,k.height=g;e:{var W=k.width,V=k.height;if(h=k.S,0>=W||0>=V||!(h>=Hd&&13>h))h=2;else{if(0>=k.Rd&&k.sd==null){U=B=R=g=0;var re=(z=W*ky[h])*V;if(11>h||(B=(V+1)/2*(g=(W+1)/2),h==12&&(U=(R=W)*V)),(V=s(re+2*B+U))==null){h=1;break e}k.sd=V,11>h?((W=k.f.RGBA).eb=V,W.fb=0,W.A=z,W.size=re):((W=k.f.kb).y=V,W.O=0,W.fa=z,W.Fd=re,W.f=V,W.N=0+re,W.Ab=g,W.Cd=B,W.ea=V,W.W=0+re+B,W.Db=g,W.Ed=B,h==12&&(W.F=V,W.J=0+re+2*B),W.Tc=U,W.lb=R)}if(g=1,R=k.S,B=k.width,U=k.height,R>=Hd&&13>R)if(11>R)h=k.f.RGBA,g&=(z=Math.abs(h.A))*(U-1)+B<=h.size,g&=z>=B*ky[R],g&=h.eb!=null;else{h=k.f.kb,z=(B+1)/2,re=(U+1)/2,W=Math.abs(h.fa),V=Math.abs(h.Ab);var ye=Math.abs(h.Db),ve=Math.abs(h.lb),ue=ve*(U-1)+B;g&=W*(U-1)+B<=h.Fd,g&=V*(re-1)+z<=h.Cd,g=(g&=ye*(re-1)+z<=h.Ed)&W>=B&V>=z&ye>=z,g&=h.y!=null,g&=h.f!=null,g&=h.ea!=null,R==12&&(g&=ve>=B,g&=ue<=h.Tc,g&=h.F!=null)}else g=0;h=g?0:2}}return h!=0||S!=null&&S.fd&&(h=Hc(k)),h}var Kn=64,il=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],sl=24,al=32,qc=8,Dr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Me("Predictor0","PredictorAdd0"),j.Predictor0=function(){return 4278190080},j.Predictor1=function(h){return h},j.Predictor2=function(h,g,S){return g[S+0]},j.Predictor3=function(h,g,S){return g[S+1]},j.Predictor4=function(h,g,S){return g[S-1]},j.Predictor5=function(h,g,S){return he(he(h,g[S+1]),g[S+0])},j.Predictor6=function(h,g,S){return he(h,g[S-1])},j.Predictor7=function(h,g,S){return he(h,g[S+0])},j.Predictor8=function(h,g,S){return he(g[S-1],g[S+0])},j.Predictor9=function(h,g,S){return he(g[S+0],g[S+1])},j.Predictor10=function(h,g,S){return he(he(h,g[S-1]),he(g[S+0],g[S+1]))},j.Predictor11=function(h,g,S){var k=g[S+0];return 0>=Ae(k>>24&255,h>>24&255,(g=g[S-1])>>24&255)+Ae(k>>16&255,h>>16&255,g>>16&255)+Ae(k>>8&255,h>>8&255,g>>8&255)+Ae(255&k,255&h,255&g)?k:h},j.Predictor12=function(h,g,S){var k=g[S+0];return(xe((h>>24&255)+(k>>24&255)-((g=g[S-1])>>24&255))<<24|xe((h>>16&255)+(k>>16&255)-(g>>16&255))<<16|xe((h>>8&255)+(k>>8&255)-(g>>8&255))<<8|xe((255&h)+(255&k)-(255&g)))>>>0},j.Predictor13=function(h,g,S){var k=g[S-1];return(ke((h=he(h,g[S+0]))>>24&255,k>>24&255)<<24|ke(h>>16&255,k>>16&255)<<16|ke(h>>8&255,k>>8&255)<<8|ke(h>>0&255,k>>0&255))>>>0};var Up=j.PredictorAdd0;j.PredictorAdd1=Ze,Me("Predictor2","PredictorAdd2"),Me("Predictor3","PredictorAdd3"),Me("Predictor4","PredictorAdd4"),Me("Predictor5","PredictorAdd5"),Me("Predictor6","PredictorAdd6"),Me("Predictor7","PredictorAdd7"),Me("Predictor8","PredictorAdd8"),Me("Predictor9","PredictorAdd9"),Me("Predictor10","PredictorAdd10"),Me("Predictor11","PredictorAdd11"),Me("Predictor12","PredictorAdd12"),Me("Predictor13","PredictorAdd13");var Yc=j.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Od,xi=j.ColorIndexInverseTransform,ol=j.MapARGB,$d=j.VP8LColorIndexInverseTransformAlpha,Bd=j.MapAlpha,na=j.VP8LPredictorsAdd=[];na.length=16,(j.VP8LPredictors=[]).length=16,(j.VP8LPredictorsAdd_C=[]).length=16,(j.VP8LPredictors_C=[]).length=16;var eo,Mr,wr,ra,ks,js,ll,As,Sn,Vc,br,wi,cl,Ud,Gc,to,no,ia,ro,ul,io,sa,Jc,bi,Si,Xt,Qt,_n,Rn=s(511),Cs=s(2041),Kc=s(225),dl=s(767),zd=0,zp=Cs,Wd=Kc,Zr=dl,_i=Rn,Hd=0,qd=1,py=2,Yd=3,Vd=4,Wp=5,my=6,Hp=7,qp=8,Gd=9,Yp=10,i_=[2,3,7],s_=[3,3,11],gy=[280,256,256,256,40],a_=[0,1,1,1,0],o_=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],l_=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],c_=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],u_=8,Vp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Gp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xc=null,d_=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],h_=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],yy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],f_=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],p_=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],m_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],g_=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],aa=[],Ui=[],Es=[],y_=1,vy=2,oa=[],Ni=[];Se("UpsampleRgbLinePair",Dt,3),Se("UpsampleBgrLinePair",on,3),Se("UpsampleRgbaLinePair",Bi,4),Se("UpsampleBgraLinePair",zn,4),Se("UpsampleArgbLinePair",ir,4),Se("UpsampleRgba4444LinePair",En,2),Se("UpsampleRgb565LinePair",pn,2);var v_=j.UpsampleRgbLinePair,x_=j.UpsampleBgrLinePair,xy=j.UpsampleRgbaLinePair,wy=j.UpsampleBgraLinePair,by=j.UpsampleArgbLinePair,Sy=j.UpsampleRgba4444LinePair,w_=j.UpsampleRgb565LinePair,Jd=16,Kd=1<<Jd-1,Qc=-227,Jp=482,b_=6,_y=0,S_=s(256),__=s(256),N_=s(256),k_=s(256),j_=s(Jp-Qc),A_=s(Jp-Qc);as("YuvToRgbRow",Dt,3),as("YuvToBgrRow",on,3),as("YuvToRgbaRow",Bi,4),as("YuvToBgraRow",zn,4),as("YuvToArgbRow",ir,4),as("YuvToRgba4444Row",En,2),as("YuvToRgb565Row",pn,2);var Ny=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xd=[0,2,8],C_=[8,7,6,4,4,2,2,2,1,1,1,1],E_=1;this.WebPDecodeRGBA=function(h,g,S,k,R){var B=qd,U=new el,z=new me;U.ba=z,z.S=B,z.width=[z.width],z.height=[z.height];var W=z.width,V=z.height,re=new Fe;if(re==null||h==null)var ye=2;else e(re!=null),ye=nl(h,g,S,re.width,re.height,re.Pd,re.Qd,re.format,null);if(ye!=0?W=0:(W!=null&&(W[0]=re.width[0]),V!=null&&(V[0]=re.height[0]),W=1),W){z.width=z.width[0],z.height=z.height[0],k!=null&&(k[0]=z.width),R!=null&&(R[0]=z.height);e:{if(k=new Vo,(R=new Fc).data=h,R.w=g,R.ha=S,R.kd=1,g=[0],e(R!=null),((h=nl(R.data,R.w,R.ha,null,null,null,g,null,R))==0||h==7)&&g[0]&&(h=4),(g=h)==0){if(e(U!=null),k.data=R.data,k.w=R.w+R.offset,k.ha=R.ha-R.offset,k.put=gi,k.ac=St,k.bc=Fi,k.ma=U,R.xa){if((h=Tr())==null){U=1;break e}if(function(ve,ue){var Ee=[0],be=[0],se=[0];t:for(;;){if(ve==null)return 0;if(ue==null)return ve.a=2,0;if(ve.l=ue,ve.a=0,J(ve.m,ue.data,ue.w,ue.ha),!lt(ve.m,Ee,be,se)){ve.a=3;break t}if(ve.xb=vy,ue.width=Ee[0],ue.height=be[0],!yi(Ee[0],be[0],1,ve,null))break t;return 1}return e(ve.a!=0),0}(h,k)){if(k=(g=rl(k.width,k.height,U.Oa,U.ba))==0){t:{k=h;n:for(;;){if(k==null){k=0;break t}if(e(k.s.yc!=null),e(k.s.Ya!=null),e(0<k.s.Wb),e((S=k.l)!=null),e((R=S.ma)!=null),k.xb!=0){if(k.ca=R.ba,k.tb=R.tb,e(k.ca!=null),!Wc(R.Oa,S,Yd)){k.a=2;break n}if(!vi(k,S.width)||S.da)break n;if((S.da||Oe(k.ca.S))&&pe(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&pe()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!nt(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!Un(k,k.V,k.Ba,k.c,k.i,S.o,jt))break n;R.Dc=k.Ma,k=1;break t}e(k.a!=0),k=0}k=!k}k&&(g=h.a)}else g=h.a}else{if((h=new Sp)==null){U=1;break e}if(h.Fa=R.na,h.P=R.P,h.qc=R.Sa,Sd(h,k)){if((g=rl(k.width,k.height,U.Oa,U.ba))==0){if(h.Aa=0,S=U.Oa,e((R=h)!=null),S!=null){if(0<(W=0>(W=S.Md)?0:100<W?255:255*W/100)){for(V=re=0;4>V;++V)12>(ye=R.pb[V]).lc&&(ye.ia=W*C_[0>ye.lc?0:ye.lc]>>3),re|=ye.ia;re&&(alert("todo:VP8InitRandom"),R.ia=1)}R.Ga=S.Id,100<R.Ga?R.Ga=100:0>R.Ga&&(R.Ga=0)}_p(h,k)||(g=h.a)}}else g=h.a}g==0&&U.Oa!=null&&U.Oa.fd&&(g=Hc(U.ba))}U=g}B=U!=0?null:11>B?z.f.RGBA.eb:z.f.kb.y}else B=null;return B};var ky=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(j,I){for(var $="",L=0;L<4;L++)$+=String.fromCharCode(j[I++]);return $}function d(j,I){return(j[I+0]<<0|j[I+1]<<8|j[I+2]<<16)>>>0}function p(j,I){return(j[I+0]<<0|j[I+1]<<8|j[I+2]<<16|j[I+3]<<24)>>>0}new l;var m=[0],f=[0],x=[],y=new l,N=n,w=function(j,I){var $={},L=0,M=!1,D=0,O=0;if($.frames=[],!function(q,Y,Z,te){for(var ce=0;ce<te;ce++)if(q[Y+ce]!=Z.charCodeAt(ce))return!0;return!1}(j,I,"RIFF",4)){for(p(j,I+=4),I+=8;I<j.length;){var G=u(j,I),X=p(j,I+=4);I+=4;var oe=X+(1&X);switch(G){case"VP8 ":case"VP8L":$.frames[L]===void 0&&($.frames[L]={}),(ae=$.frames[L]).src_off=M?O:I-8,ae.src_size=D+X+8,L++,M&&(M=!1,D=0,O=0);break;case"VP8X":(ae=$.header={}).feature_flags=j[I];var J=I+4;ae.canvas_width=1+d(j,J),J+=3,ae.canvas_height=1+d(j,J),J+=3;break;case"ALPH":M=!0,D=oe+8,O=I-8;break;case"ANIM":(ae=$.header).bgcolor=p(j,I),J=I+4,ae.loop_count=(Ne=j)[(E=J)+0]<<0|Ne[E+1]<<8,J+=2;break;case"ANMF":var ie,ae;(ae=$.frames[L]={}).offset_x=2*d(j,I),I+=3,ae.offset_y=2*d(j,I),I+=3,ae.width=1+d(j,I),I+=3,ae.height=1+d(j,I),I+=3,ae.duration=d(j,I),I+=3,ie=j[I++],ae.dispose=1&ie,ae.blend=ie>>1&1}G!="ANMF"&&(I+=oe)}var Ne,E;return $}}(N,0);w.response=N,w.rgbaoutput=!0,w.dataurl=!1;var b=w.header?w.header:null,_=w.frames?w.frames:null;if(b){b.loop_counter=b.loop_count,m=[b.canvas_height],f=[b.canvas_width];for(var C=0;C<_.length&&_[C].blend!=0;C++);}var T=_[0],P=y.WebPDecodeRGBA(N,T.src_off,T.src_size,f,m);T.rgba=P,T.imgwidth=f[0],T.imgheight=m[0];for(var A=0;A<f[0]*m[0]*4;A++)x[A]=P[A];return this.width=f,this.height=m,this.data=x,this}(function(n){var e=function(){return typeof Tg=="function"},t=function(m,f,x,y){var N=4,w=a;switch(y){case n.image_compression.FAST:N=1,w=s;break;case n.image_compression.MEDIUM:N=6,w=o;break;case n.image_compression.SLOW:N=9,w=l}m=r(m,f,x,w);var b=Tg(m,{level:N});return n.__addimage__.arrayBufferToBinaryString(b)},r=function(m,f,x,y){for(var N,w,b,_=m.length/f,C=new Uint8Array(m.length+_),T=d(),P=0;P<_;P+=1){if(b=P*f,N=m.subarray(b,b+f),y)C.set(y(N,x,w),b+P);else{for(var A,j=T.length,I=[];A<j;A+=1)I[A]=T[A](N,x,w);var $=p(I.concat());C.set(I[$],b+P)}w=N}return C},i=function(m){var f=Array.apply([],m);return f.unshift(0),f},s=function(m,f){var x,y=[],N=m.length;y[0]=1;for(var w=0;w<N;w+=1)x=m[w-f]||0,y[w+1]=m[w]-x+256&255;return y},a=function(m,f,x){var y,N=[],w=m.length;N[0]=2;for(var b=0;b<w;b+=1)y=x&&x[b]||0,N[b+1]=m[b]-y+256&255;return N},o=function(m,f,x){var y,N,w=[],b=m.length;w[0]=3;for(var _=0;_<b;_+=1)y=m[_-f]||0,N=x&&x[_]||0,w[_+1]=m[_]+256-(y+N>>>1)&255;return w},l=function(m,f,x){var y,N,w,b,_=[],C=m.length;_[0]=4;for(var T=0;T<C;T+=1)y=m[T-f]||0,N=x&&x[T]||0,w=x&&x[T-f]||0,b=u(y,N,w),_[T+1]=m[T]-b+256&255;return _},u=function(m,f,x){if(m===f&&f===x)return m;var y=Math.abs(f-x),N=Math.abs(m-x),w=Math.abs(m+f-x-x);return y<=N&&y<=w?m:N<=w?f:x},d=function(){return[i,s,a,o,l]},p=function(m){var f=m.map(function(x){return x.reduce(function(y,N){return y+Math.abs(N)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(m,f,x,y){var N,w,b,_,C,T,P,A,j,I,$,L,M,D,O,G=this.decode.FLATE_DECODE,X="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(b=new c8(m)).imgData,w=b.bits,N=b.colorSpace,C=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){j=(A=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,$=new Uint8Array(j*b.colors),I=new Uint8Array(j);var oe,J=b.pixelBitlength-b.bits;for(D=0,O=0;D<j;D++){for(M=A[D],oe=0;oe<J;)$[O++]=M>>>oe&255,oe+=b.bits;I[D]=M>>>oe&255}}if(b.bits===16){j=(A=new Uint32Array(b.decodePixels().buffer)).length,$=new Uint8Array(j*(32/b.pixelBitlength)*b.colors),I=new Uint8Array(j*(32/b.pixelBitlength)),L=b.colors>1,D=0,O=0;for(var ie=0;D<j;)M=A[D++],$[O++]=M>>>0&255,L&&($[O++]=M>>>16&255,M=A[D++],$[O++]=M>>>0&255),I[ie++]=M>>>16&255;w=8}y!==n.image_compression.NONE&&e()?(m=t($,b.width*b.colors,b.colors,y),P=t(I,b.width,1,y)):(m=$,P=I,G=void 0)}if(b.colorType===3&&(N=this.color_spaces.INDEXED,T=b.palette,b.transparency.indexed)){var ae=b.transparency.indexed,Ne=0;for(D=0,j=ae.length;D<j;++D)Ne+=ae[D];if((Ne/=255)===j-1&&ae.indexOf(0)!==-1)_=[ae.indexOf(0)];else if(Ne!==j){for(A=b.decodePixels(),I=new Uint8Array(A.length),D=0,j=A.length;D<j;D++)I[D]=ae[A[D]];P=t(I,b.width,1)}}var E=function(q){var Y;switch(q){case n.image_compression.FAST:Y=11;break;case n.image_compression.MEDIUM:Y=13;break;case n.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(y);return G===this.decode.FLATE_DECODE&&(X="/Predictor "+E+" "),X+="/Colors "+C+" /BitsPerComponent "+w+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:x,data:m,index:f,filter:G,decodeParameters:X,transparency:_,palette:T,sMask:P,predictor:E,width:b.width,height:b.height,bitsPerComponent:w,colorSpace:N}}}})(it.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new u8(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:a,height:o},d=new em(100).encode(u,100);return n.processJPEG.call(this,d,t,r,i)},n.processGIF87A=n.processGIF89A}(it.API),qi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},qi.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Jt.log("bit decode error:"+t)}},qi.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},qi.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},qi.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},qi.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=u}this.pos+=n}},qi.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&t)/t*255|0,u=(a>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=n}},qi.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},qi.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},qi.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new qi(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},u=new em(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(it.API),ix.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new ix(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},u=new em(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(it.API),it.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,u=0;u<i;u+=4){var d=r[u],p=r[u+1],m=r[u+2],f=r[u+3];s[o++]=d,s[o++]=p,s[o++]=m,a[l++]=f}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},it.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Nl=it.API,Lh=Nl.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,p=e.doKerning!==!1,m=0,f=n.length,x=0,y=o[0]||l,N=[];for(t=0;t<f;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?N.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(m=p&&Wt(u[r])==="object"&&!isNaN(parseInt(u[r][x],10))?u[r][x]/d:0,N.push((o[r]||y)/l+m)),x=r;return N},ex=Nl.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Nl.processArabic&&(n=Nl.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Lh.apply(this,arguments).reduce(function(s,a){return s+a},0)},tx=function(n,e,t,r){for(var i=[],s=0,a=n.length,o=0;s!==a&&o+e[s]<t;)o+=e[s],s++;i.push(n.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>r&&(i.push(n.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},nx=function(n,e,t){t||(t={});var r,i,s,a,o,l,u,d=[],p=[d],m=t.textIndent||0,f=0,x=0,y=n.split(" "),N=Lh.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?y[0].length+2:t.lineIndent||0){var w=Array(l).join(" "),b=[];y.map(function(C){(C=C.split(/\s*\n/)).length>1?b=b.concat(C.map(function(T,P){return(P&&T.length?`
`:"")+T})):b.push(C[0])}),y=b,l=ex.apply(this,[w,t])}for(s=0,a=y.length;s<a;s++){var _=0;if(r=y[s],l&&r[0]==`
`&&(r=r.substr(1),_=1),m+f+(x=(i=Lh.apply(this,[r,t])).reduce(function(C,T){return C+T},0))>e||_){if(x>e){for(o=tx.apply(this,[r,i,e-(m+f),e]),d.push(o.shift()),d=[o.pop()];o.length;)p.push([o.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(C,T){return C+T},0)}else d=[r];p.push(d),m=x+l,f=N}else d.push(r),m+=f+x,f=N}return u=l?function(C,T){return(T?w:"")+C.join(" ")}:function(C){return C.join(" ")},p.map(u)},Nl.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(nx.apply(this,[r[o],a,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},a=n.__fontmetrics__.compress=function(p){var m,f,x,y,N=["{"];for(var w in p){if(m=p[w],isNaN(parseInt(w,10))?f="'"+w+"'":(w=parseInt(w,10),f=(f=s(w).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof m=="number")m<0?(x=s(m).slice(3),y="-"):(x=s(m).slice(2),y=""),x=y+x.slice(0,-1)+r[x.slice(-1)];else{if(Wt(m)!=="object")throw new Error("Don't know what to do with value type "+Wt(m)+".");x=a(m)}N.push(f+x)}return N.push("}"),N.join("")},o=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,f,x,y,N={},w=1,b=N,_=[],C="",T="",P=p.length-1,A=1;A<P;A+=1)(y=p[A])=="'"?m?(x=m.join(""),m=void 0):m=[]:m?m.push(y):y=="{"?(_.push([b,x]),b={},x=void 0):y=="}"?((f=_.pop())[0][f[1]]=b,x=void 0,b=f[0]):y=="-"?w=-1:x===void 0?t.hasOwnProperty(y)?(C+=t[y],x=parseInt(C,16)*w,w=1,C=""):C+=y:t.hasOwnProperty(y)?(T+=t[y],b[x]=parseInt(T,16)*w,w=1,x=void 0,T=""):T+=y;return N},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var m=p.font,f=d.Unicode[m.postScriptName];f&&(m.metadata.Unicode={},m.metadata.Unicode.widths=f.widths,m.metadata.Unicode.kerning=f.kerning);var x=u.Unicode[m.postScriptName];x&&(m.metadata.Unicode.encoding=x,m.encoding=x.codePages[0])}])}(it.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Ru(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(it),function(n){function e(){return(dt.canvg?Promise.resolve(dt.canvg):Jr(()=>import("./index.es-DwpVskRR.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}it.API.addSvgAsImage=function(t,r,i,s,a,o,l,u){if(isNaN(r)||isNaN(i))throw Jt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Jt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=a;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(x){return x.fromString(p,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(m)}).then(function(){f.addImage(d.toDataURL("image/jpeg",1),r,i,s,a,l,u)})}}(),it.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},it.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],u=0,d=0,p=0;function m(x,y){var N,w=!1;for(N=0;N<x.length;N+=1)x[N]===y&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=o.length;for(p=0;p<f;p+=1)t[o[p]].value=t[o[p]].defaultValue,t[o[p]].explicitSet=!1}if(Wt(n)==="object"){for(i in n)if(s=n[i],m(o,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&m(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,y=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?y.push("/"+x+" /"+t[x].value):y.push("/"+x+" "+t[x].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(it.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],p=0,m=s.length;p<m;++p){if(o=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(s){var a,o,l,u,d,p,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,m=(o=Object.keys(s).sort(function(f,x){return f-x})).length;p<m;p++)a=o[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,u=a.newObject,d=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",x=0;x<m.length;x++)f+=String.fromCharCode(m[x]);var y=u();d({data:f,addLength1:!0,objectId:y}),l("endobj");var N=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:N}),l("endobj");var w=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Cl(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var b=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Cl(o.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+n.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+N+" 0 R"),l("/BaseFont /"+Cl(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,u=a.newObject,d=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,m="",f=0;f<p.length;f++)m+=String.fromCharCode(p[f]);var x=u();d({data:m,addLength1:!0,objectId:x}),l("endobj");var y=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var N=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Cl(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Cl(o.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,u=s.y,d=s.options||{},p=s.mutex||{},m=p.pdfEscape,f=p.activeFontKey,x=p.fonts,y=f,N="",w=0,b="",_=x[y].encoding;if(x[y].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:p};for(b=o,y=f,Array.isArray(o)&&(b=o[0]),w=0;w<b.length;w+=1)x[y].metadata.hasOwnProperty("cmap")&&(a=x[y].metadata.cmap.unicode.codeMap[b[w].charCodeAt(0)]),a||b[w].charCodeAt(0)<256&&x[y].metadata.hasOwnProperty("Unicode")?N+=b[w]:N+="";var C="";return parseInt(y.slice(1))<14||_==="WinAnsiEncoding"?C=m(N,y).split("").map(function(T){return T.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(C=t(N,x[y])),p.isHex=!0,{text:C,x:l,y:u,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},l,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},l,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(it),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(it.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,a,o,l,u,d,p=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,_=0;this.__bidiEngine__={};var C=function(L){var M=L.charCodeAt(),D=M>>8,O=y[D];return O!==void 0?p[256*O+(255&M)]:D===252||D===253?"AL":w.test(D)?"L":D===8?"R":"N"},T=function(L){for(var M,D=0;D<L.length;D++){if((M=C(L.charAt(D)))==="L")return!1;if(M==="R")return!0}return!1},P=function(L,M,D,O){var G,X,oe,J,ie=M[O];switch(ie){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(ie="AN");break;case"AL":b=!0,ie="R";break;case"WS":ie="N";break;case"CS":O<1||O+1>=M.length||(G=D[O-1])!=="EN"&&G!=="AN"||(X=M[O+1])!=="EN"&&X!=="AN"?ie="N":b&&(X="AN"),ie=X===G?X:"N";break;case"ES":ie=(G=O>0?D[O-1]:"B")==="EN"&&O+1<M.length&&M[O+1]==="EN"?"EN":"N";break;case"ET":if(O>0&&D[O-1]==="EN"){ie="EN";break}if(b){ie="N";break}for(oe=O+1,J=M.length;oe<J&&M[oe]==="ET";)oe++;ie=oe<J&&M[oe]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(J=M.length,oe=O+1;oe<J&&M[oe]==="NSM";)oe++;if(oe<J){var ae=L[O],Ne=ae>=1425&&ae<=2303||ae===64286;if(G=M[oe],Ne&&(G==="R"||G==="AL")){ie="R";break}}}ie=O<1||(G=M[O-1])==="B"?"N":D[O-1];break;case"B":b=!1,i=!0,ie=_;break;case"S":s=!0,ie="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":ie="N"}return ie},A=function(L,M,D){var O=L.split("");return D&&j(O,D,{hiLevel:_}),O.reverse(),M&&M.reverse(),O.join("")},j=function(L,M,D){var O,G,X,oe,J,ie=-1,ae=L.length,Ne=0,E=[],q=_?f:m,Y=[];for(b=!1,i=!1,s=!1,G=0;G<ae;G++)Y[G]=C(L[G]);for(X=0;X<ae;X++){if(J=Ne,E[X]=P(L,Y,E,X),O=240&(Ne=q[J][x[E[X]]]),Ne&=15,M[X]=oe=q[Ne][5],O>0)if(O===16){for(G=ie;G<X;G++)M[G]=1;ie=-1}else ie=-1;if(q[Ne][6])ie===-1&&(ie=X);else if(ie>-1){for(G=ie;G<X;G++)M[G]=oe;ie=-1}Y[X]==="B"&&(M[X]=0),D.hiLevel|=oe}s&&function(Z,te,ce){for(var ge=0;ge<ce;ge++)if(Z[ge]==="S"){te[ge]=_;for(var de=ge-1;de>=0&&Z[de]==="WS";de--)te[de]=_}}(Y,M,ae)},I=function(L,M,D,O,G){if(!(G.hiLevel<L)){if(L===1&&_===1&&!i)return M.reverse(),void(D&&D.reverse());for(var X,oe,J,ie,ae=M.length,Ne=0;Ne<ae;){if(O[Ne]>=L){for(J=Ne+1;J<ae&&O[J]>=L;)J++;for(ie=Ne,oe=J-1;ie<oe;ie++,oe--)X=M[ie],M[ie]=M[oe],M[oe]=X,D&&(X=D[ie],D[ie]=D[oe],D[oe]=X);Ne=J}Ne++}}},$=function(L,M,D){var O=L.split(""),G={hiLevel:_};return D||(D=[]),j(O,D,G),function(X,oe,J){if(J.hiLevel!==0&&d)for(var ie,ae=0;ae<X.length;ae++)oe[ae]===1&&(ie=N.indexOf(X[ae]))>=0&&(X[ae]=N[ie+1])}(O,D,G),I(2,O,M,D,G),I(1,O,M,D,G),O.join("")};return this.__bidiEngine__.doBidiReorder=function(L,M,D){if(function(G,X){if(X)for(var oe=0;oe<G.length;oe++)X[oe]=oe;o===void 0&&(o=T(G)),u===void 0&&(u=T(G))}(L,M),a||!l||u)if(a&&l&&o^u)_=o?1:0,L=A(L,M,D);else if(!a&&l&&u)_=o?1:0,L=$(L,M,D),L=A(L,M);else if(!a||o||l||u){if(a&&!l&&o^u)L=A(L,M),o?(_=0,L=$(L,M,D)):(_=1,L=$(L,M,D),L=A(L,M));else if(a&&o&&!l&&u)_=1,L=$(L,M,D),L=A(L,M);else if(!a&&!l&&o^u){var O=d;o?(_=1,L=$(L,M,D),_=0,d=!1,L=$(L,M,D),d=O):(_=0,L=$(L,M,D),L=A(L,M),_=1,d=!1,L=$(L,M,D),d=O,L=A(L,M))}}else _=0,L=$(L,M,D);else _=o?1:0,L=$(L,M,D);return L},this.__bidiEngine__.setOptions=function(L){L&&(a=L.isInputVisual,l=L.isOutputVisual,o=L.isInputRtl,u=L.isOutputRtl,d=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([t.doBidiReorder(i[o])]);r.text=a}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(it),it.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Ha(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new k8(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new d8(this.contents),this.head=new f8(this),this.name=new v8(this),this.cmap=new RS(this),this.toUnicode={},this.hhea=new p8(this),this.maxp=new x8(this),this.hmtx=new w8(this),this.post=new g8(this),this.os2=new m8(this),this.loca=new N8(this),this.glyf=new b8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,u;for(u=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var rs,Ha=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,a,o,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),d8=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,a,o,l,u,d,p,m,f,x,y;for(y in f=Object.keys(t).length,l=Math.log(2),p=16*Math.floor(Math.log(f)/l),a=Math.floor(p/l),d=16*f-p,(i=new Ha).writeInt(this.scalarType),i.writeShort(f),i.writeShort(p),i.writeShort(a),i.writeShort(d),s=16*f,u=i.pos+s,o=null,x=[],t)for(m=t[y],i.writeString(y),i.writeInt(n(m)),i.writeInt(u),i.writeInt(m.length),x=x.concat(m),y==="head"&&(o=u),u+=m.length;u%4;)x.push(0),u++;return i.write(x),r=2981146554-n(i.data),i.pos=o+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,a;for(t=FS.call(t);t.length%4;)t.push(0);for(s=new Ha(t),i=0,r=0,a=t.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),h8={}.hasOwnProperty,Ss=function(n,e){for(var t in e)h8.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};rs=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var f8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ss(e,rs),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Ha).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),sx=function(){function n(e,t){var r,i,s,a,o,l,u,d,p,m,f,x,y,N,w,b,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),m=f/2,e.pos+=6,s=function(){var C,T;for(T=[],l=C=0;0<=m?C<m:C>m;l=0<=m?++C:--C)T.push(e.readUInt16());return T}(),e.pos+=2,y=function(){var C,T;for(T=[],l=C=0;0<=m?C<m:C>m;l=0<=m?++C:--C)T.push(e.readUInt16());return T}(),u=function(){var C,T;for(T=[],l=C=0;0<=m?C<m:C>m;l=0<=m?++C:--C)T.push(e.readUInt16());return T}(),d=function(){var C,T;for(T=[],l=C=0;0<=m?C<m:C>m;l=0<=m?++C:--C)T.push(e.readUInt16());return T}(),i=(this.length-e.pos+this.offset)/2,o=function(){var C,T;for(T=[],l=C=0;0<=i?C<i:C>i;l=0<=i?++C:--C)T.push(e.readUInt16());return T}(),l=w=0,_=s.length;w<_;l=++w)for(N=s[l],r=b=x=y[l];x<=N?b<=N:b>=N;r=x<=N?++b:--b)d[l]===0?a=r+u[l]:(a=o[d[l]/2+(r-x)-(m-l)]||0)!==0&&(a+=u[l]),this.codeMap[r]=65535&a}e.pos=p}return n.encode=function(e,t){var r,i,s,a,o,l,u,d,p,m,f,x,y,N,w,b,_,C,T,P,A,j,I,$,L,M,D,O,G,X,oe,J,ie,ae,Ne,E,q,Y,Z,te,ce,ge,de,_e,Te,ze;switch(O=new Ha,a=Object.keys(e).sort(function(Ie,nt){return Ie-nt}),t){case"macroman":for(y=0,N=function(){var Ie=[];for(x=0;x<256;++x)Ie.push(0);return Ie}(),b={0:0},s={},G=0,ie=a.length;G<ie;G++)b[de=e[i=a[G]]]==null&&(b[de]=++y),s[i]={old:e[i],new:b[e[i]]},N[i]=b[e[i]];return O.writeUInt16(1),O.writeUInt16(0),O.writeUInt32(12),O.writeUInt16(0),O.writeUInt16(262),O.writeUInt16(0),O.write(N),{charMap:s,subtable:O.data,maxGlyphID:y+1};case"unicode":for(M=[],p=[],_=0,b={},r={},w=u=null,X=0,ae=a.length;X<ae;X++)b[T=e[i=a[X]]]==null&&(b[T]=++_),r[i]={old:T,new:b[T]},o=b[T]-i,w!=null&&o===u||(w&&p.push(w),M.push(i),u=o),w=i;for(w&&p.push(w),p.push(65535),M.push(65535),$=2*(I=M.length),j=2*Math.pow(Math.log(I)/Math.LN2,2),m=Math.log(j/2)/Math.LN2,A=2*I-j,l=[],P=[],f=[],x=oe=0,Ne=M.length;oe<Ne;x=++oe){if(L=M[x],d=p[x],L===65535){l.push(0),P.push(0);break}if(L-(D=r[L].new)>=32768)for(l.push(0),P.push(2*(f.length+I-x)),i=J=L;L<=d?J<=d:J>=d;i=L<=d?++J:--J)f.push(r[i].new);else l.push(D-L),P.push(0)}for(O.writeUInt16(3),O.writeUInt16(1),O.writeUInt32(12),O.writeUInt16(4),O.writeUInt16(16+8*I+2*f.length),O.writeUInt16(0),O.writeUInt16($),O.writeUInt16(j),O.writeUInt16(m),O.writeUInt16(A),ce=0,E=p.length;ce<E;ce++)i=p[ce],O.writeUInt16(i);for(O.writeUInt16(0),ge=0,q=M.length;ge<q;ge++)i=M[ge],O.writeUInt16(i);for(_e=0,Y=l.length;_e<Y;_e++)o=l[_e],O.writeUInt16(o);for(Te=0,Z=P.length;Te<Z;Te++)C=P[Te],O.writeUInt16(C);for(ze=0,te=f.length;ze<te;ze++)y=f[ze],O.writeUInt16(y);return{charMap:r,subtable:O.data,maxGlyphID:_+1}}},n}(),RS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ss(e,rs),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new sx(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=sx.encode(t,r),(s=new Ha).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),p8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ss(e,rs),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),m8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ss(e,rs),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),g8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ss(e,rs),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),y8=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},v8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ss(e,rs),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,a,o,l,u,d,p,m,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},a=p=0,m=i.length;p<m;a=++p)s=i[a],t.pos=s.offset,d=t.readString(s.length),o=new y8(d,s),u[f=s.nameID]==null&&(u[f]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),x8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ss(e,rs),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),w8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ss(e,rs),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,a,o,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(t.readInt16());return p}(),this.widths=(function(){var d,p,m,f;for(f=[],d=0,p=(m=this.metrics).length;d<p;d++)a=m[d],f.push(a.advance);return f}).call(this),i=this.widths[this.widths.length-1],u=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),FS=[].slice,b8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ss(e,rs),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,a,o,l,u,d,p,m;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,o=(l=new Ha(r.read(s))).readShort(),d=l.readShort(),m=l.readShort(),u=l.readShort(),p=l.readShort(),this.cache[t]=o===-1?new _8(l,d,m,u,p):new S8(l,o,d,m,u,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,a,o,l,u;for(o=[],a=[],l=0,u=r.length;l<u;l++)s=t[r[l]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),S8=function(){function n(e,t,r,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),_8=function(){function n(e,t,r,i,s){var a,o;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Ha(FS.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),N8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ss(e,rs),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<r.length&&r[a]==o){++a,i[o]=s;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(s+=u)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),k8=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,a,o,l,u,d,p,m,f,x,y,N,w;for(i in r=RS.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),f={0:0},w=r.charMap)f[(l=w[i]).old]=l.new;for(x in m=r.maxGlyphID,a)x in f||(f[x]=m++);return d=function(b){var _,C;for(_ in C={},b)C[b[_]]=_;return C}(f),p=Object.keys(d).sort(function(b,_){return b-_}),y=function(){var b,_,C;for(C=[],b=0,_=p.length;b<_;b++)o=p[b],C.push(d[o]);return C}(),s=this.font.glyf.encode(a,y,f),u=this.font.loca.encode(s.offsets,y),N={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},n}();it.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,a;if(Array.isArray(t))return"["+function(){var o,l,u;for(u=[],o=0,l=t.length;o<l;o++)r=t[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();function OS(n,e,t,r,i){r=r||{};var s=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,l=i.getLineHeightFactor?i.getLineHeightFactor():s,u=o*l,d=/\r\n|\r|\n/g,p="",m=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(p=typeof n=="string"?n.split(d):n,m=p.length||1),t+=o*(2-s),r.valign==="middle"?t-=m/2*u:r.valign==="bottom"&&(t-=m*u),r.halign==="center"||r.halign==="right"){var f=o;if(r.halign==="center"&&(f*=.5),p&&m>=1){for(var x=0;x<p.length;x++)i.text(p[x],e-i.getStringUnitWidth(p[x])*f,t),t+=u;return i}e-=i.getStringUnitWidth(n)*f}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var ax={},ic=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:ax=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,s;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var d=n.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=n.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=n.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,s){return this.jsPDFDocument.rect(e,t,r,i,s)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return ax||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),Og=function(n,e){return Og=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Og(n,e)};function $S(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Og(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var BS=function(n){$S(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function j8(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function A8(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function If(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(s){return t.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function US(n,e,t,r){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:s});var a=zS(i,!1);a&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,a)}function zS(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function hp(n,e){var t,r,i,s;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(s=n.bottom)!==null&&s!==void 0?s:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function WS(n,e){var t=hp(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function C8(n,e,t,r,i){var s={},a=1.3333333333333333,o=tm(e,function(_){return i.getComputedStyle(_).backgroundColor});o!=null&&(s.fillColor=o);var l=tm(e,function(_){return i.getComputedStyle(_).color});l!=null&&(s.textColor=l);var u=P8(r,t);u&&(s.cellPadding=u);var d="borderTopColor",p=a*t,m=r.borderTopWidth;if(r.borderBottomWidth===m&&r.borderRightWidth===m&&r.borderLeftWidth===m){var f=(parseFloat(m)||0)/p;f&&(s.lineWidth=f)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/p,right:(parseFloat(r.borderRightWidth)||0)/p,bottom:(parseFloat(r.borderBottomWidth)||0)/p,left:(parseFloat(r.borderLeftWidth)||0)/p},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var x=tm(e,function(_){return i.getComputedStyle(_)[d]});x!=null&&(s.lineColor=x);var y=["left","right","center","justify"];y.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),y=["middle","bottom","top"],y.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var N=parseInt(r.fontSize||"");isNaN(N)||(s.fontSize=N/a);var w=E8(r);w&&(s.fontStyle=w);var b=(r.fontFamily||"").toLowerCase();return n.indexOf(b)!==-1&&(s.font=b),s}function E8(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function tm(n,e){var t=HS(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function HS(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:HS(n.parentElement,e):t}function P8(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,s=t.map(function(o){return parseInt(o||"0")/r}),a=hp(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function qS(n,e,t,r,i){var s,a;r===void 0&&(r=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=t.document.querySelector(e):o=e;var l=Object.keys(n.getFontList()),u=n.scaleFactor(),d=[],p=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:p,foot:m};for(var f=0;f<o.rows.length;f++){var x=o.rows[f],y=(a=(s=x==null?void 0:x.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),N=T8(l,u,t,x,r,i);N&&(y==="thead"?d.push(N):y==="tfoot"?m.push(N):p.push(N))}return{head:d,body:p,foot:m}}function T8(n,e,t,r,i,s){for(var a=new BS(r),o=0;o<r.cells.length;o++){var l=r.cells[o],u=t.getComputedStyle(l);if(i||u.display!=="none"){var d=void 0;s&&(d=C8(n,l,e,u,t)),a.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:L8(l)})}}var p=t.getComputedStyle(r);if(a.length>0&&(i||p.display!=="none"))return a}function L8(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function D8(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var s=i[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function zs(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(n),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function YS(n,e){var t=new ic(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();D8(i,r,e);var s=zs({},i,r,e),a;typeof window<"u"&&(a=window);var o=M8(i,r,e),l=I8(i,r,e),u=R8(t,s),d=O8(t,s,a);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function M8(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=n[l],d=e[l],p=t[l];r.columnStyles=zs({},u,d,p)}else{var m=[n,e,t],f=m.map(function(x){return x[l]||{}});r[l]=zs({},f[0],f[1],f[2])}},s=0,a=Object.keys(r);s<a.length;s++){var o=a[s];i(o)}return r}function I8(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=r;s<a.length;s++){var o=a[s];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function R8(n,e){var t,r,i,s,a,o,l,u,d,p,m,f,x=hp(e.margin,40/n.scaleFactor()),y=(t=F8(n,e.startY))!==null&&t!==void 0?t:x.top,N;e.showFoot===!0?N="everyPage":e.showFoot===!1?N="never":N=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var w;e.showHead===!0?w="everyPage":e.showHead===!1?w="never":w=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var b=(s=e.useCss)!==null&&s!==void 0?s:!1,_=e.theme||(b?"plain":"striped"),C=!!e.horizontalPageBreak,T=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:b,theme:_,startY:y,margin:x,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:w,showFoot:N,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:C,horizontalPageBreakRepeat:T,horizontalPageBreakBehaviour:(f=e.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function F8(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),s=!1;if(t&&t.startPageNumber){var a=t.startPageNumber+t.pageNumber-1;s=a===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function O8(n,e,t){var r=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(t){var o=qS(n,e.html,t,a,e.useCss)||{};r=o.head||r,i=o.body||r,s=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||$8(r,i,s);return{columns:l,head:r,body:i,foot:s}}function $8(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(r)?o=r[parseInt(s)]:o=r[s],typeof o=="object"&&!Array.isArray(o)&&(a=(o==null?void 0:o.colSpan)||1);for(var l=0;l<a;l++){var u=void 0;Array.isArray(r)?u=i.length:u=s+(l>0?"_".concat(l):"");var d={dataKey:u};i.push(d)}}),i}var $g=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),B8=function(n){$S(e,n);function e(t,r,i,s,a,o){var l=n.call(this,t,r,o)||this;return l.cell=i,l.row=s,l.column=a,l.section=s.section,l}return e}($g),U8=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,s,a){for(var o=0,l=t;o<l.length;o++){var u=l[o],d=new B8(e,this,r,i,s,a),p=u(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],p)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var s=i[r];s(new $g(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var s=i[r];s(new $g(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),VS=function(){function n(e,t,r,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof BS&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=s}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var s;return Math.max(r,((s=t.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,s){var a=r.cells[s.index];if(!a)return 0;var o=t.getLineHeight(a.styles.fontSize),l=a.padding("vertical"),u=l+o;return u>i?u:i},0)},n}(),GS=function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,s=r*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=hp(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),z8=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var s=i[r],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(t=Math.max(t,a.styles.cellWidth))}return t},n}();function W8(n,e){H8(n,e);var t=[],r=0;e.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(e);a?s.width=a:(s.width=s.wrappedWidth,t.push(s)),r+=s.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=Bg(t,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=Bg(t,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Y8(e),V8(e,n),q8(e)}function H8(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=WS(n,e);e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],u=s.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(n,d,u,s,l,null);var p=u.padding("horizontal");u.contentWidth=If(u.text,u.styles,n)+p;var m=If(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,n);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var f=10/t;u.minWidth=u.styles.minCellWidth||f,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},p=d.cellWidth||d.minCellWidth;p&&typeof p=="number"&&(l.minWidth=p,l.wrappedWidth=p)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function Bg(n,e,t){for(var r=e,i=n.reduce(function(f,x){return f+x.wrappedWidth},0),s=0;s<n.length;s++){var a=n[s],o=a.wrappedWidth/i,l=r*o,u=a.width+l,d=t(a),p=u<d?d:u;e-=p-a.width,a.width=p}if(e=Math.round(e*1e10)/1e10,e){var m=n.filter(function(f){return e<0?f.width>t(f):!0});m.length&&(e=Bg(m,e,t))}return e}function q8(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var s=r[i],a=0,o=n.columns;a<o.length;a++){var l=o[a],u=e[l.index];if(t>1)t--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,t=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var p=r.length-i,m=d.rowSpan>p?p:d.rowSpan;e[l.index]={cell:d,left:m,row:s}}}}}function Y8(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,s=0,a=0,o=0;o<n.columns.length;o++){var l=n.columns[o];if(a-=1,a>1&&n.columns[o+1])s+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+s}else{var u=r.cells[l.index];if(!u)continue;if(a=u.colSpan,s=0,u.colSpan>1){i=u,s+=l.width;continue}u.width=l.width+s}}}function V8(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var s=i[r],a=0,o=n.columns;a<o.length;a++){var l=o[a],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=ox(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=ox(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var p=u.styles.overflow(u.text,d);typeof p=="string"?u.text=[p]:u.text=p}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&t.count*t.height<m*u.rowSpan?t={height:m,count:u.rowSpan}:t&&t.count>0&&t.height>m&&(m=t.height),m>s.height&&(s.height=m)}}t.count--}}function ox(n,e,t,r,i){return n.map(function(s){return G8(s,e,t,r,i)})}function G8(n,e,t,r,i){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=If(n,t,r))return n;for(;e<If(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function JS(n,e){var t=new ic(n),r=J8(e,t.scaleFactor()),i=new U8(e,r);return W8(t,i),t.applyStyles(t.userStyles),i}function J8(n,e){var t=n.content,r=X8(t.columns);if(t.head.length===0){var i=lx(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=lx(r,"foot");i&&t.foot.push(i)}var s=n.settings.theme,a=n.styles;return{columns:r,head:nm("head",t.head,r,a,s,e),body:nm("body",t.body,r,a,s,e),foot:nm("foot",t.foot,r,a,s,e)}}function nm(n,e,t,r,i,s){var a={},o=e.map(function(l,u){for(var d=0,p={},m=0,f=0,x=0,y=t;x<y.length;x++){var N=y[x];if(a[N.index]==null||a[N.index].left===0)if(f===0){var w=void 0;Array.isArray(l)?w=l[N.index-m-d]:w=l[N.dataKey];var b={};typeof w=="object"&&!Array.isArray(w)&&(b=(w==null?void 0:w.styles)||{});var _=Q8(n,N,u,i,r,s,b),C=new GS(w,_,n);p[N.dataKey]=C,p[N.index]=C,f=C.colSpan-1,a[N.index]={left:C.rowSpan-1,times:f}}else f--,m++;else a[N.index].left--,f=a[N.index].times,d++}return new VS(l,u,n,p)});return o}function lx(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=K8(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function K8(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function X8(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new z8(i,e,t)})}function Q8(n,e,t,r,i,s,a){var o=A8(r),l;n==="head"?l=i.headStyles:n==="body"?l=i.bodyStyles:n==="foot"&&(l=i.footStyles);var u=zs({},o.table,o[n],i.styles,l),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=n==="body"?d:{},m=n==="body"&&t%2===0?zs({},o.alternateRow,i.alternateRowStyles):{},f=j8(s),x=zs({},f,u,m,p);return zs(x,a)}function Z8(n,e,t){var r;t===void 0&&(t={});var i=WS(n,e),s=new Map,a=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var f=e.columns.find(function(x){return x.dataKey===m||x.index===m});f&&!s.has(f.index)&&(s.set(f.index,!0),a.push(f.index),o.push(e.columns[f.index]),i-=f.wrappedWidth)});for(var u=!0,d=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(s.has(d)){d++;continue}var p=e.columns[d].wrappedWidth;if(u||i>=p)u=!1,a.push(d),o.push(e.columns[d]),i-=p;else break;d++}return{colIndexes:a,columns:o,lastIndex:d-1}}function eE(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=Z8(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function KS(n,e){var t=e.settings,r=t.startY,i=t.margin,s={x:i.left,y:r},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+i.bottom+a;if(t.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(m,f){return m+f.height},0);o+=u}var d=new ic(n);(t.pageBreak==="always"||t.startY!=null&&o>d.pageSize().height)&&(QS(d),s.y=i.top),e.callWillDrawPageHooks(d,s);var p=zs({},s);e.startPageNumber=d.pageNumber(),t.horizontalPageBreak?tE(d,e,p,s):(d.applyStyles(d.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(m){return Xs(d,e,m,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,f){var x=f===e.body.length-1;Rf(d,e,m,x,p,s,e.columns)}),d.applyStyles(d.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(m){return Xs(d,e,m,s,e.columns)})),US(d,e,p,s),e.callEndPageHooks(d,s),e.finalY=s.y,n.lastAutoTable=e,d.applyStyles(d.userStyles)}function tE(n,e,t,r){var i=eE(n,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,d){n.applyStyles(n.userStyles),d>0?Fu(n,e,t,r,u.columns,!0):cx(n,e,r,u.columns),nE(n,e,t,r,u.columns),rm(n,e,r,u.columns)});else for(var a=-1,o=i[0],l=function(){var u=a;if(o){n.applyStyles(n.userStyles);var d=o.columns;a>=0?Fu(n,e,t,r,d,!0):cx(n,e,r,d),u=ux(n,e,a+1,r,d),rm(n,e,r,d)}var p=u-a;i.slice(1).forEach(function(m){n.applyStyles(n.userStyles),Fu(n,e,t,r,m.columns,!0),ux(n,e,a+1,r,m.columns,p),rm(n,e,r,m.columns)}),a=u};a<e.body.length-1;)l()}function cx(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return Xs(n,e,s,t,r)})}function nE(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(s,a){var o=a===e.body.length-1;Rf(n,e,s,o,t,r,i)})}function ux(n,e,t,r,i,s){n.applyStyles(n.userStyles),s=s??e.body.length;var a=Math.min(t+s,e.body.length),o=-1;return e.body.slice(t,a).forEach(function(l,u){var d=t+u===e.body.length-1,p=XS(n,e,d,r);l.canEntireRowFit(p,i)&&(Xs(n,e,l,r,i),o=t+u)}),o}function rm(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return Xs(n,e,s,t,r)})}function rE(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),s=Math.floor((e-i)/r);return Math.max(0,s)}function iE(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var s=0,a=0,o=t.columns;a<o.length;a++){var l=o[a],u=n.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new GS(u.raw,u.styles,u.section);d=zs(d,u),d.text=[];var p=rE(u,e,r);u.text.length>p&&(d.text=u.text.splice(p,u.text.length));var m=r.scaleFactor(),f=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,f),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>n.height&&(n.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,f),d.contentHeight>s&&(s=d.contentHeight),i[l.index]=d}}var x=new VS(n.raw,-1,n.section,i,!0);x.height=s;for(var y=0,N=t.columns;y<N.length;y++){var l=N[y],d=x.cells[l.index];d&&(d.height=x.height);var u=n.cells[l.index];u&&(u.height=n.height)}return x}function sE(n,e,t,r){var i=n.pageSize().height,s=r.settings.margin,a=s.top+s.bottom,o=i-a;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,n),u=l<t;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(r.columns),p=e.getMaxCellHeight(r.columns)>o;return p?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function Rf(n,e,t,r,i,s,a){var o=XS(n,e,r,s);if(t.canEntireRowFit(o,a))Xs(n,e,t,s,a);else if(sE(n,t,o,e)){var l=iE(t,o,e,n);Xs(n,e,t,s,a),Fu(n,e,i,s,a),Rf(n,e,l,r,i,s,a)}else Fu(n,e,i,s,a),Rf(n,e,t,r,i,s,a)}function Xs(n,e,t,r,i){r.x=e.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var o=a[s],l=t.cells[o.index];if(!l){r.x+=o.width;continue}n.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(n,e.hooks.willDrawCell,l,t,o,r);if(u===!1){r.x+=o.width;continue}aE(n,l,r);var d=l.getTextPos();OS(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,l,t,o,r),r.x+=o.width}r.y+=t.height}function aE(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=zS(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),oE(n,e,t,r.lineWidth))}function oE(n,e,t,r){var i,s,a,o;r.top&&(i=t.x,s=t.y,a=t.x+e.width,o=t.y,r.right&&(a+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,s,a,o)),r.bottom&&(i=t.x,s=t.y+e.height,a=t.x+e.width,o=t.y+e.height,r.right&&(a+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,s,a,o)),r.left&&(i=t.x,s=t.y,a=t.x,o=t.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,i,s,a,o)),r.right&&(i=t.x+e.width,s=t.y,a=t.x+e.width,o=t.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,i,s,a,o));function l(u,d,p,m,f){n.getDocument().setLineWidth(u),n.getDocument().line(d,p,m,f,"S")}}function XS(n,e,t,r){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function Fu(n,e,t,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return Xs(n,e,o,r,i)}),e.callEndPageHooks(n,r);var a=e.settings.margin;US(n,e,t,r),QS(n),e.pageNumber++,r.x=a.left,r.y=a.top,t.y=a.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return Xs(n,e,o,r,i)}),n.applyStyles(n.userStyles))}function QS(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function lE(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=YS(this,r),s=JS(this,i);return KS(this,s),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){OS(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return ic.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){ic.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new ic(this),s=qS(i,e,window,t,!1),a=s.head,o=s.body,l=((r=a[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var im;function fp(n,e){var t=YS(n,e),r=JS(n,t);KS(n,r)}try{if(typeof window<"u"&&window){var dx=window,hx=dx.jsPDF||((im=dx.jspdf)===null||im===void 0?void 0:im.jsPDF);hx&&lE(hx)}}catch(n){console.error("Could not apply autoTable plugin",n)}class cE{async exportToPDF(e){const{entries:t,month:r,year:i,title:s="Roster Schedule"}=e;console.log("📄 Starting PDF export with options:",e);const a=new it({orientation:"landscape",unit:"mm",format:"a4"}),l=`${["January","February","March","April","May","June","July","August","September","October","November","December"][r]} ${i}`,u=`${s} - ${l}`;a.setFontSize(16),a.setFont("helvetica","bold"),a.text(u,a.internal.pageSize.getWidth()/2,20,{align:"center"}),a.setFontSize(10),a.setFont("helvetica","normal");const d=new Date().toLocaleString();a.text(`Generated on: ${d}`,a.internal.pageSize.getWidth()/2,30,{align:"center"});const p=t.filter(x=>{const y=new Date(x.date);return y.getMonth()===r&&y.getFullYear()===i});if(console.log(`📄 Filtered ${p.length} entries for ${l}`),p.length===0)a.setFontSize(14),a.text("No roster entries found for this month",a.internal.pageSize.getWidth()/2,60,{align:"center"});else{const x=this.prepareTableData(p);fp(a,{startY:40,head:[["Date","Day","Shift Type","Assigned Staff","Last Edited By","Last Edited At","Remarks"]],body:x,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center",fontStyle:"bold"},headStyles:{fillColor:[79,70,229],textColor:255,fontStyle:"bold",fontSize:9},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:25},1:{cellWidth:20},2:{cellWidth:45},3:{cellWidth:40},4:{cellWidth:35},5:{cellWidth:40},6:{cellWidth:50}},margin:{left:10,right:10},tableWidth:"auto",theme:"striped"})}const m=a.getNumberOfPages();for(let x=1;x<=m;x++)a.setPage(x),a.setFontSize(8),a.text(`Page ${x} of ${m}`,a.internal.pageSize.getWidth()/2,a.internal.pageSize.getHeight()-10,{align:"center"});const f=`Roster_${l.replace(" ","_")}_${new Date().toISOString().split("T")[0]}.pdf`;a.save(f),console.log("✅ PDF export completed:",f)}prepareTableData(e){return[...e].sort((r,i)=>{const s=new Date(r.date).getTime()-new Date(i.date).getTime();if(s!==0)return s;const a=["Morning Shift (9-4)","Saturday Regular (12-10)","Evening Shift (4-10)","Night Duty","Sunday/Public Holiday/Special"],o=a.indexOf(r.shift_type),l=a.indexOf(i.shift_type);return o-l}).map(r=>[this.formatDate(r.date),this.getDayName(r.date),this.formatShiftType(r.shift_type),r.assigned_name,r.last_edited_by||"System",this.formatTimestamp(r.last_edited_at),this.extractRemarks(r)])}formatDate(e){const t=new Date(e),r=t.getDate().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getFullYear();return`${r}/${i}/${s}`}getDayName(e){const t=new Date(e);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]}formatShiftType(e){return{"Morning Shift (9-4)":"Morning (9-4)","Evening Shift (4-10)":"Evening (4-10)","Saturday Regular (12-10)":"Saturday (12-10)","Night Duty":"Night Duty","Sunday/Public Holiday/Special":"Special (9-4)"}[e]||e}formatTimestamp(e){if(!e)return"N/A";try{if(e.includes("-")&&e.includes(" ")){const[l,u]=e.split(" "),[d,p,m]=l.split("-"),[f,x,y]=(u||"00:00:00").split(":"),N=new Date(parseInt(m),parseInt(p)-1,parseInt(d),parseInt(f||"0"),parseInt(x||"0"),parseInt(y||"0"));if(isNaN(N.getTime()))return"";const w=`${d}/${p}/${m}`,b=`${f}:${x}`;return`${w} ${b}`}const t=new Date(e);if(isNaN(t.getTime()))return"";const r=t.getDate().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getFullYear(),a=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0");return`${r}/${i}/${s} ${a}:${o}`}catch(t){return console.warn("Failed to parse timestamp:",e,t),""}}extractRemarks(e){if(e.change_description&&e.change_description.includes("Special Date:")){const t=e.change_description.match(/Special Date:\s*([^;]+)/);if(t&&t[1].trim())return t[1].trim()}return""}}const uE=new cE;class ZS{formatNumber(e){return e===0?"":e%1===0?e.toString():e.toFixed(2).replace(/\.?0+$/,"")}formatCurrency(e){return e===0?"":`Rs ${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}async generateBill(e){const{staffName:t,month:r,year:i,numberOfCopies:s=1}=e;for(let a=1;a<=s;a++)await this.generateSingleBill(e,a,s)}async generateSingleBill(e,t,r){const{staffName:i,month:s,year:a}=e,o=new it({orientation:"portrait",unit:"mm",format:"a4"});await this.generateBillContent(o,e,t,r);let u=`${i}_${["January","February","March","April","May","June","July","August","September","October","November","December"][s]}_${a}_Bill`;r>1&&(u+=`_Copy${t}`),u+=".pdf",o.save(u),console.log(`✅ Individual bill generated (${t}/${r}):`,u)}async generateBillContent(e,t,r,i){const s=t.staffName,{month:a,year:o,entries:l,basicSalary:u,hourlyRate:d,shiftCombinations:p}=t,m=s.replace(/\(R\)$/,"").trim(),f=Fb(m),x=f>0?f*12/52/40:d;console.log("📄 Starting individual bill generation for:",s);const y=["January","February","March","April","May","June","July","August","September","October","November","December"],N=this.filterEntriesForStaff(l,s,a,o);console.log(`📄 Filtered ${N.length} entries for ${s} in ${y[a]} ${o}`),console.log(`🔍 DEBUG: All entries for ${s}:`),N.forEach((j,I)=>{console.log(`  ${I+1}. Date: ${j.date}, Shift: ${j.shift_type}, Change: "${j.change_description}"`)}),console.log("🔍 DEBUG: Checking for special dates in the month...");const w=l.filter(j=>{const I=new Date(j.date);return I.getMonth()===a&&I.getFullYear()===o}),b=new Map;w.forEach(j=>{if(j.change_description&&j.change_description.includes("Special Date:")){const I=j.change_description.match(/Special Date:\s*([^;]+)/);I&&I[1].trim()&&(b.set(j.date,I[1].trim()),console.log(`🌟 Found special date: ${j.date} - "${I[1].trim()}"`))}}),console.log(`🌟 Total special dates found in month: ${b.size}`);const _=ry(m);e.setFontSize(14),e.setFont("helvetica","bold"),e.text("X-RAY DEPARTMENT - JAWAHARLAL NEHRU HOSPITAL",e.internal.pageSize.getWidth()/2,15,{align:"center"}),e.setFontSize(12);let C=`INDIVIDUAL WORK SUMMARY - ${y[a]} ${o}`;r&&i&&i>1&&(C+=` (Copy ${r}/${i})`),e.text(C,e.internal.pageSize.getWidth()/2,25,{align:"center"}),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Name:",20,35),e.text("Month/Year:",20,42),e.text("Employee ID:",20,49),e.setFont("helvetica","normal"),e.text(`${(_==null?void 0:_.firstName)||""} ${(_==null?void 0:_.surname)||m}`,50,35),e.text(`${y[a]} ${o}`,50,42),e.text((_==null?void 0:_.employeeId)||"",50,49),e.setFont("helvetica","bold"),e.text("Title:",120,35),e.text("Salary:",120,42),e.text("Hourly Rate:",120,49),e.setFont("helvetica","normal"),e.text((_==null?void 0:_.title)||"MIT",150,35),e.text(`Rs ${(f||0).toLocaleString()}`,150,42),e.text(`Rs ${x.toFixed(2)}`,150,49);const T=this.prepareAllDaysTableData(N,s,a,o,x,p,b);fp(e,{startY:55,head:[["Date",`Morning
(9-4)`,`Saturday
(12-10)`,`Evening
(4-10)`,`Night
Duty`,"Hours","Remarks"]],body:T.rows,styles:{fontSize:8,cellPadding:1,overflow:"linebreak",halign:"center",valign:"middle",fontStyle:"bold"},headStyles:{fillColor:[220,220,220],textColor:[0,0,0],fontStyle:"bold",fontSize:9,halign:"center",valign:"middle",cellPadding:2},columnStyles:{0:{cellWidth:25,halign:"center"},1:{cellWidth:20,halign:"center"},2:{cellWidth:20,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:20,halign:"center"},5:{cellWidth:15,halign:"center"},6:{cellWidth:35,halign:"center"}},margin:{left:20,right:20},pageBreak:"auto",rowPageBreak:"avoid",theme:"grid",tableLineWidth:.2,tableLineColor:[0,0,0],tableWidth:"wrap"});const P=e.lastAutoTable.finalY+10;this.addSummarySection(e,T.totalDays,T.totalHours,T.nightDutyCount,x,P),this.addSignatureSections(e,T.totalDays,T.totalHours,T.nightDutyCount,x),e.setFont("helvetica","normal"),e.setFontSize(8);const A=e.internal.pageSize.getHeight();e.text("X-ray ANWH System",e.internal.pageSize.getWidth()-15,A-15,{align:"right"}),e.text(`Generated on: ${new Date().toLocaleString()}`,e.internal.pageSize.getWidth()-15,A-10,{align:"right"})}addSummarySection(e,t,r,i,s,a){e.setFontSize(10),e.setFont("helvetica","bold"),e.text("SUMMARY:",15,a),e.setFont("helvetica","normal"),e.setFontSize(10);const o=r*s;e.text(`Total Working Hours: ${this.formatNumber(r)}`,15,a+9),e.text(`Subtotal (Hours): ${this.formatCurrency(o)}`,15,a+15);const u=i*6*.25*s;i>0&&e.text(`Total Night Allowance: (${i} × 6 × 0.25 × ${s.toFixed(2)}) = ${this.formatCurrency(u)}`,15,a+21,{align:"left"});const d=o+u;e.setFont("helvetica","bold"),e.setFontSize(10),e.text(`TOTAL AMOUNT: ${this.formatCurrency(d)}`,15,a-5+(i>0?34:28))}addSignatureSections(e,t,r,i,s,a){const o=e.lastAutoTable.finalY+5+(i>0?34:28)+10;e.setFont("helvetica","normal"),e.setFontSize(8),e.text("Date: _________________________________________",15,o),e.text("Signature:_______________________________________",15,o+10);const l=120;e.setFontSize(10),e.text("Certified correct as per attendance.",l,o-25),e.text("Name :- ______________________________________",l,o-17),e.text("Grade: Principal Medical Imaging Technologist.",l,o-11),e.text("Signature:- ___________________________________",l,o-3)}filterEntriesForStaff(e,t,r,i){return e.filter(s=>{const a=s.assigned_name.replace(/\(R\)$/,"").trim().toUpperCase(),o=t.replace(/\(R\)$/,"").trim().toUpperCase();if(a!==o)return!1;const l=new Date(s.date);return l.getMonth()===r&&l.getFullYear()===i})}prepareAllDaysTableData(e,t,r,i,s,a,o){const l=e.reduce((x,y)=>{const N=y.date;return x[N]||(x[N]=[]),x[N].push(y),x},{}),u=new Date(i,r+1,0).getDate(),d=[];let p=0,m=0,f=0;for(let x=1;x<=u;x++){const y=`${i}-${(r+1).toString().padStart(2,"0")}-${x.toString().padStart(2,"0")}`,N=l[y]||[],w=this.formatDayDate(y);if(N.length>0){f++;const b=[];let _=0,C=o.get(y)||"";N.forEach($=>{b.push($.shift_type),$.shift_type==="Night Duty"&&m++;const L=this.getShiftHours($.shift_type,a);_+=L});const T=C.includes("*")?C.split("*")[0].trim():C;console.log(`📝 Remarks for ${t} on ${y}: "${T}" (original: "${C}")`),p+=_;const P=b.includes("Morning Shift (9-4)")?"X":"",A=b.includes("Saturday Regular (12-10)")?"X":"",j=b.includes("Evening Shift (4-10)")?"X":"",I=b.includes("Night Duty")?"X":"";d.push([w,P,A,j,I,this.formatNumber(_),T])}else d.push([w,"","","","","",""])}return{rows:d,totalDays:f,totalHours:p,nightDutyCount:m}}getShiftHours(e,t){const i={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[e];if(!i)return console.warn(`Unknown shift type: ${e}`),0;if(e==="Night Duty")return 11;const s=t.find(a=>a.id===i);return s?s.hours:(console.warn(`No combination found for shift ID: ${i}`),0)}formatDayDate(e){const t=new Date(e),r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=r[t.getDay()],a=t.getDate().toString().padStart(2,"0"),o=i[t.getMonth()],l=t.getFullYear().toString().slice(-2);return`${s} ${a}-${o}-${l}`}}const pp=new ZS,dE=Object.freeze(Object.defineProperty({__proto__:null,IndividualBillGenerator:ZS,individualBillGenerator:pp},Symbol.toStringTag,{value:"Module"}));class e_{formatNumber(e){return e===0?"":e%1===0?e.toString():e.toFixed(2).replace(/\.?0+$/,"")}formatCurrency(e){return e===0?"":`Rs ${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}formatSalary(e){return e===0?"":`Rs ${e.toLocaleString("en-US")}`}async generateAnnexure(e){const{month:t,year:r,numberOfCopies:i=1}=e;for(let s=1;s<=i;s++)await this.generateSingleAnnexure(e,s,i)}async generateSingleAnnexure(e,t,r){const{month:i,year:s}=e,a=new it({orientation:"portrait",unit:"mm",format:"a4"});await this.generateAnnexureContent(a,e,t,r);let l=`Annexure_${["January","February","March","April","May","June","July","August","September","October","November","December"][i]}_${s}`;r>1&&(l+=`_Copy${t}`),l+=".pdf",a.save(l),console.log(`✅ Annexure generated (${t}/${r}):`,l)}async generateAnnexureContent(e,t,r,i){const{month:s,year:a,entries:o,hourlyRate:l,shiftCombinations:u}=t;console.log("📄 Generating annexure for all staff");const d=["January","February","March","April","May","June","July","August","September","October","November","December"];e.setFontSize(14),e.setFont("helvetica","bold"),e.text("X-RAY DEPARTMENT - JAWAHARLAL NEHRU HOSPITAL",e.internal.pageSize.getWidth()/2,15,{align:"center"}),e.setFontSize(12);let p=`ANNEXURE - ${d[s]} ${a}`;r&&i&&i>1&&(p+=` (Copy ${r}/${i})`),e.text(p,e.internal.pageSize.getWidth()/2,25,{align:"center"});const m=this.calculateStaffSummaries(o,s,a,l,u),f=m.map((_,C)=>[(C+1).toString(),_.fullName,_.employeeId,this.formatSalary(_.salary),this.formatNumber(_.totalHours),this.formatNumber(_.nightDutyHours),this.formatCurrency(_.grandTotal)]);fp(e,{startY:35,head:[["S.No",`NAME
(Full Name)`,`ID
NUMBER`,"SALARY",`NO OF HRS
PAYABLE
(Hrs)`,`NIGHT
ALLOWANCE
(Hrs)`,"AMOUNT"]],body:f,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center",valign:"middle",fontStyle:"bold"},headStyles:{fillColor:[220,220,220],textColor:[0,0,0],fontStyle:"bold",fontSize:8,halign:"center",valign:"middle",cellPadding:2,minCellHeight:8},margin:{left:5,right:5},theme:"grid",tableWidth:"auto",tableLineWidth:.3,tableLineColor:[0,0,0],columnStyles:{},didParseCell:function(_){if(_.section==="body"){const C=_.cell.text.join(" ");C.length>20||C.length>10,_.cell.styles.fontSize=9}}}),m.reduce((_,C)=>_+C.totalDays,0),m.reduce((_,C)=>_+C.totalHours,0),m.reduce((_,C)=>_+C.salary,0),m.reduce((_,C)=>_+C.nightDutyHours,0),m.reduce((_,C)=>_+C.totalAmount,0),m.reduce((_,C)=>_+C.nightAllowance,0),m.reduce((_,C)=>_+C.grandTotal,0);const x=e.lastAutoTable.finalY+10;e.setFont("helvetica","normal"),e.setFontSize(10),e.text("Certified correct as per annexture:-_________________________",80,x+100),e.text("(Principal Medical Imaging Technologist):",95,x+115),e.setFont("helvetica","normal"),e.setFontSize(8);const y=new Date,N=y.getDate().toString().padStart(2,"0"),w=(y.getMonth()+1).toString().padStart(2,"0"),b=y.getFullYear();e.text(`Generated on: ${N}/${w}/${b}`,15,e.internal.pageSize.getHeight()-15),e.text("X-ray ANWH System",e.internal.pageSize.getWidth()-15,e.internal.pageSize.getHeight()-15,{align:"right"})}calculateStaffSummaries(e,t,r,i,s){const a=[],o={};return e.forEach(l=>{const u=new Date(l.date);if(u.getMonth()===t&&u.getFullYear()===r){const d=l.assigned_name.replace(/\(R\)$/,"").trim().toUpperCase();o[d]||(o[d]=[]),o[d].push(l)}}),Object.entries(o).forEach(([l,u])=>{let d=0,p=0,m=0;u.forEach(T=>{T.shift_type==="Night Duty"&&p++;const A={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[T.shift_type];if(A){const j=s.find(I=>I.id===A);if(j){const I=T.shift_type==="Night Duty"?11:j.hours;d+=I}}}),m=p*6*.25;const x=l.replace(/\(R\)$/,"").trim(),y=ry(x),N=Fb(x),w=N>0?N*12/52/40:i,b=y?`${y.surname||x} ${y.firstName||""}`.trim():x,_=(y==null?void 0:y.employeeId)||"",C=N||0;a.push({staffName:x,fullName:b,employeeId:_,salary:C,totalDays:u.length,totalHours:d,totalAmount:d*w,nightDutyCount:p,nightDutyHours:m,nightAllowance:m*w,grandTotal:d*w+m*w})}),a.sort((l,u)=>l.staffName.localeCompare(u.staffName))}}const mp=new e_,hE=Object.freeze(Object.defineProperty({__proto__:null,AnnexureGenerator:e_,annexureGenerator:mp},Symbol.toStringTag,{value:"Module"}));class t_{async generateRosterList(e){const{month:t,year:r,numberOfCopies:i=1}=e;for(let s=1;s<=i;s++)await this.generateSingleRosterList(e,s,i)}async generateSingleRosterList(e,t,r){const{month:i,year:s}=e,a=new it({orientation:"portrait",unit:"mm",format:"a4"});await this.generateRosterListContent(a,e,t,r);let l=`Roster_List_${["January","February","March","April","May","June","July","August","September","October","November","December"][i]}_${s}`;r>1&&(l+=`_Copy${t}`),l+=".pdf",a.save(l),console.log(`✅ Roster list generated (${t}/${r}):`,l)}async generateRosterListContent(e,t,r,i){const{month:s,year:a,entries:o}=t;console.log("📄 Generating roster list");const l=["January","February","March","April","May","June","July","August","September","October","November","December"];e.setFontSize(16),e.setFont("helvetica","bold");let u=`X-Ray Roster for month of ${l[s]} ${a}`;r&&i&&i>1&&(u+=` (Copy ${r}/${i})`),e.text(u,e.internal.pageSize.getWidth()/2,20,{align:"center"});const d=o.filter(p=>{const m=new Date(p.date);return m.getMonth()===s&&m.getFullYear()===a});if(console.log(`📄 Filtered ${d.length} entries for ${l[s]} ${a}`),d.length===0)e.setFontSize(14),e.text("No roster entries found for this month",e.internal.pageSize.getWidth()/2,40,{align:"center"});else{const p=this.createColoredTableData(d);fp(e,{startY:35,head:[["Date","Shift","Staff Names","Remarks"]],body:p,willDrawCell:m=>{m.column.index===2&&m.section==="body"&&(m.cell.text=[])},didDrawCell:m=>{if(m.column.index===2&&m.section==="body"&&m.row.index>=0&&m.row.index<p.length){const f=p[m.row.index],x=this.getStaffNamesForRow(f[0],f[1],o);if(x&&x.length>0){let y=m.cell.x+2;const N=3,w=m.cell.width-6;let b=1,_=0;x.forEach((P,A)=>{const j=A===0?P.name:`, ${P.name}`,I=e.getTextWidth(j);_+I>w&&A>0?(b++,_=e.getTextWidth(P.name)):_+=I});const C=b*N;let T=m.cell.y+m.cell.height/2-C/2+2;e.setFontSize(8),e.setFont("helvetica","normal"),x.forEach((P,A)=>{const j=this.hexToRgb(P.color);e.setTextColor(j[0],j[1],j[2]);const I=y===m.cell.x+2,$=A===0||I?P.name:`, ${P.name}`,L=e.getTextWidth($),M=e.getTextWidth(","),D=A<x.length-1,O=L+(D?M:0);if(y+O>m.cell.x+m.cell.width-6&&A>0){e.text(",",y,T),y=m.cell.x+2,T+=N;const G=P.name,X=e.getTextWidth(G);e.text(G,y,T),y+=X}else e.text($,y,T),y+=L}),e.setTextColor(0,0,0)}}},styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"left",valign:"middle",lineWidth:.25,lineColor:[0,0,0],fontStyle:"bold"},headStyles:{fillColor:[220,220,220],textColor:[0,0,0],fontStyle:"bold",fontSize:9,halign:"center",valign:"middle",lineWidth:.25,lineColor:[0,0,0]},bodyStyles:{lineWidth:.25,lineColor:[0,0,0],fontStyle:"bold"},columnStyles:{0:{cellWidth:35,halign:"left",valign:"middle"},1:{cellWidth:45,halign:"left",valign:"middle"},2:{cellWidth:80,halign:"left",valign:"middle"},3:{halign:"center",valign:"middle"}},tableLineWidth:.25,tableLineColor:[0,0,0]})}e.setFont("helvetica","normal"),e.setFontSize(8),e.text(`Generated on: ${new Date().toLocaleString()}`,10,e.internal.pageSize.getHeight()-15),e.text(`Total Entries: ${d.length}`,e.internal.pageSize.getWidth()-10,e.internal.pageSize.getHeight()-15,{align:"right"})}prepareRosterTableData(e){const t={};e.forEach(s=>{const a=s.date,o=s.shift_type;t[a]||(t[a]={}),t[a][o]||(t[a][o]=[]),t[a][o].push(s)});const r=[];return Object.keys(t).sort().forEach(s=>{const a=t[s];["Morning Shift (9-4)","Saturday Regular (12-10)","Evening Shift (4-10)","Night Duty","Sunday/Public Holiday/Special"].forEach(l=>{const u=a[l];if(!u||u.length===0)return;const d=this.formatStaffNamesWithColors(u),p=this.extractRemarks(u),m=this.formatShiftTypeForList(l);r.push([this.formatDateForList(s),m,d,p])})}),r}formatStaffNamesWithColors(e){return e.map(t=>{const r=t.assigned_name,i=this.getTextColor(t);return{text:r,color:this.hexToRgb(i)}})}getTextColor(e){if(e.text_color)return e.text_color;const t=()=>{if(!e.change_description)return!1;const i=e.change_description.match(/\(Original PDF: ([^)]+)\)/);if(i){let s=i[1].trim();return s.includes("(R")&&!s.includes("(R)")&&(s=s.replace("(R","(R)")),e.assigned_name===s}return!1},r=e.change_description&&e.change_description.includes("Name changed from")&&e.last_edited_by;return t()?"#059669":r?"#dc2626":"#000000"}hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]}getStaffNamesForRow(e,t,r){return r.filter(s=>{const a=this.formatDateForList(s.date),o=this.formatShiftTypeForList(s.shift_type);return a===e&&o===t}).map(s=>({name:s.assigned_name,color:this.getTextColor(s)}))}createColoredTableData(e){const t={};e.forEach(s=>{const a=s.date,o=s.shift_type;t[a]||(t[a]={}),t[a][o]||(t[a][o]=[]),t[a][o].push(s)});const r=[];return Object.keys(t).sort().forEach(s=>{const a=t[s];["Morning Shift (9-4)","Saturday Regular (12-10)","Evening Shift (4-10)","Night Duty","Sunday/Public Holiday/Special"].forEach(l=>{const u=a[l];if(!u||u.length===0)return;const d=this.extractRemarks(u),p=this.formatShiftTypeForList(l),m=u.map(x=>({name:x.assigned_name,color:this.getTextColor(x)})),f=[this.formatDateForList(s),p,m.map(x=>x.name).join(", "),d];r.push(f)})}),r}extractRemarks(e){for(const t of e)if(t.change_description&&t.change_description.includes("Special Date:")){const r=t.change_description.match(/Special Date:\s*([^;]+)/);if(r&&r[1].trim()){const i=r[1].trim();return i.includes("*")?i.split("*")[0].trim():i}}return""}formatDateForList(e){const t=new Date(e),r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=r[t.getDay()],a=t.getDate().toString().padStart(2,"0"),o=i[t.getMonth()],l=t.getFullYear();return`${s} ${a}-${o}-${l}`}formatShiftTypeForList(e){return{"Morning Shift (9-4)":"Morning Shift (9-4)","Evening Shift (4-10)":"Evening Shift (4-10)","Saturday Regular (12-10)":"Saturday Regular (12-10)","Night Duty":"Night Duty","Sunday/Public Holiday/Special":"Sunday/Public Holiday/Special"}[e]||e}}const gp=new t_,fE=Object.freeze(Object.defineProperty({__proto__:null,RosterListGenerator:t_,rosterListGenerator:gp},Symbol.toStringTag,{value:"Module"}));class pE{async generateAllReports(e){const{month:t,year:r,entries:i,basicSalary:s,hourlyRate:a,shiftCombinations:o,numberOfCopies:l=1}=e;console.log("📄 Starting monthly report generation...");const u=["January","February","March","April","May","June","July","August","September","October","November","December"],d=i.filter(y=>{const N=new Date(y.date);return N.getMonth()===t&&N.getFullYear()===r});if(d.length===0)throw new Error(`No roster entries found for ${u[t]} ${r}`);const p=this.getUniqueStaffMembers(d);console.log(`📄 Found ${p.length} staff members with entries in ${u[t]} ${r}`);let m=0;for(const y of p)try{await pp.generateBill({staffName:y,month:t,year:r,entries:d,basicSalary:s,hourlyRate:a,shiftCombinations:o,numberOfCopies:l}),m++,await new Promise(N=>setTimeout(N,100))}catch(N){console.error(`❌ Failed to generate bill for ${y}:`,N)}let f=!1;try{await mp.generateAnnexure({month:t,year:r,entries:d,hourlyRate:a,shiftCombinations:o,numberOfCopies:l}),f=!0,await new Promise(y=>setTimeout(y,100))}catch(y){console.error("❌ Failed to generate annexure:",y)}let x=!1;try{await gp.generateRosterList({month:t,year:r,entries:d,numberOfCopies:l}),x=!0}catch(y){console.error("❌ Failed to generate roster list:",y)}return console.log("✅ Monthly report generation completed:",{individualBills:m,annexureGenerated:f,rosterListGenerated:x}),{individualBills:m,annexureGenerated:f,rosterListGenerated:x}}getUniqueStaffMembers(e){const t=new Set;return e.forEach(i=>{const s=i.assigned_name.replace(/\(R\)$/,"").trim();t.add(s)}),Array.from(t).sort((i,s)=>i.localeCompare(s))}}const mE=new pE,gE=({isOpen:n,onClose:e,entries:t,basicSalary:r,hourlyRate:i,shiftCombinations:s})=>{const[a,o]=H.useState(new Date().getMonth()),[l,u]=H.useState(new Date().getFullYear()),[d,p]=H.useState(!1),[m,f]=H.useState("all"),[x,y]=H.useState(""),[N,w]=H.useState(null),[b,_]=H.useState(null),[C,T]=H.useState(!1),[P,A]=H.useState(1);H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{n&&(p(!1),w(null),_(null),f("all"),y(""),A(1))},[n]),H.useEffect(()=>{const D=O=>{O.key==="Escape"&&n&&!d&&e()};if(n)return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[n,d,e]);const j=async()=>{p(!0),_(null),w(null);try{console.log("🚀 Starting monthly report generation...");const D=t.filter(G=>{const X=new Date(G.date);return X.getMonth()===a&&X.getFullYear()===l});if(D.length===0)throw new Error(`No roster entries found for ${$()}`);let O={individualBills:0,annexureGenerated:!1,rosterListGenerated:!1,reportType:m,staffName:x};if(m==="all")O={...await mE.generateAllReports({month:a,year:l,entries:t,basicSalary:r,hourlyRate:i,shiftCombinations:s,numberOfCopies:P}),reportType:"all"};else if(m==="individual"){if(!x||x.trim()==="")throw new Error("Please select a staff member for individual report");await pp.generateBill({staffName:x,month:a,year:l,entries:D,basicSalary:r,hourlyRate:i,shiftCombinations:s,numberOfCopies:P}),O.individualBills=1}else m==="annexure"?(await mp.generateAnnexure({month:a,year:l,entries:D,hourlyRate:i,shiftCombinations:s,numberOfCopies:P}),O.annexureGenerated=!0):m==="roster"&&(await gp.generateRosterList({month:a,year:l,entries:D,numberOfCopies:P}),O.rosterListGenerated=!0);w(O),console.log("✅ Monthly reports generated successfully:",O)}catch(D){console.error("❌ Monthly report generation failed:",D),_(D instanceof Error?D.message:"Failed to generate reports")}finally{p(!1)}},I=D=>{D.target===D.currentTarget&&!d&&e()},$=()=>`${["January","February","March","April","May","June","July","August","September","October","November","December"][a]} ${l}`,L=()=>t.filter(D=>{const O=new Date(D.date);return O.getMonth()===a&&O.getFullYear()===l}).length,M=()=>{const D=t.filter(G=>{const X=new Date(G.date);return X.getMonth()===a&&X.getFullYear()===l}),O=new Set;return D.forEach(G=>{const X=G.assigned_name.replace(/\(R\)$/,"").trim();O.add(X)}),Array.from(O).sort()};return n?xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:I,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",maxHeight:"90vh",display:"flex",flexDirection:"column"},onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"relative p-6 pb-4 border-b border-gray-200 flex-shrink-0",children:[!d&&c.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200",children:c.jsx(Ar,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(es,{className:"w-6 h-6 text-blue-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Monthly Reports Generator"}),c.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Generate end-of-month reports for all staff"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[!N&&!b&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Month and Year"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsx("div",{children:c.jsx("select",{value:a,onChange:D=>o(Number(D.target.value)),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((D,O)=>c.jsx("option",{value:O,children:D},O))})}),c.jsx("div",{children:c.jsx("select",{value:l,onChange:D=>u(Number(D.target.value)),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:Array.from({length:5},(D,O)=>new Date().getFullYear()-2+O).map(D=>c.jsx("option",{value:D,children:D},D))})})]}),c.jsxs("div",{className:"mt-2 text-sm text-gray-600 text-center",children:[L()," entries found for ",$()]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Report Type"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[c.jsx("input",{type:"radio",value:"all",checked:m==="all",onChange:D=>f(D.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(es,{className:"w-5 h-5 text-blue-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"All Reports"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Generate all three report types"})]})]})]}),c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[c.jsx("input",{type:"radio",value:"individual",checked:m==="individual",onChange:D=>f(D.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Br,{className:"w-5 h-5 text-green-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Individual Staff Bill"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Generate bill for one staff member"})]})]})]}),c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[c.jsx("input",{type:"radio",value:"annexure",checked:m==="annexure",onChange:D=>f(D.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ev,{className:"w-5 h-5 text-purple-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Annexure (All Staff Summary)"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Combined summary for all staff"})]})]})]}),c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[c.jsx("input",{type:"radio",value:"roster",checked:m==="roster",onChange:D=>f(D.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(X2,{className:"w-5 h-5 text-orange-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Roster List"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Simple list of name, date, and shift"})]})]})]})]})]}),m==="individual"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Staff Member"}),c.jsxs("select",{value:x,onChange:D=>y(D.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[c.jsx("option",{value:"",children:"Select staff member"}),M().map(D=>c.jsx("option",{value:D,children:D},D))]}),x&&c.jsxs("div",{className:"mt-2 text-sm text-gray-600 text-center",children:["Will generate individual bill for ",x]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Number of Copies"}),c.jsx("select",{value:P,onChange:D=>A(Number(D.target.value)),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[1,2,3,4,5].map(D=>c.jsxs("option",{value:D,children:[D," ",D===1?"copy":"copies"]},D))})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:m==="all"?"Reports to Generate:":"Selected Report:"}),c.jsxs("div",{className:"space-y-3",children:[(m==="all"||m==="individual")&&c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Br,{className:"w-5 h-5 text-green-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:m==="individual"?`Individual Bill - ${x||"Select staff"}`:"Individual Staff Bills"}),c.jsx("div",{className:"text-sm text-gray-600",children:m==="individual"?"One PDF for selected staff member":"One PDF per staff member with their work summary"})]})]}),(m==="all"||m==="annexure")&&c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(ev,{className:"w-5 h-5 text-purple-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Annexure (All Staff Summary)"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Combined summary for all staff members"})]})]}),(m==="all"||m==="roster")&&c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(X2,{className:"w-5 h-5 text-orange-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Roster List"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Simple list showing name, date, and shift"})]})]})]})]}),(L()===0||m==="individual"&&!x)&&c.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(In,{className:"w-5 h-5 text-amber-600"}),c.jsx("span",{className:"text-sm text-amber-800 font-medium",children:L()===0?`No entries found for ${$()}`:"Please select a staff member for individual report"})]}),c.jsx("p",{className:"text-sm text-amber-700 mt-1",children:L()===0?"Please select a different month or ensure roster data exists.":"Choose a staff member from the dropdown above."})]})]}),d&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generating Reports"}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["Creating PDFs for ",$(),"..."]}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[c.jsx("p",{children:"• Generating individual staff bills"}),c.jsx("p",{children:"• Creating annexure summary"}),c.jsx("p",{children:"• Preparing roster list"})]})]}),N&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Io,{className:"w-8 h-8 text-green-600"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Reports Generated Successfully!"}),c.jsxs("p",{className:"text-gray-600",children:["All reports for ",$()," have been created"]})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-medium text-green-800 mb-3",children:"Generation Summary:"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Report Type:"}),c.jsx("span",{className:"text-green-800 font-medium capitalize",children:N.reportType})]}),N.reportType==="individual"&&N.staffName&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Staff Member:"}),c.jsx("span",{className:"text-green-800 font-medium",children:N.staffName})]}),N.individualBills>0&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Individual Bills:"}),c.jsxs("span",{className:"text-green-800 font-medium",children:[N.individualBills," files"]})]}),N.reportType==="all"||N.reportType==="annexure"?c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Annexure:"}),c.jsx("span",{className:"text-green-800 font-medium",children:N.annexureGenerated?"✅ Generated":"❌ Failed"})]}):null,N.reportType==="all"||N.reportType==="roster"?c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Roster List:"}),c.jsx("span",{className:"text-green-800 font-medium",children:N.rosterListGenerated?"✅ Generated":"❌ Failed"})]}):null]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Files Generated:"}),c.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[N.individualBills>0&&c.jsxs("li",{children:["• ",N.individualBills," individual staff bill",N.individualBills>1?"s":""]}),N.annexureGenerated&&c.jsx("li",{children:"• 1 annexure summary (all staff)"}),N.rosterListGenerated&&c.jsx("li",{children:"• 1 roster list (name, date, shift)"})]}),c.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"Check your downloads folder for all PDF files."})]})]}),b&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(In,{className:"w-8 h-8 text-red-600"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generation Failed"}),c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsx("p",{className:"text-sm text-red-700",children:b})})]})]}),c.jsx("div",{className:"border-t border-gray-200 p-6 flex-shrink-0",children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:e,disabled:d,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:N?"Close":"Cancel"}),!N&&!b&&c.jsx("button",{onClick:j,disabled:d||L()===0||m==="individual"&&!x,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:d?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Generating..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(vs,{className:"w-4 h-4"}),c.jsx("span",{children:m==="all"?"Generate All Reports":m==="individual"?"Generate Individual Bill":m==="annexure"?"Generate Annexure":"Generate Roster List"})]})}),(N||b)&&c.jsx("button",{onClick:()=>{w(null),_(null)},className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:"Generate Again"})]})})]})}),document.body):null};class yE{constructor(){zt(this,"printWindow",null);zt(this,"currentPrintIndex",0);zt(this,"pdfDocuments",[])}async generateCombinedPDF(e,t){const{month:r,year:i,entries:s,basicSalary:a,hourlyRate:o,shiftCombinations:l,reportTypes:u,selectedStaff:d}=e;this.pdfDocuments=[],this.currentPrintIndex=0;const p=["January","February","March","April","May","June","July","August","September","October","November","December"],m=s.filter(w=>{const b=new Date(w.date);return b.getMonth()===r&&b.getFullYear()===i});if(m.length===0)throw new Error(`No roster entries found for ${p[r]} ${i}`);let f=0;if(u.includes("individual")){const w=d||this.getUniqueStaffMembers(m);f+=w.length}u.includes("annexure")&&(f+=1),u.includes("roster")&&(f+=1);let x=0;const y=new it({orientation:"portrait",unit:"mm",format:"a4"});let N=!0;try{if(u.includes("individual")){const C=d||this.getUniqueStaffMembers(m);for(const T of C)x++,t==null||t({current:x,total:f,currentTask:`Generating bill for ${T}`,completed:!1}),N||y.addPage(),N=!1,await pp.generateBillContent(y,{staffName:T,month:r,year:i,entries:m,basicSalary:a,hourlyRate:o,shiftCombinations:l}),await new Promise(P=>setTimeout(P,100))}u.includes("annexure")&&(x++,t==null||t({current:x,total:f,currentTask:"Generating annexure summary",completed:!1}),N||y.addPage(),N=!1,await mp.generateAnnexureContent(y,{month:r,year:i,entries:m,hourlyRate:o,shiftCombinations:l}),await new Promise(C=>setTimeout(C,100))),u.includes("roster")&&(x++,t==null||t({current:x,total:f,currentTask:"Generating roster list",completed:!1}),N||y.addPage(),N=!1,await gp.generateRosterListContent(y,{month:r,year:i,entries:m})),t==null||t({current:f,total:f,currentTask:"Finalizing combined PDF...",completed:!1});const w=`Combined_Reports_${p[r]}_${i}.pdf`,b=y.output("blob"),_=URL.createObjectURL(b);window.open(_,"_blank"),t==null||t({current:f,total:f,currentTask:`Combined PDF opened in browser: ${w}`,completed:!0}),console.log("✅ Combined PDF generated successfully:",w)}catch(w){throw console.error("❌ Combined PDF generation failed:",w),t==null||t({current:x,total:f,currentTask:"Combined PDF generation failed",completed:!1,error:w instanceof Error?w.message:"Unknown error"}),w}}async generateAndPrintBatch(e,t){const{month:r,year:i,entries:s,basicSalary:a,hourlyRate:o,shiftCombinations:l,reportTypes:u,selectedStaff:d}=e;console.log("🖨️ Starting batch PDF generation for printing..."),this.pdfDocuments=[],this.currentPrintIndex=0;const p=["January","February","March","April","May","June","July","August","September","October","November","December"],m=s.filter(y=>{const N=new Date(y.date);return N.getMonth()===r&&N.getFullYear()===i});if(m.length===0)throw new Error(`No roster entries found for ${p[r]} ${i}`);let f=0;if(u.includes("individual")){const y=d||this.getUniqueStaffMembers(m);f+=y.length}u.includes("annexure")&&(f+=1),u.includes("roster")&&(f+=1);let x=0;try{if(u.includes("individual")){const N=d||this.getUniqueStaffMembers(m);for(const w of N){x++,t==null||t({current:x,total:f,currentTask:`Generating bill for ${w}`,completed:!1});const b=await this.generateIndividualBillPDF({staffName:w,month:r,year:i,entries:m,basicSalary:a,hourlyRate:o,shiftCombinations:l});this.pdfDocuments.push({doc:b,filename:`${w}_${p[r]}_${i}_Bill.pdf`}),await new Promise(_=>setTimeout(_,100))}}if(u.includes("annexure")){x++,t==null||t({current:x,total:f,currentTask:"Generating annexure summary",completed:!1});const N=await this.generateAnnexurePDF({month:r,year:i,entries:m,hourlyRate:o,shiftCombinations:l});this.pdfDocuments.push({doc:N,filename:`Annexure_${p[r]}_${i}.pdf`}),await new Promise(w=>setTimeout(w,100))}if(u.includes("roster")){x++,t==null||t({current:x,total:f,currentTask:"Generating roster list",completed:!1});const N=await this.generateRosterListPDF({month:r,year:i,entries:m});this.pdfDocuments.push({doc:N,filename:`Roster_List_${p[r]}_${i}.pdf`})}t==null||t({current:f,total:f,currentTask:"Opening print window...",completed:!1});const y=window.open("","_blank","width=1200,height=800,scrollbars=yes,resizable=yes");t==null||t({current:f,total:f,currentTask:"Print window opened",completed:!0})}catch(y){throw console.error("❌ Batch generation failed:",y),t==null||t({current:x,total:f,currentTask:"Print preparation failed",completed:!1,error:y instanceof Error?y.message:"Unknown error"}),y}}async displayAllPDFsInSingleTab(e){if(!e)throw new Error("Print window not provided");console.log(`🖨️ Displaying ${this.pdfDocuments.length} PDFs in single tab with menu bars`),await new Promise(t=>setTimeout(t,100)),e.document.write(`
      <html>
        <head>
          <title>Print Documents - ${this.pdfDocuments.length} Files</title>
          <style>
            body { 
              margin: 0; 
              padding: 0; 
              font-family: Arial, sans-serif; 
              background: #f5f5f5;
            }
            .document-section { 
              margin-bottom: 20px; 
              background: white;
              border-radius: 8px;
              overflow: hidden;
              box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }
            .document-header { 
              background: #4f46e5; 
              color: white; 
              padding: 12px 20px; 
              display: flex;
              justify-content: space-between;
              align-items: center;
              font-weight: 600;
            }
            .document-actions {
              display: flex;
              gap: 10px;
            }
            .action-btn {
              background: rgba(255,255,255,0.2);
              border: none;
              color: white;
              padding: 6px 12px;
              border-radius: 4px;
              cursor: pointer;
              font-size: 12px;
              font-weight: 500;
            }
            .action-btn:hover {
              background: rgba(255,255,255,0.3);
            }
            .pdf-content { 
              width: 100%; 
              height: 600px; 
              border: none; 
              background: white;
            }
            .main-header {
              background: #1f2937;
              color: white;
              padding: 20px;
              text-align: center;
              margin-bottom: 20px;
            }
            .main-actions {
              text-align: center;
              margin: 20px 0;
            }
            .main-btn {
              background: #10b981;
              color: white;
              border: none;
              padding: 12px 24px;
              border-radius: 8px;
              font-size: 16px;
              font-weight: 600;
              cursor: pointer;
              margin: 0 10px;
            }
            .main-btn:hover {
              background: #059669;
            }
            .close-btn {
              background: #6b7280;
            }
            .close-btn:hover {
              background: #4b5563;
            }
          </style>
        </head>
        <body>
          <div class="main-header">
            <h1>Print Preview - ${this.pdfDocuments.length} Documents</h1>
            <p>Each document has its own menu bar. Use the main Print All button or individual Print buttons.</p>
          </div>
          
          <div class="main-actions">
            <button onclick="window.close()" class="main-btn close-btn">
              Close Window
            </button>
          </div>
    `);for(let t=0;t<this.pdfDocuments.length;t++){const r=this.pdfDocuments[t],i=r.doc.output("datauristring");e.document.write(`
        <div class="document-section">
          <div class="document-header">
            <span>${r.filename}</span>
            <div class="document-actions">
              <button class="action-btn" onclick="
                const iframe = document.getElementById('pdf-${t}');
                const newWindow = window.open('', '_blank');
                newWindow.document.write('<html><head><title>${r.filename}</title></head><body style=\\'margin:0;padding:0\\'><object data=\\'${i}\\' type=\\'application/pdf\\' width=\\'100%\\' height=\\'100vh\\'></object><script>setTimeout(() => window.print(), 1000);<\/script></body></html>');
                newWindow.document.close();
              ">Print This</button>
              <button class="action-btn" onclick="
                const link = document.createElement('a');
                link.href = '${i}';
                link.download = '${r.filename}';
                (function() {
                  if(typeof document !== 'undefined') {
                    const link = document.createElement('a');
                    link.href = '${i}';
                    link.download = '${r.filename}';
                    link.click();
                  }
                })()
                  if(typeof window !== 'undefined') {
                    const newWindow = window.open('', '_blank', 'width=800,height=600,scrollbars=yes,resizable=yes');
                    if(newWindow) {
                      newWindow.document.write('<html><head><title>${r.filename}</title></head><body style=\\'margin:0;padding:0\\'><object data=\\'${i}\\' type=\\'application/pdf\\' width=\\'100%\\' height=\\'100vh\\'></object><script>setTimeout(function() { if(typeof window !== \\'undefined\\') { window.print(); } }, 1000);<\/script></body></html>');
                      newWindow.document.close();
                      newWindow.focus();
                    } else {
                      alert('Please allow popups to print individual documents');
                    }
                  }
                })()
      `)}e.document.write(`
        </body>
      </html>
    `),e.document.close(),e.focus()}async startBatchPrinting(){if(this.pdfDocuments.length===0)throw new Error("No PDFs to print");console.log(`🖨️ Starting batch printing of ${this.pdfDocuments.length} PDFs`),this.canUseBatchPrint()?await this.printAllAtOnce():await this.printSequentially()}canUseBatchPrint(){return typeof window.print=="function"&&!this.isMobileBrowser()}isMobileBrowser(){return/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}async printAllAtOnce(){console.log("🖨️ Using batch print method");const e=window.open("","_blank","width=800,height=600");if(!e)throw new Error("Could not open print window. Please allow popups.");await new Promise(t=>setTimeout(t,100)),e.document.write(`
      <html>
        <head>
          <title>Batch Print - ${this.pdfDocuments.length} Documents</title>
          <style>
            body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
            .pdf-container { margin: 0; padding: 0; page-break-after: always; width: 100%; height: 100vh; }
            .pdf-container:last-child { page-break-after: auto; }
            .pdf-content { width: 100%; height: 100%; border: none; background: white; padding: 0; margin: 0; }
            .header-info { display: block; }
            .print-buttons { display: block; text-align: center; margin: 20px 0; }
            @media print {
              .header-info { display: none !important; }
              .print-buttons { display: none !important; }
              .pdf-container { page-break-after: always; }
              .pdf-content { height: 100vh; width: 100%; margin: 0; padding: 0; }
              body { margin: 0; padding: 0; }
            }
          </style>
        </head>
        <body>
          <div class="header-info">
            <h1>Batch Print Preview - ${this.pdfDocuments.length} Documents</h1>
            <p>Click Print to print all documents. PDFs are embedded as HTML content for better printing compatibility.</p>
          </div>
          <div class="print-buttons">
            <button onclick="window.print()" style="padding: 10px 20px; font-size: 16px; background: #4f46e5; color: white; border: none; border-radius: 8px; cursor: pointer;">
              Print All Documents
            </button>
            <button onclick="window.close()" style="padding: 10px 20px; font-size: 16px; background: #6b7280; color: white; border: none; border-radius: 8px; cursor: pointer; margin-left: 10px;">
              Close
            </button>
          </div>
    `);for(let t=0;t<this.pdfDocuments.length;t++){const r=this.pdfDocuments[t],i=await this.convertPdfToHtml(r.doc);e.document.write(`
        <div class="pdf-container">
          <div class="pdf-content">
            ${i}
          </div>
        </div>
      `)}e.document.write(`
      </body>
      </html>
    `),e.document.close(),e.focus(),setTimeout(()=>{e&&!e.closed&&e.print()},1e3)}async convertPdfToHtml(e){try{const t=e.output("datauristring");return`
        <object data="${t}" type="application/pdf" width="100%" height="600px">
          <embed src="${t}" type="application/pdf" width="100%" height="600px" />
          <p>Your browser does not support PDF viewing. 
             <a href="${t}" download="document.pdf">Download the PDF</a> instead.
          </p>
        </object>
      `}catch(t){return console.error("Failed to convert PDF to HTML:",t),"<p>Error loading PDF content. Please try downloading instead.</p>"}}async printSequentially(){console.log("🖨️ Using sequential print method");const e=window.open("","_blank","width=800,height=600");if(!e)throw new Error("Could not open print window. Please allow popups.");e.document.write(`
      <html>
        <head>
          <title>Sequential Print - ${this.pdfDocuments.length} Documents</title>
          <style>
            body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
            .pdf-container { margin: 0; padding: 0; page-break-after: always; width: 100%; height: 100vh; }
            .pdf-container:last-child { page-break-after: auto; }
            .pdf-content { width: 100%; height: 100%; border: none; background: white; padding: 0; margin: 0; }
            .header-info { display: block; }
            .print-buttons { display: block; text-align: center; margin: 20px 0; }
            @media print {
              .header-info { display: none !important; }
              .print-buttons { display: none !important; }
              .pdf-container { page-break-after: always; }
              .pdf-content { height: 100vh; width: 100%; margin: 0; padding: 0; }
              body { margin: 0; padding: 0; }
            }
          </style>
        </head>
        <body>
          <div class="header-info">
            <h1>Print Preview - ${this.pdfDocuments.length} Documents</h1>
            <p>Click Print to print all documents sequentially.</p>
          </div>
          <div class="print-buttons">
            <button onclick="window.print()" style="padding: 10px 20px; font-size: 16px; background: #4f46e5; color: white; border: none; border-radius: 8px; cursor: pointer;">
              Print All Documents
            </button>
            <button onclick="window.close()" style="padding: 10px 20px; font-size: 16px; background: #6b7280; color: white; border: none; border-radius: 8px; cursor: pointer; margin-left: 10px;">
              Close
            </button>
          </div>
    `);for(let t=0;t<this.pdfDocuments.length;t++){const r=this.pdfDocuments[t],i=await this.convertPdfToHtml(r.doc);e.document.write(`
        <div class="pdf-container">
          <div class="pdf-content">
            ${i}
          </div>
        </div>
      `)}e.document.write(`
      </body>
      </html>
    `),e.document.close(),e.focus(),setTimeout(()=>{e&&!e.closed&&e.print()},1e3)}async generateIndividualBillPDF(e){const{individualBillGenerator:t}=await Jr(async()=>{const{individualBillGenerator:i}=await Promise.resolve().then(()=>dE);return{individualBillGenerator:i}},void 0),r=new it({orientation:"portrait",unit:"mm",format:"a4"});return await t.generateBillContent(r,e),r}async generateAnnexurePDF(e){const{annexureGenerator:t}=await Jr(async()=>{const{annexureGenerator:i}=await Promise.resolve().then(()=>hE);return{annexureGenerator:i}},void 0),r=new it({orientation:"portrait",unit:"mm",format:"a4"});return await t.generateAnnexureContent(r,e),r}async generateRosterListPDF(e){const{rosterListGenerator:t}=await Jr(async()=>{const{rosterListGenerator:i}=await Promise.resolve().then(()=>fE);return{rosterListGenerator:i}},void 0),r=new it({orientation:"portrait",unit:"mm",format:"a4"});return await t.generateRosterListContent(r,e),r}getUniqueStaffMembers(e){const t=new Set;return e.forEach(r=>{const i=r.assigned_name.replace(/\(R\)$/,"").trim();t.add(i)}),Array.from(t).sort()}cleanup(){this.printWindow&&!this.printWindow.closed&&this.printWindow.close(),this.pdfDocuments.forEach(e=>{}),this.pdfDocuments=[],this.currentPrintIndex=0}}const fx=new yE,vE=({isOpen:n,onClose:e,entries:t,basicSalary:r,hourlyRate:i,shiftCombinations:s})=>{const[a,o]=H.useState(new Date().getMonth()),[l,u]=H.useState(new Date().getFullYear()),[d,p]=H.useState(["individual","annexure","roster"]),[m,f]=H.useState([]),[x,y]=H.useState(!1),[N,w]=H.useState(null),[b,_]=H.useState(null),C=["January","February","March","April","May","June","July","August","September","October","November","December"],P=(()=>{const O=t.filter(X=>{const oe=new Date(X.date);return oe.getMonth()===a&&oe.getFullYear()===l}),G=new Set;return O.forEach(X=>{const oe=X.assigned_name.replace(/\(R\)$/,"").trim();G.add(oe)}),Array.from(G).sort()})(),A=(O,G)=>{p(G?X=>[...X,O]:X=>X.filter(oe=>oe!==O))},j=(O,G)=>{f(G?X=>[...X,O]:X=>X.filter(oe=>oe!==O))},I=()=>{f(P)},$=()=>{f([])},L=async()=>{if(d.length===0){_("Please select at least one report type");return}if(d.includes("individual")&&m.length===0){_("Please select at least one staff member for individual reports");return}y(!0),_(null),w(null);const O={month:a,year:l,entries:t,basicSalary:r,hourlyRate:i,shiftCombinations:s,reportTypes:d,selectedStaff:d.includes("individual")?m:void 0,combineIntoSinglePDF:!0};try{await fx.generateCombinedPDF(O,w)}catch(G){console.error("Batch print failed:",G);let X=G instanceof Error?G.message:"Failed to generate batch print";(X.includes("Unable to open print window")||X.includes("popup"))&&(X="Browser blocked the print window popup. Please disable your browser's popup blocker for this site and try again. You can usually do this by clicking the popup blocker icon in your address bar."),_(X)}finally{y(!1)}},M=()=>{x||(fx.cleanup(),e())};if(!n)return null;const D=c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Batch Print & Download"}),c.jsx("button",{onClick:M,disabled:x,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 disabled:opacity-50",children:c.jsx(Ar,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Select Month & Year"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),c.jsx("select",{value:a,onChange:O=>o(Number(O.target.value)),disabled:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",children:C.map((O,G)=>c.jsx("option",{value:G,children:O},G))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),c.jsx("select",{value:l,onChange:O=>u(Number(O.target.value)),disabled:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",children:Array.from({length:10},(O,G)=>new Date().getFullYear()-5+G).map(O=>c.jsx("option",{value:O,children:O},O))})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Report Types"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:d.includes("individual"),onChange:O=>A("individual",O.target.checked),disabled:x,className:"mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded disabled:opacity-50"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Individual Bills"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:d.includes("annexure"),onChange:O=>A("annexure",O.target.checked),disabled:x,className:"mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded disabled:opacity-50"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Annexure Summary"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:d.includes("roster"),onChange:O=>A("roster",O.target.checked),disabled:x,className:"mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded disabled:opacity-50"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Roster List"})]})]})]}),d.includes("individual")&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Staff"}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:I,disabled:x,className:"text-sm text-indigo-600 hover:text-indigo-800 disabled:opacity-50",children:"Select All"}),c.jsx("button",{onClick:$,disabled:x,className:"text-sm text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"Deselect All"})]})]}),c.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-3",children:P.length===0?c.jsx("p",{className:"text-sm text-gray-500",children:"No staff found for selected month"}):c.jsx("div",{className:"space-y-2",children:P.map(O=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:m.includes(O),onChange:G=>j(O,G.target.checked),disabled:x,className:"mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded disabled:opacity-50"}),c.jsx("span",{className:"text-sm text-gray-700",children:O})]},O))})})]}),N&&c.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[N.completed?c.jsx(Io,{className:"w-5 h-5 text-green-600"}):c.jsx(UN,{className:"w-5 h-5 text-blue-600 animate-spin"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.currentTask})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${N.current/N.total*100}%`}})}),c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[N.current," of ",N.total," tasks completed"]})]}),b&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Xm,{className:"w-5 h-5 text-red-600"}),c.jsx("span",{className:"text-sm text-red-800",children:b})]})})]}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[c.jsx("button",{onClick:M,disabled:x,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:x?"Processing...":"Cancel"}),c.jsxs("button",{onClick:L,disabled:x||d.length===0,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 text-white rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[c.jsx(Lw,{className:"w-4 h-4"}),c.jsx("span",{children:"Print PDF"})]})]})]})});return xn.createPortal(D,document.body)},xE=()=>{const[n,e]=H.useState([]),[t,r]=H.useState(!0),[i,s]=H.useState(null),[a,o]=H.useState("disconnected"),l=H.useRef(!0);H.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const u=m=>({code:m.code,name:m.name,title:m.title,salary:m.salary,employeeId:m.employee_id,firstName:m.first_name,surname:m.surname}),d=H.useCallback(async m=>{try{const f=m.map(u);console.log("🔄 Updating local auth codes with server data:",f.length,"entries"),await P6(f),console.log("✅ Local auth codes updated successfully")}catch(f){console.error("❌ Failed to update local auth codes:",f)}},[]),p=H.useCallback(async()=>{if(!ft){console.log("⚠️ Supabase not available, using local auth codes");const m=tr.filter(f=>f.name!=="ADMIN").map(f=>({id:f.code,code:f.code,name:f.name,title:f.title||"MIT",salary:f.salary||0,employee_id:f.employeeId||"",first_name:f.firstName||"",surname:f.surname||f.name,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_updated_by:"LOCAL"}));console.log("📋 Local staff members:",m.length),l.current&&(e(m),s("Using local staff data - database not available"),r(!1));return}try{s(null),console.log("🔄 Loading staff members from Supabase...");const{data:m,error:f}=await ft.from("staff_members").select("*").order("surname",{ascending:!0});if(f)throw new Error(f.message);console.log("✅ Loaded staff members from Supabase:",(m==null?void 0:m.length)||0),l.current&&(e(m||[]),console.log("📋 Setting staff members state:",(m==null?void 0:m.length)||0),m&&m.length>0&&await d(m))}catch(m){if(console.error("❌ Error loading staff members:",m),l.current){s(m instanceof Error?m.message:"Failed to load staff members");const f=tr.filter(x=>x.name!=="ADMIN").map(x=>({id:x.code,code:x.code,name:x.name,title:x.title||"MIT",salary:x.salary||0,employee_id:x.employeeId||"",first_name:x.firstName||"",surname:x.surname||x.name,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_updated_by:"LOCAL"}));console.log("📋 Fallback to local staff members:",f.length),e(f)}}finally{l.current&&r(!1)}},[d]);return H.useEffect(()=>{if(!ft){console.log("⚠️ Supabase not available for real-time staff updates");return}console.log("📡 Setting up staff real-time subscription..."),o("connecting");const m=ft.channel("staff_changes").on("postgres_changes",{event:"*",schema:"public",table:"staff_members"},async f=>{try{if(console.log("📡 Staff real-time update received:",f),!l.current){console.log("⚠️ Component unmounted, ignoring staff real-time update");return}if(f.eventType==="INSERT"&&f.new){const x=f.new;e(y=>{if(!y.some(w=>w.id===x.id)){const w=[...y,x].sort((b,_)=>b.surname.localeCompare(_.surname));return d(w),w}return y})}else if(f.eventType==="UPDATE"&&f.new){const x=f.new;e(y=>{let N;return y.some(b=>b.id===x.id)?N=y.map(b=>b.id===x.id?x:b):N=[...y,x],N=N.sort((b,_)=>b.surname.localeCompare(_.surname)),d(N),N})}else if(f.eventType==="DELETE"&&f.old){const x=f.old;e(y=>{const N=y.filter(w=>w.id!==x.id);return d(N),N})}window.dispatchEvent(new CustomEvent("staffRealtimeUpdate",{detail:f}))}catch(x){console.error("❌ Error handling staff real-time update:",x)}}).subscribe(f=>{console.log("📡 Staff real-time subscription status:",f),l.current&&(f==="SUBSCRIBED"?(o("connected"),console.log("✅ Staff real-time connection established")):f==="CHANNEL_ERROR"?(o("error"),console.log("❌ Staff real-time connection error")):f==="TIMED_OUT"?(o("error"),console.log("⏰ Staff real-time connection timed out")):f==="CLOSED"&&(o("disconnected"),console.log("🔌 Staff real-time connection closed")))});return p(),()=>{console.log("🧹 Cleaning up staff real-time subscription..."),ft.removeChannel(m)}},[p,d]),{staffMembers:n,loading:t,error:i,realtimeStatus:a,loadStaffMembers:p}},wE=async()=>{if(!ft)return[];try{const{data:n,error:e}=await ft.from("staff_members").select("*").order("surname",{ascending:!0});return e?[]:n||[]}catch{return[]}},Ug=async(n,e)=>{if(!ft)throw new Error("Database not available.");try{const t={...n,last_updated_by:e},{data:r,error:i}=await ft.from("staff_members").upsert([t],{onConflict:"code"}).select().single();if(i)throw new Error(`Failed to add staff member: ${i.message}`);if(r&&!r.name.includes("(R)")){const s=`${r.name}(R)`,o={code:`${r.code}R`,name:s,title:r.title,salary:r.salary,employee_id:r.employee_id,first_name:r.first_name,surname:r.surname,is_active:!0,last_updated_by:e},{data:l,error:u}=await ft.from("staff_members").upsert([o],{onConflict:"code"}).select().single()}return window.dispatchEvent(new CustomEvent("staffMemberAdded",{detail:r})),r}catch(t){throw t}},n_=async(n,e,t)=>{if(!ft)throw new Error("Database not available.");try{const r={...e,last_updated_by:t,updated_at:new Date().toISOString()},{data:i,error:s}=await ft.from("staff_members").update(r).eq("id",n).select().single();if(s)throw new Error(`Failed to update staff member: ${s.message}`);return window.dispatchEvent(new CustomEvent("staffMemberUpdated",{detail:i})),i}catch(r){throw r}},r_=async(n,e)=>{if(!ft)throw new Error("Database not available.");try{const{data:t,error:r}=await ft.from("staff_members").select("*").eq("id",n).single();if(r)throw new Error(`Failed to fetch staff member: ${r.message}`);const{data:i,error:s}=await ft.from("staff_members").delete().eq("id",n).select().single();if(s)throw new Error(`Failed to delete staff member: ${s.message}`);if(t&&!t.name.includes("(R)")){const a=`${t.name}(R)`,{data:o,error:l}=await ft.from("staff_members").select("*").eq("name",a).maybeSingle();!l&&o&&await ft.from("staff_members").delete().eq("name",a).select().single()}else if(t&&t.name.includes("(R)")){const a=t.name.replace("(R)",""),{data:o,error:l}=await ft.from("staff_members").select("*").eq("name",a).maybeSingle();!l&&o&&await ft.from("staff_members").delete().eq("name",a).select().single()}window.dispatchEvent(new CustomEvent("staffMemberDeleted",{detail:{id:n,deletedStaff:i}}))}catch(t){throw t}},bE=Object.freeze(Object.defineProperty({__proto__:null,addStaffMember:Ug,deleteStaffMember:r_,fetchStaffMembers:wE,updateStaffMember:n_},Symbol.toStringTag,{value:"Module"})),SE=({isOpen:n,onClose:e,isAdminAuthenticated:t,adminName:r})=>{const{staffMembers:i,loading:s,error:a,realtimeStatus:o,loadStaffMembers:l}=xE(),[u,d]=H.useState(null),[p,m]=H.useState(!1),[f,x]=H.useState({code:"",title:"MIT",salary:0,employeeId:"",firstName:"",surname:"",name:""}),[y,N]=H.useState({}),[w,b]=H.useState(!1),[_,C]=H.useState(null),[T,P]=H.useState(""),[A,j]=H.useState(!1),[I,$]=H.useState(""),L=async()=>{if(!t){alert("Admin authentication required");return}j(!0);try{const q=[{code:"B165",name:"BHEKUR",title:"MIT",salary:47510,employeeId:"B1604812300915",firstName:"Yashdev",surname:"BHEKUR"},{code:"B196",name:"BHOLLOORAM",title:"MIT",salary:47510,employeeId:"B1911811805356",firstName:"Sawan",surname:"BHOLLOORAM"},{code:"D28B",name:"DHUNNY",title:"MIT",salary:30060,employeeId:"D280487461277B",firstName:"Leelarvind",surname:"DHUNNY"},{code:"D07D",name:"DOMUN",title:"SMIT",salary:59300,employeeId:"D070273400031D",firstName:"Sheik Ahmad Shamir",surname:"DOMUN"},{code:"H301",name:"FOKEERCHAND",title:"MIT",salary:37185,employeeId:"H3003861200061",firstName:"Needeema",surname:"FOKEERCHAND"},{code:"S069",name:"GHOORAN",title:"MIT",salary:48810,employeeId:"S0607814601039",firstName:"Bibi Shafinaaz",surname:"SAMTALLY-GHOORAN"},{code:"H13D",name:"HOSENBUX",title:"MIT",salary:48810,employeeId:"H130381180129D",firstName:"Zameer",surname:"HOSENBUX"},{code:"J149",name:"JUMMUN",title:"MIT",salary:47510,employeeId:"J1403792600909",firstName:"Bibi Nawsheen",surname:"JUMMUN"},{code:"M17G",name:"MAUDHOO",title:"MIT",salary:38010,employeeId:"M170380260096G",firstName:"Chandanee",surname:"MAUDHOO"},{code:"N28C",name:"NARAYYA",title:"MIT",salary:38010,employeeId:"N280881240162C",firstName:"Viraj",surname:"NARAYYA"},{code:"P09A",name:"PITTEA",title:"SMIT",salary:59300,employeeId:"P091171190413A",firstName:"Soubiraj",surname:"PITTEA"},{code:"R16G",name:"RUNGADOO",title:"SMIT",salary:59300,employeeId:"R210572400118G",firstName:"Manee",surname:"RUNGADOO"},{code:"T16G",name:"TEELUCK",title:"SMIT",salary:59300,employeeId:"",firstName:"",surname:"TEELUCK"},{code:"V160",name:"VEERASAWMY",title:"SMIT",salary:59300,employeeId:"V1604664204410",firstName:"Goindah",surname:"VEERASAWMY"},{code:"B16R",name:"BHEKUR(R)",title:"MIT",salary:47510,employeeId:"B16048123000915",firstName:"Yashdev",surname:"BHEKUR"},{code:"B19R",name:"BHOLLOORAM(R)",title:"MIT",salary:47510,employeeId:"B19118118005356",firstName:"Sawan",surname:"BHOLLOORAM"},{code:"D28R",name:"DHUNNY(R)",title:"MIT",salary:30060,employeeId:"0280876127778",firstName:"Leetarvind",surname:"DHUNNY"},{code:"D07R",name:"DOMUN(R)",title:"SMIT",salary:59300,employeeId:"D07027340003110",firstName:"Shamir",surname:"DOMUN"},{code:"H30R",name:"FOKEERCHAND(R)",title:"MIT",salary:37185,employeeId:"H30038612000061",firstName:"Needeema",surname:"FOKEERCHAND"},{code:"H13R",name:"HOSENBUX(R)",title:"MIT",salary:48810,employeeId:"H13038118012901",firstName:"Zameer",surname:"HOSENBUX"},{code:"S06R",name:"GHOORAN(R)",title:"MIT",salary:48810,employeeId:"S06781460103939",firstName:"Bibi Sharinaaz",surname:"SAMTALLY-GHOORAN"},{code:"J14R",name:"JUMMUN(R)",title:"MIT",salary:47510,employeeId:"J14037926000909",firstName:"Bibi Nawsheen",surname:"JUMMUN"},{code:"M17R",name:"MAUDHOO(R)",title:"MIT",salary:38010,employeeId:"M17038026006966",firstName:"Chandanee",surname:"MAUDHOO"},{code:"N28R",name:"NARAYYA(R)",title:"MIT",salary:38010,employeeId:"N280881240162C",firstName:"Viraj",surname:"NARAYYA"},{code:"P09R",name:"PITTEA(R)",title:"SMIT",salary:59300,employeeId:"P09117119004134",firstName:"Subiraj",surname:"PITTEA"},{code:"R21R",name:"RUNGADOO(R)",title:"SMIT",salary:59300,employeeId:"R21057240011866",firstName:"Manee",surname:"RUNGADOO"},{code:"T16R",name:"TEELUCK(R)",title:"SMIT",salary:59300,employeeId:"",firstName:"",surname:"TEELUCK"},{code:"V16R",name:"VEERASAWMY(R)",title:"SMIT",salary:59300,employeeId:"V16046642044100",firstName:"Goindah",surname:"VEERASAWMY"}].filter(Z=>!Z.name.includes("(R)"));let Y=0;for(const Z of q)try{await Ug({code:Z.code,name:Z.name,title:Z.title,salary:Z.salary,employee_id:Z.employeeId,first_name:Z.firstName,surname:Z.surname,is_active:!0,last_updated_by:r||"ADMIN"},r||"ADMIN"),Y++}catch{}await l(),$(`Successfully imported ${Y} staff members to database!`),setTimeout(()=>$(""),5e3)}catch(E){alert(`Failed to import staff data: ${E instanceof Error?E.message:"Unknown error"}`)}finally{j(!1)}};H.useEffect(()=>{n&&M()},[n]),H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]);const M=()=>{x({code:"",title:"MIT",salary:0,employeeId:"",firstName:"",surname:"",name:""}),N({}),d(null),m(!1)},D=()=>{const E={};return f.code.trim()?f.code.length<3?E.code="Code must be at least 3 characters":i.some(q=>q.code===f.code&&q.code!==(u==null?void 0:u.code))&&(E.code="Code already exists"):E.code="Code is required",f.surname.trim()||(E.surname="Surname is required"),f.salary<0&&(E.salary="Salary must be positive"),N(E),Object.keys(E).length===0},O=()=>{M(),m(!0)},G=E=>{d(E),x({code:E.code,title:E.title,salary:E.salary,employeeId:E.employee_id,firstName:E.first_name,surname:E.surname,name:E.name}),m(!0)},X=E=>{if(E.code==="5274"){alert("Cannot delete ADMIN account");return}C("delete"),P(`Are you sure you want to delete ${E.name}? This action cannot be undone.`),d(E),b(!0)},oe=()=>{D()&&(C("save"),P(u?`Save changes to ${f.name||f.surname}?`:`Add new staff member ${f.surname}?`),b(!0))},J=async()=>{j(!0);try{if(_==="save"){const E={code:f.code,name:f.name||f.surname,title:f.title,salary:f.salary,employee_id:f.employeeId,first_name:f.firstName,surname:f.surname,last_updated_by:r||"ADMIN"};u?(await n_(u.id,E,r||"ADMIN"),$(`${f.name||f.surname} updated successfully!`)):(await Ug({...E,is_active:!0,last_updated_by:r||"ADMIN"},r||"ADMIN"),$(`${f.surname} added successfully!`)),await l(),M()}else _==="delete"&&u&&(await r_(u.id,r||"ADMIN"),$(`${u.name} deleted successfully!`),await l(),M());setTimeout(()=>$(""),3e3)}catch(E){alert(`Failed to save changes: ${E instanceof Error?E.message:"Unknown error"}`)}finally{j(!1),b(!1),C(null)}},ie=()=>{b(!1),C(null),P("")},ae=(E,q)=>{x(Y=>({...Y,[E]:q})),y[E]&&N(Y=>({...Y,[E]:""}))};if(!n)return null;const Ne=i.filter(E=>E.name!=="ADMIN"&&!E.name.includes("(R)"));return xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",style:{display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"16px",paddingTop:"8px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},onClick:E=>{E.target===E.currentTarget&&!w&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxWidth:"90vw",maxHeight:"95vh",margin:"8px 0",userSelect:"none",WebkitUserSelect:"none"},onClick:E=>E.stopPropagation(),children:[c.jsx("div",{className:"border-b border-gray-200 flex-shrink-0 p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:c.jsx(Br,{className:`w-6 h-6 ${o==="connected"?"text-green-600":o==="connecting"?"text-yellow-600":o==="error"?"text-red-600":"text-gray-600"}`})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Staff Management"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Manage staff details and authentication codes",o==="connected"&&c.jsx("span",{className:"text-green-600 ml-2",children:"• Live sync active"}),o==="error"&&c.jsx("span",{className:"text-red-600 ml-2",children:"• Sync error"})]})]})]}),c.jsx("button",{onClick:e,disabled:w,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 disabled:opacity-50",children:c.jsx(Ar,{className:"w-5 h-5"})})]})}),I&&c.jsx("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Io,{className:"w-5 h-5 text-green-600"}),c.jsx("span",{className:"text-green-800 font-medium",children:I})]})}),a&&c.jsx("div",{className:"mx-6 mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(In,{className:"w-5 h-5 text-amber-600"}),c.jsx("span",{className:"text-amber-800 font-medium",children:a})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:p?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:u?"Edit Staff Member":"Add New Staff Member"}),c.jsx("button",{onClick:M,className:"text-gray-600 hover:text-gray-800 transition-colors duration-200",children:c.jsx(Ar,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code *"}),c.jsx("input",{type:"text",value:f.code,onChange:E=>ae("code",E.target.value.toUpperCase()),disabled:!t,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono ${y.code?"border-red-500":"border-gray-300"}`,placeholder:"Enter unique code"}),y.code&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.code})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),c.jsxs("select",{value:f.title,onChange:E=>ae("title",E.target.value),disabled:!t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"MIT",children:"MIT"}),c.jsx("option",{value:"SMIT",children:"SMIT"}),c.jsx("option",{value:"R",children:"R"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Surname *"}),c.jsx("input",{type:"text",value:f.surname,onChange:E=>ae("surname",E.target.value),disabled:!t,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${y.surname?"border-red-500":"border-gray-300"}`,placeholder:"Enter surname"}),y.surname&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.surname})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),c.jsx("input",{type:"text",value:f.firstName,onChange:E=>ae("firstName",E.target.value),disabled:!t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter first name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),c.jsx("input",{type:"text",value:f.employeeId,onChange:E=>ae("employeeId",E.target.value),disabled:!t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"Enter employee ID"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Salary (Rs)"}),c.jsx("input",{type:"number",value:f.salary,onChange:E=>ae("salary",Number(E.target.value)),disabled:!t,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${y.salary?"border-red-500":"border-gray-300"}`,placeholder:"Enter salary",min:"0"}),y.salary&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.salary})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{onClick:M,disabled:!t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:oe,disabled:!t||A,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:A?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Saving..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(VN,{className:"w-4 h-4"}),c.jsx("span",{children:"Save Changes"})]})})]})]}):c.jsxs("div",{className:"space-y-4",children:[s&&c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-yellow-200 border-t-yellow-600 rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Loading staff data..."})]}),!s&&c.jsx("div",{className:"flex justify-between items-center",children:c.jsxs("div",{className:"w-full",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Staff Members (",Ne.length,")"]}),c.jsx("div",{className:"flex space-x-2",children:c.jsxs("button",{onClick:O,disabled:!t,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors duration-200",children:[c.jsx(Q2,{className:"w-4 h-4"}),c.jsx("span",{children:"Add New"})]})})]}),a&&typeof a=="string"&&a.includes("does not exist")||i.length===0||c.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(In,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:a&&typeof a=="string"&&a.includes("does not exist")?"Database Setup Required":i.length===0?"Import Staff Data":"Re-import Staff Data"}),c.jsx("p",{className:"text-sm text-blue-700 mb-3",children:a&&typeof a=="string"&&a.includes("does not exist")?"The staff_members table doesn't exist yet. Follow these steps to enable shared staff management:":i.length===0?"Import the local staff data into the Supabase database to enable shared staff management:":"Re-import the latest staff data (including updated salaries) to refresh the database:"}),a&&typeof a=="string"&&a.includes("does not exist")&&c.jsxs(c.Fragment,{children:[c.jsxs("ol",{className:"text-sm text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Go to your Supabase dashboard"}),c.jsx("li",{children:"Open the SQL Editor"}),c.jsx("li",{children:"Copy and paste the SQL code below"}),c.jsx("li",{children:'Click "Run" to create the table'}),c.jsx("li",{children:'Come back here and click "Import Staff Data"'})]}),c.jsx("div",{className:"mt-3 p-3 bg-white border border-blue-300 rounded font-mono text-xs overflow-x-auto",children:c.jsx("pre",{children:`-- Create staff_members table
CREATE TABLE IF NOT EXISTS staff_members (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  code text UNIQUE NOT NULL,
  name text NOT NULL,
  title text DEFAULT 'MIT',
  salary integer DEFAULT 0,
  employee_id text DEFAULT '',
  first_name text DEFAULT '',
  surname text NOT NULL,
  is_active boolean DEFAULT true,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now(),
  last_updated_by text DEFAULT 'SYSTEM'
);

-- Enable RLS
ALTER TABLE staff_members ENABLE ROW LEVEL SECURITY;

-- Allow all operations
CREATE POLICY "Allow all operations on staff members" 
ON staff_members FOR ALL USING (true);

-- Create update trigger
CREATE OR REPLACE FUNCTION update_staff_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = now();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_staff_members_updated_at
  BEFORE UPDATE ON staff_members
  FOR EACH ROW
  EXECUTE FUNCTION update_staff_updated_at();`})})]}),c.jsx("button",{onClick:L,disabled:!t||A,className:"mt-3 w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:A?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Q2,{className:"w-4 h-4"}),c.jsx("span",{children:"Import Staff Data to Database"})]})})]})]})})]})}),!s&&c.jsx("div",{className:"space-y-3",children:Ne.map(E=>c.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:c.jsxs("div",{className:"flex flex-col space-y-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-200 px-2 py-1 rounded",children:E.code}),c.jsx("span",{className:"font-semibold text-gray-900",children:E.name}),c.jsx("span",{className:"text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded",children:E.title})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-600",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Full Name:"})," ",E.first_name," ",E.surname]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Salary:"})," Rs ",E.salary.toLocaleString()]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("span",{className:"font-medium",children:"Employee ID:"})," ",E.employee_id||"Not set"]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 pt-2 border-t border-gray-200",children:[c.jsxs("button",{onClick:()=>G(E),disabled:!t,className:"w-full sm:flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 text-sm",children:[c.jsx(Mw,{className:"w-4 h-4"}),c.jsx("span",{children:"Edit"})]}),c.jsxs("button",{onClick:()=>X(E),disabled:!t,className:"w-full sm:flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200 text-sm",children:[c.jsx(xs,{className:"w-4 h-4"}),c.jsx("span",{children:"Delete"})]})]})]})},E.code))})]})}),w&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-4",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx(In,{className:"w-6 h-6 text-amber-600"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Action"})]}),c.jsx("p",{className:"text-gray-700 mb-6",children:T}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:ie,disabled:A,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:J,disabled:A,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:A?"Processing...":"Confirm"})]})]})})]})}),document.body)},px=({setActiveTab:n,onOpenCalendarExportModal:e,selectedDate:t,onDateChange:r})=>{const[i,s]=H.useState("table"),[a,o]=H.useState("all"),[l,u]=H.useState(t||new Date);H.useEffect(()=>{t&&u(t)},[t]);const d=Oe=>{u(Oe),r&&r(Oe)},[p,m]=H.useState(null),[f,x]=H.useState(!1),[y,N]=H.useState(""),[w,b]=H.useState(0),[_,C]=H.useState([]),[T,P]=H.useState(!1),[A,j]=H.useState(!1),[I,$]=H.useState(""),[L,M]=H.useState(""),[D,O]=H.useState(!1),[G,X]=H.useState("all"),[oe,J]=H.useState(new Date().getMonth()),[ie,ae]=H.useState(new Date().getFullYear()),[Ne,E]=H.useState(!1),[q,Y]=H.useState(null),[Z,te]=H.useState(!1),[ce,ge]=H.useState(""),[de,_e]=H.useState(""),[Te,ze]=H.useState(!1),[Ie,nt]=H.useState(null),[we,Q]=H.useState(!1),[st,qe]=H.useState(!1),[Le,Me]=H.useState(!1),[ee,he]=H.useState(!1),[xe,ke]=H.useState(!1),{entries:Ae,loading:Ze,error:Be,loadEntries:rt,realtimeStatus:Ve}=uC();H.useEffect(()=>{O(!1),j(!1),$(""),M(""),te(!1),ge(""),_e(""),console.log("🔄 RosterPanel: Forcing loading states to false on mount"),console.log("🔄 RosterPanel: Reset all loading states on mount")},[]),H.useEffect(()=>((Z||A||T)&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[Z,A,T]),H.useEffect(()=>{Ae&&C(Ae)},[Ae]);const ut=Oe=>{N(Oe),x(!0),setTimeout(()=>x(!1),3e3)},We=async Oe=>{try{if(console.log("📄 Starting PDF import with",Oe.length,"entries..."),Oe.length>0){const Fe=new Date(Oe[0].date),$e=Fe.getMonth(),Ue=Fe.getFullYear();console.log(`📅 Navigating to imported month immediately: ${$e+1}/${Ue}`);const Ke=new Date(Ue,$e,1);d(Ke),console.log(`📅 Forcing child components to navigate to: ${$e+1}/${Ue}`),b(Tt=>Tt+1),window.dispatchEvent(new CustomEvent("navigateToMonth",{detail:{month:$e,year:Ue}})),await new Promise(Tt=>setTimeout(Tt,200))}window.batchImportMode=!0,window.disableAutoScroll=!0,window.batchImportStats={count:0,staffName:Ie||"Unknown",dates:new Set};let kt=0,ht=0;for(const Fe of Oe)try{await cy(Fe,"PDF Import"),kt++}catch($e){console.error("❌ Failed to import entry:",Fe,$e),ht++}window.batchImportMode=!1,window.disableAutoScroll=!1;const me=window.batchImportStats;me&&me.count>0&&Bn(me.count,me.staffName,me.dates.size),window.batchImportStats=null,await rt(),b(Fe=>Fe+1),ut(`PDF import completed: ${kt} entries added${ht>0?`, ${ht} failed`:""}`)}catch(kt){console.error("❌ PDF import failed:",kt),window.batchImportMode=!1,window.batchImportStats=null;const ht=kt instanceof Error?kt.message:"Unknown error occurred";alert(`PDF import failed: ${ht}

Please check:
• PDF file format
• Network connection
• Database access`)}},Yt=async()=>{console.log("🗑️ Starting clear database operation..."),O(!0),M("");try{console.log(`🗑️ Starting ${G} database clear operation...`),G==="all"?(console.log("🗑️ Clearing ALL roster entries..."),await VA(),console.log("✅ All entries cleared successfully")):(console.log(`🗑️ Clearing ${oe+1}/${ie} entries...`),await GA(ie,oe),console.log(`✅ Month ${oe+1}/${ie} cleared successfully`)),console.log("🔄 Refreshing data after clear..."),await rt(),b(ht=>ht+1),console.log("✅ Data refresh completed"),O(!1),console.log("✅ Loading state reset to false");const kt=G==="all"?"Database cleared successfully!":`${["January","February","March","April","May","June","July","August","September","October","November","December"][oe]} ${ie} data cleared successfully!`;ut(kt),setTimeout(()=>{j(!1),$(""),X("all"),O(!1),console.log("✅ Modal closed and all states reset")},100)}catch(Oe){console.error("❌ Failed to clear database:",Oe),O(!1),console.log("❌ Loading state reset to false after error"),M("Failed to clear database. Please try again.")}},Nt=()=>{console.log("❌ Clear operation cancelled by user"),O(!1),j(!1),X("all"),$(""),M(""),console.log("✅ All clear states reset after cancel")},$n=()=>{const Oe=ui(ce);if(!Oe||!Ks(ce)){_e(Oe?"Admin access required":"Invalid authentication code");return}ze(!0),nt(Oe),te(!1),_e(""),ge(""),E(!0)},Et=()=>{te(!1),ge(""),_e("")},Mt=async()=>{Q(!0);try{console.log("📄 Starting PDF export...");const Oe=l.getMonth(),kt=l.getFullYear();await uE.exportToPDF({entries:_,month:Oe,year:kt,title:"X-ray ANWH Roster"}),ut("PDF exported successfully! Check your downloads folder."),console.log("✅ PDF export completed")}catch(Oe){console.error("❌ PDF export failed:",Oe),alert("Failed to export PDF. Please try again.")}finally{Q(!1)}},Bn=(Oe,kt,ht)=>{const me=document.createElement("div");me.style.cssText=`
      position: fixed;
      top: 80px;
      right: 20px;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 20px 24px;
      border-radius: 16px;
      box-shadow: 0 12px 30px rgba(16, 185, 129, 0.5);
      z-index: 999999;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      font-size: 15px;
      font-weight: 600;
      max-width: 380px;
      animation: slideInRight 0.4s ease-out;
      border: 3px solid rgba(255, 255, 255, 0.3);
    `,me.innerHTML=`
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
        <div style="width: 12px; height: 12px; background: white; border-radius: 50%; opacity: 0.9;"></div>
        <strong style="font-size: 17px;">PDF Import Complete</strong>
      </div>
      <div style="font-size: 14px; line-height: 1.5; opacity: 0.95;">
        <strong>${Oe} entries</strong> imported for <strong>${kt}</strong><br>
        📅 <strong>${ht} dates</strong> updated in calendar<br>
        🎯 Navigated to imported month
      </div>
    `,document.body.appendChild(me),setTimeout(()=>{document.body.contains(me)&&(me.style.animation="slideInRight 0.4s ease-out reverse",setTimeout(()=>{document.body.contains(me)&&document.body.removeChild(me)},400))},5e3)};return c.jsxs("div",{className:"bg-white",style:{width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",paddingTop:"0px"},children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Roster Management"})}),c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("button",{onClick:()=>P(!0),...jc({onLongPress:()=>te(!0),delay:800}),className:"p-3 rounded-full bg-indigo-100 hover:bg-indigo-200 text-indigo-600 transition-colors duration-200 relative z-50 flex items-center justify-center",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent",position:"relative",zIndex:50,transform:"translate3d(0,0,0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",WebkitTransform:"translate3d(0,0,0)",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"},title:Te?"Import from PDF (authenticated)":"Import from PDF (long press for more options)",children:c.jsx(Zm,{className:"w-6 h-6"})})})]})}),f&&c.jsx("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Io,{className:"w-5 h-5 text-green-600"}),c.jsx("span",{className:"text-green-800 font-medium",children:y})]})}),Be&&c.jsx("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:Be})}),c.jsx("div",{className:"bg-white border-b border-gray-200",children:c.jsxs("div",{className:"flex",children:[c.jsxs("button",{onClick:()=>s("table"),className:`flex-1 px-6 py-4 font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${i==="table"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-gray-600"}`,children:[c.jsx(ZN,{className:"w-4 h-4"}),c.jsx("span",{children:"Table View"})]}),c.jsxs("button",{onClick:()=>s("card"),className:`flex-1 px-6 py-4 font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${i==="card"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-gray-600"}`,children:[c.jsx(ON,{className:"w-4 h-4"}),c.jsx("span",{children:"Card View"})]}),c.jsxs("button",{onClick:()=>s("log"),className:`flex-1 px-6 py-4 font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${i==="log"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-gray-600"}`,children:[c.jsx(es,{className:"w-4 h-4"}),c.jsx("span",{children:"Log View"})]})]})}),c.jsx("div",{className:"p-6",children:i==="table"?c.jsx(yC,{entries:_,loading:Ze&&_.length===0,realtimeStatus:Ve,onRefresh:rt,selectedDate:l,onDateChange:d,onExportToCalendar:e,setActiveTab:n}):i==="card"?c.jsx(bC,{entries:_,loading:Ze,realtimeStatus:Ve,onRefresh:rt,selectedDate:l,onDateChange:d}):i==="log"?c.jsx(SC,{entries:_,loading:Ze&&_.length===0,selectedDate:l}):null}),c.jsx(CC,{isOpen:T,onClose:()=>P(!1),onImport:We,isAdminAuthenticated:Te,adminName:Ie}),A&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",style:{display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{maxWidth:window.innerWidth>window.innerHeight?"98vw":"28rem",maxHeight:window.innerWidth>window.innerHeight?"98vh":"none",margin:window.innerWidth>window.innerHeight?"2px 0":"16px 0"},children:c.jsxs("div",{style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(xs,{className:"w-6 h-6 text-red-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:G==="all"?"Clear Entire Database":"Clear Month Data"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clear Type"}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"all",checked:G==="all",onChange:Oe=>X(Oe.target.value),className:"mr-2"}),c.jsx("span",{className:"text-sm",children:"All Data"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"month",checked:G==="month",onChange:Oe=>X(Oe.target.value),className:"mr-2"}),c.jsx("span",{className:"text-sm",children:"Specific Month"})]})]})]}),G==="month"&&c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),c.jsx("select",{value:oe,onChange:Oe=>J(Number(Oe.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((Oe,kt)=>c.jsx("option",{value:kt,children:Oe},kt))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),c.jsx("select",{value:ie,onChange:Oe=>ae(Number(Oe.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:Array.from({length:10},(Oe,kt)=>new Date().getFullYear()-5+kt).map(Oe=>c.jsx("option",{value:Oe,children:Oe},Oe))})]})]})}),c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(In,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-red-800 font-medium mb-2",children:["⚠️ DANGER: This will permanently delete ",G==="all"?"ALL roster entries":`all entries for ${["January","February","March","April","May","June","July","August","September","October","November","December"][oe]} ${ie}`,"!"]}),c.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[G==="all"?c.jsxs(c.Fragment,{children:[c.jsx("li",{children:"• All dates and shift assignments"}),c.jsx("li",{children:"• All edit history and logs"}),c.jsx("li",{children:"• All imported data"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("li",{children:["• All shifts for ",["January","February","March","April","May","June","July","August","September","October","November","December"][oe]," ",ie]}),c.jsx("li",{children:"• All edit history for that month"}),c.jsx("li",{children:"• All staff assignments for that month"})]}),c.jsx("li",{children:"• This action CANNOT be undone!"})]})]})]})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:Nt,disabled:D,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:Yt,disabled:D,className:`flex-1 px-4 py-3 ${G==="all"?"bg-red-600 hover:bg-red-700":"bg-orange-600 hover:bg-orange-700"} disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2`,children:D?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:G==="all"?"Clearing all data...":"Clearing month..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(xs,{className:"w-4 h-4"}),c.jsx("span",{children:G==="all"?"Clear Database":"Clear Month"})]})})]}),L&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:L})})]})})}),document.body),Z&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:window.innerWidth>window.innerHeight?"flex-start":"center",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"8px":"16px",paddingTop:window.innerWidth>window.innerHeight?"4px":"16px",overflow:"auto",overflowY:"auto",touchAction:"pan-y",WebkitOverflowScrolling:"touch"},onClick:Oe=>{Oe.target===Oe.currentTarget&&Et()},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{userSelect:"none",WebkitUserSelect:"none",maxHeight:window.innerWidth>window.innerHeight?"95vh":"90vh",maxWidth:window.innerWidth>window.innerHeight?"90vw":"28rem",display:"flex",flexDirection:"column",backgroundColor:"#ffffff",zIndex:2147483647,touchAction:"auto",overflow:"hidden",margin:window.innerWidth>window.innerHeight?"4px 0":"16px 0"},onClick:Oe=>{Oe.stopPropagation()},children:c.jsxs("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px"},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Admin Authentication Required"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex space-x-3 mb-3",children:[0,1,2,3].map(Oe=>c.jsx("input",{type:ee?"text":"password",value:ce[Oe]||"",onChange:kt=>{const ht=kt.target.value.toUpperCase();if(ht.length<=1){const me=ce.split("");if(me[Oe]=ht,ge(me.join("")),ht&&Oe<3){const Fe=document.querySelector(`input[data-index="${Oe+1}"]`);Fe&&Fe.focus()}}},onKeyDown:kt=>{if(kt.key==="Backspace"&&!ce[Oe]&&Oe>0){const ht=document.querySelector(`input[data-index="${Oe-1}"]`);ht&&ht.focus()}},"data-index":Oe,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:Oe===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},Oe))}),c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onTouchStart:()=>he(!0),onTouchEnd:()=>he(!1),onMouseDown:()=>he(!0),onMouseUp:()=>he(!1),onMouseLeave:()=>he(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:ee?c.jsx(Sc,{className:"w-5 h-5"}):c.jsx(_c,{className:"w-5 h-5"})})})]})]}),de&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:de})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:Et,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:$n,disabled:ce.length<4||!Ks(ce),className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200",children:"Continue"})]})]})})}),document.body),Ne&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",style:{display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{maxHeight:window.innerWidth>window.innerHeight?"98vh":"90vh",maxWidth:window.innerWidth>window.innerHeight?"98vw":"28rem",margin:window.innerWidth>window.innerHeight?"2px 0":"16px 0"},children:c.jsxs("div",{style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:c.jsx(Zm,{className:"w-6 h-6 text-indigo-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Quick Actions"})}),c.jsxs("div",{className:"space-y-3 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsxs("button",{onClick:()=>{E(!1),P(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsx(_f,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Import from PDF"})]}),c.jsx("button",{onClick:()=>{E(!1),Mt()},disabled:we,className:"w-full flex items-center space-x-3 px-4 py-3 bg-green-50 hover:bg-green-100 disabled:bg-gray-100 disabled:text-gray-500 text-green-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:we?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-5 h-5 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Exporting PDF..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(vs,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Export to PDF"})]})}),c.jsxs("button",{onClick:()=>{E(!1),qe(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-purple-50 hover:bg-purple-100 text-purple-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsx(es,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Monthly Reports"})]}),c.jsxs("button",{onClick:()=>{E(!1),Me(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsx(Lw,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Batch Print"})]}),c.jsxs("button",{onClick:()=>{E(!1),ke(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-yellow-50 hover:bg-yellow-100 text-yellow-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsx(Br,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Staff Management"})]}),c.jsxs("button",{onClick:()=>{E(!1),X("all"),j(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-red-50 hover:bg-red-100 text-red-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsx(xs,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Clear Database"})]})]}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:()=>E(!1),className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Cancel"})})})]})})}),document.body),c.jsx(gE,{isOpen:st,onClose:()=>qe(!1),entries:_,basicSalary:35e3,hourlyRate:201.92,shiftCombinations:[{id:"9-4",combination:"9-4",hours:6.5},{id:"4-10",combination:"4-10",hours:5.5},{id:"12-10",combination:"12-10",hours:9.5},{id:"N",combination:"N",hours:12.5}]}),c.jsx(vE,{isOpen:Le,onClose:()=>Me(!1),entries:_,basicSalary:35e3,hourlyRate:201.92,shiftCombinations:[{id:"9-4",combination:"9-4",hours:6.5},{id:"4-10",combination:"4-10",hours:5.5},{id:"12-10",combination:"12-10",hours:9.5},{id:"N",combination:"N",hours:12.5}]}),c.jsx(SE,{isOpen:xe,onClose:()=>ke(!1),isAdminAuthenticated:Te,adminName:Ie})]})};function _E(){const[n,e]=H.useState(new Date),[t,r]=H.useState(null),[i,s]=H.useState(!1),[a,o]=H.useState("calendar"),[l,u]=H.useState(!1),[d,p]=H.useState(!0),[m,f]=H.useState(0),[x,y]=H.useState(0),[N,w]=H.useState(!1),b=H.useRef(null),{schedule:_,specialDates:C,setSchedule:T,setSpecialDates:P,error:A,refreshData:j}=cC(),[I,$,{isLoading:L,refresh:M}]=$v("scheduleTitle","Work Schedule","metadata"),[D,O,{isLoading:G,refresh:X}]=$v("workSettings",{basicSalary:35e3,hourlyRate:201.92,shiftCombinations:Wl}),[oe,J]=H.useState(0),{totalAmount:ie,monthToDateAmount:ae}=oC(_,D,C,n,oe),Ne=n.getMonth(),E=n.getFullYear();H.useEffect(()=>{let ee,he;const ke=Ae=>{he||(he=Ae);const Ze=Ae-he,Be=Math.min(Ze/3e3,1),rt=1-Math.pow(1-Be,4),Ve=Math.round(rt*100);y(Ve),Be<1?ee=requestAnimationFrame(ke):(y(100),setTimeout(()=>{p(!1),w(!0)},100))};return ee=requestAnimationFrame(ke),()=>{ee&&cancelAnimationFrame(ee)}},[]),H.useEffect(()=>{if(N){const ee=new pS({appName:"X-ray ANWH",appIconUrl:"https://jarivatoi.github.io/anwh/Icon.PNG",maxModalDisplayCount:1,skipFirstVisit:!1,startDelay:3e3,lifespan:2e4,mustShowCustomPrompt:!1,displayPace:999999});(async()=>{await ee.canPrompt()&&setTimeout(()=>{ee.show()},3e3)})()}},[N]),H.useEffect(()=>{const ee=he=>{const{month:xe,year:ke}=he.detail;e(new Date(ke,xe,1))};return window.addEventListener("navigateToMonth",ee),()=>window.removeEventListener("navigateToMonth",ee)},[_,C]),H.useEffect(()=>{const ee=he=>{const{calendarUpdates:xe,specialDateUpdates:ke,editorName:Ae,source:Ze}=he.detail;window.dispatchEvent(new CustomEvent("bulkUpdateReceived")),T(Be=>{const rt={...Be};return Object.entries(xe).forEach(([Ve,ut])=>{const Yt=[...rt[Ve]||[]];ut.forEach(Nt=>{Yt.includes(Nt)||Yt.push(Nt)}),rt[Ve]=Yt}),rt}),P(Be=>{const rt={...Be};return Object.entries(ke).forEach(([Ve,ut])=>{rt[Ve]=ut}),rt}),J(Be=>Be+1)};return window.addEventListener("bulkCalendarUpdate",ee),()=>window.removeEventListener("bulkCalendarUpdate",ee)},[T,P]),H.useEffect(()=>{const ee=()=>{o("calendar"),J(ke=>ke+1)},he=()=>{u(!1)},xe=()=>{};return window.addEventListener("switchToCalendarTab",ee),window.addEventListener("closeCalendarExportModal",he),window.addEventListener("debugCalendarState",xe),()=>{window.removeEventListener("switchToCalendarTab",ee),window.removeEventListener("closeCalendarExportModal",he),window.removeEventListener("debugCalendarState",xe)}},[_,C,n]),H.useEffect(()=>{b.current&&N&&hr.fromTo(b.current,{opacity:0,y:30,scale:.95,force3D:!0},{opacity:1,y:0,scale:1,duration:.8,ease:"power2.out",force3D:!0})},[N]);const q=ee=>{o(ee)},Y=ee=>{e(new Date(E,Ne+(ee==="next"?1:-1),1))},Z=ee=>`${E}-${(Ne+1).toString().padStart(2,"0")}-${ee.toString().padStart(2,"0")}`,te=ee=>{const he=Z(ee);r(he),s(!0)},ce=(ee,he)=>{const xe=_[he]||[];return!(ee==="9-4"&&xe.includes("12-10")||ee==="12-10"&&xe.includes("9-4")||ee==="12-10"&&xe.includes("4-10")||ee==="4-10"&&xe.includes("12-10"))},ge=ee=>{if(!t)return;const he=_[t]||[];if(he.includes(ee)){const xe=he.filter(ke=>ke!==ee);T(ke=>({...ke,[t]:xe.length>0?xe:[]}))}else ce(ee,t)&&T(xe=>({...xe,[t]:[...he,ee]}));J(xe=>xe+1)},de=H.useCallback(ee=>{const he=ee.detail;hS(he,{calendarLabel:I,schedule:_,specialDates:C,setSchedule:T,setSpecialDates:P,entries:[]})&&J(ke=>ke+1)},[I,_,C,T,P]),_e=H.useCallback(()=>{J(ee=>ee+1)},[]);H.useEffect(()=>(window.addEventListener("rosterCalendarSync",de),window.addEventListener("forceCalendarRefresh",_e),()=>{window.removeEventListener("rosterCalendarSync",de),window.removeEventListener("forceCalendarRefresh",_e)}),[de,_e]);const Te=H.useCallback((ee,he)=>{P(xe=>{const ke={...xe};return he?ke[ee]=!0:delete ke[ee],ke})},[P]);H.useCallback(async(ee,he,xe,ke=!0)=>{try{if(xe){const Be=`${ee}-${(he+1).toString().padStart(2,"0")}-${xe.toString().padStart(2,"0")}`;T(rt=>{const Ve={...rt};return delete Ve[Be],Ve}),P(rt=>{const Ve={...rt};return delete Ve[Be],Ve}),J(rt=>rt+1);return}const Ae=new Date(ee,he+1,0).getDate(),Ze=[];for(let Be=1;Be<=Ae;Be++){const rt=`${ee}-${(he+1).toString().padStart(2,"0")}-${Be.toString().padStart(2,"0")}`;Ze.push(rt)}T(Be=>{const rt={...Be};return Ze.forEach(Ve=>{delete rt[Ve]}),rt}),P(Be=>{const rt={...Be};return Ze.forEach(Ve=>{delete rt[Ve]}),rt}),J(Be=>Be+1),ke&&alert(`✅ Successfully cleared all data for ${["January","February","March","April","May","June","July","August","September","October","November","December"][he]} ${ee}`)}catch{alert("❌ Error resetting month data. Please try again.")}},[T,P]);const ze=()=>{s(!1),r(null)},Ie=H.useCallback(ee=>{const he=ee*12/52/40;O(xe=>({...xe,basicSalary:ee,hourlyRate:he}))},[O]),nt=H.useCallback((ee,he)=>{O(xe=>({...xe,shiftCombinations:xe.shiftCombinations.map(ke=>ke.id===ee?{...ke,hours:he}:ke)}))},[O]),we=async()=>{try{const ee=await ln.exportAllData(),he=JSON.stringify(ee,null,2),xe=new Blob([he],{type:"application/json"}),ke=URL.createObjectURL(xe),Ae=document.createElement("a");Ae.href=ke,Ae.download=ee.filename||"ANWH_export.json",document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(ke)}catch{alert("Export failed. Please try again.")}},Q=async ee=>{try{await ln.importAllData(ee);const he=[j().catch(Ae=>console.error("Failed to refresh schedule data:",Ae)),X().catch(Ae=>console.error("Failed to refresh settings:",Ae)),M().catch(Ae=>console.error("Failed to refresh title:",Ae))];await Promise.allSettled(he);const xe=(Ae,Ze)=>{setTimeout(()=>{J(Be=>Be+1)},Ae)};J(Ae=>Ae+1),xe(200,"First delayed"),xe(500,"Second delayed"),xe(1e3,"Final delayed"),setTimeout(()=>{o("calendar")},1200);const ke=ee.version||"1.0";alert(ke==="1.0"?"Data imported successfully! Note: This was an older format file. Special date information was not available and has been reset.":"Data imported successfully!")}catch{alert("Error importing data. Please check the file format.")}},st=ee=>{e(ee)},qe=ee=>{$(ee)},Le=()=>{u(!0)},Me=()=>{u(!1)};return A&&N?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Database Error"}),c.jsx("p",{className:"text-gray-700 mb-6",children:A}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200",children:"Retry"})]})}):N?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"min-h-screen bg-black select-none p-4",style:{minHeight:"100vh",backfaceVisibility:"hidden",marginTop:"0px",paddingTop:"env(safe-area-inset-top)",paddingBottom:"max(1rem, env(safe-area-inset-bottom))",paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1rem, env(safe-area-inset-right))",backgroundColor:"white !important",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[c.jsx("div",{className:"sticky top-0 z-50 bg-white",children:c.jsx(aC,{activeTab:a,onTabChange:q})}),c.jsx("div",{ref:b,style:{transform:"translate3d(0,0,0)",backfaceVisibility:"hidden"},children:a==="calendar"?c.jsx(nC,{currentDate:n,schedule:_,specialDates:C,onDateClick:te,onNavigateMonth:Y,totalAmount:ie,monthToDateAmount:ae,onDateChange:st,scheduleTitle:I,onTitleUpdate:qe,setSchedule:T,setSpecialDates:P}):a==="settings"?c.jsx(iC,{settings:D,onUpdateBasicSalary:Ie,onUpdateShiftHours:nt}):a==="data"?c.jsx(sC,{onImportData:Q,onExportData:we}):c.jsx(px,{setActiveTab:o,onOpenCalendarExportModal:Le,selectedDate:n,onDateChange:st},oe)}),i&&c.jsxs(c.Fragment,{children:[c.jsx(rC,{selectedDate:t,schedule:_,specialDates:C,onToggleShift:ge,onToggleSpecialDate:Te,onClose:ze}),c.jsx(px,{setActiveTab:o,onOpenCalendarExportModal:Le})]}),c.jsx(dS,{isOpen:l,onClose:Me,currentMonth:Ne,currentYear:E})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-50 to-indigo-100",style:{minHeight:"-webkit-fill-available",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-6",children:c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Work Schedule Calendar"}),c.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"Created by NARAYYA"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-gray-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("span",{className:"text-gray-600 text-lg",children:"Loading your workspace..."})]}),c.jsxs("div",{className:"space-y-3 text-base text-gray-600",children:[c.jsx("p",{children:"• Initializing offline database"}),c.jsx("p",{children:"• Loading schedule data"}),c.jsx("p",{children:"• Preparing settings"}),c.jsx("p",{children:"• Calculating amounts"}),c.jsx("p",{children:"• Setting up interface"})]}),c.jsx("div",{className:"mt-8 w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-purple-600 h-2 rounded-full transition-all duration-100 ease-out",style:{width:`${x}%`,transition:"width 0.1s ease-out"}})}),c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("span",{className:"text-sm text-gray-600 font-mono tabular-nums",children:[x,"%"]})})]})})}function NE(){/iPhone|iPad|iPod/.test(navigator.userAgent)&&(setTimeout(()=>{window.scrollTo(0,1)},100),window.addEventListener("orientationchange",()=>{setTimeout(()=>{window.scrollTo(0,1)},100)}))}try{const n=document.getElementById("root");if(!n)throw new Error("Root element not found");Aw(n).render(c.jsx(H.StrictMode,{children:c.jsx(_E,{})})),NE()}catch(n){console.error("Failed to initialize app:",n);const e=document.getElementById("root");e&&(e.innerHTML=`
      <div style="
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: white;
        color: #374151;
        font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        text-align: center;
        padding: 20px;
      ">
        <div>
          <h1 style="font-size: 24px; margin-bottom: 20px; font-weight: 600; color: #1f2937;">⚠️ App Error</h1>
          <p style="font-size: 16px; margin-bottom: 30px; color: #6b7280;">Something went wrong. Please try reloading the app.</p>
          <button onclick="window.location.reload()" style="
            background: #6366f1; 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 8px; 
            font-size: 16px; 
            font-weight: 600;
            cursor: pointer;
          ">Reload App</button>
        </div>
      </div>
    `)}export{Wt as _,Mi as c,W_ as g};
