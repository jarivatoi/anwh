var U_=Object.defineProperty;var z_=(n,e,t)=>e in n?U_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ut=(n,e,t)=>z_(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Fi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function H_(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var mx={exports:{}},Uf={},gx={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pd=Symbol.for("react.element"),q_=Symbol.for("react.portal"),Y_=Symbol.for("react.fragment"),V_=Symbol.for("react.strict_mode"),G_=Symbol.for("react.profiler"),J_=Symbol.for("react.provider"),K_=Symbol.for("react.context"),X_=Symbol.for("react.forward_ref"),Q_=Symbol.for("react.suspense"),Z_=Symbol.for("react.memo"),e4=Symbol.for("react.lazy"),Uy=Symbol.iterator;function t4(n){return n===null||typeof n!="object"?null:(n=Uy&&n[Uy]||n["@@iterator"],typeof n=="function"?n:null)}var yx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vx=Object.assign,xx={};function Sc(n,e,t){this.props=n,this.context=e,this.refs=xx,this.updater=t||yx}Sc.prototype.isReactComponent={};Sc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Sc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function wx(){}wx.prototype=Sc.prototype;function Wg(n,e,t){this.props=n,this.context=e,this.refs=xx,this.updater=t||yx}var Hg=Wg.prototype=new wx;Hg.constructor=Wg;vx(Hg,Sc.prototype);Hg.isPureReactComponent=!0;var zy=Array.isArray,bx=Object.prototype.hasOwnProperty,qg={current:null},Sx={key:!0,ref:!0,__self:!0,__source:!0};function _x(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)bx.call(e,r)&&!Sx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:pd,type:n,key:s,ref:o,props:i,_owner:qg.current}}function n4(n,e){return{$$typeof:pd,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Yg(n){return typeof n=="object"&&n!==null&&n.$$typeof===pd}function r4(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Wy=/\/+/g;function a0(n,e){return typeof n=="object"&&n!==null&&n.key!=null?r4(""+n.key):e.toString(36)}function Rh(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case pd:case q_:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+a0(o,0):r,zy(i)?(t="",n!=null&&(t=n.replace(Wy,"$&/")+"/"),Rh(i,e,t,"",function(u){return u})):i!=null&&(Yg(i)&&(i=n4(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Wy,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",zy(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+a0(s,a);o+=Rh(s,e,t,l,i)}else if(l=t4(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+a0(s,a++),o+=Rh(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dh(n,e,t){if(n==null)return n;var r=[],i=0;return Rh(n,r,"","",function(s){return e.call(t,s,i++)}),r}function i4(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Pr={current:null},Fh={transition:null},s4={ReactCurrentDispatcher:Pr,ReactCurrentBatchConfig:Fh,ReactCurrentOwner:qg};function Nx(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:dh,forEach:function(n,e,t){dh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return dh(n,function(){e++}),e},toArray:function(n){return dh(n,function(e){return e})||[]},only:function(n){if(!Yg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Et.Component=Sc;Et.Fragment=Y_;Et.Profiler=G_;Et.PureComponent=Wg;Et.StrictMode=V_;Et.Suspense=Q_;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s4;Et.act=Nx;Et.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=vx({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qg.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)bx.call(e,l)&&!Sx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:pd,type:n.type,key:i,ref:s,props:r,_owner:o}};Et.createContext=function(n){return n={$$typeof:K_,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:J_,_context:n},n.Consumer=n};Et.createElement=_x;Et.createFactory=function(n){var e=_x.bind(null,n);return e.type=n,e};Et.createRef=function(){return{current:null}};Et.forwardRef=function(n){return{$$typeof:X_,render:n}};Et.isValidElement=Yg;Et.lazy=function(n){return{$$typeof:e4,_payload:{_status:-1,_result:n},_init:i4}};Et.memo=function(n,e){return{$$typeof:Z_,type:n,compare:e===void 0?null:e}};Et.startTransition=function(n){var e=Fh.transition;Fh.transition={};try{n()}finally{Fh.transition=e}};Et.unstable_act=Nx;Et.useCallback=function(n,e){return Pr.current.useCallback(n,e)};Et.useContext=function(n){return Pr.current.useContext(n)};Et.useDebugValue=function(){};Et.useDeferredValue=function(n){return Pr.current.useDeferredValue(n)};Et.useEffect=function(n,e){return Pr.current.useEffect(n,e)};Et.useId=function(){return Pr.current.useId()};Et.useImperativeHandle=function(n,e,t){return Pr.current.useImperativeHandle(n,e,t)};Et.useInsertionEffect=function(n,e){return Pr.current.useInsertionEffect(n,e)};Et.useLayoutEffect=function(n,e){return Pr.current.useLayoutEffect(n,e)};Et.useMemo=function(n,e){return Pr.current.useMemo(n,e)};Et.useReducer=function(n,e,t){return Pr.current.useReducer(n,e,t)};Et.useRef=function(n){return Pr.current.useRef(n)};Et.useState=function(n){return Pr.current.useState(n)};Et.useSyncExternalStore=function(n,e,t){return Pr.current.useSyncExternalStore(n,e,t)};Et.useTransition=function(){return Pr.current.useTransition()};Et.version="18.3.1";gx.exports=Et;var H=gx.exports;const Vg=W_(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o4=H,a4=Symbol.for("react.element"),l4=Symbol.for("react.fragment"),c4=Object.prototype.hasOwnProperty,u4=o4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d4={key:!0,ref:!0,__self:!0,__source:!0};function kx(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)c4.call(e,r)&&!d4.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:a4,type:n,key:s,ref:o,props:i,_owner:u4.current}}Uf.Fragment=l4;Uf.jsx=kx;Uf.jsxs=kx;mx.exports=Uf;var c=mx.exports,jx={exports:{}},xi={},Ax={exports:{}},Cx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(q,ee){var ie=q.length;q.push(ee);e:for(;0<ie;){var re=ie-1>>>1,M=q[re];if(0<i(M,ee))q[re]=ee,q[ie]=M,ie=re;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ee=q[0],ie=q.pop();if(ie!==ee){q[0]=ie;e:for(var re=0,M=q.length,Y=M>>>1;re<Y;){var G=2*(re+1)-1,Z=q[G],te=G+1,ue=q[te];if(0>i(Z,ie))te<M&&0>i(ue,Z)?(q[re]=ue,q[te]=ie,re=te):(q[re]=Z,q[G]=ie,re=G);else if(te<M&&0>i(ue,ie))q[re]=ue,q[te]=ie,re=te;else break e}}return ee}function i(q,ee){var ie=q.sortIndex-ee.sortIndex;return ie!==0?ie:q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,p=null,m=3,f=!1,x=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var ee=t(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=q)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=t(u)}}function C(q){if(y=!1,N(q),!x)if(t(l)!==null)x=!0,X(A);else{var ee=t(u);ee!==null&&se(C,ee.startTime-q)}}function A(q,ee){x=!1,y&&(y=!1,w(j),j=-1),f=!0;var ie=m;try{for(N(ee),p=t(l);p!==null&&(!(p.expirationTime>ee)||q&&!L());){var re=p.callback;if(typeof re=="function"){p.callback=null,m=p.priorityLevel;var M=re(p.expirationTime<=ee);ee=n.unstable_now(),typeof M=="function"?p.callback=M:p===t(l)&&r(l),N(ee)}else r(l);p=t(l)}if(p!==null)var Y=!0;else{var G=t(u);G!==null&&se(C,G.startTime-ee),Y=!1}return Y}finally{p=null,m=ie,f=!1}}var P=!1,E=null,j=-1,D=5,U=-1;function L(){return!(n.unstable_now()-U<D)}function F(){if(E!==null){var q=n.unstable_now();U=q;var ee=!0;try{ee=E(!0,q)}finally{ee?T():(P=!1,E=null)}}else P=!1}var T;if(typeof b=="function")T=function(){b(F)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,J=O.port2;O.port1.onmessage=F,T=function(){J.postMessage(null)}}else T=function(){_(F,0)};function X(q){E=q,P||(P=!0,T())}function se(q,ee){j=_(function(){q(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){x||f||(x=!0,X(A))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(q){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var ie=m;m=ee;try{return q()}finally{m=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,ee){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ie=m;m=q;try{return ee()}finally{m=ie}},n.unstable_scheduleCallback=function(q,ee,ie){var re=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?re+ie:re):ie=re,q){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ie+M,q={id:d++,callback:ee,priorityLevel:q,startTime:ie,expirationTime:M,sortIndex:-1},ie>re?(q.sortIndex=ie,e(u,q),t(l)===null&&q===t(u)&&(y?(w(j),j=-1):y=!0,se(C,ie-re))):(q.sortIndex=M,e(l,q),x||f||(x=!0,X(A))),q},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(q){var ee=m;return function(){var ie=m;m=ee;try{return q.apply(this,arguments)}finally{m=ie}}}})(Cx);Ax.exports=Cx;var h4=Ax.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f4=H,gi=h4;function Be(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ex=new Set,zu={};function Ua(n,e){ac(n,e),ac(n+"Capture",e)}function ac(n,e){for(zu[n]=e,n=0;n<e.length;n++)Ex.add(e[n])}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),am=Object.prototype.hasOwnProperty,p4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hy={},qy={};function m4(n){return am.call(qy,n)?!0:am.call(Hy,n)?!1:p4.test(n)?qy[n]=!0:(Hy[n]=!0,!1)}function g4(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function y4(n,e,t,r){if(e===null||typeof e>"u"||g4(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lr(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){nr[n]=new Lr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];nr[e]=new Lr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){nr[n]=new Lr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){nr[n]=new Lr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){nr[n]=new Lr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){nr[n]=new Lr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){nr[n]=new Lr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){nr[n]=new Lr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){nr[n]=new Lr(n,5,!1,n.toLowerCase(),null,!1,!1)});var Gg=/[\-:]([a-z])/g;function Jg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Gg,Jg);nr[e]=new Lr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Gg,Jg);nr[e]=new Lr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Gg,Jg);nr[e]=new Lr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){nr[n]=new Lr(n,1,!1,n.toLowerCase(),null,!1,!1)});nr.xlinkHref=new Lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){nr[n]=new Lr(n,1,!1,n.toLowerCase(),null,!0,!0)});function Kg(n,e,t,r){var i=nr.hasOwnProperty(e)?nr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(y4(e,t,i,r)&&(t=null),r||i===null?m4(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var to=f4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hh=Symbol.for("react.element"),Ll=Symbol.for("react.portal"),Tl=Symbol.for("react.fragment"),Xg=Symbol.for("react.strict_mode"),lm=Symbol.for("react.profiler"),Px=Symbol.for("react.provider"),Lx=Symbol.for("react.context"),Qg=Symbol.for("react.forward_ref"),cm=Symbol.for("react.suspense"),um=Symbol.for("react.suspense_list"),Zg=Symbol.for("react.memo"),No=Symbol.for("react.lazy"),Tx=Symbol.for("react.offscreen"),Yy=Symbol.iterator;function au(n){return n===null||typeof n!="object"?null:(n=Yy&&n[Yy]||n["@@iterator"],typeof n=="function"?n:null)}var hn=Object.assign,l0;function xu(n){if(l0===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);l0=e&&e[1]||""}return`
`+l0+n}var c0=!1;function u0(n,e){if(!n||c0)return"";c0=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{c0=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?xu(n):""}function v4(n){switch(n.tag){case 5:return xu(n.type);case 16:return xu("Lazy");case 13:return xu("Suspense");case 19:return xu("SuspenseList");case 0:case 2:case 15:return n=u0(n.type,!1),n;case 11:return n=u0(n.type.render,!1),n;case 1:return n=u0(n.type,!0),n;default:return""}}function dm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Tl:return"Fragment";case Ll:return"Portal";case lm:return"Profiler";case Xg:return"StrictMode";case cm:return"Suspense";case um:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Lx:return(n.displayName||"Context")+".Consumer";case Px:return(n._context.displayName||"Context")+".Provider";case Qg:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Zg:return e=n.displayName||null,e!==null?e:dm(n.type)||"Memo";case No:e=n._payload,n=n._init;try{return dm(n(e))}catch{}}return null}function x4(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dm(e);case 8:return e===Xg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Dx(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function w4(n){var e=Dx(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function fh(n){n._valueTracker||(n._valueTracker=w4(n))}function Mx(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Dx(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function tf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function hm(n,e){var t=e.checked;return hn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Vy(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=qo(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ix(n,e){e=e.checked,e!=null&&Kg(n,"checked",e,!1)}function fm(n,e){Ix(n,e);var t=qo(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?pm(n,e.type,t):e.hasOwnProperty("defaultValue")&&pm(n,e.type,qo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Gy(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function pm(n,e,t){(e!=="number"||tf(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var wu=Array.isArray;function Vl(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+qo(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function mm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Be(91));return hn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Jy(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Be(92));if(wu(t)){if(1<t.length)throw Error(Be(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:qo(t)}}function Rx(n,e){var t=qo(e.value),r=qo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Ky(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Fx(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gm(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Fx(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ph,Ox=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(ph=ph||document.createElement("div"),ph.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ph.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Wu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ju={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b4=["Webkit","ms","Moz","O"];Object.keys(ju).forEach(function(n){b4.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ju[e]=ju[n]})});function $x(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ju.hasOwnProperty(n)&&ju[n]?(""+e).trim():e+"px"}function Bx(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=$x(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var S4=hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ym(n,e){if(e){if(S4[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Be(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Be(62))}}function vm(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xm=null;function e1(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var wm=null,Gl=null,Jl=null;function Xy(n){if(n=yd(n)){if(typeof wm!="function")throw Error(Be(280));var e=n.stateNode;e&&(e=Yf(e),wm(n.stateNode,n.type,e))}}function Ux(n){Gl?Jl?Jl.push(n):Jl=[n]:Gl=n}function zx(){if(Gl){var n=Gl,e=Jl;if(Jl=Gl=null,Xy(n),e)for(n=0;n<e.length;n++)Xy(e[n])}}function Wx(n,e){return n(e)}function Hx(){}var d0=!1;function qx(n,e,t){if(d0)return n(e,t);d0=!0;try{return Wx(n,e,t)}finally{d0=!1,(Gl!==null||Jl!==null)&&(Hx(),zx())}}function Hu(n,e){var t=n.stateNode;if(t===null)return null;var r=Yf(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Be(231,e,typeof t));return t}var bm=!1;if(Vs)try{var lu={};Object.defineProperty(lu,"passive",{get:function(){bm=!0}}),window.addEventListener("test",lu,lu),window.removeEventListener("test",lu,lu)}catch{bm=!1}function _4(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var Au=!1,nf=null,rf=!1,Sm=null,N4={onError:function(n){Au=!0,nf=n}};function k4(n,e,t,r,i,s,o,a,l){Au=!1,nf=null,_4.apply(N4,arguments)}function j4(n,e,t,r,i,s,o,a,l){if(k4.apply(this,arguments),Au){if(Au){var u=nf;Au=!1,nf=null}else throw Error(Be(198));rf||(rf=!0,Sm=u)}}function za(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Yx(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Qy(n){if(za(n)!==n)throw Error(Be(188))}function A4(n){var e=n.alternate;if(!e){if(e=za(n),e===null)throw Error(Be(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Qy(i),n;if(s===r)return Qy(i),e;s=s.sibling}throw Error(Be(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Be(189))}}if(t.alternate!==r)throw Error(Be(190))}if(t.tag!==3)throw Error(Be(188));return t.stateNode.current===t?n:e}function Vx(n){return n=A4(n),n!==null?Gx(n):null}function Gx(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Gx(n);if(e!==null)return e;n=n.sibling}return null}var Jx=gi.unstable_scheduleCallback,Zy=gi.unstable_cancelCallback,C4=gi.unstable_shouldYield,E4=gi.unstable_requestPaint,An=gi.unstable_now,P4=gi.unstable_getCurrentPriorityLevel,t1=gi.unstable_ImmediatePriority,Kx=gi.unstable_UserBlockingPriority,sf=gi.unstable_NormalPriority,L4=gi.unstable_LowPriority,Xx=gi.unstable_IdlePriority,zf=null,xs=null;function T4(n){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(zf,n,void 0,(n.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:I4,D4=Math.log,M4=Math.LN2;function I4(n){return n>>>=0,n===0?32:31-(D4(n)/M4|0)|0}var mh=64,gh=4194304;function bu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function of(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=bu(a):(s&=o,s!==0&&(r=bu(s)))}else o=t&~i,o!==0?r=bu(o):s!==0&&(r=bu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-es(e),i=1<<t,r|=n[t],e&=~i;return r}function R4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F4(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-es(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=R4(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function _m(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Qx(){var n=mh;return mh<<=1,!(mh&4194240)&&(mh=64),n}function h0(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function md(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-es(e),n[e]=t}function O4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-es(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function n1(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-es(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Wt=0;function Zx(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var e5,r1,t5,n5,r5,Nm=!1,yh=[],Io=null,Ro=null,Fo=null,qu=new Map,Yu=new Map,jo=[],$4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e2(n,e){switch(n){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":Ro=null;break;case"mouseover":case"mouseout":Fo=null;break;case"pointerover":case"pointerout":qu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(e.pointerId)}}function cu(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=yd(e),e!==null&&r1(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function B4(n,e,t,r,i){switch(e){case"focusin":return Io=cu(Io,n,e,t,r,i),!0;case"dragenter":return Ro=cu(Ro,n,e,t,r,i),!0;case"mouseover":return Fo=cu(Fo,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return qu.set(s,cu(qu.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Yu.set(s,cu(Yu.get(s)||null,n,e,t,r,i)),!0}return!1}function i5(n){var e=_a(n.target);if(e!==null){var t=za(e);if(t!==null){if(e=t.tag,e===13){if(e=Yx(t),e!==null){n.blockedOn=e,r5(n.priority,function(){t5(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Oh(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=km(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);xm=r,t.target.dispatchEvent(r),xm=null}else return e=yd(t),e!==null&&r1(e),n.blockedOn=t,!1;e.shift()}return!0}function t2(n,e,t){Oh(n)&&t.delete(e)}function U4(){Nm=!1,Io!==null&&Oh(Io)&&(Io=null),Ro!==null&&Oh(Ro)&&(Ro=null),Fo!==null&&Oh(Fo)&&(Fo=null),qu.forEach(t2),Yu.forEach(t2)}function uu(n,e){n.blockedOn===e&&(n.blockedOn=null,Nm||(Nm=!0,gi.unstable_scheduleCallback(gi.unstable_NormalPriority,U4)))}function Vu(n){function e(i){return uu(i,n)}if(0<yh.length){uu(yh[0],n);for(var t=1;t<yh.length;t++){var r=yh[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Io!==null&&uu(Io,n),Ro!==null&&uu(Ro,n),Fo!==null&&uu(Fo,n),qu.forEach(e),Yu.forEach(e),t=0;t<jo.length;t++)r=jo[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<jo.length&&(t=jo[0],t.blockedOn===null);)i5(t),t.blockedOn===null&&jo.shift()}var Kl=to.ReactCurrentBatchConfig,af=!0;function z4(n,e,t,r){var i=Wt,s=Kl.transition;Kl.transition=null;try{Wt=1,i1(n,e,t,r)}finally{Wt=i,Kl.transition=s}}function W4(n,e,t,r){var i=Wt,s=Kl.transition;Kl.transition=null;try{Wt=4,i1(n,e,t,r)}finally{Wt=i,Kl.transition=s}}function i1(n,e,t,r){if(af){var i=km(n,e,t,r);if(i===null)S0(n,e,r,lf,t),e2(n,r);else if(B4(i,n,e,t,r))r.stopPropagation();else if(e2(n,r),e&4&&-1<$4.indexOf(n)){for(;i!==null;){var s=yd(i);if(s!==null&&e5(s),s=km(n,e,t,r),s===null&&S0(n,e,r,lf,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else S0(n,e,r,null,t)}}var lf=null;function km(n,e,t,r){if(lf=null,n=e1(r),n=_a(n),n!==null)if(e=za(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Yx(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return lf=n,null}function s5(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P4()){case t1:return 1;case Kx:return 4;case sf:case L4:return 16;case Xx:return 536870912;default:return 16}default:return 16}}var Eo=null,s1=null,$h=null;function o5(){if($h)return $h;var n,e=s1,t=e.length,r,i="value"in Eo?Eo.value:Eo.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return $h=i.slice(n,1<r?1-r:void 0)}function Bh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function vh(){return!0}function n2(){return!1}function wi(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vh:n2,this.isPropagationStopped=n2,this}return hn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=vh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=vh)},persist:function(){},isPersistent:vh}),e}var _c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o1=wi(_c),gd=hn({},_c,{view:0,detail:0}),H4=wi(gd),f0,p0,du,Wf=hn({},gd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==du&&(du&&n.type==="mousemove"?(f0=n.screenX-du.screenX,p0=n.screenY-du.screenY):p0=f0=0,du=n),f0)},movementY:function(n){return"movementY"in n?n.movementY:p0}}),r2=wi(Wf),q4=hn({},Wf,{dataTransfer:0}),Y4=wi(q4),V4=hn({},gd,{relatedTarget:0}),m0=wi(V4),G4=hn({},_c,{animationName:0,elapsedTime:0,pseudoElement:0}),J4=wi(G4),K4=hn({},_c,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),X4=wi(K4),Q4=hn({},_c,{data:0}),i2=wi(Q4),Z4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n3(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=t3[n])?!!e[n]:!1}function a1(){return n3}var r3=hn({},gd,{key:function(n){if(n.key){var e=Z4[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Bh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?e3[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a1,charCode:function(n){return n.type==="keypress"?Bh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),i3=wi(r3),s3=hn({},Wf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s2=wi(s3),o3=hn({},gd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a1}),a3=wi(o3),l3=hn({},_c,{propertyName:0,elapsedTime:0,pseudoElement:0}),c3=wi(l3),u3=hn({},Wf,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),d3=wi(u3),h3=[9,13,27,32],l1=Vs&&"CompositionEvent"in window,Cu=null;Vs&&"documentMode"in document&&(Cu=document.documentMode);var f3=Vs&&"TextEvent"in window&&!Cu,a5=Vs&&(!l1||Cu&&8<Cu&&11>=Cu),o2=" ",a2=!1;function l5(n,e){switch(n){case"keyup":return h3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c5(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Dl=!1;function p3(n,e){switch(n){case"compositionend":return c5(e);case"keypress":return e.which!==32?null:(a2=!0,o2);case"textInput":return n=e.data,n===o2&&a2?null:n;default:return null}}function m3(n,e){if(Dl)return n==="compositionend"||!l1&&l5(n,e)?(n=o5(),$h=s1=Eo=null,Dl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a5&&e.locale!=="ko"?null:e.data;default:return null}}var g3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!g3[n.type]:e==="textarea"}function u5(n,e,t,r){Ux(r),e=cf(e,"onChange"),0<e.length&&(t=new o1("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Eu=null,Gu=null;function y3(n){b5(n,0)}function Hf(n){var e=Rl(n);if(Mx(e))return n}function v3(n,e){if(n==="change")return e}var d5=!1;if(Vs){var g0;if(Vs){var y0="oninput"in document;if(!y0){var c2=document.createElement("div");c2.setAttribute("oninput","return;"),y0=typeof c2.oninput=="function"}g0=y0}else g0=!1;d5=g0&&(!document.documentMode||9<document.documentMode)}function u2(){Eu&&(Eu.detachEvent("onpropertychange",h5),Gu=Eu=null)}function h5(n){if(n.propertyName==="value"&&Hf(Gu)){var e=[];u5(e,Gu,n,e1(n)),qx(y3,e)}}function x3(n,e,t){n==="focusin"?(u2(),Eu=e,Gu=t,Eu.attachEvent("onpropertychange",h5)):n==="focusout"&&u2()}function w3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hf(Gu)}function b3(n,e){if(n==="click")return Hf(e)}function S3(n,e){if(n==="input"||n==="change")return Hf(e)}function _3(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var rs=typeof Object.is=="function"?Object.is:_3;function Ju(n,e){if(rs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!am.call(e,i)||!rs(n[i],e[i]))return!1}return!0}function d2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function h2(n,e){var t=d2(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=d2(t)}}function f5(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?f5(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function p5(){for(var n=window,e=tf();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=tf(n.document)}return e}function c1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function N3(n){var e=p5(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&f5(t.ownerDocument.documentElement,t)){if(r!==null&&c1(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=h2(t,s);var o=h2(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var k3=Vs&&"documentMode"in document&&11>=document.documentMode,Ml=null,jm=null,Pu=null,Am=!1;function f2(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Am||Ml==null||Ml!==tf(r)||(r=Ml,"selectionStart"in r&&c1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pu&&Ju(Pu,r)||(Pu=r,r=cf(jm,"onSelect"),0<r.length&&(e=new o1("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Ml)))}function xh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Il={animationend:xh("Animation","AnimationEnd"),animationiteration:xh("Animation","AnimationIteration"),animationstart:xh("Animation","AnimationStart"),transitionend:xh("Transition","TransitionEnd")},v0={},m5={};Vs&&(m5=document.createElement("div").style,"AnimationEvent"in window||(delete Il.animationend.animation,delete Il.animationiteration.animation,delete Il.animationstart.animation),"TransitionEvent"in window||delete Il.transitionend.transition);function qf(n){if(v0[n])return v0[n];if(!Il[n])return n;var e=Il[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in m5)return v0[n]=e[t];return n}var g5=qf("animationend"),y5=qf("animationiteration"),v5=qf("animationstart"),x5=qf("transitionend"),w5=new Map,p2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xo(n,e){w5.set(n,e),Ua(e,[n])}for(var x0=0;x0<p2.length;x0++){var w0=p2[x0],j3=w0.toLowerCase(),A3=w0[0].toUpperCase()+w0.slice(1);Xo(j3,"on"+A3)}Xo(g5,"onAnimationEnd");Xo(y5,"onAnimationIteration");Xo(v5,"onAnimationStart");Xo("dblclick","onDoubleClick");Xo("focusin","onFocus");Xo("focusout","onBlur");Xo(x5,"onTransitionEnd");ac("onMouseEnter",["mouseout","mouseover"]);ac("onMouseLeave",["mouseout","mouseover"]);ac("onPointerEnter",["pointerout","pointerover"]);ac("onPointerLeave",["pointerout","pointerover"]);Ua("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ua("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ua("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ua("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ua("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ua("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Su));function m2(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,j4(r,e,void 0,n),n.currentTarget=null}function b5(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;m2(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;m2(i,a,u),s=l}}}if(rf)throw n=Sm,rf=!1,Sm=null,n}function tn(n,e){var t=e[Tm];t===void 0&&(t=e[Tm]=new Set);var r=n+"__bubble";t.has(r)||(S5(e,n,2,!1),t.add(r))}function b0(n,e,t){var r=0;e&&(r|=4),S5(t,n,r,e)}var wh="_reactListening"+Math.random().toString(36).slice(2);function Ku(n){if(!n[wh]){n[wh]=!0,Ex.forEach(function(t){t!=="selectionchange"&&(C3.has(t)||b0(t,!1,n),b0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[wh]||(e[wh]=!0,b0("selectionchange",!1,e))}}function S5(n,e,t,r){switch(s5(e)){case 1:var i=z4;break;case 4:i=W4;break;default:i=i1}t=i.bind(null,e,t,n),i=void 0,!bm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function S0(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_a(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}qx(function(){var u=s,d=e1(t),p=[];e:{var m=w5.get(n);if(m!==void 0){var f=o1,x=n;switch(n){case"keypress":if(Bh(t)===0)break e;case"keydown":case"keyup":f=i3;break;case"focusin":x="focus",f=m0;break;case"focusout":x="blur",f=m0;break;case"beforeblur":case"afterblur":f=m0;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=r2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Y4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=a3;break;case g5:case y5:case v5:f=J4;break;case x5:f=c3;break;case"scroll":f=H4;break;case"wheel":f=d3;break;case"copy":case"cut":case"paste":f=X4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=s2}var y=(e&4)!==0,_=!y&&n==="scroll",w=y?m!==null?m+"Capture":null:m;y=[];for(var b=u,N;b!==null;){N=b;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,w!==null&&(C=Hu(b,w),C!=null&&y.push(Xu(b,C,N)))),_)break;b=b.return}0<y.length&&(m=new f(m,x,null,t,d),p.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",m&&t!==xm&&(x=t.relatedTarget||t.fromElement)&&(_a(x)||x[Gs]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(x=t.relatedTarget||t.toElement,f=u,x=x?_a(x):null,x!==null&&(_=za(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(f=null,x=u),f!==x)){if(y=r2,C="onMouseLeave",w="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(y=s2,C="onPointerLeave",w="onPointerEnter",b="pointer"),_=f==null?m:Rl(f),N=x==null?m:Rl(x),m=new y(C,b+"leave",f,t,d),m.target=_,m.relatedTarget=N,C=null,_a(d)===u&&(y=new y(w,b+"enter",x,t,d),y.target=N,y.relatedTarget=_,C=y),_=C,f&&x)t:{for(y=f,w=x,b=0,N=y;N;N=vl(N))b++;for(N=0,C=w;C;C=vl(C))N++;for(;0<b-N;)y=vl(y),b--;for(;0<N-b;)w=vl(w),N--;for(;b--;){if(y===w||w!==null&&y===w.alternate)break t;y=vl(y),w=vl(w)}y=null}else y=null;f!==null&&g2(p,m,f,y,!1),x!==null&&_!==null&&g2(p,_,x,y,!0)}}e:{if(m=u?Rl(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var A=v3;else if(l2(m))if(d5)A=S3;else{A=w3;var P=x3}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=b3);if(A&&(A=A(n,u))){u5(p,A,t,d);break e}P&&P(n,m,u),n==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&pm(m,"number",m.value)}switch(P=u?Rl(u):window,n){case"focusin":(l2(P)||P.contentEditable==="true")&&(Ml=P,jm=u,Pu=null);break;case"focusout":Pu=jm=Ml=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,f2(p,t,d);break;case"selectionchange":if(k3)break;case"keydown":case"keyup":f2(p,t,d)}var E;if(l1)e:{switch(n){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Dl?l5(n,t)&&(j="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(j="onCompositionStart");j&&(a5&&t.locale!=="ko"&&(Dl||j!=="onCompositionStart"?j==="onCompositionEnd"&&Dl&&(E=o5()):(Eo=d,s1="value"in Eo?Eo.value:Eo.textContent,Dl=!0)),P=cf(u,j),0<P.length&&(j=new i2(j,n,null,t,d),p.push({event:j,listeners:P}),E?j.data=E:(E=c5(t),E!==null&&(j.data=E)))),(E=f3?p3(n,t):m3(n,t))&&(u=cf(u,"onBeforeInput"),0<u.length&&(d=new i2("onBeforeInput","beforeinput",null,t,d),p.push({event:d,listeners:u}),d.data=E))}b5(p,e)})}function Xu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function cf(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Hu(n,t),s!=null&&r.unshift(Xu(n,s,i)),s=Hu(n,e),s!=null&&r.push(Xu(n,s,i))),n=n.return}return r}function vl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function g2(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Hu(t,s),l!=null&&o.unshift(Xu(t,l,a))):i||(l=Hu(t,s),l!=null&&o.push(Xu(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var E3=/\r\n?/g,P3=/\u0000|\uFFFD/g;function y2(n){return(typeof n=="string"?n:""+n).replace(E3,`
`).replace(P3,"")}function bh(n,e,t){if(e=y2(e),y2(n)!==e&&t)throw Error(Be(425))}function uf(){}var Cm=null,Em=null;function Pm(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lm=typeof setTimeout=="function"?setTimeout:void 0,L3=typeof clearTimeout=="function"?clearTimeout:void 0,v2=typeof Promise=="function"?Promise:void 0,T3=typeof queueMicrotask=="function"?queueMicrotask:typeof v2<"u"?function(n){return v2.resolve(null).then(n).catch(D3)}:Lm;function D3(n){setTimeout(function(){throw n})}function _0(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Vu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Vu(e)}function Oo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function x2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Nc=Math.random().toString(36).slice(2),ms="__reactFiber$"+Nc,Qu="__reactProps$"+Nc,Gs="__reactContainer$"+Nc,Tm="__reactEvents$"+Nc,M3="__reactListeners$"+Nc,I3="__reactHandles$"+Nc;function _a(n){var e=n[ms];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Gs]||t[ms]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=x2(n);n!==null;){if(t=n[ms])return t;n=x2(n)}return e}n=t,t=n.parentNode}return null}function yd(n){return n=n[ms]||n[Gs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Rl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Be(33))}function Yf(n){return n[Qu]||null}var Dm=[],Fl=-1;function Qo(n){return{current:n}}function rn(n){0>Fl||(n.current=Dm[Fl],Dm[Fl]=null,Fl--)}function Zt(n,e){Fl++,Dm[Fl]=n.current,n.current=e}var Yo={},br=Qo(Yo),qr=Qo(!1),Ia=Yo;function lc(n,e){var t=n.type.contextTypes;if(!t)return Yo;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Yr(n){return n=n.childContextTypes,n!=null}function df(){rn(qr),rn(br)}function w2(n,e,t){if(br.current!==Yo)throw Error(Be(168));Zt(br,e),Zt(qr,t)}function _5(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Be(108,x4(n)||"Unknown",i));return hn({},t,r)}function hf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Yo,Ia=br.current,Zt(br,n),Zt(qr,qr.current),!0}function b2(n,e,t){var r=n.stateNode;if(!r)throw Error(Be(169));t?(n=_5(n,e,Ia),r.__reactInternalMemoizedMergedChildContext=n,rn(qr),rn(br),Zt(br,n)):rn(qr),Zt(qr,t)}var Bs=null,Vf=!1,N0=!1;function N5(n){Bs===null?Bs=[n]:Bs.push(n)}function R3(n){Vf=!0,N5(n)}function Zo(){if(!N0&&Bs!==null){N0=!0;var n=0,e=Wt;try{var t=Bs;for(Wt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Bs=null,Vf=!1}catch(i){throw Bs!==null&&(Bs=Bs.slice(n+1)),Jx(t1,Zo),i}finally{Wt=e,N0=!1}}return null}var Ol=[],$l=0,ff=null,pf=0,Pi=[],Li=0,Ra=null,zs=1,Ws="";function ga(n,e){Ol[$l++]=pf,Ol[$l++]=ff,ff=n,pf=e}function k5(n,e,t){Pi[Li++]=zs,Pi[Li++]=Ws,Pi[Li++]=Ra,Ra=n;var r=zs;n=Ws;var i=32-es(r)-1;r&=~(1<<i),t+=1;var s=32-es(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zs=1<<32-es(e)+i|t<<i|r,Ws=s+n}else zs=1<<s|t<<i|r,Ws=n}function u1(n){n.return!==null&&(ga(n,1),k5(n,1,0))}function d1(n){for(;n===ff;)ff=Ol[--$l],Ol[$l]=null,pf=Ol[--$l],Ol[$l]=null;for(;n===Ra;)Ra=Pi[--Li],Pi[Li]=null,Ws=Pi[--Li],Pi[Li]=null,zs=Pi[--Li],Pi[Li]=null}var fi=null,ui=null,sn=!1,Zi=null;function j5(n,e){var t=Ti(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function S2(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,fi=n,ui=Oo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,fi=n,ui=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ra!==null?{id:zs,overflow:Ws}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ti(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,fi=n,ui=null,!0):!1;default:return!1}}function Mm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Im(n){if(sn){var e=ui;if(e){var t=e;if(!S2(n,e)){if(Mm(n))throw Error(Be(418));e=Oo(t.nextSibling);var r=fi;e&&S2(n,e)?j5(r,t):(n.flags=n.flags&-4097|2,sn=!1,fi=n)}}else{if(Mm(n))throw Error(Be(418));n.flags=n.flags&-4097|2,sn=!1,fi=n}}}function _2(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fi=n}function Sh(n){if(n!==fi)return!1;if(!sn)return _2(n),sn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Pm(n.type,n.memoizedProps)),e&&(e=ui)){if(Mm(n))throw A5(),Error(Be(418));for(;e;)j5(n,e),e=Oo(e.nextSibling)}if(_2(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Be(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ui=Oo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ui=null}}else ui=fi?Oo(n.stateNode.nextSibling):null;return!0}function A5(){for(var n=ui;n;)n=Oo(n.nextSibling)}function cc(){ui=fi=null,sn=!1}function h1(n){Zi===null?Zi=[n]:Zi.push(n)}var F3=to.ReactCurrentBatchConfig;function hu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Be(309));var r=t.stateNode}if(!r)throw Error(Be(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Be(284));if(!t._owner)throw Error(Be(290,n))}return n}function _h(n,e){throw n=Object.prototype.toString.call(e),Error(Be(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function N2(n){var e=n._init;return e(n._payload)}function C5(n){function e(w,b){if(n){var N=w.deletions;N===null?(w.deletions=[b],w.flags|=16):N.push(b)}}function t(w,b){if(!n)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=zo(w,b),w.index=0,w.sibling=null,w}function s(w,b,N){return w.index=N,n?(N=w.alternate,N!==null?(N=N.index,N<b?(w.flags|=2,b):N):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return n&&w.alternate===null&&(w.flags|=2),w}function a(w,b,N,C){return b===null||b.tag!==6?(b=L0(N,w.mode,C),b.return=w,b):(b=i(b,N),b.return=w,b)}function l(w,b,N,C){var A=N.type;return A===Tl?d(w,b,N.props.children,C,N.key):b!==null&&(b.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===No&&N2(A)===b.type)?(C=i(b,N.props),C.ref=hu(w,b,N),C.return=w,C):(C=Vh(N.type,N.key,N.props,null,w.mode,C),C.ref=hu(w,b,N),C.return=w,C)}function u(w,b,N,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=T0(N,w.mode,C),b.return=w,b):(b=i(b,N.children||[]),b.return=w,b)}function d(w,b,N,C,A){return b===null||b.tag!==7?(b=Ca(N,w.mode,C,A),b.return=w,b):(b=i(b,N),b.return=w,b)}function p(w,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return b=L0(""+b,w.mode,N),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case hh:return N=Vh(b.type,b.key,b.props,null,w.mode,N),N.ref=hu(w,null,b),N.return=w,N;case Ll:return b=T0(b,w.mode,N),b.return=w,b;case No:var C=b._init;return p(w,C(b._payload),N)}if(wu(b)||au(b))return b=Ca(b,w.mode,N,null),b.return=w,b;_h(w,b)}return null}function m(w,b,N,C){var A=b!==null?b.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return A!==null?null:a(w,b,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case hh:return N.key===A?l(w,b,N,C):null;case Ll:return N.key===A?u(w,b,N,C):null;case No:return A=N._init,m(w,b,A(N._payload),C)}if(wu(N)||au(N))return A!==null?null:d(w,b,N,C,null);_h(w,N)}return null}function f(w,b,N,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(N)||null,a(b,w,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case hh:return w=w.get(C.key===null?N:C.key)||null,l(b,w,C,A);case Ll:return w=w.get(C.key===null?N:C.key)||null,u(b,w,C,A);case No:var P=C._init;return f(w,b,N,P(C._payload),A)}if(wu(C)||au(C))return w=w.get(N)||null,d(b,w,C,A,null);_h(b,C)}return null}function x(w,b,N,C){for(var A=null,P=null,E=b,j=b=0,D=null;E!==null&&j<N.length;j++){E.index>j?(D=E,E=null):D=E.sibling;var U=m(w,E,N[j],C);if(U===null){E===null&&(E=D);break}n&&E&&U.alternate===null&&e(w,E),b=s(U,b,j),P===null?A=U:P.sibling=U,P=U,E=D}if(j===N.length)return t(w,E),sn&&ga(w,j),A;if(E===null){for(;j<N.length;j++)E=p(w,N[j],C),E!==null&&(b=s(E,b,j),P===null?A=E:P.sibling=E,P=E);return sn&&ga(w,j),A}for(E=r(w,E);j<N.length;j++)D=f(E,w,j,N[j],C),D!==null&&(n&&D.alternate!==null&&E.delete(D.key===null?j:D.key),b=s(D,b,j),P===null?A=D:P.sibling=D,P=D);return n&&E.forEach(function(L){return e(w,L)}),sn&&ga(w,j),A}function y(w,b,N,C){var A=au(N);if(typeof A!="function")throw Error(Be(150));if(N=A.call(N),N==null)throw Error(Be(151));for(var P=A=null,E=b,j=b=0,D=null,U=N.next();E!==null&&!U.done;j++,U=N.next()){E.index>j?(D=E,E=null):D=E.sibling;var L=m(w,E,U.value,C);if(L===null){E===null&&(E=D);break}n&&E&&L.alternate===null&&e(w,E),b=s(L,b,j),P===null?A=L:P.sibling=L,P=L,E=D}if(U.done)return t(w,E),sn&&ga(w,j),A;if(E===null){for(;!U.done;j++,U=N.next())U=p(w,U.value,C),U!==null&&(b=s(U,b,j),P===null?A=U:P.sibling=U,P=U);return sn&&ga(w,j),A}for(E=r(w,E);!U.done;j++,U=N.next())U=f(E,w,j,U.value,C),U!==null&&(n&&U.alternate!==null&&E.delete(U.key===null?j:U.key),b=s(U,b,j),P===null?A=U:P.sibling=U,P=U);return n&&E.forEach(function(F){return e(w,F)}),sn&&ga(w,j),A}function _(w,b,N,C){if(typeof N=="object"&&N!==null&&N.type===Tl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case hh:e:{for(var A=N.key,P=b;P!==null;){if(P.key===A){if(A=N.type,A===Tl){if(P.tag===7){t(w,P.sibling),b=i(P,N.props.children),b.return=w,w=b;break e}}else if(P.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===No&&N2(A)===P.type){t(w,P.sibling),b=i(P,N.props),b.ref=hu(w,P,N),b.return=w,w=b;break e}t(w,P);break}else e(w,P);P=P.sibling}N.type===Tl?(b=Ca(N.props.children,w.mode,C,N.key),b.return=w,w=b):(C=Vh(N.type,N.key,N.props,null,w.mode,C),C.ref=hu(w,b,N),C.return=w,w=C)}return o(w);case Ll:e:{for(P=N.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){t(w,b.sibling),b=i(b,N.children||[]),b.return=w,w=b;break e}else{t(w,b);break}else e(w,b);b=b.sibling}b=T0(N,w.mode,C),b.return=w,w=b}return o(w);case No:return P=N._init,_(w,b,P(N._payload),C)}if(wu(N))return x(w,b,N,C);if(au(N))return y(w,b,N,C);_h(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,b!==null&&b.tag===6?(t(w,b.sibling),b=i(b,N),b.return=w,w=b):(t(w,b),b=L0(N,w.mode,C),b.return=w,w=b),o(w)):t(w,b)}return _}var uc=C5(!0),E5=C5(!1),mf=Qo(null),gf=null,Bl=null,f1=null;function p1(){f1=Bl=gf=null}function m1(n){var e=mf.current;rn(mf),n._currentValue=e}function Rm(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Xl(n,e){gf=n,f1=Bl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Hr=!0),n.firstContext=null)}function Oi(n){var e=n._currentValue;if(f1!==n)if(n={context:n,memoizedValue:e,next:null},Bl===null){if(gf===null)throw Error(Be(308));Bl=n,gf.dependencies={lanes:0,firstContext:n}}else Bl=Bl.next=n;return e}var Na=null;function g1(n){Na===null?Na=[n]:Na.push(n)}function P5(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,g1(e)):(t.next=i.next,i.next=t),e.interleaved=t,Js(n,r)}function Js(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ko=!1;function y1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L5(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function qs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function $o(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Js(n,t)}return i=r.interleaved,i===null?(e.next=e,g1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Js(n,t)}function Uh(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,n1(n,t)}}function k2(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function yf(n,e,t,r){var i=n.updateQueue;ko=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,d=u=l=null,a=s;do{var m=a.lane,f=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=n,y=a;switch(m=e,f=t,y.tag){case 1:if(x=y.payload,typeof x=="function"){p=x.call(f,p,m);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,m=typeof x=="function"?x.call(f,p,m):x,m==null)break e;p=hn({},p,m);break e;case 2:ko=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else f={eventTime:f,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=f,l=p):d=d.next=f,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Oa|=o,n.lanes=o,n.memoizedState=p}}function j2(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Be(191,i));i.call(r)}}}var vd={},ws=Qo(vd),Zu=Qo(vd),ed=Qo(vd);function ka(n){if(n===vd)throw Error(Be(174));return n}function v1(n,e){switch(Zt(ed,e),Zt(Zu,n),Zt(ws,vd),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gm(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=gm(e,n)}rn(ws),Zt(ws,e)}function dc(){rn(ws),rn(Zu),rn(ed)}function T5(n){ka(ed.current);var e=ka(ws.current),t=gm(e,n.type);e!==t&&(Zt(Zu,n),Zt(ws,t))}function x1(n){Zu.current===n&&(rn(ws),rn(Zu))}var ln=Qo(0);function vf(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var k0=[];function w1(){for(var n=0;n<k0.length;n++)k0[n]._workInProgressVersionPrimary=null;k0.length=0}var zh=to.ReactCurrentDispatcher,j0=to.ReactCurrentBatchConfig,Fa=0,dn=null,$n=null,Yn=null,xf=!1,Lu=!1,td=0,O3=0;function ar(){throw Error(Be(321))}function b1(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!rs(n[t],e[t]))return!1;return!0}function S1(n,e,t,r,i,s){if(Fa=s,dn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zh.current=n===null||n.memoizedState===null?z3:W3,n=t(r,i),Lu){s=0;do{if(Lu=!1,td=0,25<=s)throw Error(Be(301));s+=1,Yn=$n=null,e.updateQueue=null,zh.current=H3,n=t(r,i)}while(Lu)}if(zh.current=wf,e=$n!==null&&$n.next!==null,Fa=0,Yn=$n=dn=null,xf=!1,e)throw Error(Be(300));return n}function _1(){var n=td!==0;return td=0,n}function fs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?dn.memoizedState=Yn=n:Yn=Yn.next=n,Yn}function $i(){if($n===null){var n=dn.alternate;n=n!==null?n.memoizedState:null}else n=$n.next;var e=Yn===null?dn.memoizedState:Yn.next;if(e!==null)Yn=e,$n=n;else{if(n===null)throw Error(Be(310));$n=n,n={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},Yn===null?dn.memoizedState=Yn=n:Yn=Yn.next=n}return Yn}function nd(n,e){return typeof e=="function"?e(n):e}function A0(n){var e=$i(),t=e.queue;if(t===null)throw Error(Be(311));t.lastRenderedReducer=n;var r=$n,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Fa&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,dn.lanes|=d,Oa|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,rs(r,e.memoizedState)||(Hr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,dn.lanes|=s,Oa|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function C0(n){var e=$i(),t=e.queue;if(t===null)throw Error(Be(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);rs(s,e.memoizedState)||(Hr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function D5(){}function M5(n,e){var t=dn,r=$i(),i=e(),s=!rs(r.memoizedState,i);if(s&&(r.memoizedState=i,Hr=!0),r=r.queue,N1(F5.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Yn!==null&&Yn.memoizedState.tag&1){if(t.flags|=2048,rd(9,R5.bind(null,t,r,i,e),void 0,null),Gn===null)throw Error(Be(349));Fa&30||I5(t,e,i)}return i}function I5(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=dn.updateQueue,e===null?(e={lastEffect:null,stores:null},dn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function R5(n,e,t,r){e.value=t,e.getSnapshot=r,O5(e)&&$5(n)}function F5(n,e,t){return t(function(){O5(e)&&$5(n)})}function O5(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!rs(n,t)}catch{return!0}}function $5(n){var e=Js(n,1);e!==null&&ts(e,n,1,-1)}function A2(n){var e=fs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nd,lastRenderedState:n},e.queue=n,n=n.dispatch=U3.bind(null,dn,n),[e.memoizedState,n]}function rd(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=dn.updateQueue,e===null?(e={lastEffect:null,stores:null},dn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function B5(){return $i().memoizedState}function Wh(n,e,t,r){var i=fs();dn.flags|=n,i.memoizedState=rd(1|e,t,void 0,r===void 0?null:r)}function Gf(n,e,t,r){var i=$i();r=r===void 0?null:r;var s=void 0;if($n!==null){var o=$n.memoizedState;if(s=o.destroy,r!==null&&b1(r,o.deps)){i.memoizedState=rd(e,t,s,r);return}}dn.flags|=n,i.memoizedState=rd(1|e,t,s,r)}function C2(n,e){return Wh(8390656,8,n,e)}function N1(n,e){return Gf(2048,8,n,e)}function U5(n,e){return Gf(4,2,n,e)}function z5(n,e){return Gf(4,4,n,e)}function W5(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function H5(n,e,t){return t=t!=null?t.concat([n]):null,Gf(4,4,W5.bind(null,e,n),t)}function k1(){}function q5(n,e){var t=$i();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&b1(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Y5(n,e){var t=$i();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&b1(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function V5(n,e,t){return Fa&21?(rs(t,e)||(t=Qx(),dn.lanes|=t,Oa|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Hr=!0),n.memoizedState=t)}function $3(n,e){var t=Wt;Wt=t!==0&&4>t?t:4,n(!0);var r=j0.transition;j0.transition={};try{n(!1),e()}finally{Wt=t,j0.transition=r}}function G5(){return $i().memoizedState}function B3(n,e,t){var r=Uo(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},J5(n))K5(e,t);else if(t=P5(n,e,t,r),t!==null){var i=Ar();ts(t,n,r,i),X5(t,e,r)}}function U3(n,e,t){var r=Uo(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(J5(n))K5(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,rs(a,o)){var l=e.interleaved;l===null?(i.next=i,g1(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=P5(n,e,i,r),t!==null&&(i=Ar(),ts(t,n,r,i),X5(t,e,r))}}function J5(n){var e=n.alternate;return n===dn||e!==null&&e===dn}function K5(n,e){Lu=xf=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function X5(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,n1(n,t)}}var wf={readContext:Oi,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},z3={readContext:Oi,useCallback:function(n,e){return fs().memoizedState=[n,e===void 0?null:e],n},useContext:Oi,useEffect:C2,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Wh(4194308,4,W5.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Wh(4194308,4,n,e)},useInsertionEffect:function(n,e){return Wh(4,2,n,e)},useMemo:function(n,e){var t=fs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=fs();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=B3.bind(null,dn,n),[r.memoizedState,n]},useRef:function(n){var e=fs();return n={current:n},e.memoizedState=n},useState:A2,useDebugValue:k1,useDeferredValue:function(n){return fs().memoizedState=n},useTransition:function(){var n=A2(!1),e=n[0];return n=$3.bind(null,n[1]),fs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=dn,i=fs();if(sn){if(t===void 0)throw Error(Be(407));t=t()}else{if(t=e(),Gn===null)throw Error(Be(349));Fa&30||I5(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,C2(F5.bind(null,r,s,n),[n]),r.flags|=2048,rd(9,R5.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=fs(),e=Gn.identifierPrefix;if(sn){var t=Ws,r=zs;t=(r&~(1<<32-es(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=td++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=O3++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},W3={readContext:Oi,useCallback:q5,useContext:Oi,useEffect:N1,useImperativeHandle:H5,useInsertionEffect:U5,useLayoutEffect:z5,useMemo:Y5,useReducer:A0,useRef:B5,useState:function(){return A0(nd)},useDebugValue:k1,useDeferredValue:function(n){var e=$i();return V5(e,$n.memoizedState,n)},useTransition:function(){var n=A0(nd)[0],e=$i().memoizedState;return[n,e]},useMutableSource:D5,useSyncExternalStore:M5,useId:G5,unstable_isNewReconciler:!1},H3={readContext:Oi,useCallback:q5,useContext:Oi,useEffect:N1,useImperativeHandle:H5,useInsertionEffect:U5,useLayoutEffect:z5,useMemo:Y5,useReducer:C0,useRef:B5,useState:function(){return C0(nd)},useDebugValue:k1,useDeferredValue:function(n){var e=$i();return $n===null?e.memoizedState=n:V5(e,$n.memoizedState,n)},useTransition:function(){var n=C0(nd)[0],e=$i().memoizedState;return[n,e]},useMutableSource:D5,useSyncExternalStore:M5,useId:G5,unstable_isNewReconciler:!1};function Ji(n,e){if(n&&n.defaultProps){e=hn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Fm(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:hn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Jf={isMounted:function(n){return(n=n._reactInternals)?za(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ar(),i=Uo(n),s=qs(r,i);s.payload=e,t!=null&&(s.callback=t),e=$o(n,s,i),e!==null&&(ts(e,n,i,r),Uh(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ar(),i=Uo(n),s=qs(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=$o(n,s,i),e!==null&&(ts(e,n,i,r),Uh(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ar(),r=Uo(n),i=qs(t,r);i.tag=2,e!=null&&(i.callback=e),e=$o(n,i,r),e!==null&&(ts(e,n,r,t),Uh(e,n,r))}};function E2(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ju(t,r)||!Ju(i,s):!0}function Q5(n,e,t){var r=!1,i=Yo,s=e.contextType;return typeof s=="object"&&s!==null?s=Oi(s):(i=Yr(e)?Ia:br.current,r=e.contextTypes,s=(r=r!=null)?lc(n,i):Yo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jf,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function P2(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Jf.enqueueReplaceState(e,e.state,null)}function Om(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},y1(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Oi(s):(s=Yr(e)?Ia:br.current,i.context=lc(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fm(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jf.enqueueReplaceState(i,i.state,null),yf(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function hc(n,e){try{var t="",r=e;do t+=v4(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function E0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function $m(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var q3=typeof WeakMap=="function"?WeakMap:Map;function Z5(n,e,t){t=qs(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Sf||(Sf=!0,Jm=r),$m(n,e)},t}function ew(n,e,t){t=qs(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){$m(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){$m(n,e),typeof r!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function L2(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new q3;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=sN.bind(null,n,e,t),e.then(n,n))}function T2(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function D2(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=qs(-1,1),e.tag=2,$o(t,e,1))),t.lanes|=1),n)}var Y3=to.ReactCurrentOwner,Hr=!1;function kr(n,e,t,r){e.child=n===null?E5(e,null,t,r):uc(e,n.child,t,r)}function M2(n,e,t,r,i){t=t.render;var s=e.ref;return Xl(e,i),r=S1(n,e,t,r,s,i),t=_1(),n!==null&&!Hr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ks(n,e,i)):(sn&&t&&u1(e),e.flags|=1,kr(n,e,r,i),e.child)}function I2(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!D1(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,tw(n,e,s,r,i)):(n=Vh(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Ju,t(o,r)&&n.ref===e.ref)return Ks(n,e,i)}return e.flags|=1,n=zo(s,r),n.ref=e.ref,n.return=e,e.child=n}function tw(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Ju(s,r)&&n.ref===e.ref)if(Hr=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Hr=!0);else return e.lanes=n.lanes,Ks(n,e,i)}return Bm(n,e,t,r,i)}function nw(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(zl,ai),ai|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Zt(zl,ai),ai|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Zt(zl,ai),ai|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Zt(zl,ai),ai|=r;return kr(n,e,i,t),e.child}function rw(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Bm(n,e,t,r,i){var s=Yr(t)?Ia:br.current;return s=lc(e,s),Xl(e,i),t=S1(n,e,t,r,s,i),r=_1(),n!==null&&!Hr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ks(n,e,i)):(sn&&r&&u1(e),e.flags|=1,kr(n,e,t,i),e.child)}function R2(n,e,t,r,i){if(Yr(t)){var s=!0;hf(e)}else s=!1;if(Xl(e,i),e.stateNode===null)Hh(n,e),Q5(e,t,r),Om(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Oi(u):(u=Yr(t)?Ia:br.current,u=lc(e,u));var d=t.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&P2(e,o,r,u),ko=!1;var m=e.memoizedState;o.state=m,yf(e,r,o,i),l=e.memoizedState,a!==r||m!==l||qr.current||ko?(typeof d=="function"&&(Fm(e,t,d,r),l=e.memoizedState),(a=ko||E2(e,t,a,r,m,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,L5(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ji(e.type,a),o.props=u,p=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Oi(l):(l=Yr(t)?Ia:br.current,l=lc(e,l));var f=t.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&P2(e,o,r,l),ko=!1,m=e.memoizedState,o.state=m,yf(e,r,o,i);var x=e.memoizedState;a!==p||m!==x||qr.current||ko?(typeof f=="function"&&(Fm(e,t,f,r),x=e.memoizedState),(u=ko||E2(e,t,u,r,m,x,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return Um(n,e,t,r,s,i)}function Um(n,e,t,r,i,s){rw(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&b2(e,t,!1),Ks(n,e,s);r=e.stateNode,Y3.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=uc(e,n.child,null,s),e.child=uc(e,null,a,s)):kr(n,e,a,s),e.memoizedState=r.state,i&&b2(e,t,!0),e.child}function iw(n){var e=n.stateNode;e.pendingContext?w2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&w2(n,e.context,!1),v1(n,e.containerInfo)}function F2(n,e,t,r,i){return cc(),h1(i),e.flags|=256,kr(n,e,t,r),e.child}var zm={dehydrated:null,treeContext:null,retryLane:0};function Wm(n){return{baseLanes:n,cachePool:null,transitions:null}}function sw(n,e,t){var r=e.pendingProps,i=ln.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Zt(ln,i&1),n===null)return Im(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qf(o,r,0,null),n=Ca(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Wm(t),e.memoizedState=zm,n):j1(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return V3(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=zo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=zo(a,s):(s=Ca(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?Wm(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=zm,r}return s=n.child,n=s.sibling,r=zo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function j1(n,e){return e=Qf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Nh(n,e,t,r){return r!==null&&h1(r),uc(e,n.child,null,t),n=j1(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function V3(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=E0(Error(Be(422))),Nh(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qf({mode:"visible",children:r.children},i,0,null),s=Ca(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&uc(e,n.child,null,o),e.child.memoizedState=Wm(o),e.memoizedState=zm,s);if(!(e.mode&1))return Nh(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Be(419)),r=E0(s,r,void 0),Nh(n,e,o,r)}if(a=(o&n.childLanes)!==0,Hr||a){if(r=Gn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Js(n,i),ts(r,n,i,-1))}return T1(),r=E0(Error(Be(421))),Nh(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=oN.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ui=Oo(i.nextSibling),fi=e,sn=!0,Zi=null,n!==null&&(Pi[Li++]=zs,Pi[Li++]=Ws,Pi[Li++]=Ra,zs=n.id,Ws=n.overflow,Ra=e),e=j1(e,r.children),e.flags|=4096,e)}function O2(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Rm(n.return,e,t)}function P0(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function ow(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kr(n,e,r.children,t),r=ln.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&O2(n,t,e);else if(n.tag===19)O2(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Zt(ln,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&vf(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),P0(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&vf(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}P0(e,!0,t,null,s);break;case"together":P0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hh(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ks(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Oa|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Be(153));if(e.child!==null){for(n=e.child,t=zo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=zo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function G3(n,e,t){switch(e.tag){case 3:iw(e),cc();break;case 5:T5(e);break;case 1:Yr(e.type)&&hf(e);break;case 4:v1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Zt(mf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Zt(ln,ln.current&1),e.flags|=128,null):t&e.child.childLanes?sw(n,e,t):(Zt(ln,ln.current&1),n=Ks(n,e,t),n!==null?n.sibling:null);Zt(ln,ln.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return ow(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Zt(ln,ln.current),r)break;return null;case 22:case 23:return e.lanes=0,nw(n,e,t)}return Ks(n,e,t)}var aw,Hm,lw,cw;aw=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Hm=function(){};lw=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,ka(ws.current);var s=null;switch(t){case"input":i=hm(n,i),r=hm(n,r),s=[];break;case"select":i=hn({},i,{value:void 0}),r=hn({},r,{value:void 0}),s=[];break;case"textarea":i=mm(n,i),r=mm(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=uf)}ym(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&tn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};cw=function(n,e,t,r){t!==r&&(e.flags|=4)};function fu(n,e){if(!sn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function lr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function J3(n,e,t){var r=e.pendingProps;switch(d1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(e),null;case 1:return Yr(e.type)&&df(),lr(e),null;case 3:return r=e.stateNode,dc(),rn(qr),rn(br),w1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Sh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zi!==null&&(Qm(Zi),Zi=null))),Hm(n,e),lr(e),null;case 5:x1(e);var i=ka(ed.current);if(t=e.type,n!==null&&e.stateNode!=null)lw(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Be(166));return lr(e),null}if(n=ka(ws.current),Sh(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[ms]=e,r[Qu]=s,n=(e.mode&1)!==0,t){case"dialog":tn("cancel",r),tn("close",r);break;case"iframe":case"object":case"embed":tn("load",r);break;case"video":case"audio":for(i=0;i<Su.length;i++)tn(Su[i],r);break;case"source":tn("error",r);break;case"img":case"image":case"link":tn("error",r),tn("load",r);break;case"details":tn("toggle",r);break;case"input":Vy(r,s),tn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tn("invalid",r);break;case"textarea":Jy(r,s),tn("invalid",r)}ym(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&bh(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bh(r.textContent,a,n),i=["children",""+a]):zu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tn("scroll",r)}switch(t){case"input":fh(r),Gy(r,s,!0);break;case"textarea":fh(r),Ky(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=uf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Fx(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[ms]=e,n[Qu]=r,aw(n,e,!1,!1),e.stateNode=n;e:{switch(o=vm(t,r),t){case"dialog":tn("cancel",n),tn("close",n),i=r;break;case"iframe":case"object":case"embed":tn("load",n),i=r;break;case"video":case"audio":for(i=0;i<Su.length;i++)tn(Su[i],n);i=r;break;case"source":tn("error",n),i=r;break;case"img":case"image":case"link":tn("error",n),tn("load",n),i=r;break;case"details":tn("toggle",n),i=r;break;case"input":Vy(n,r),i=hm(n,r),tn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=hn({},r,{value:void 0}),tn("invalid",n);break;case"textarea":Jy(n,r),i=mm(n,r),tn("invalid",n);break;default:i=r}ym(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Bx(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ox(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Wu(n,l):typeof l=="number"&&Wu(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tn("scroll",n):l!=null&&Kg(n,s,l,o))}switch(t){case"input":fh(n),Gy(n,r,!1);break;case"textarea":fh(n),Ky(n);break;case"option":r.value!=null&&n.setAttribute("value",""+qo(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Vl(n,!!r.multiple,s,!1):r.defaultValue!=null&&Vl(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=uf)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lr(e),null;case 6:if(n&&e.stateNode!=null)cw(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Be(166));if(t=ka(ed.current),ka(ws.current),Sh(e)){if(r=e.stateNode,t=e.memoizedProps,r[ms]=e,(s=r.nodeValue!==t)&&(n=fi,n!==null))switch(n.tag){case 3:bh(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&bh(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[ms]=e,e.stateNode=r}return lr(e),null;case 13:if(rn(ln),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(sn&&ui!==null&&e.mode&1&&!(e.flags&128))A5(),cc(),e.flags|=98560,s=!1;else if(s=Sh(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Be(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Be(317));s[ms]=e}else cc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lr(e),s=!1}else Zi!==null&&(Qm(Zi),Zi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ln.current&1?Un===0&&(Un=3):T1())),e.updateQueue!==null&&(e.flags|=4),lr(e),null);case 4:return dc(),Hm(n,e),n===null&&Ku(e.stateNode.containerInfo),lr(e),null;case 10:return m1(e.type._context),lr(e),null;case 17:return Yr(e.type)&&df(),lr(e),null;case 19:if(rn(ln),s=e.memoizedState,s===null)return lr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)fu(s,!1);else{if(Un!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=vf(n),o!==null){for(e.flags|=128,fu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Zt(ln,ln.current&1|2),e.child}n=n.sibling}s.tail!==null&&An()>fc&&(e.flags|=128,r=!0,fu(s,!1),e.lanes=4194304)}else{if(!r)if(n=vf(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),fu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!sn)return lr(e),null}else 2*An()-s.renderingStartTime>fc&&t!==1073741824&&(e.flags|=128,r=!0,fu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=An(),e.sibling=null,t=ln.current,Zt(ln,r?t&1|2:t&1),e):(lr(e),null);case 22:case 23:return L1(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ai&1073741824&&(lr(e),e.subtreeFlags&6&&(e.flags|=8192)):lr(e),null;case 24:return null;case 25:return null}throw Error(Be(156,e.tag))}function K3(n,e){switch(d1(e),e.tag){case 1:return Yr(e.type)&&df(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return dc(),rn(qr),rn(br),w1(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return x1(e),null;case 13:if(rn(ln),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Be(340));cc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return rn(ln),null;case 4:return dc(),null;case 10:return m1(e.type._context),null;case 22:case 23:return L1(),null;case 24:return null;default:return null}}var kh=!1,gr=!1,X3=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Ul(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){yn(n,e,r)}else t.current=null}function qm(n,e,t){try{t()}catch(r){yn(n,e,r)}}var $2=!1;function Q3(n,e){if(Cm=af,n=p5(),c1(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,d=0,p=n,m=null;t:for(;;){for(var f;p!==t||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(f=p.firstChild)!==null;)m=p,p=f;for(;;){if(p===n)break t;if(m===t&&++u===i&&(a=o),m===s&&++d===r&&(l=o),(f=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Em={focusedElem:n,selectionRange:t},af=!1,tt=e;tt!==null;)if(e=tt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,tt=n;else for(;tt!==null;){e=tt;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,_=x.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ji(e.type,y),_);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(C){yn(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,tt=n;break}tt=e.return}return x=$2,$2=!1,x}function Tu(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&qm(e,t,s)}i=i.next}while(i!==r)}}function Kf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Ym(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function uw(n){var e=n.alternate;e!==null&&(n.alternate=null,uw(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ms],delete e[Qu],delete e[Tm],delete e[M3],delete e[I3])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function dw(n){return n.tag===5||n.tag===3||n.tag===4}function B2(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dw(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Vm(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=uf));else if(r!==4&&(n=n.child,n!==null))for(Vm(n,e,t),n=n.sibling;n!==null;)Vm(n,e,t),n=n.sibling}function Gm(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Gm(n,e,t),n=n.sibling;n!==null;)Gm(n,e,t),n=n.sibling}var Zn=null,Xi=!1;function xo(n,e,t){for(t=t.child;t!==null;)hw(n,e,t),t=t.sibling}function hw(n,e,t){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(zf,t)}catch{}switch(t.tag){case 5:gr||Ul(t,e);case 6:var r=Zn,i=Xi;Zn=null,xo(n,e,t),Zn=r,Xi=i,Zn!==null&&(Xi?(n=Zn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Zn.removeChild(t.stateNode));break;case 18:Zn!==null&&(Xi?(n=Zn,t=t.stateNode,n.nodeType===8?_0(n.parentNode,t):n.nodeType===1&&_0(n,t),Vu(n)):_0(Zn,t.stateNode));break;case 4:r=Zn,i=Xi,Zn=t.stateNode.containerInfo,Xi=!0,xo(n,e,t),Zn=r,Xi=i;break;case 0:case 11:case 14:case 15:if(!gr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&qm(t,e,o),i=i.next}while(i!==r)}xo(n,e,t);break;case 1:if(!gr&&(Ul(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){yn(t,e,a)}xo(n,e,t);break;case 21:xo(n,e,t);break;case 22:t.mode&1?(gr=(r=gr)||t.memoizedState!==null,xo(n,e,t),gr=r):xo(n,e,t);break;default:xo(n,e,t)}}function U2(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new X3),e.forEach(function(r){var i=aN.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function qi(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Zn=a.stateNode,Xi=!1;break e;case 3:Zn=a.stateNode.containerInfo,Xi=!0;break e;case 4:Zn=a.stateNode.containerInfo,Xi=!0;break e}a=a.return}if(Zn===null)throw Error(Be(160));hw(s,o,i),Zn=null,Xi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){yn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fw(e,n),e=e.sibling}function fw(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(qi(e,n),ds(n),r&4){try{Tu(3,n,n.return),Kf(3,n)}catch(y){yn(n,n.return,y)}try{Tu(5,n,n.return)}catch(y){yn(n,n.return,y)}}break;case 1:qi(e,n),ds(n),r&512&&t!==null&&Ul(t,t.return);break;case 5:if(qi(e,n),ds(n),r&512&&t!==null&&Ul(t,t.return),n.flags&32){var i=n.stateNode;try{Wu(i,"")}catch(y){yn(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Ix(i,s),vm(a,o);var u=vm(a,s);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?Bx(i,p):d==="dangerouslySetInnerHTML"?Ox(i,p):d==="children"?Wu(i,p):Kg(i,d,p,u)}switch(a){case"input":fm(i,s);break;case"textarea":Rx(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Vl(i,!!s.multiple,f,!1):m!==!!s.multiple&&(s.defaultValue!=null?Vl(i,!!s.multiple,s.defaultValue,!0):Vl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qu]=s}catch(y){yn(n,n.return,y)}}break;case 6:if(qi(e,n),ds(n),r&4){if(n.stateNode===null)throw Error(Be(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(y){yn(n,n.return,y)}}break;case 3:if(qi(e,n),ds(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Vu(e.containerInfo)}catch(y){yn(n,n.return,y)}break;case 4:qi(e,n),ds(n);break;case 13:qi(e,n),ds(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(E1=An())),r&4&&U2(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(gr=(u=gr)||d,qi(e,n),gr=u):qi(e,n),ds(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(tt=n,d=n.child;d!==null;){for(p=tt=d;tt!==null;){switch(m=tt,f=m.child,m.tag){case 0:case 11:case 14:case 15:Tu(4,m,m.return);break;case 1:Ul(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){yn(r,t,y)}}break;case 5:Ul(m,m.return);break;case 22:if(m.memoizedState!==null){W2(p);continue}}f!==null?(f.return=m,tt=f):W2(p)}d=d.sibling}e:for(d=null,p=n;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$x("display",o))}catch(y){yn(n,n.return,y)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(y){yn(n,n.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:qi(e,n),ds(n),r&4&&U2(n);break;case 21:break;default:qi(e,n),ds(n)}}function ds(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(dw(t)){var r=t;break e}t=t.return}throw Error(Be(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wu(i,""),r.flags&=-33);var s=B2(n);Gm(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=B2(n);Vm(n,a,o);break;default:throw Error(Be(161))}}catch(l){yn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Z3(n,e,t){tt=n,pw(n)}function pw(n,e,t){for(var r=(n.mode&1)!==0;tt!==null;){var i=tt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||kh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||gr;a=kh;var u=gr;if(kh=o,(gr=l)&&!u)for(tt=i;tt!==null;)o=tt,l=o.child,o.tag===22&&o.memoizedState!==null?H2(i):l!==null?(l.return=o,tt=l):H2(i);for(;s!==null;)tt=s,pw(s),s=s.sibling;tt=i,kh=a,gr=u}z2(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,tt=s):z2(n)}}function z2(n){for(;tt!==null;){var e=tt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gr||Kf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ji(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&j2(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}j2(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Vu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}gr||e.flags&512&&Ym(e)}catch(m){yn(e,e.return,m)}}if(e===n){tt=null;break}if(t=e.sibling,t!==null){t.return=e.return,tt=t;break}tt=e.return}}function W2(n){for(;tt!==null;){var e=tt;if(e===n){tt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,tt=t;break}tt=e.return}}function H2(n){for(;tt!==null;){var e=tt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Kf(4,e)}catch(l){yn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){yn(e,i,l)}}var s=e.return;try{Ym(e)}catch(l){yn(e,s,l)}break;case 5:var o=e.return;try{Ym(e)}catch(l){yn(e,o,l)}}}catch(l){yn(e,e.return,l)}if(e===n){tt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,tt=a;break}tt=e.return}}var eN=Math.ceil,bf=to.ReactCurrentDispatcher,A1=to.ReactCurrentOwner,Ri=to.ReactCurrentBatchConfig,Ft=0,Gn=null,Rn=null,er=0,ai=0,zl=Qo(0),Un=0,id=null,Oa=0,Xf=0,C1=0,Du=null,Ur=null,E1=0,fc=1/0,Rs=null,Sf=!1,Jm=null,Bo=null,jh=!1,Po=null,_f=0,Mu=0,Km=null,qh=-1,Yh=0;function Ar(){return Ft&6?An():qh!==-1?qh:qh=An()}function Uo(n){return n.mode&1?Ft&2&&er!==0?er&-er:F3.transition!==null?(Yh===0&&(Yh=Qx()),Yh):(n=Wt,n!==0||(n=window.event,n=n===void 0?16:s5(n.type)),n):1}function ts(n,e,t,r){if(50<Mu)throw Mu=0,Km=null,Error(Be(185));md(n,t,r),(!(Ft&2)||n!==Gn)&&(n===Gn&&(!(Ft&2)&&(Xf|=t),Un===4&&Ao(n,er)),Vr(n,r),t===1&&Ft===0&&!(e.mode&1)&&(fc=An()+500,Vf&&Zo()))}function Vr(n,e){var t=n.callbackNode;F4(n,e);var r=of(n,n===Gn?er:0);if(r===0)t!==null&&Zy(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Zy(t),e===1)n.tag===0?R3(q2.bind(null,n)):N5(q2.bind(null,n)),T3(function(){!(Ft&6)&&Zo()}),t=null;else{switch(Zx(r)){case 1:t=t1;break;case 4:t=Kx;break;case 16:t=sf;break;case 536870912:t=Xx;break;default:t=sf}t=Sw(t,mw.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function mw(n,e){if(qh=-1,Yh=0,Ft&6)throw Error(Be(327));var t=n.callbackNode;if(Ql()&&n.callbackNode!==t)return null;var r=of(n,n===Gn?er:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Nf(n,r);else{e=r;var i=Ft;Ft|=2;var s=yw();(Gn!==n||er!==e)&&(Rs=null,fc=An()+500,Aa(n,e));do try{rN();break}catch(a){gw(n,a)}while(!0);p1(),bf.current=s,Ft=i,Rn!==null?e=0:(Gn=null,er=0,e=Un)}if(e!==0){if(e===2&&(i=_m(n),i!==0&&(r=i,e=Xm(n,i))),e===1)throw t=id,Aa(n,0),Ao(n,r),Vr(n,An()),t;if(e===6)Ao(n,r);else{if(i=n.current.alternate,!(r&30)&&!tN(i)&&(e=Nf(n,r),e===2&&(s=_m(n),s!==0&&(r=s,e=Xm(n,s))),e===1))throw t=id,Aa(n,0),Ao(n,r),Vr(n,An()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Be(345));case 2:ya(n,Ur,Rs);break;case 3:if(Ao(n,r),(r&130023424)===r&&(e=E1+500-An(),10<e)){if(of(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Ar(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Lm(ya.bind(null,n,Ur,Rs),e);break}ya(n,Ur,Rs);break;case 4:if(Ao(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-es(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=An()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eN(r/1960))-r,10<r){n.timeoutHandle=Lm(ya.bind(null,n,Ur,Rs),r);break}ya(n,Ur,Rs);break;case 5:ya(n,Ur,Rs);break;default:throw Error(Be(329))}}}return Vr(n,An()),n.callbackNode===t?mw.bind(null,n):null}function Xm(n,e){var t=Du;return n.current.memoizedState.isDehydrated&&(Aa(n,e).flags|=256),n=Nf(n,e),n!==2&&(e=Ur,Ur=t,e!==null&&Qm(e)),n}function Qm(n){Ur===null?Ur=n:Ur.push.apply(Ur,n)}function tN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!rs(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ao(n,e){for(e&=~C1,e&=~Xf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-es(e),r=1<<t;n[t]=-1,e&=~r}}function q2(n){if(Ft&6)throw Error(Be(327));Ql();var e=of(n,0);if(!(e&1))return Vr(n,An()),null;var t=Nf(n,e);if(n.tag!==0&&t===2){var r=_m(n);r!==0&&(e=r,t=Xm(n,r))}if(t===1)throw t=id,Aa(n,0),Ao(n,e),Vr(n,An()),t;if(t===6)throw Error(Be(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ya(n,Ur,Rs),Vr(n,An()),null}function P1(n,e){var t=Ft;Ft|=1;try{return n(e)}finally{Ft=t,Ft===0&&(fc=An()+500,Vf&&Zo())}}function $a(n){Po!==null&&Po.tag===0&&!(Ft&6)&&Ql();var e=Ft;Ft|=1;var t=Ri.transition,r=Wt;try{if(Ri.transition=null,Wt=1,n)return n()}finally{Wt=r,Ri.transition=t,Ft=e,!(Ft&6)&&Zo()}}function L1(){ai=zl.current,rn(zl)}function Aa(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,L3(t)),Rn!==null)for(t=Rn.return;t!==null;){var r=t;switch(d1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&df();break;case 3:dc(),rn(qr),rn(br),w1();break;case 5:x1(r);break;case 4:dc();break;case 13:rn(ln);break;case 19:rn(ln);break;case 10:m1(r.type._context);break;case 22:case 23:L1()}t=t.return}if(Gn=n,Rn=n=zo(n.current,null),er=ai=e,Un=0,id=null,C1=Xf=Oa=0,Ur=Du=null,Na!==null){for(e=0;e<Na.length;e++)if(t=Na[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Na=null}return n}function gw(n,e){do{var t=Rn;try{if(p1(),zh.current=wf,xf){for(var r=dn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xf=!1}if(Fa=0,Yn=$n=dn=null,Lu=!1,td=0,A1.current=null,t===null||t.return===null){Un=1,id=e,Rn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=er,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=T2(o);if(f!==null){f.flags&=-257,D2(f,o,a,s,e),f.mode&1&&L2(s,u,e),e=f,l=u;var x=e.updateQueue;if(x===null){var y=new Set;y.add(l),e.updateQueue=y}else x.add(l);break e}else{if(!(e&1)){L2(s,u,e),T1();break e}l=Error(Be(426))}}else if(sn&&a.mode&1){var _=T2(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),D2(_,o,a,s,e),h1(hc(l,a));break e}}s=l=hc(l,a),Un!==4&&(Un=2),Du===null?Du=[s]:Du.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Z5(s,l,e);k2(s,w);break e;case 1:a=l;var b=s.type,N=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Bo===null||!Bo.has(N)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=ew(s,a,e);k2(s,C);break e}}s=s.return}while(s!==null)}xw(t)}catch(A){e=A,Rn===t&&t!==null&&(Rn=t=t.return);continue}break}while(!0)}function yw(){var n=bf.current;return bf.current=wf,n===null?wf:n}function T1(){(Un===0||Un===3||Un===2)&&(Un=4),Gn===null||!(Oa&268435455)&&!(Xf&268435455)||Ao(Gn,er)}function Nf(n,e){var t=Ft;Ft|=2;var r=yw();(Gn!==n||er!==e)&&(Rs=null,Aa(n,e));do try{nN();break}catch(i){gw(n,i)}while(!0);if(p1(),Ft=t,bf.current=r,Rn!==null)throw Error(Be(261));return Gn=null,er=0,Un}function nN(){for(;Rn!==null;)vw(Rn)}function rN(){for(;Rn!==null&&!C4();)vw(Rn)}function vw(n){var e=bw(n.alternate,n,ai);n.memoizedProps=n.pendingProps,e===null?xw(n):Rn=e,A1.current=null}function xw(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=K3(t,e),t!==null){t.flags&=32767,Rn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Un=6,Rn=null;return}}else if(t=J3(t,e,ai),t!==null){Rn=t;return}if(e=e.sibling,e!==null){Rn=e;return}Rn=e=n}while(e!==null);Un===0&&(Un=5)}function ya(n,e,t){var r=Wt,i=Ri.transition;try{Ri.transition=null,Wt=1,iN(n,e,t,r)}finally{Ri.transition=i,Wt=r}return null}function iN(n,e,t,r){do Ql();while(Po!==null);if(Ft&6)throw Error(Be(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Be(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(O4(n,s),n===Gn&&(Rn=Gn=null,er=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||jh||(jh=!0,Sw(sf,function(){return Ql(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ri.transition,Ri.transition=null;var o=Wt;Wt=1;var a=Ft;Ft|=4,A1.current=null,Q3(n,t),fw(t,n),N3(Em),af=!!Cm,Em=Cm=null,n.current=t,Z3(t),E4(),Ft=a,Wt=o,Ri.transition=s}else n.current=t;if(jh&&(jh=!1,Po=n,_f=i),s=n.pendingLanes,s===0&&(Bo=null),T4(t.stateNode),Vr(n,An()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Sf)throw Sf=!1,n=Jm,Jm=null,n;return _f&1&&n.tag!==0&&Ql(),s=n.pendingLanes,s&1?n===Km?Mu++:(Mu=0,Km=n):Mu=0,Zo(),null}function Ql(){if(Po!==null){var n=Zx(_f),e=Ri.transition,t=Wt;try{if(Ri.transition=null,Wt=16>n?16:n,Po===null)var r=!1;else{if(n=Po,Po=null,_f=0,Ft&6)throw Error(Be(331));var i=Ft;for(Ft|=4,tt=n.current;tt!==null;){var s=tt,o=s.child;if(tt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(tt=u;tt!==null;){var d=tt;switch(d.tag){case 0:case 11:case 15:Tu(8,d,s)}var p=d.child;if(p!==null)p.return=d,tt=p;else for(;tt!==null;){d=tt;var m=d.sibling,f=d.return;if(uw(d),d===u){tt=null;break}if(m!==null){m.return=f,tt=m;break}tt=f}}}var x=s.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,tt=o;else e:for(;tt!==null;){if(s=tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Tu(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,tt=w;break e}tt=s.return}}var b=n.current;for(tt=b;tt!==null;){o=tt;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,tt=N;else e:for(o=b;tt!==null;){if(a=tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kf(9,a)}}catch(A){yn(a,a.return,A)}if(a===o){tt=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,tt=C;break e}tt=a.return}}if(Ft=i,Zo(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(zf,n)}catch{}r=!0}return r}finally{Wt=t,Ri.transition=e}}return!1}function Y2(n,e,t){e=hc(t,e),e=Z5(n,e,1),n=$o(n,e,1),e=Ar(),n!==null&&(md(n,1,e),Vr(n,e))}function yn(n,e,t){if(n.tag===3)Y2(n,n,t);else for(;e!==null;){if(e.tag===3){Y2(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bo===null||!Bo.has(r))){n=hc(t,n),n=ew(e,n,1),e=$o(e,n,1),n=Ar(),e!==null&&(md(e,1,n),Vr(e,n));break}}e=e.return}}function sN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ar(),n.pingedLanes|=n.suspendedLanes&t,Gn===n&&(er&t)===t&&(Un===4||Un===3&&(er&130023424)===er&&500>An()-E1?Aa(n,0):C1|=t),Vr(n,e)}function ww(n,e){e===0&&(n.mode&1?(e=gh,gh<<=1,!(gh&130023424)&&(gh=4194304)):e=1);var t=Ar();n=Js(n,e),n!==null&&(md(n,e,t),Vr(n,t))}function oN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),ww(n,t)}function aN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Be(314))}r!==null&&r.delete(e),ww(n,t)}var bw;bw=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||qr.current)Hr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Hr=!1,G3(n,e,t);Hr=!!(n.flags&131072)}else Hr=!1,sn&&e.flags&1048576&&k5(e,pf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hh(n,e),n=e.pendingProps;var i=lc(e,br.current);Xl(e,t),i=S1(null,e,r,n,i,t);var s=_1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yr(r)?(s=!0,hf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,y1(e),i.updater=Jf,e.stateNode=i,i._reactInternals=e,Om(e,r,n,t),e=Um(null,e,r,!0,s,t)):(e.tag=0,sn&&s&&u1(e),kr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Hh(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cN(r),n=Ji(r,n),i){case 0:e=Bm(null,e,r,n,t);break e;case 1:e=R2(null,e,r,n,t);break e;case 11:e=M2(null,e,r,n,t);break e;case 14:e=I2(null,e,r,Ji(r.type,n),t);break e}throw Error(Be(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),Bm(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),R2(n,e,r,i,t);case 3:e:{if(iw(e),n===null)throw Error(Be(387));r=e.pendingProps,s=e.memoizedState,i=s.element,L5(n,e),yf(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hc(Error(Be(423)),e),e=F2(n,e,r,t,i);break e}else if(r!==i){i=hc(Error(Be(424)),e),e=F2(n,e,r,t,i);break e}else for(ui=Oo(e.stateNode.containerInfo.firstChild),fi=e,sn=!0,Zi=null,t=E5(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(cc(),r===i){e=Ks(n,e,t);break e}kr(n,e,r,t)}e=e.child}return e;case 5:return T5(e),n===null&&Im(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Pm(r,i)?o=null:s!==null&&Pm(r,s)&&(e.flags|=32),rw(n,e),kr(n,e,o,t),e.child;case 6:return n===null&&Im(e),null;case 13:return sw(n,e,t);case 4:return v1(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=uc(e,null,r,t):kr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),M2(n,e,r,i,t);case 7:return kr(n,e,e.pendingProps,t),e.child;case 8:return kr(n,e,e.pendingProps.children,t),e.child;case 12:return kr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Zt(mf,r._currentValue),r._currentValue=o,s!==null)if(rs(s.value,o)){if(s.children===i.children&&!qr.current){e=Ks(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=qs(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Rm(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Be(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Rm(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Xl(e,t),i=Oi(i),r=r(i),e.flags|=1,kr(n,e,r,t),e.child;case 14:return r=e.type,i=Ji(r,e.pendingProps),i=Ji(r.type,i),I2(n,e,r,i,t);case 15:return tw(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),Hh(n,e),e.tag=1,Yr(r)?(n=!0,hf(e)):n=!1,Xl(e,t),Q5(e,r,i),Om(e,r,i,t),Um(null,e,r,!0,n,t);case 19:return ow(n,e,t);case 22:return nw(n,e,t)}throw Error(Be(156,e.tag))};function Sw(n,e){return Jx(n,e)}function lN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ti(n,e,t,r){return new lN(n,e,t,r)}function D1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cN(n){if(typeof n=="function")return D1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Qg)return 11;if(n===Zg)return 14}return 2}function zo(n,e){var t=n.alternate;return t===null?(t=Ti(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Vh(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")D1(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Tl:return Ca(t.children,i,s,e);case Xg:o=8,i|=8;break;case lm:return n=Ti(12,t,e,i|2),n.elementType=lm,n.lanes=s,n;case cm:return n=Ti(13,t,e,i),n.elementType=cm,n.lanes=s,n;case um:return n=Ti(19,t,e,i),n.elementType=um,n.lanes=s,n;case Tx:return Qf(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Px:o=10;break e;case Lx:o=9;break e;case Qg:o=11;break e;case Zg:o=14;break e;case No:o=16,r=null;break e}throw Error(Be(130,n==null?n:typeof n,""))}return e=Ti(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Ca(n,e,t,r){return n=Ti(7,n,r,e),n.lanes=t,n}function Qf(n,e,t,r){return n=Ti(22,n,r,e),n.elementType=Tx,n.lanes=t,n.stateNode={isHidden:!1},n}function L0(n,e,t){return n=Ti(6,n,null,e),n.lanes=t,n}function T0(n,e,t){return e=Ti(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function uN(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h0(0),this.expirationTimes=h0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function M1(n,e,t,r,i,s,o,a,l){return n=new uN(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ti(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},y1(s),n}function dN(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ll,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function _w(n){if(!n)return Yo;n=n._reactInternals;e:{if(za(n)!==n||n.tag!==1)throw Error(Be(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Be(171))}if(n.tag===1){var t=n.type;if(Yr(t))return _5(n,t,e)}return e}function Nw(n,e,t,r,i,s,o,a,l){return n=M1(t,r,!0,n,i,s,o,a,l),n.context=_w(null),t=n.current,r=Ar(),i=Uo(t),s=qs(r,i),s.callback=e??null,$o(t,s,i),n.current.lanes=i,md(n,i,r),Vr(n,r),n}function Zf(n,e,t,r){var i=e.current,s=Ar(),o=Uo(i);return t=_w(t),e.context===null?e.context=t:e.pendingContext=t,e=qs(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=$o(i,e,o),n!==null&&(ts(n,i,o,s),Uh(n,i,o)),o}function kf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function V2(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function I1(n,e){V2(n,e),(n=n.alternate)&&V2(n,e)}function hN(){return null}var kw=typeof reportError=="function"?reportError:function(n){console.error(n)};function R1(n){this._internalRoot=n}ep.prototype.render=R1.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Be(409));Zf(n,e,null,null)};ep.prototype.unmount=R1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;$a(function(){Zf(null,n,null,null)}),e[Gs]=null}};function ep(n){this._internalRoot=n}ep.prototype.unstable_scheduleHydration=function(n){if(n){var e=n5();n={blockedOn:null,target:n,priority:e};for(var t=0;t<jo.length&&e!==0&&e<jo[t].priority;t++);jo.splice(t,0,n),t===0&&i5(n)}};function F1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function tp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function G2(){}function fN(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=kf(o);s.call(u)}}var o=Nw(e,r,n,0,null,!1,!1,"",G2);return n._reactRootContainer=o,n[Gs]=o.current,Ku(n.nodeType===8?n.parentNode:n),$a(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=kf(l);a.call(u)}}var l=M1(n,0,!1,null,null,!1,!1,"",G2);return n._reactRootContainer=l,n[Gs]=l.current,Ku(n.nodeType===8?n.parentNode:n),$a(function(){Zf(e,l,t,r)}),l}function np(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=kf(o);a.call(l)}}Zf(e,o,n,i)}else o=fN(t,e,n,i,r);return kf(o)}e5=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=bu(e.pendingLanes);t!==0&&(n1(e,t|1),Vr(e,An()),!(Ft&6)&&(fc=An()+500,Zo()))}break;case 13:$a(function(){var r=Js(n,1);if(r!==null){var i=Ar();ts(r,n,1,i)}}),I1(n,1)}};r1=function(n){if(n.tag===13){var e=Js(n,134217728);if(e!==null){var t=Ar();ts(e,n,134217728,t)}I1(n,134217728)}};t5=function(n){if(n.tag===13){var e=Uo(n),t=Js(n,e);if(t!==null){var r=Ar();ts(t,n,e,r)}I1(n,e)}};n5=function(){return Wt};r5=function(n,e){var t=Wt;try{return Wt=n,e()}finally{Wt=t}};wm=function(n,e,t){switch(e){case"input":if(fm(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Yf(r);if(!i)throw Error(Be(90));Mx(r),fm(r,i)}}}break;case"textarea":Rx(n,t);break;case"select":e=t.value,e!=null&&Vl(n,!!t.multiple,e,!1)}};Wx=P1;Hx=$a;var pN={usingClientEntryPoint:!1,Events:[yd,Rl,Yf,Ux,zx,P1]},pu={findFiberByHostInstance:_a,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mN={bundleType:pu.bundleType,version:pu.version,rendererPackageName:pu.rendererPackageName,rendererConfig:pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:to.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Vx(n),n===null?null:n.stateNode},findFiberByHostInstance:pu.findFiberByHostInstance||hN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{zf=Ah.inject(mN),xs=Ah}catch{}}xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pN;xi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!F1(e))throw Error(Be(200));return dN(n,e,null,t)};xi.createRoot=function(n,e){if(!F1(n))throw Error(Be(299));var t=!1,r="",i=kw;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=M1(n,1,!1,null,null,t,!1,r,i),n[Gs]=e.current,Ku(n.nodeType===8?n.parentNode:n),new R1(e)};xi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Be(188)):(n=Object.keys(n).join(","),Error(Be(268,n)));return n=Vx(e),n=n===null?null:n.stateNode,n};xi.flushSync=function(n){return $a(n)};xi.hydrate=function(n,e,t){if(!tp(e))throw Error(Be(200));return np(null,n,e,!0,t)};xi.hydrateRoot=function(n,e,t){if(!F1(n))throw Error(Be(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=kw;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Nw(e,null,n,1,t??null,i,!1,s,o),n[Gs]=e.current,Ku(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new ep(e)};xi.render=function(n,e,t){if(!tp(e))throw Error(Be(200));return np(null,n,e,!1,t)};xi.unmountComponentAtNode=function(n){if(!tp(n))throw Error(Be(40));return n._reactRootContainer?($a(function(){np(null,null,n,!1,function(){n._reactRootContainer=null,n[Gs]=null})}),!0):!1};xi.unstable_batchedUpdates=P1;xi.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!tp(t))throw Error(Be(200));if(n==null||n._reactInternals===void 0)throw Error(Be(38));return np(n,e,t,!1,r)};xi.version="18.3.1-next-f1338f8080-20240426";function jw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jw)}catch(n){console.error(n)}}jw(),jx.exports=xi;var xn=jx.exports,Aw,J2=xn;Aw=J2.createRoot,J2.hydrateRoot;/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),K2=n=>{const e=yN(n);return e.charAt(0).toUpperCase()+e.slice(1)},Cw=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),vN=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=H.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>H.createElement("svg",{ref:l,...xN,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Cw("lucide",i),...!s&&!vN(a)&&{"aria-hidden":"true"},...a},[...o.map(([u,d])=>H.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=(n,e)=>{const t=H.forwardRef(({className:r,...i},s)=>H.createElement(wN,{ref:s,iconNode:e,className:Cw(`lucide-${gN(K2(n))}`,`lucide-${n}`,r),...i}));return t.displayName=K2(n),t};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],SN=Mt("arrow-right",bN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],NN=Mt("calculator",_N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Cr=Mt("calendar",kN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ew=Mt("check",jN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Pw=Mt("chevron-left",AN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Lw=Mt("chevron-right",CN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Zm=Mt("circle-alert",EN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],pc=Mt("circle-check-big",PN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],O1=Mt("clock",LN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],eg=Mt("database",TN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ys=Mt("download",DN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],kc=Mt("eye-off",MN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jc=Mt("eye",IN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ns=Mt("file-text",RN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ON=Mt("grid-3x3",FN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],X2=Mt("list",$N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],UN=Mt("loader-circle",BN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],WN=Mt("palette",zN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],qN=Mt("pen-line",HN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Q2=Mt("plus",YN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Tw=Mt("printer",VN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],JN=Mt("save",GN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],tg=Mt("server",KN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dw=Mt("settings",XN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Mw=Mt("square-pen",QN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Z2=Mt("star",ZN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],tk=Mt("table",ek);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],bs=Mt("trash-2",nk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ik=Mt("trending-up",rk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Jn=Mt("triangle-alert",sk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jf=Mt("upload",ok);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Wr=Mt("user",ak);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ev=Mt("users",lk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Er=Mt("x",ck);function Fs(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Iw(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var pi={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},mc={duration:.5,overwrite:!1,delay:0},$1,tr,on,Di=1e8,Jt=1/Di,ng=Math.PI*2,uk=ng/4,dk=0,Rw=Math.sqrt,hk=Math.cos,fk=Math.sin,Kn=function(e){return typeof e=="string"},vn=function(e){return typeof e=="function"},Xs=function(e){return typeof e=="number"},B1=function(e){return typeof e>"u"},_s=function(e){return typeof e=="object"},Gr=function(e){return e!==!1},U1=function(){return typeof window<"u"},Ch=function(e){return vn(e)||Kn(e)},Fw=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},wr=Array.isArray,rg=/(?:-?\.?\d|\.)+/gi,Ow=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Wl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,D0=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,$w=/[+-]=-?[.\d]+/,Bw=/[^,'"\[\]\s]+/gi,pk=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,cn,ps,ig,z1,yi={},Af={},Uw,zw=function(e){return(Af=gc(e,yi))&&Zr},W1=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},sd=function(e,t){return!t&&console.warn(e)},Ww=function(e,t){return e&&(yi[e]=t)&&Af&&(Af[e]=t)||yi},od=function(){return 0},mk={suppressEvents:!0,isStart:!0,kill:!1},Gh={suppressEvents:!0,kill:!1},gk={suppressEvents:!0},H1={},Wo=[],sg={},Hw,li={},M0={},tv=30,Jh=[],q1="",Y1=function(e){var t=e[0],r,i;if(_s(t)||vn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=Jh.length;i--&&!Jh[i].targetTest(t););r=Jh[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new pb(e[i],r)))||e.splice(i,1);return e},Ea=function(e){return e._gsap||Y1(Mi(e))[0]._gsap},qw=function(e,t,r){return(r=e[t])&&vn(r)?e[t]():B1(r)&&e.getAttribute&&e.getAttribute(t)||r},Jr=function(e,t){return(e=e.split(",")).forEach(t)||e},jn=function(e){return Math.round(e*1e5)/1e5||0},In=function(e){return Math.round(e*1e7)/1e7||0},Zl=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},yk=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},Cf=function(){var e=Wo.length,t=Wo.slice(0),r,i;for(sg={},Wo.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},V1=function(e){return!!(e._initted||e._startAt||e.add)},Yw=function(e,t,r,i){Wo.length&&!tr&&Cf(),e.render(t,r,!!(tr&&t<0&&V1(e))),Wo.length&&!tr&&Cf()},Vw=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Bw).length<2?t:Kn(e)?e.trim():e},Gw=function(e){return e},vi=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},vk=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},gc=function(e,t){for(var r in t)e[r]=t[r];return e},nv=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=_s(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},Ef=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Iu=function(e){var t=e.parent||cn,r=e.keyframes?vk(wr(e.keyframes)):vi;if(Gr(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},xk=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},Jw=function(e,t,r,i,s){var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},rp=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Vo=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Pa=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},wk=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},og=function(e,t,r,i){return e._startAt&&(tr?e._startAt.revert(Gh):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},bk=function n(e){return!e||e._ts&&n(e.parent)},rv=function(e){return e._repeat?yc(e._tTime,e=e.duration()+e._rDelay)*e:0},yc=function(e,t){var r=Math.floor(e=In(e/t));return e&&r===e?r-1:r},Pf=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},ip=function(e){return e._end=In(e._start+(e._tDur/Math.abs(e._ts||e._rts||Jt)||0))},sp=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=In(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),ip(e),r._dirty||Pa(r,e)),e},Kw=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=Pf(e.rawTime(),t),(!t._dur||xd(0,t.totalDuration(),r)-t._tTime>Jt)&&t.render(r,!0)),Pa(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Jt}},gs=function(e,t,r,i){return t.parent&&Vo(t),t._start=In((Xs(r)?r:r||e!==cn?Ei(e,r,t):e._time)+t._delay),t._end=In(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Jw(e,t,"_first","_last",e._sort?"_start":0),ag(t)||(e._recent=t),i||Kw(e,t),e._ts<0&&sp(e,e._tTime),e},Xw=function(e,t){return(yi.ScrollTrigger||W1("scrollTrigger",t))&&yi.ScrollTrigger.create(t,e)},Qw=function(e,t,r,i,s){if(J1(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!tr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Hw!==ci.frame)return Wo.push(e),e._lazy=[s,i],1},Sk=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},ag=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},_k=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&Sk(e)&&!(!e._initted&&ag(e))||(e._ts<0||e._dp._ts<0)&&!ag(e))?0:1,a=e._rDelay,l=0,u,d,p;if(a&&e._repeat&&(l=xd(0,e._tDur,t),d=yc(l,a),e._yoyo&&d&1&&(o=1-o),d!==yc(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||tr||i||e._zTime===Jt||!t&&e._zTime){if(!e._initted&&Qw(e,t,i,r,l))return;for(p=e._zTime,e._zTime=t||(r?Jt:0),r||(r=t&&!p),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&og(e,t,r,!0),e._onUpdate&&!r&&di(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&di(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Vo(e,1),!r&&!tr&&(di(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Nk=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},vc=function(e,t,r,i){var s=e._repeat,o=In(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:In(o*(s+1)+e._rDelay*s):o,a>0&&!i&&sp(e,e._tTime=e._tDur*a),e.parent&&ip(e),r||Pa(e.parent,e),e},iv=function(e){return e instanceof jr?Pa(e):vc(e,e._dur)},kk={_start:0,endTime:od,totalDuration:od},Ei=function n(e,t,r){var i=e.labels,s=e._recent||kk,o=e.duration()>=Di?s.endTime(!1):e._dur,a,l,u;return Kn(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&r&&(l=l/100*(wr(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},Ru=function(e,t,r){var i=Xs(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Gr(l.vars.inherit)&&l.parent;o.immediateRender=Gr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Mn(t[0],o,t[s+1])},ea=function(e,t){return e||e===0?t(e):t},xd=function(e,t,r){return r<e?e:r>t?t:r},yr=function(e,t){return!Kn(e)||!(t=pk.exec(e))?"":t[1]},jk=function(e,t,r){return ea(r,function(i){return xd(e,t,i)})},lg=[].slice,Zw=function(e,t){return e&&_s(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&_s(e[0]))&&!e.nodeType&&e!==ps},Ak=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Kn(i)&&!t||Zw(i,1)?(s=r).push.apply(s,Mi(i)):r.push(i)})||r},Mi=function(e,t,r){return on&&!t&&on.selector?on.selector(e):Kn(e)&&!r&&(ig||!xc())?lg.call((t||z1).querySelectorAll(e),0):wr(e)?Ak(e,r):Zw(e)?lg.call(e,0):e?[e]:[]},cg=function(e){return e=Mi(e)[0]||sd("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return Mi(t,r.querySelectorAll?r:r===e?sd("Invalid scope")||z1.createElement("div"):e)}},eb=function(e){return e.sort(function(){return .5-Math.random()})},tb=function(e){if(vn(e))return e;var t=_s(e)?e:{each:e},r=La(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,u=t.axis,d=i,p=i;return Kn(i)?d=p={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(d=i[0],p=i[1]),function(m,f,x){var y=(x||t).length,_=o[y],w,b,N,C,A,P,E,j,D;if(!_){if(D=t.grid==="auto"?0:(t.grid||[1,Di])[1],!D){for(E=-Di;E<(E=x[D++].getBoundingClientRect().left)&&D<y;);D<y&&D--}for(_=o[y]=[],w=l?Math.min(D,y)*d-.5:i%D,b=D===Di?0:l?y*p/D-.5:i/D|0,E=0,j=Di,P=0;P<y;P++)N=P%D-w,C=b-(P/D|0),_[P]=A=u?Math.abs(u==="y"?C:N):Rw(N*N+C*C),A>E&&(E=A),A<j&&(j=A);i==="random"&&eb(_),_.max=E-j,_.min=j,_.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(D>y?y-1:u?u==="y"?y/D:D:Math.max(D,y/D))||0)*(i==="edges"?-1:1),_.b=y<0?s-y:s,_.u=yr(t.amount||t.each)||0,r=r&&y<0?db(r):r}return y=(_[m]-_.min)/_.max||0,In(_.b+(r?r(y):y)*_.v)+_.u}},ug=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=In(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(Xs(r)?0:yr(r))}},nb=function(e,t){var r=wr(e),i,s;return!r&&_s(e)&&(i=r=e.radius||Di,e.values?(e=Mi(e.values),(s=!Xs(e[0]))&&(i*=i)):e=ug(e.increment)),ea(t,r?vn(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=Di,d=0,p=e.length,m,f;p--;)s?(m=e[p].x-a,f=e[p].y-l,m=m*m+f*f):m=Math.abs(e[p]-a),m<u&&(u=m,d=p);return d=!i||u<=i?e[d]:o,s||d===o||Xs(o)?d:d+yr(o)}:ug(e))},rb=function(e,t,r,i){return ea(wr(e)?!t:r===!0?!!(r=0):!i,function(){return wr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},Ck=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},Ek=function(e,t){return function(r){return e(parseFloat(r))+(t||yr(r))}},Pk=function(e,t,r){return sb(e,t,0,1,r)},ib=function(e,t,r){return ea(r,function(i){return e[~~t(i)]})},Lk=function n(e,t,r){var i=t-e;return wr(e)?ib(e,n(0,e.length),t):ea(r,function(s){return(i+(s-e)%i)%i+e})},Tk=function n(e,t,r){var i=t-e,s=i*2;return wr(e)?ib(e,n(0,e.length-1),t):ea(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},ad=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?Bw:rg),r+=e.substr(t,i-t)+rb(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},sb=function(e,t,r,i,s){var o=t-e,a=i-r;return ea(s,function(l){return r+((l-e)/o*a||0)})},Dk=function n(e,t,r,i){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var o=Kn(e),a={},l,u,d,p,m;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(wr(e)&&!wr(t)){for(d=[],p=e.length,m=p-2,u=1;u<p;u++)d.push(n(e[u-1],e[u]));p--,s=function(x){x*=p;var y=Math.min(m,~~x);return d[y](x-y)},r=t}else i||(e=gc(wr(e)?[]:{},e));if(!d){for(l in t)G1.call(a,e,l,"get",t[l]);s=function(x){return Q1(x,a)||(o?e.p:e)}}}return ea(r,s)},sv=function(e,t,r){var i=e.labels,s=Di,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},di=function(e,t,r){var i=e.vars,s=i[t],o=on,a=e._ctx,l,u,d;if(s)return l=i[t+"Params"],u=i.callbackScope||e,r&&Wo.length&&Cf(),a&&(on=a),d=l?s.apply(u,l):s.call(u),on=o,d},_u=function(e){return Vo(e),e.scrollTrigger&&e.scrollTrigger.kill(!!tr),e.progress()<1&&di(e,"onInterrupt"),e},Hl,ob=[],ab=function(e){if(e)if(e=!e.name&&e.default||e,U1()||e.headless){var t=e.name,r=vn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:od,render:Q1,add:G1,kill:Jk,modifier:Gk,rawVars:0},o={targetTest:0,get:0,getSetter:X1,aliases:{},register:0};if(xc(),e!==i){if(li[t])return;vi(i,vi(Ef(e,s),o)),gc(i.prototype,gc(s,Ef(e,o))),li[i.prop=t]=i,e.targetTest&&(Jh.push(i),H1[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Ww(t,i),e.register&&e.register(Zr,i,Kr)}else ob.push(e)},Yt=255,Nu={aqua:[0,Yt,Yt],lime:[0,Yt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Yt],navy:[0,0,128],white:[Yt,Yt,Yt],olive:[128,128,0],yellow:[Yt,Yt,0],orange:[Yt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Yt,0,0],pink:[Yt,192,203],cyan:[0,Yt,Yt],transparent:[Yt,Yt,Yt,0]},I0=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Yt+.5|0},lb=function(e,t,r){var i=e?Xs(e)?[e>>16,e>>8&Yt,e&Yt]:0:Nu.black,s,o,a,l,u,d,p,m,f,x;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Nu[e])i=Nu[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Yt,i&Yt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Yt,e&Yt]}else if(e.substr(0,3)==="hsl"){if(i=x=e.match(rg),!t)l=+i[0]%360/360,u=+i[1]/100,d=+i[2]/100,o=d<=.5?d*(u+1):d+u-d*u,s=d*2-o,i.length>3&&(i[3]*=1),i[0]=I0(l+1/3,s,o),i[1]=I0(l,s,o),i[2]=I0(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(Ow),r&&i.length<4&&(i[3]=1),i}else i=e.match(rg)||Nu.transparent;i=i.map(Number)}return t&&!x&&(s=i[0]/Yt,o=i[1]/Yt,a=i[2]/Yt,p=Math.max(s,o,a),m=Math.min(s,o,a),d=(p+m)/2,p===m?l=u=0:(f=p-m,u=d>.5?f/(2-p-m):f/(p+m),l=p===s?(o-a)/f+(o<a?6:0):p===o?(a-s)/f+2:(s-o)/f+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(d*100+.5)),r&&i.length<4&&(i[3]=1),i},cb=function(e){var t=[],r=[],i=-1;return e.split(Ho).forEach(function(s){var o=s.match(Wl)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},ov=function(e,t,r){var i="",s=(e+i).match(Ho),o=t?"hsla(":"rgba(",a=0,l,u,d,p;if(!s)return e;if(s=s.map(function(m){return(m=lb(m,t,1))&&o+(t?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),r&&(d=cb(e),l=r.c,l.join(i)!==d.c.join(i)))for(u=e.replace(Ho,"1").split(Wl),p=u.length-1;a<p;a++)i+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(d.length?d:s.length?s:r).shift());if(!u)for(u=e.split(Ho),p=u.length-1;a<p;a++)i+=u[a]+s[a];return i+u[p]},Ho=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Nu)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),Mk=/hsl[a]?\(/,ub=function(e){var t=e.join(" "),r;if(Ho.lastIndex=0,Ho.test(t))return r=Mk.test(t),e[1]=ov(e[1],r),e[0]=ov(e[0],r,cb(e[1])),!0},ld,ci=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,u,d,p,m,f,x=function y(_){var w=n()-i,b=_===!0,N,C,A,P;if((w>e||w<0)&&(r+=w-t),i+=w,A=i-r,N=A-o,(N>0||b)&&(P=++p.frame,m=A-p.time*1e3,p.time=A=A/1e3,o+=N+(N>=s?4:s-N),C=1),b||(l=u(y)),C)for(f=0;f<a.length;f++)a[f](A,m,P,_)};return p={time:0,frame:0,tick:function(){x(!0)},deltaRatio:function(_){return m/(1e3/(_||60))},wake:function(){Uw&&(!ig&&U1()&&(ps=ig=window,z1=ps.document||{},yi.gsap=Zr,(ps.gsapVersions||(ps.gsapVersions=[])).push(Zr.version),zw(Af||ps.GreenSockGlobals||!ps.gsap&&ps||{}),ob.forEach(ab)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&p.sleep(),u=d||function(_){return setTimeout(_,o-p.time*1e3+1|0)},ld=1,x(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(l),ld=0,u=od},lagSmoothing:function(_,w){e=_||1/0,t=Math.min(w||33,e)},fps:function(_){s=1e3/(_||240),o=p.time*1e3+s},add:function(_,w,b){var N=w?function(C,A,P,E){_(C,A,P,E),p.remove(N)}:_;return p.remove(_),a[b?"unshift":"push"](N),xc(),N},remove:function(_,w){~(w=a.indexOf(_))&&a.splice(w,1)&&f>=w&&f--},_listeners:a},p}(),xc=function(){return!ld&&ci.wake()},Tt={},Ik=/^[\d.\-M][\d.\-,\s]/,Rk=/["']/g,Fk=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,u;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[i]=isNaN(u)?u.replace(Rk,"").trim():+u,i=l.substr(a+1).trim();return t},Ok=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},$k=function(e){var t=(e+"").split("("),r=Tt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Fk(t[1])]:Ok(e).split(",").map(Vw)):Tt._CE&&Ik.test(e)?Tt._CE("",e):r},db=function(e){return function(t){return 1-e(1-t)}},hb=function n(e,t){for(var r=e._first,i;r;)r instanceof jr?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},La=function(e,t){return e&&(vn(e)?e:Tt[e]||$k(e))||t},Wa=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return Jr(e,function(a){Tt[a]=yi[a]=s,Tt[o=a.toLowerCase()]=r;for(var l in s)Tt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Tt[a+"."+l]=s[l]}),s},fb=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},R0=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/ng*(Math.asin(1/i)||0),a=function(d){return d===1?1:i*Math.pow(2,-10*d)*fk((d-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:fb(a);return s=ng/s,l.config=function(u,d){return n(e,u,d)},l},F0=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:fb(r);return i.config=function(s){return n(e,s)},i};Jr("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Wa(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});Tt.Linear.easeNone=Tt.none=Tt.Linear.easeIn;Wa("Elastic",R0("in"),R0("out"),R0());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Wa("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Wa("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});Wa("Circ",function(n){return-(Rw(1-n*n)-1)});Wa("Sine",function(n){return n===1?1:-hk(n*uk)+1});Wa("Back",F0("in"),F0("out"),F0());Tt.SteppedEase=Tt.steps=yi.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-Jt;return function(a){return((i*xd(0,o,a)|0)+s)*r}}};mc.ease=Tt["quad.out"];Jr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return q1+=n+","+n+"Params,"});var pb=function(e,t){this.id=dk++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:qw,this.set=t?t.getSetter:X1},cd=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,vc(this,+t.duration,1,1),this.data=t.data,on&&(this._ctx=on,on.data.push(this)),ld||ci.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,vc(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(xc(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(sp(this,r),!s._dp||s.parent||Kw(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&gs(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Jt||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Yw(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+rv(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+rv(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?yc(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-Jt?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?Pf(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Jt?0:this._rts,this.totalTime(xd(-Math.abs(this._delay),this.totalDuration(),s),i!==!1),ip(this),wk(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(xc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Jt&&(this._tTime-=Jt)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&gs(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(Gr(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Pf(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=gk);var i=tr;return tr=r,V1(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),tr=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,iv(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,iv(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Ei(this,r),Gr(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Gr(i)),this._dur||(this._zTime=-Jt),this},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Jt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Jt,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Jt)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=vn(r)?r:Gw,a=function(){var u=i.then;i.then=null,vn(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=u),s(o),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){_u(this)},n}();vi(cd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Jt,_prom:0,_ps:!1,_rts:1});var jr=function(n){Iw(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=Gr(r.sortChildren),cn&&gs(r.parent||cn,Fs(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&Xw(Fs(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return Ru(0,arguments,this),this},t.from=function(i,s,o){return Ru(1,arguments,this),this},t.fromTo=function(i,s,o,a){return Ru(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,Iu(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Mn(i,s,Ei(this,o),1),this},t.call=function(i,s,o){return gs(this,Mn.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,u,d){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=d,o.parent=this,new Mn(i,o,Ei(this,l)),this},t.staggerFrom=function(i,s,o,a,l,u,d){return o.runBackwards=1,Iu(o).immediateRender=Gr(o.immediateRender),this.staggerTo(i,s,o,a,l,u,d)},t.staggerFromTo=function(i,s,o,a,l,u,d,p){return a.startAt=o,Iu(a).immediateRender=Gr(a.immediateRender),this.staggerTo(i,s,a,l,u,d,p)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,d=i<=0?0:In(i),p=this._zTime<0!=i<0&&(this._initted||!u),m,f,x,y,_,w,b,N,C,A,P,E;if(this!==cn&&d>l&&i>=0&&(d=l),d!==this._tTime||o||p){if(a!==this._time&&u&&(d+=this._time-a,i+=this._time-a),m=d,C=this._start,N=this._ts,w=!N,p&&(u||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(P=this._yoyo,_=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(_*100+i,s,o);if(m=In(d%_),d===l?(y=this._repeat,m=u):(A=In(d/_),y=~~A,y&&y===A&&(m=u,y--),m>u&&(m=u)),A=yc(this._tTime,_),!a&&this._tTime&&A!==y&&this._tTime-A*_-this._dur<=0&&(A=y),P&&y&1&&(m=u-m,E=1),y!==A&&!this._lock){var j=P&&A&1,D=j===(P&&y&1);if(y<A&&(j=!j),a=j?0:d%u?u:d,this._lock=1,this.render(a||(E?0:In(y*_)),s,!u)._lock=0,this._tTime=d,!s&&this.parent&&di(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),a&&a!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,D&&(this._lock=2,a=j?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;hb(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=Nk(this,In(a),In(m)),b&&(d-=m-(m=b._start))),this._tTime=d,this._time=m,this._act=!N,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&d&&!s&&!A&&(di(this,"onStart"),this._tTime!==d))return this;if(m>=a&&i>=0)for(f=this._first;f;){if(x=f._next,(f._act||m>=f._start)&&f._ts&&b!==f){if(f.parent!==this)return this.render(i,s,o);if(f.render(f._ts>0?(m-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(m-f._start)*f._ts,s,o),m!==this._time||!this._ts&&!w){b=0,x&&(d+=this._zTime=-Jt);break}}f=x}else{f=this._last;for(var U=i<0?i:m;f;){if(x=f._prev,(f._act||U<=f._end)&&f._ts&&b!==f){if(f.parent!==this)return this.render(i,s,o);if(f.render(f._ts>0?(U-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(U-f._start)*f._ts,s,o||tr&&V1(f)),m!==this._time||!this._ts&&!w){b=0,x&&(d+=this._zTime=U?-Jt:Jt);break}}f=x}}if(b&&!s&&(this.pause(),b.render(m>=a?0:-Jt)._zTime=m>=a?1:-1,this._ts))return this._start=C,ip(this),this.render(i,s,o);this._onUpdate&&!s&&di(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&a)&&(C===this._start||Math.abs(N)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(d===l&&this._ts>0||!d&&this._ts<0)&&Vo(this,1),!s&&!(i<0&&!a)&&(d||a||!l)&&(di(this,d===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(Xs(s)||(s=Ei(this,s,i)),!(i instanceof cd)){if(wr(i))return i.forEach(function(a){return o.add(a,s)}),this;if(Kn(i))return this.addLabel(i,s);if(vn(i))i=Mn.delayedCall(0,i);else return this}return this!==i?gs(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Di);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof Mn?s&&l.push(u):(o&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return Kn(i)?this.removeLabel(i):vn(i)?this.killTweensOf(i):(i.parent===this&&rp(this,i),i===this._recent&&(this._recent=this._last),Pa(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=In(ci.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Ei(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=Mn.delayedCall(0,s||od,o);return a.data="isPause",this._hasPause=1,gs(this,a,Ei(this,i))},t.removePause=function(i){var s=this._first;for(i=Ei(this,i);s;)s._start===i&&s.data==="isPause"&&Vo(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)Lo!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=Mi(i),l=this._first,u=Xs(s),d;l;)l instanceof Mn?yk(l._targets,a)&&(u?(!Lo||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(d=l.getTweensOf(a,s)).length&&o.push.apply(o,d),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=Ei(o,i),l=s,u=l.startAt,d=l.onStart,p=l.onStartParams,m=l.immediateRender,f,x=Mn.to(o,vi({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||Jt,onStart:function(){if(o.pause(),!f){var _=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());x._dur!==_&&vc(x,_,0,1).render(x._time,!0,!0),f=1}d&&d.apply(x,p||[])}},s));return m?x.render(0):x},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,vi({startAt:{time:Ei(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),sv(this,Ei(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),sv(this,Ei(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Jt)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=i);return Pa(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Pa(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=Di,u,d,p;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(p=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),d=a._start,d>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,gs(o,a,d-a._delay,1)._lock=0):l=d,d<0&&a._ts&&(s-=d,(!p&&!o._dp||p&&p.smoothChildTiming)&&(o._start+=d/o._ts,o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;vc(o,o===cn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(cn._ts&&(Yw(cn,Pf(i,cn)),Hw=ci.frame),ci.frame>=tv){tv+=pi.autoSleep||120;var s=cn._first;if((!s||!s._ts)&&pi.autoSleep&&ci._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ci.sleep()}}},e}(cd);vi(jr.prototype,{_lock:0,_hasPause:0,_forcing:0});var Bk=function(e,t,r,i,s,o,a){var l=new Kr(this._pt,e,t,0,1,wb,null,s),u=0,d=0,p,m,f,x,y,_,w,b;for(l.b=r,l.e=i,r+="",i+="",(w=~i.indexOf("random("))&&(i=ad(i)),o&&(b=[r,i],o(b,e,t),r=b[0],i=b[1]),m=r.match(D0)||[];p=D0.exec(i);)x=p[0],y=i.substring(u,p.index),f?f=(f+1)%5:y.substr(-5)==="rgba("&&(f=1),x!==m[d++]&&(_=parseFloat(m[d-1])||0,l._pt={_next:l._pt,p:y||d===1?y:",",s:_,c:x.charAt(1)==="="?Zl(_,x)-_:parseFloat(x)-_,m:f&&f<4?Math.round:0},u=D0.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=a,($w.test(i)||w)&&(l.e=0),this._pt=l,l},G1=function(e,t,r,i,s,o,a,l,u,d){vn(i)&&(i=i(s||0,e,o));var p=e[t],m=r!=="get"?r:vn(p)?u?e[t.indexOf("set")||!vn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():p,f=vn(p)?u?qk:vb:K1,x;if(Kn(i)&&(~i.indexOf("random(")&&(i=ad(i)),i.charAt(1)==="="&&(x=Zl(m,i)+(yr(m)||0),(x||x===0)&&(i=x))),!d||m!==i||dg)return!isNaN(m*i)&&i!==""?(x=new Kr(this._pt,e,t,+m||0,i-(m||0),typeof p=="boolean"?Vk:xb,0,f),u&&(x.fp=u),a&&x.modifier(a,this,e),this._pt=x):(!p&&!(t in e)&&W1(t,i),Bk.call(this,e,t,m,i,f,l||pi.stringFilter,u))},Uk=function(e,t,r,i,s){if(vn(e)&&(e=Fu(e,s,t,r,i)),!_s(e)||e.style&&e.nodeType||wr(e)||Fw(e))return Kn(e)?Fu(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=Fu(e[a],s,t,r,i);return o},mb=function(e,t,r,i,s,o){var a,l,u,d;if(li[e]&&(a=new li[e]).init(s,a.rawVars?t[e]:Uk(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new Kr(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==Hl))for(u=r._ptLookup[r._targets.indexOf(s)],d=a._props.length;d--;)u[a._props[d]]=l;return a},Lo,dg,J1=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,u=i.onUpdate,d=i.runBackwards,p=i.yoyoEase,m=i.keyframes,f=i.autoRevert,x=e._dur,y=e._startAt,_=e._targets,w=e.parent,b=w&&w.data==="nested"?w.vars.targets:_,N=e._overwrite==="auto"&&!$1,C=e.timeline,A,P,E,j,D,U,L,F,T,O,J,X,se;if(C&&(!m||!s)&&(s="none"),e._ease=La(s,mc.ease),e._yEase=p?db(La(p===!0?s:p,mc.ease)):0,p&&e._yoyo&&!e._repeat&&(p=e._yEase,e._yEase=e._ease,e._ease=p),e._from=!C&&!!i.runBackwards,!C||m&&!i.stagger){if(F=_[0]?Ea(_[0]).harness:0,X=F&&i[F.prop],A=Ef(i,H1),y&&(y._zTime<0&&y.progress(1),t<0&&d&&a&&!f?y.render(-1,!0):y.revert(d&&x?Gh:mk),y._lazy=0),o){if(Vo(e._startAt=Mn.set(_,vi({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!y&&Gr(l),startAt:null,delay:0,onUpdate:u&&function(){return di(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(tr||!a&&!f)&&e._startAt.revert(Gh),a&&x&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(d&&x&&!y){if(t&&(a=!1),E=vi({overwrite:!1,data:"isFromStart",lazy:a&&!y&&Gr(l),immediateRender:a,stagger:0,parent:w},A),X&&(E[F.prop]=X),Vo(e._startAt=Mn.set(_,E)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(tr?e._startAt.revert(Gh):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Jt,Jt);else if(!t)return}for(e._pt=e._ptCache=0,l=x&&Gr(l)||l&&!x,P=0;P<_.length;P++){if(D=_[P],L=D._gsap||Y1(_)[P]._gsap,e._ptLookup[P]=O={},sg[L.id]&&Wo.length&&Cf(),J=b===_?P:b.indexOf(D),F&&(T=new F).init(D,X||A,e,J,b)!==!1&&(e._pt=j=new Kr(e._pt,D,T.name,0,1,T.render,T,0,T.priority),T._props.forEach(function(q){O[q]=j}),T.priority&&(U=1)),!F||X)for(E in A)li[E]&&(T=mb(E,A,e,J,D,b))?T.priority&&(U=1):O[E]=j=G1.call(e,D,E,"get",A[E],J,b,0,i.stringFilter);e._op&&e._op[P]&&e.kill(D,e._op[P]),N&&e._pt&&(Lo=e,cn.killTweensOf(D,O,e.globalTime(t)),se=!e.parent,Lo=0),e._pt&&l&&(sg[L.id]=1)}U&&bb(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!se,m&&t<=0&&C.render(Di,!0,!0)},zk=function(e,t,r,i,s,o,a,l){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,p,m,f;if(!u)for(u=e._ptCache[t]=[],m=e._ptLookup,f=e._targets.length;f--;){if(d=m[f][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return dg=1,e.vars[t]="+=0",J1(e,a),dg=0,l?sd(t+" not eligible for reset"):1;u.push(d)}for(f=u.length;f--;)p=u[f],d=p._pt||p,d.s=(i||i===0)&&!s?i:d.s+(i||0)+o*d.c,d.c=r-d.s,p.e&&(p.e=jn(r)+yr(p.e)),p.b&&(p.b=d.s+yr(p.b))},Wk=function(e,t){var r=e[0]?Ea(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=gc({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Hk=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(wr(t))a=r[e]||(r[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Fu=function(e,t,r,i,s){return vn(e)?e.call(t,r,i,s):Kn(e)&&~e.indexOf("random(")?ad(e):e},gb=q1+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",yb={};Jr(gb+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return yb[n]=1});var Mn=function(n){Iw(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:Iu(i))||this;var l=a.vars,u=l.duration,d=l.delay,p=l.immediateRender,m=l.stagger,f=l.overwrite,x=l.keyframes,y=l.defaults,_=l.scrollTrigger,w=l.yoyoEase,b=i.parent||cn,N=(wr(r)||Fw(r)?Xs(r[0]):"length"in i)?[r]:Mi(r),C,A,P,E,j,D,U,L;if(a._targets=N.length?Y1(N):sd("GSAP target "+r+" not found. https://gsap.com",!pi.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,x||m||Ch(u)||Ch(d)){if(i=a.vars,C=a.timeline=new jr({data:"nested",defaults:y||{},targets:b&&b.data==="nested"?b.vars.targets:N}),C.kill(),C.parent=C._dp=Fs(a),C._start=0,m||Ch(u)||Ch(d)){if(E=N.length,U=m&&tb(m),_s(m))for(j in m)~gb.indexOf(j)&&(L||(L={}),L[j]=m[j]);for(A=0;A<E;A++)P=Ef(i,yb),P.stagger=0,w&&(P.yoyoEase=w),L&&gc(P,L),D=N[A],P.duration=+Fu(u,Fs(a),A,D,N),P.delay=(+Fu(d,Fs(a),A,D,N)||0)-a._delay,!m&&E===1&&P.delay&&(a._delay=d=P.delay,a._start+=d,P.delay=0),C.to(D,P,U?U(A,D,N):0),C._ease=Tt.none;C.duration()?u=d=0:a.timeline=0}else if(x){Iu(vi(C.vars.defaults,{ease:"none"})),C._ease=La(x.ease||i.ease||"none");var F=0,T,O,J;if(wr(x))x.forEach(function(X){return C.to(N,X,">")}),C.duration();else{P={};for(j in x)j==="ease"||j==="easeEach"||Hk(j,x[j],P,x.easeEach);for(j in P)for(T=P[j].sort(function(X,se){return X.t-se.t}),F=0,A=0;A<T.length;A++)O=T[A],J={ease:O.e,duration:(O.t-(A?T[A-1].t:0))/100*u},J[j]=O.v,C.to(N,J,F),F+=J.duration;C.duration()<u&&C.to({},{duration:u-C.duration()})}}u||a.duration(u=C.duration())}else a.timeline=0;return f===!0&&!$1&&(Lo=Fs(a),cn.killTweensOf(N),Lo=0),gs(b,Fs(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(p||!u&&!x&&a._start===In(b._time)&&Gr(p)&&bk(Fs(a))&&b.data!=="nested")&&(a._tTime=-Jt,a.render(Math.max(0,-d)||0)),_&&Xw(Fs(a),_),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,u=this._dur,d=i<0,p=i>l-Jt&&!d?l:i<Jt?0:i,m,f,x,y,_,w,b,N,C;if(!u)_k(this,i,s,o);else if(p!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(m=p,N=this.timeline,this._repeat){if(y=u+this._rDelay,this._repeat<-1&&d)return this.totalTime(y*100+i,s,o);if(m=In(p%y),p===l?(x=this._repeat,m=u):(_=In(p/y),x=~~_,x&&x===_?(m=u,x--):m>u&&(m=u)),w=this._yoyo&&x&1,w&&(C=this._yEase,m=u-m),_=yc(this._tTime,y),m===a&&!o&&this._initted&&x===_)return this._tTime=p,this;x!==_&&(N&&this._yEase&&hb(N,w),this.vars.repeatRefresh&&!w&&!this._lock&&m!==y&&this._initted&&(this._lock=o=1,this.render(In(y*x),!0).invalidate()._lock=0))}if(!this._initted){if(Qw(this,d?i:m,o,s,p))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&x!==_))return this;if(u!==this._dur)return this.render(i,s,o)}if(this._tTime=p,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(C||this._ease)(m/u),this._from&&(this.ratio=b=1-b),!a&&p&&!s&&!_&&(di(this,"onStart"),this._tTime!==p))return this;for(f=this._pt;f;)f.r(b,f.d),f=f._next;N&&N.render(i<0?i:N._dur*N._ease(m/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(d&&og(this,i,s,o),di(this,"onUpdate")),this._repeat&&x!==_&&this.vars.onRepeat&&!s&&this.parent&&di(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(d&&!this._onUpdate&&og(this,i,!0,!0),(i||!u)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&Vo(this,1),!s&&!(d&&!a)&&(p||a||w)&&(di(this,p===l?"onComplete":"onReverseComplete",!0),this._prom&&!(p<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a,l){ld||ci.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||J1(this,u),d=this._ease(u/this._dur),zk(this,i,s,o,a,d,u,l)?this.resetTo(i,s,o,a,1):(sp(this,0),this.parent||Jw(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?_u(this):this.scrollTrigger&&this.scrollTrigger.kill(!!tr),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Lo&&Lo.vars.overwrite!==!0)._first||_u(this),this.parent&&o!==this.timeline.totalDuration()&&vc(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?Mi(i):a,u=this._ptLookup,d=this._pt,p,m,f,x,y,_,w;if((!s||s==="all")&&xk(a,l))return s==="all"&&(this._pt=0),_u(this);for(p=this._op=this._op||[],s!=="all"&&(Kn(s)&&(y={},Jr(s,function(b){return y[b]=1}),s=y),s=Wk(a,s)),w=a.length;w--;)if(~l.indexOf(a[w])){m=u[w],s==="all"?(p[w]=s,x=m,f={}):(f=p[w]=p[w]||{},x=s);for(y in x)_=m&&m[y],_&&((!("kill"in _.d)||_.d.kill(y)===!0)&&rp(this,_,"_pt"),delete m[y]),f!=="all"&&(f[y]=1)}return this._initted&&!this._pt&&d&&_u(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Ru(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Ru(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return cn.killTweensOf(i,s,o)},e}(cd);vi(Mn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Jr("staggerTo,staggerFrom,staggerFromTo",function(n){Mn[n]=function(){var e=new jr,t=lg.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var K1=function(e,t,r){return e[t]=r},vb=function(e,t,r){return e[t](r)},qk=function(e,t,r,i){return e[t](i.fp,r)},Yk=function(e,t,r){return e.setAttribute(t,r)},X1=function(e,t){return vn(e[t])?vb:B1(e[t])&&e.setAttribute?Yk:K1},xb=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Vk=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},wb=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},Q1=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},Gk=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},Jk=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?rp(this,t,"_pt"):t.dep||(r=1),t=i;return!r},Kk=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},bb=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Kr=function(){function n(t,r,i,s,o,a,l,u,d){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||xb,this.d=l||this,this.set=u||K1,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=Kk,this.m=r,this.mt=s,this.tween=i},n}();Jr(q1+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return H1[n]=1});yi.TweenMax=yi.TweenLite=Mn;yi.TimelineLite=yi.TimelineMax=jr;cn=new jr({sortChildren:!1,defaults:mc,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});pi.stringFilter=ub;var Ta=[],Kh={},Xk=[],av=0,Qk=0,O0=function(e){return(Kh[e]||Xk).map(function(t){return t()})},hg=function(){var e=Date.now(),t=[];e-av>2&&(O0("matchMediaInit"),Ta.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,u;for(a in i)o=ps.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(r.revert(),l&&t.push(r))}),O0("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),av=e,O0("matchMedia"))},Sb=function(){function n(t,r){this.selector=r&&cg(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Qk++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){vn(r)&&(s=i,i=r,r=vn);var o=this,a=function(){var u=on,d=o.selector,p;return u&&u!==o&&u.data.push(o),s&&(o.selector=cg(s)),on=o,p=i.apply(o,arguments),vn(p)&&o._r.push(p),on=u,o.selector=d,o.isReverted=!1,p};return o.last=a,r===vn?a(o,function(l){return o.add(null,l)}):r?o[r]=a:a},e.ignore=function(r){var i=on;on=null,r(this),on=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Mn&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var a=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(d){return a.splice(a.indexOf(d),1)}));for(a.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,p){return p.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),l=s.data.length;l--;)u=s.data[l],u instanceof jr?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof Mn)&&u.revert&&u.revert(r);s._r.forEach(function(d){return d(r,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=Ta.length;o--;)Ta[o].id===this.id&&Ta.splice(o,1)},e.revert=function(r){this.kill(r||{})},n}(),Zk=function(){function n(t){this.contexts=[],this.scope=t,on&&on.data.push(this)}var e=n.prototype;return e.add=function(r,i,s){_s(r)||(r={matches:r});var o=new Sb(0,s||this.scope),a=o.conditions={},l,u,d;on&&!o.selector&&(o.selector=on.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(u in r)u==="all"?d=1:(l=ps.matchMedia(r[u]),l&&(Ta.indexOf(o)<0&&Ta.push(o),(a[u]=l.matches)&&(d=1),l.addListener?l.addListener(hg):l.addEventListener("change",hg)));return d&&i(o,function(p){return o.add(null,p)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),Lf={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return ab(i)})},timeline:function(e){return new jr(e)},getTweensOf:function(e,t){return cn.getTweensOf(e,t)},getProperty:function(e,t,r,i){Kn(e)&&(e=Mi(e)[0]);var s=Ea(e||{}).get,o=r?Gw:Vw;return r==="native"&&(r=""),e&&(t?o((li[t]&&li[t].get||s)(e,t,r,i)):function(a,l,u){return o((li[a]&&li[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,r){if(e=Mi(e),e.length>1){var i=e.map(function(d){return Zr.quickSetter(d,t,r)}),s=i.length;return function(d){for(var p=s;p--;)i[p](d)}}e=e[0]||{};var o=li[t],a=Ea(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(d){var p=new o;Hl._pt=0,p.init(e,r?d+r:d,Hl,0,[e]),p.render(1,p),Hl._pt&&Q1(1,Hl)}:a.set(e,l);return o?u:function(d){return u(e,l,r?d+r:d,a,1)}},quickTo:function(e,t,r){var i,s=Zr.to(e,vi((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),o=function(l,u,d){return s.resetTo(t,l,u,d)};return o.tween=s,o},isTweening:function(e){return cn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=La(e.ease,mc.ease)),nv(mc,e||{})},config:function(e){return nv(pi,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!li[a]&&!yi[a]&&sd(t+" effect requires "+a+" plugin.")}),M0[t]=function(a,l,u){return r(Mi(a),vi(l||{},s),u)},o&&(jr.prototype[t]=function(a,l,u){return this.add(M0[t](a,_s(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){Tt[e]=La(t)},parseEase:function(e,t){return arguments.length?La(e,t):Tt},getById:function(e){return cn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new jr(e),i,s;for(r.smoothChildTiming=Gr(e.smoothChildTiming),cn.remove(r),r._dp=0,r._time=r._tTime=cn._time,i=cn._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Mn&&i.vars.onComplete===i._targets[0]))&&gs(r,i,i._start-i._delay),i=s;return gs(cn,r,0),r},context:function(e,t){return e?new Sb(e,t):on},matchMedia:function(e){return new Zk(e)},matchMediaRefresh:function(){return Ta.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||hg()},addEventListener:function(e,t){var r=Kh[e]||(Kh[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Kh[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:Lk,wrapYoyo:Tk,distribute:tb,random:rb,snap:nb,normalize:Pk,getUnit:yr,clamp:jk,splitColor:lb,toArray:Mi,selector:cg,mapRange:sb,pipe:Ck,unitize:Ek,interpolate:Dk,shuffle:eb},install:zw,effects:M0,ticker:ci,updateRoot:jr.updateRoot,plugins:li,globalTimeline:cn,core:{PropTween:Kr,globals:Ww,Tween:Mn,Timeline:jr,Animation:cd,getCache:Ea,_removeLinkedListItem:rp,reverting:function(){return tr},context:function(e){return e&&on&&(on.data.push(e),e._ctx=on),on},suppressOverwrites:function(e){return $1=e}}};Jr("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Lf[n]=Mn[n]});ci.add(jr.updateRoot);Hl=Lf.to({},{duration:0});var e6=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},t6=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=e6(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},$0=function(e,t){return{name:e,headless:1,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,u;if(Kn(s)&&(l={},Jr(s,function(d){return l[d]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}t6(a,s)}}}},Zr=Lf.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)tr?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},$0("roundProps",ug),$0("modifiers"),$0("snap",nb))||Lf;Mn.version=jr.version=Zr.version="3.13.0";Uw=1;U1()&&xc();Tt.Power0;Tt.Power1;Tt.Power2;Tt.Power3;Tt.Power4;Tt.Linear;Tt.Quad;Tt.Cubic;Tt.Quart;Tt.Quint;Tt.Strong;Tt.Elastic;Tt.Back;Tt.SteppedEase;Tt.Bounce;Tt.Sine;Tt.Expo;Tt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var lv,To,ec,Z1,ja,cv,ey,n6=function(){return typeof window<"u"},Qs={},va=180/Math.PI,tc=Math.PI/180,xl=Math.atan2,uv=1e8,ty=/([A-Z])/g,r6=/(left|right|width|margin|padding|x)/i,i6=/[\s,\(]\S/,ys={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},fg=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},s6=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},o6=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},a6=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},_b=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Nb=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},l6=function(e,t,r){return e.style[t]=r},c6=function(e,t,r){return e.style.setProperty(t,r)},u6=function(e,t,r){return e._gsap[t]=r},d6=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},h6=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},f6=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},un="transform",Xr=un+"Origin",p6=function n(e,t){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in Qs&&s){if(this.tfm=this.tfm||{},e!=="transform")e=ys[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=Us(i,a)}):this.tfm[e]=o.x?o[e]:Us(i,e),e===Xr&&(this.tfm.zOrigin=o.zOrigin);else return ys.transform.split(",").forEach(function(a){return n.call(r,a,t)});if(this.props.indexOf(un)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Xr,t,"")),e=un}(s||t)&&this.props.push(e,t,s[e])},kb=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},m6=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(ty,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=ey(),(!s||!s.isStart)&&!r[un]&&(kb(r),i.zOrigin&&r[Xr]&&(r[Xr]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},jb=function(e,t){var r={target:e,props:[],revert:m6,save:p6};return e._gsap||Zr.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return r.save(i)}),r},Ab,pg=function(e,t){var r=To.createElementNS?To.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):To.createElement(e);return r&&r.style?r:To.createElement(e)},Ii=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(ty,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,wc(t)||t,1)||""},dv="O,Moz,ms,Ms,Webkit".split(","),wc=function(e,t,r){var i=t||ja,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(dv[o]+e in s););return o<0?null:(o===3?"ms":o>=0?dv[o]:"")+e},mg=function(){n6()&&window.document&&(lv=window,To=lv.document,ec=To.documentElement,ja=pg("div")||{style:{}},pg("div"),un=wc(un),Xr=un+"Origin",ja.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ab=!!wc("perspective"),ey=Zr.core.reverting,Z1=1)},hv=function(e){var t=e.ownerSVGElement,r=pg("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",r.appendChild(i),ec.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),ec.removeChild(r),s},fv=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},Cb=function(e){var t,r;try{t=e.getBBox()}catch{t=hv(e),r=1}return t&&(t.width||t.height)||r||(t=hv(e)),t&&!t.width&&!t.x&&!t.y?{x:+fv(e,["x","cx","x1"])||0,y:+fv(e,["y","cy","y1"])||0,width:0,height:0}:t},Eb=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Cb(e))},Ba=function(e,t){if(t){var r=e.style,i;t in Qs&&t!==Xr&&(t=un),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(ty,"-$1").toLowerCase())):r.removeAttribute(t)}},Do=function(e,t,r,i,s,o){var a=new Kr(e._pt,t,r,0,1,o?Nb:_b);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},pv={deg:1,rad:1,turn:1},g6={grid:1,flex:1},Go=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=ja.style,l=r6.test(t),u=e.tagName.toLowerCase()==="svg",d=(u?"client":"offset")+(l?"Width":"Height"),p=100,m=i==="px",f=i==="%",x,y,_,w;if(i===o||!s||pv[i]||pv[o])return s;if(o!=="px"&&!m&&(s=n(e,t,r,"px")),w=e.getCTM&&Eb(e),(f||o==="%")&&(Qs[t]||~t.indexOf("adius")))return x=w?e.getBBox()[l?"width":"height"]:e[d],jn(f?s/x*p:s/100*x);if(a[l?"width":"height"]=p+(m?o:i),y=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!u?e:e.parentNode,w&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===To||!y.appendChild)&&(y=To.body),_=y._gsap,_&&f&&_.width&&l&&_.time===ci.time&&!_.uncache)return jn(s/_.width*p);if(f&&(t==="height"||t==="width")){var b=e.style[t];e.style[t]=p+i,x=e[d],b?e.style[t]=b:Ba(e,t)}else(f||o==="%")&&!g6[Ii(y,"display")]&&(a.position=Ii(e,"position")),y===e&&(a.position="static"),y.appendChild(ja),x=ja[d],y.removeChild(ja),a.position="absolute";return l&&f&&(_=Ea(y),_.time=ci.time,_.width=y[d]),jn(m?x*s/p:x&&s?p/x*s:0)},Us=function(e,t,r,i){var s;return Z1||mg(),t in ys&&t!=="transform"&&(t=ys[t],~t.indexOf(",")&&(t=t.split(",")[0])),Qs[t]&&t!=="transform"?(s=dd(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Df(Ii(e,Xr))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=Tf[t]&&Tf[t](e,t,r)||Ii(e,t)||qw(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Go(e,t,s,r)+r:s},y6=function(e,t,r,i){if(!r||r==="none"){var s=wc(t,e,1),o=s&&Ii(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=Ii(e,"borderTopColor"))}var a=new Kr(this._pt,e.style,t,0,1,wb),l=0,u=0,d,p,m,f,x,y,_,w,b,N,C,A;if(a.b=r,a.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=Ii(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(y=e.style[t],e.style[t]=i,i=Ii(e,t)||i,y?e.style[t]=y:Ba(e,t)),d=[r,i],ub(d),r=d[0],i=d[1],m=r.match(Wl)||[],A=i.match(Wl)||[],A.length){for(;p=Wl.exec(i);)_=p[0],b=i.substring(l,p.index),x?x=(x+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(x=1),_!==(y=m[u++]||"")&&(f=parseFloat(y)||0,C=y.substr((f+"").length),_.charAt(1)==="="&&(_=Zl(f,_)+C),w=parseFloat(_),N=_.substr((w+"").length),l=Wl.lastIndex-N.length,N||(N=N||pi.units[t]||C,l===i.length&&(i+=N,a.e+=N)),C!==N&&(f=Go(e,t,y,N)||0),a._pt={_next:a._pt,p:b||u===1?b:",",s:f,c:w-f,m:x&&x<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?Nb:_b;return $w.test(i)&&(a.e=0),this._pt=a,a},mv={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},v6=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=mv[r]||r,t[1]=mv[i]||i,t.join(" ")},x6=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,u;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],Qs[a]&&(l=1,a=a==="transformOrigin"?Xr:un),Ba(r,a);l&&(Ba(r,un),o&&(o.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",dd(r,1),o.uncache=1,kb(i)))}},Tf={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Kr(e._pt,t,r,0,0,x6);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},ud=[1,0,0,1,0,0],Pb={},Lb=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},gv=function(e){var t=Ii(e,un);return Lb(t)?ud:t.substr(7).match(Ow).map(jn)},ny=function(e,t){var r=e._gsap||Ea(e),i=e.style,s=gv(e),o,a,l,u;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?ud:s):(s===ud&&!e.offsetParent&&e!==ec&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(u=1,a=e.nextElementSibling,ec.appendChild(e)),s=gv(e),l?i.display=l:Ba(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):ec.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},gg=function(e,t,r,i,s,o){var a=e._gsap,l=s||ny(e,!0),u=a.xOrigin||0,d=a.yOrigin||0,p=a.xOffset||0,m=a.yOffset||0,f=l[0],x=l[1],y=l[2],_=l[3],w=l[4],b=l[5],N=t.split(" "),C=parseFloat(N[0])||0,A=parseFloat(N[1])||0,P,E,j,D;r?l!==ud&&(E=f*_-x*y)&&(j=C*(_/E)+A*(-y/E)+(y*b-_*w)/E,D=C*(-x/E)+A*(f/E)-(f*b-x*w)/E,C=j,A=D):(P=Cb(e),C=P.x+(~N[0].indexOf("%")?C/100*P.width:C),A=P.y+(~(N[1]||N[0]).indexOf("%")?A/100*P.height:A)),i||i!==!1&&a.smooth?(w=C-u,b=A-d,a.xOffset=p+(w*f+b*y)-w,a.yOffset=m+(w*x+b*_)-b):a.xOffset=a.yOffset=0,a.xOrigin=C,a.yOrigin=A,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[Xr]="0px 0px",o&&(Do(o,a,"xOrigin",u,C),Do(o,a,"yOrigin",d,A),Do(o,a,"xOffset",p,a.xOffset),Do(o,a,"yOffset",m,a.yOffset)),e.setAttribute("data-svg-origin",C+" "+A)},dd=function(e,t){var r=e._gsap||new pb(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=Ii(e,Xr)||"0",d,p,m,f,x,y,_,w,b,N,C,A,P,E,j,D,U,L,F,T,O,J,X,se,q,ee,ie,re,M,Y,G,Z;return d=p=m=y=_=w=b=N=C=0,f=x=1,r.svg=!!(e.getCTM&&Eb(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[un]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[un]!=="none"?l[un]:"")),i.scale=i.rotate=i.translate="none"),E=ny(e,r.svg),r.svg&&(r.uncache?(q=e.getBBox(),u=r.xOrigin-q.x+"px "+(r.yOrigin-q.y)+"px",se=""):se=!t&&e.getAttribute("data-svg-origin"),gg(e,se||u,!!se||r.originIsAbsolute,r.smooth!==!1,E)),A=r.xOrigin||0,P=r.yOrigin||0,E!==ud&&(L=E[0],F=E[1],T=E[2],O=E[3],d=J=E[4],p=X=E[5],E.length===6?(f=Math.sqrt(L*L+F*F),x=Math.sqrt(O*O+T*T),y=L||F?xl(F,L)*va:0,b=T||O?xl(T,O)*va+y:0,b&&(x*=Math.abs(Math.cos(b*tc))),r.svg&&(d-=A-(A*L+P*T),p-=P-(A*F+P*O))):(Z=E[6],Y=E[7],ie=E[8],re=E[9],M=E[10],G=E[11],d=E[12],p=E[13],m=E[14],j=xl(Z,M),_=j*va,j&&(D=Math.cos(-j),U=Math.sin(-j),se=J*D+ie*U,q=X*D+re*U,ee=Z*D+M*U,ie=J*-U+ie*D,re=X*-U+re*D,M=Z*-U+M*D,G=Y*-U+G*D,J=se,X=q,Z=ee),j=xl(-T,M),w=j*va,j&&(D=Math.cos(-j),U=Math.sin(-j),se=L*D-ie*U,q=F*D-re*U,ee=T*D-M*U,G=O*U+G*D,L=se,F=q,T=ee),j=xl(F,L),y=j*va,j&&(D=Math.cos(j),U=Math.sin(j),se=L*D+F*U,q=J*D+X*U,F=F*D-L*U,X=X*D-J*U,L=se,J=q),_&&Math.abs(_)+Math.abs(y)>359.9&&(_=y=0,w=180-w),f=jn(Math.sqrt(L*L+F*F+T*T)),x=jn(Math.sqrt(X*X+Z*Z)),j=xl(J,X),b=Math.abs(j)>2e-4?j*va:0,C=G?1/(G<0?-G:G):0),r.svg&&(se=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!Lb(Ii(e,un)),se&&e.setAttribute("transform",se))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(f*=-1,b+=y<=0?180:-180,y+=y<=0?180:-180):(x*=-1,b+=b<=0?180:-180)),t=t||r.uncache,r.x=d-((r.xPercent=d&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=p-((r.yPercent=p&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-p)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=m+o,r.scaleX=jn(f),r.scaleY=jn(x),r.rotation=jn(y)+a,r.rotationX=jn(_)+a,r.rotationY=jn(w)+a,r.skewX=b+a,r.skewY=N+a,r.transformPerspective=C+o,(r.zOrigin=parseFloat(u.split(" ")[2])||!t&&r.zOrigin||0)&&(i[Xr]=Df(u)),r.xOffset=r.yOffset=0,r.force3D=pi.force3D,r.renderTransform=r.svg?b6:Ab?Tb:w6,r.uncache=0,r},Df=function(e){return(e=e.split(" "))[0]+" "+e[1]},B0=function(e,t,r){var i=yr(t);return jn(parseFloat(t)+parseFloat(Go(e,"x",r+"px",i)))+i},w6=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Tb(e,t)},ha="0deg",mu="0px",fa=") ",Tb=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,u=r.rotation,d=r.rotationY,p=r.rotationX,m=r.skewX,f=r.skewY,x=r.scaleX,y=r.scaleY,_=r.transformPerspective,w=r.force3D,b=r.target,N=r.zOrigin,C="",A=w==="auto"&&e&&e!==1||w===!0;if(N&&(p!==ha||d!==ha)){var P=parseFloat(d)*tc,E=Math.sin(P),j=Math.cos(P),D;P=parseFloat(p)*tc,D=Math.cos(P),o=B0(b,o,E*D*-N),a=B0(b,a,-Math.sin(P)*-N),l=B0(b,l,j*D*-N+N)}_!==mu&&(C+="perspective("+_+fa),(i||s)&&(C+="translate("+i+"%, "+s+"%) "),(A||o!==mu||a!==mu||l!==mu)&&(C+=l!==mu||A?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+fa),u!==ha&&(C+="rotate("+u+fa),d!==ha&&(C+="rotateY("+d+fa),p!==ha&&(C+="rotateX("+p+fa),(m!==ha||f!==ha)&&(C+="skew("+m+", "+f+fa),(x!==1||y!==1)&&(C+="scale("+x+", "+y+fa),b.style[un]=C||"translate(0, 0)"},b6=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,u=r.skewX,d=r.skewY,p=r.scaleX,m=r.scaleY,f=r.target,x=r.xOrigin,y=r.yOrigin,_=r.xOffset,w=r.yOffset,b=r.forceCSS,N=parseFloat(o),C=parseFloat(a),A,P,E,j,D;l=parseFloat(l),u=parseFloat(u),d=parseFloat(d),d&&(d=parseFloat(d),u+=d,l+=d),l||u?(l*=tc,u*=tc,A=Math.cos(l)*p,P=Math.sin(l)*p,E=Math.sin(l-u)*-m,j=Math.cos(l-u)*m,u&&(d*=tc,D=Math.tan(u-d),D=Math.sqrt(1+D*D),E*=D,j*=D,d&&(D=Math.tan(d),D=Math.sqrt(1+D*D),A*=D,P*=D)),A=jn(A),P=jn(P),E=jn(E),j=jn(j)):(A=p,j=m,P=E=0),(N&&!~(o+"").indexOf("px")||C&&!~(a+"").indexOf("px"))&&(N=Go(f,"x",o,"px"),C=Go(f,"y",a,"px")),(x||y||_||w)&&(N=jn(N+x-(x*A+y*E)+_),C=jn(C+y-(x*P+y*j)+w)),(i||s)&&(D=f.getBBox(),N=jn(N+i/100*D.width),C=jn(C+s/100*D.height)),D="matrix("+A+","+P+","+E+","+j+","+N+","+C+")",f.setAttribute("transform",D),b&&(f.style[un]=D)},S6=function(e,t,r,i,s){var o=360,a=Kn(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?va:1),u=l-i,d=i+u+"deg",p,m;return a&&(p=s.split("_")[1],p==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),p==="cw"&&u<0?u=(u+o*uv)%o-~~(u/o)*o:p==="ccw"&&u>0&&(u=(u-o*uv)%o-~~(u/o)*o)),e._pt=m=new Kr(e._pt,t,r,i,u,s6),m.e=d,m.u="deg",e._props.push(r),m},yv=function(e,t){for(var r in t)e[r]=t[r];return e},_6=function(e,t,r){var i=yv({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,u,d,p,m,f,x;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),o[un]=t,a=dd(r,1),Ba(r,un),r.setAttribute("transform",u)):(u=getComputedStyle(r)[un],o[un]=t,a=dd(r,1),o[un]=u);for(l in Qs)u=i[l],d=a[l],u!==d&&s.indexOf(l)<0&&(f=yr(u),x=yr(d),p=f!==x?Go(r,l,u,x):parseFloat(u),m=parseFloat(d),e._pt=new Kr(e._pt,a,l,p,m-p,fg),e._pt.u=x||0,e._props.push(l));yv(a,i)};Jr("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});Tf[e>1?"border"+n:n]=function(a,l,u,d,p){var m,f;if(arguments.length<4)return m=o.map(function(x){return Us(a,x,u)}),f=m.join(" "),f.split(m[0]).length===5?m[0]:f;m=(d+"").split(" "),f={},o.forEach(function(x,y){return f[x]=m[y]=m[y]||m[(y-1)/2|0]}),a.init(l,f,p)}});var Db={name:"css",register:mg,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,u,d,p,m,f,x,y,_,w,b,N,C,A,P,E,j;Z1||mg(),this.styles=this.styles||jb(e),j=this.styles.props,this.tween=r;for(y in t)if(y!=="autoRound"&&(d=t[y],!(li[y]&&mb(y,t,r,i,e,s)))){if(f=typeof d,x=Tf[y],f==="function"&&(d=d.call(r,i,e,s),f=typeof d),f==="string"&&~d.indexOf("random(")&&(d=ad(d)),x)x(this,e,y,d,r)&&(E=1);else if(y.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(y)+"").trim(),d+="",Ho.lastIndex=0,Ho.test(u)||(_=yr(u),w=yr(d)),w?_!==w&&(u=Go(e,y,u,w)+w):_&&(d+=_),this.add(a,"setProperty",u,d,i,s,0,0,y),o.push(y),j.push(y,0,a[y]);else if(f!=="undefined"){if(l&&y in l?(u=typeof l[y]=="function"?l[y].call(r,i,e,s):l[y],Kn(u)&&~u.indexOf("random(")&&(u=ad(u)),yr(u+"")||u==="auto"||(u+=pi.units[y]||yr(Us(e,y))||""),(u+"").charAt(1)==="="&&(u=Us(e,y))):u=Us(e,y),m=parseFloat(u),b=f==="string"&&d.charAt(1)==="="&&d.substr(0,2),b&&(d=d.substr(2)),p=parseFloat(d),y in ys&&(y==="autoAlpha"&&(m===1&&Us(e,"visibility")==="hidden"&&p&&(m=0),j.push("visibility",0,a.visibility),Do(this,a,"visibility",m?"inherit":"hidden",p?"inherit":"hidden",!p)),y!=="scale"&&y!=="transform"&&(y=ys[y],~y.indexOf(",")&&(y=y.split(",")[0]))),N=y in Qs,N){if(this.styles.save(y),f==="string"&&d.substring(0,6)==="var(--"&&(d=Ii(e,d.substring(4,d.indexOf(")"))),p=parseFloat(d)),C||(A=e._gsap,A.renderTransform&&!t.parseTransform||dd(e,t.parseTransform),P=t.smoothOrigin!==!1&&A.smooth,C=this._pt=new Kr(this._pt,a,un,0,1,A.renderTransform,A,0,-1),C.dep=1),y==="scale")this._pt=new Kr(this._pt,A,"scaleY",A.scaleY,(b?Zl(A.scaleY,b+p):p)-A.scaleY||0,fg),this._pt.u=0,o.push("scaleY",y),y+="X";else if(y==="transformOrigin"){j.push(Xr,0,a[Xr]),d=v6(d),A.svg?gg(e,d,0,P,0,this):(w=parseFloat(d.split(" ")[2])||0,w!==A.zOrigin&&Do(this,A,"zOrigin",A.zOrigin,w),Do(this,a,y,Df(u),Df(d)));continue}else if(y==="svgOrigin"){gg(e,d,1,P,0,this);continue}else if(y in Pb){S6(this,A,y,m,b?Zl(m,b+d):d);continue}else if(y==="smoothOrigin"){Do(this,A,"smooth",A.smooth,d);continue}else if(y==="force3D"){A[y]=d;continue}else if(y==="transform"){_6(this,d,e);continue}}else y in a||(y=wc(y)||y);if(N||(p||p===0)&&(m||m===0)&&!i6.test(d)&&y in a)_=(u+"").substr((m+"").length),p||(p=0),w=yr(d)||(y in pi.units?pi.units[y]:_),_!==w&&(m=Go(e,y,u,w)),this._pt=new Kr(this._pt,N?A:a,y,m,(b?Zl(m,b+p):p)-m,!N&&(w==="px"||y==="zIndex")&&t.autoRound!==!1?a6:fg),this._pt.u=w||0,_!==w&&w!=="%"&&(this._pt.b=u,this._pt.r=o6);else if(y in a)y6.call(this,e,y,u,b?b+d:d);else if(y in e)this.add(e,y,u||e[y],b?b+d:d,i,s);else if(y!=="parseTransform"){W1(y,d);continue}N||(y in a?j.push(y,0,a[y]):typeof e[y]=="function"?j.push(y,2,e[y]()):j.push(y,1,u||e[y])),o.push(y)}}E&&bb(this)},render:function(e,t){if(t.tween._time||!ey())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:Us,aliases:ys,getSetter:function(e,t,r){var i=ys[t];return i&&i.indexOf(",")<0&&(t=i),t in Qs&&t!==Xr&&(e._gsap.x||Us(e,"x"))?r&&cv===r?t==="scale"?d6:u6:(cv=r||{})&&(t==="scale"?h6:f6):e.style&&!B1(e.style[t])?l6:~t.indexOf("-")?c6:X1(e,t)},core:{_removeProperty:Ba,_getMatrix:ny}};Zr.utils.checkPrefix=wc;Zr.core.getStyleSaver=jb;(function(n,e,t,r){var i=Jr(n+","+e+","+t,function(s){Qs[s]=1});Jr(e,function(s){pi.units[s]="deg",Pb[s]=1}),ys[i[13]]=n+","+e,Jr(r,function(s){var o=s.split(":");ys[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Jr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){pi.units[n]="px"});Zr.registerPlugin(Db);var pr=Zr.registerPlugin(Db)||Zr;pr.core.Tween;const Mb=[{id:"12-10",label:"Saturday Regular",time:"12-10",color:"bg-gray-100 text-gray-800 border-gray-200",displayColor:"text-gray-800"},{id:"9-4",label:"Sunday/Public Holiday/Special",time:"9-4",color:"bg-red-100 text-red-800 border-red-200",displayColor:"text-red-600"},{id:"4-10",label:"Evening Shift",time:"4-10",color:"bg-blue-100 text-blue-800 border-blue-200",displayColor:"text-blue-600"},{id:"N",label:"Night Duty",time:"N",color:"bg-green-100 text-green-800 border-green-200",displayColor:"text-green-600"}],ql=[{id:"9-4",combination:"9-4",hours:6.5},{id:"9-4+4-10",combination:"9-4 + 4-10",hours:12},{id:"9-4+N",combination:"9-4 + N",hours:19},{id:"9-4+4-10+N",combination:"9-4 + 4-10 + N",hours:24.5},{id:"AM+12-10",combination:"AM + 12-10",hours:9},{id:"AM+12-10+N",combination:"AM + 12-10 + N",hours:21.5},{id:"12-10",combination:"12-10",hours:9.5},{id:"12-10+N",combination:"12-10 + N",hours:22},{id:"4-10",combination:"4-10",hours:5.5},{id:"4-10+N",combination:"4-10 + N",hours:18},{id:"N",combination:"N",hours:12.5}],N6=({isOpen:n,selectedDate:e,schedule:t,specialDates:r,onConfirm:i,onCancel:s})=>{const[o,a]=H.useState(!1),[l,u]=H.useState(null);if(H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{const y=_=>{_.key==="Escape"&&n&&!o&&s()};if(n)return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n,o,s]),H.useEffect(()=>{n&&(a(!1),u(null))},[n]),!n||!e)return null;const d=y=>{y.target===y.currentTarget&&!o&&s()},p=y=>{const _=new Date(y),w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b=["January","February","March","April","May","June","July","August","September","October","November","December"],N=w[_.getDay()],C=_.getDate(),A=b[_.getMonth()],P=_.getFullYear();return`${N}, ${A} ${C}, ${P}`},m=async()=>{if(!(!e||o)){a(!0),u(null);try{await i(e),s()}catch(y){u(y instanceof Error?y.message:"Failed to clear date"),a(!1)}}},f=()=>{const y=t[e]||[],_=r[e]===!0,w=[];return y.length>0&&w.push(`${y.length} shift${y.length!==1?"s":""}`),_&&w.push("special date marking"),w.join(" and ")},x=c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 overflow-y-auto",onClick:d,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,WebkitOverflowScrolling:"touch",touchAction:"pan-y",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full my-8 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",marginTop:window.innerWidth>window.innerHeight?"2px":"2rem",marginBottom:window.innerWidth>window.innerHeight?"2px":"2rem",maxWidth:window.innerWidth>window.innerHeight?"95vw":"28rem",maxHeight:window.innerWidth>window.innerHeight?"98vh":"none"},onClick:y=>{y.stopPropagation()},children:[c.jsxs("div",{className:"relative pb-4 border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[!o&&c.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Er,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(bs,{className:"w-6 h-6 text-red-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Clear Date"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[c.jsx(Cr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:p(e)})]})]}),c.jsxs("div",{className:"overflow-y-auto flex-1",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",maxHeight:window.innerWidth>window.innerHeight?"calc(98vh - 100px)":"70vh",padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[l&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Jn,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-sm text-red-700",children:l})]})}),c.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-center",children:"Content to be cleared:"}),c.jsx("p",{className:"text-sm text-gray-700 text-center",children:f()})]}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to clear all content for ",c.jsx("strong",{children:p(e)}),"?"]}),c.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(Jn,{className:"w-4 h-4 text-amber-600"}),c.jsx("span",{className:"text-sm text-amber-800 font-medium",children:"This action cannot be undone"})]})})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx("button",{onClick:s,disabled:o,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:m,disabled:o,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:o?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Clearing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(bs,{className:"w-4 h-4"}),c.jsx("span",{children:"Clear"})]})})]}),c.jsx("div",{className:"h-8"})]})]})});return xn.createPortal(x,document.body)},k6=({isOpen:n,selectedMonth:e,selectedYear:t,onConfirm:r,onCancel:i})=>{const[s,o]=H.useState(!1),[a,l]=H.useState(null);if(H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{const f=x=>{x.key==="Escape"&&n&&!s&&i()};if(n)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[n,s,i]),H.useEffect(()=>{n&&(o(!1),l(null))},[n]),!n)return null;const d=`${["January","February","March","April","May","June","July","August","September","October","November","December"][e]} ${t}`,p=async()=>{if(!s){o(!0),l(null);try{await r(t,e),i()}catch(f){l(f instanceof Error?f.message:"Failed to clear month"),o(!1)}}},m=f=>{f.target===f.currentTarget&&!s&&i()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[9999]",onClick:m,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full select-none",style:{userSelect:"none",WebkitUserSelect:"none"},onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"relative p-6 pb-4 border-b border-gray-200",children:[!s&&c.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200",children:c.jsx(Er,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(bs,{className:"w-6 h-6 text-red-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Clear Month"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[c.jsx(Cr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:d})]})]}),c.jsxs("div",{className:"p-6",children:[a&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Jn,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-sm text-red-700",children:a})]})}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsxs("p",{className:"text-gray-700 mb-4",children:["This will clear all shifts for ",c.jsx("strong",{children:d}),". This action cannot be undone."]}),c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Jn,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"This will permanently delete:"}),c.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[c.jsx("li",{children:" All scheduled shifts for the month"}),c.jsx("li",{children:" All special date markings"}),c.jsx("li",{children:" All shift combinations and data"})]})]})]})})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:i,disabled:s,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:p,disabled:s,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:s?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Clearing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(bs,{className:"w-4 h-4"}),c.jsx("span",{children:"Clear All"})]})})]})]})]})})},j6=({isOpen:n,monthData:e,onConfirm:t,onCancel:r})=>{const[i,s]=H.useState(!1),[o,a]=H.useState(null),[l,u]=H.useState(""),d=["January","February","March","April","May","June","July","August","September","October","November","December"];if(H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{const w=b=>{b.key==="Escape"&&n&&!i&&r()};if(n)return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n,i,r]),H.useEffect(()=>{n&&(s(!1),a(null),u(""))},[n]),!n||!e)return null;const p=`${d[e.month]} ${e.year}`,m=p.toUpperCase(),f=l.toUpperCase()===m,x=w=>{w.target===w.currentTarget&&!i&&r()},y=async()=>{if(!(!f||i)){s(!0),a(null);try{await t(e.year,e.month),r()}catch(w){a(w instanceof Error?w.message:"Failed to clear month data"),s(!1)}}},_=c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[99999]",onClick:x,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,WebkitOverflowScrolling:"touch",touchAction:"pan-y",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full my-4 select-none",style:{userSelect:"none",WebkitUserSelect:"none",maxHeight:window.innerWidth>window.innerHeight?"98vh":"90vh",maxWidth:window.innerWidth>window.innerHeight?"95vw":"28rem",display:"flex",flexDirection:"column",margin:window.innerWidth>window.innerHeight?"2px 0":"16px 0"},onClick:w=>{w.stopPropagation()},children:[c.jsxs("div",{className:"relative pb-4 border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[!i&&c.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Er,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(bs,{className:"w-6 h-6 text-red-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Clear Entire Month"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[c.jsx(Cr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:p})]})]}),c.jsxs("div",{className:"overflow-y-auto flex-1",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[o&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Jn,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-sm text-red-700",children:o})]})}),c.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-gray-800 mb-3 text-center",children:"Month Summary"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-600",children:"Total Shifts"}),c.jsx("div",{className:"font-bold text-gray-900",children:e.totalShifts})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-600",children:"Total Amount"}),c.jsxs("div",{className:"font-bold text-gray-900",children:["Rs ",e.totalAmount.toLocaleString()]})]})]})]}),c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Jn,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"This action will permanently delete:"}),c.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[c.jsxs("li",{children:[" All scheduled shifts for ",p]}),c.jsx("li",{children:" All special date markings"}),c.jsx("li",{children:" All shift combinations and data"}),c.jsx("li",{children:" All calculated amounts and totals"})]}),c.jsx("p",{className:"text-sm text-red-800 font-medium mt-3",children:"This action cannot be undone!"})]})]})}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Type ",c.jsx("span",{className:"font-bold text-red-600",children:m})," to confirm:"]}),c.jsx("input",{type:"text",value:l,onChange:w=>u(w.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:m}),l&&!f&&c.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["Please type the exact text: ",m]})]}),c.jsx("div",{className:"h-20"})]}),c.jsx("div",{className:"flex-shrink-0 pt-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:r,disabled:i,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:y,disabled:i||!f,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Clearing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(bs,{className:"w-4 h-4"}),c.jsx("span",{children:"Clear Month"})]})})]})})]})});return xn.createPortal(_,document.body)},A6="modulepreload",C6=function(n){return"/anwh/"+n},vv={},Qr=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=C6(l),l in vv)return;vv[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":A6,u||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((m,f)=>{p.addEventListener("load",m),p.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},ry=[{code:"B165",name:"BHEKUR",title:"MIT",salary:49445,employeeId:"B1604812300915",firstName:"Yashdev",surname:"BHEKUR"},{code:"B196",name:"BHOLLOORAM",title:"MIT",salary:48810,employeeId:"B1911811805356",firstName:"Sawan",surname:"BHOLLOORAM"},{code:"D28B",name:"DHUNNY",title:"MIT",salary:30060,employeeId:"D280487461277B",firstName:"Leelarvind",surname:"DHUNNY"},{code:"D07D",name:"DOMUN",title:"SMIT",salary:59300,employeeId:"D070273400031D",firstName:"Sheik Ahmad Shamir",surname:"DOMUN"},{code:"H301",name:"FOKEERCHAND",title:"MIT",salary:37185,employeeId:"H3003861200061",firstName:"Needeema",surname:"FOKEERCHAND"},{code:"S069",name:"GHOORAN",title:"MIT",salary:48810,employeeId:"S0607814601039",firstName:"Bibi Shafinaaz",surname:"SAMTALLY-GHOORAN"},{code:"H13D",name:"HOSENBUX",title:"MIT",salary:48810,employeeId:"H130381180129D",firstName:"Zameer",surname:"HOSENBUX"},{code:"J149",name:"JUMMUN",title:"MIT",salary:47510,employeeId:"J1403792600909",firstName:"Bibi Nawsheen",surname:"JUMMUN"},{code:"M17G",name:"MAUDHOO",title:"MIT",salary:39470,employeeId:"M170380260096G",firstName:"Chandanee",surname:"MAUDHOO"},{code:"N28C",name:"NARAYYA",title:"MIT",salary:39470,employeeId:"N280881240162C",firstName:"Viraj",surname:"NARAYYA"},{code:"P09A",name:"PITTEA",title:"SMIT",salary:59300,employeeId:"P091171190413A",firstName:"Soubiraj",surname:"PITTEA"},{code:"R16G",name:"RUNGADOO",title:"SMIT",salary:59300,employeeId:"R210572400118G",firstName:"Manee",surname:"RUNGADOO"},{code:"T16G",name:"TEELUCK",title:"SMIT",salary:59300,employeeId:"",firstName:"",surname:"TEELUCK"},{code:"V160",name:"VEERASAWMY",title:"SMIT",salary:59300,employeeId:"V1604664204410",firstName:"Goindah",surname:"VEERASAWMY"}],E6=new Set(ry.filter(n=>n.name.includes("(R)")).map(n=>n.name)),P6=ry.filter(n=>!n.name.includes("(R)")),L6=P6.filter(n=>!E6.has(`${n.name}(R)`)).map(n=>({...n,name:`${n.name}(R)`,code:`${n.code}R`}));let Bn=[...ry,...L6,{code:"5274",name:"ADMIN",title:"ADMIN",salary:0,employeeId:"",firstName:"",surname:""}];const Ib=async()=>{try{const{fetchStaffMembers:e}=await Qr(async()=>{const{fetchStaffMembers:r}=await Promise.resolve().then(()=>NE);return{fetchStaffMembers:r}},void 0),t=await e();if(console.log(" loadStaffFromSupabase called with staffMembers:",(t==null?void 0:t.length)||0),t&&t.length>0){console.log(" Loading staff data from Supabase:",t.length,"members");const r=t.filter(p=>p.name.includes("NARAYYA"));console.log(" NARAYYA staff members from Supabase:",r);const i=t.map(p=>({code:p.code,name:p.name,title:p.title,salary:p.salary,employeeId:p.employee_id,firstName:p.first_name,surname:p.surname})),s=new Set(i.filter(p=>p.name.includes("(R)")).map(p=>p.name)),a=i.filter(p=>!p.name.includes("(R)")).filter(p=>!s.has(`${p.name}(R)`)).map(p=>({...p,name:`${p.name}(R)`,code:`${p.code}R`})),l=[...i,...a];console.log(" Converted serverAuthCodes:",l.length,"entries");const u=l.filter(p=>p.name.includes("NARAYYA"));console.log(" NARAYYA auth codes before update:",u),l.push({code:"5274",name:"ADMIN",title:"ADMIN",salary:0,employeeId:"",firstName:"",surname:""}),Bn.length=0,Bn.push(...l);const d=Bn.filter(p=>p.name.includes("NARAYYA"));console.log(" NARAYYA auth codes after update:",d),Mf(),console.log(" Staff data loaded from Supabase successfully")}else console.log(" No staff members found in Supabase")}catch(e){console.log(" Could not load staff from Supabase (table may not exist), using local defaults:",e)}Bn.some(e=>e.code==="5274")||(Bn.push({code:"5274",name:"ADMIN",title:"ADMIN",salary:0,employeeId:"",firstName:"",surname:""}),console.log(" ADMIN code added to authCodes")),Mf()};Ib();const T6=n=>{console.log(" rosterAuth: Received staff real-time update:",n.detail),Ib().catch(e=>{console.error(" Failed to reload staff data after real-time update:",e)})};typeof window<"u"&&window.addEventListener("staffRealtimeUpdate",T6);async function D6(n){try{console.log(" Updating rosterAuth.ts with new auth codes...");const e=new Set(n.filter(s=>s.name.includes("(R)")&&s.name!=="ADMIN").map(s=>s.name)),r=n.filter(s=>!s.name.includes("(R)")&&s.name!=="ADMIN").filter(s=>!e.has(`${s.name}(R)`)).map(s=>({...s,name:`${s.name}(R)`,code:`${s.code}R`})),i=[...n,...r];Bn.length=0,Bn.push(...i),Mf(),await M6(i),console.log(" Successfully updated and persisted auth codes")}catch(e){throw console.error(" Failed to update rosterAuth.ts:",e),new Error("Failed to save changes. Please try again.")}}async function M6(n){try{const{workScheduleDB:e}=await Qr(async()=>{const{workScheduleDB:t}=await Promise.resolve().then(()=>hS);return{workScheduleDB:t}},void 0);await e.init(),await e.setSetting("authCodes",n),console.log(" Auth codes persisted to IndexedDB")}catch(e){throw console.error(" Failed to persist auth codes:",e),e}}async function I6(){try{const{workScheduleDB:n}=await Qr(async()=>{const{workScheduleDB:t}=await Promise.resolve().then(()=>hS);return{workScheduleDB:t}},void 0);await n.init();const e=await n.getSetting("authCodes");if(e&&Array.isArray(e)&&e.length>0){console.log(" Loading auth codes from IndexedDB:",e.length,"codes");const t=new Set(e.filter(o=>o.name.includes("(R)")&&o.name!=="ADMIN").map(o=>o.name)),i=e.filter(o=>!o.name.includes("(R)")&&o.name!=="ADMIN").filter(o=>!t.has(`${o.name}(R)`)).map(o=>({...o,name:`${o.name}(R)`,code:`${o.code}R`})),s=[...e,...i];Bn.length=0,Bn.push(...s),Mf(),console.log(" Auth codes loaded from storage successfully")}else console.log(" No stored auth codes found, using defaults")}catch(n){console.error(" Failed to load auth codes from storage:",n)}}I6();function Mf(){const n=Bn.filter(t=>t.name!=="ADMIN").filter(t=>t.name!=="MIT"&&t.name!=="SMIT").map(t=>t.name).sort((t,r)=>{const i=t.includes("(R)"),s=r.includes("(R)");return i&&!s?-1:!i&&s?1:t.localeCompare(r)});xr.length=0,xr.push(...n);const e=xr.filter(t=>t.includes("NARAYYA"));console.log(" Refreshed availableNames, NARAYYA entries:",e),console.log(" Refreshed derived arrays with new auth codes")}let xr=Bn.filter(n=>n.name!=="ADMIN").filter(n=>n.name!=="MIT"&&n.name!=="SMIT").map(n=>n.name).sort((n,e)=>{const t=n.includes("(R)"),r=e.includes("(R)");return t&&!r?-1:!t&&r?1:n.localeCompare(e)});const R6=xr.filter(n=>n.includes("NARAYYA"));console.log(" NARAYYA entries in availableNames:",R6);const Da=n=>[...n].sort((e,t)=>{const r=Bn.find(l=>l.name===e),i=Bn.find(l=>l.name===t),s=(r==null?void 0:r.title)||"MIT",o=(i==null?void 0:i.title)||"MIT";if(s==="SMIT"&&o!=="SMIT")return-1;if(s!=="SMIT"&&o==="SMIT")return 1;if(s===o){const l=e.includes("(R)"),u=t.includes("(R)");return!l&&u?-1:l&&!u?1:e.localeCompare(t)}const a=s.localeCompare(o);return a!==0?a:e.localeCompare(t)}),yg=["Morning Shift (9-4)","Saturday Regular (12-10)","Evening Shift (4-10)","Night Duty"],F6="5274";function mi(n){const e=Bn.find(t=>t.code===n.toUpperCase());return e?e.name:null}function Zs(n){return n.toUpperCase()===F6}function Ha(n){return Bn.find(e=>e.name===n)||null}function Rb(n){const e=Ha(n);return(e==null?void 0:e.salary)||0}const O6=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Qr(async()=>{const{default:r}=await Promise.resolve().then(()=>Ac);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class iy extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class $6 extends iy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xv extends iy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wv extends iy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(vg||(vg={}));var B6=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class U6{constructor(e,{headers:t={},customFetch:r,region:i=vg.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=O6(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return B6(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const p=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:d}).catch(y=>{throw new $6(y)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new xv(p);if(!p.ok)throw new wv(p);let f=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return f==="application/json"?x=yield p.json():f==="application/octet-stream"?x=yield p.blob():f==="text/event-stream"?x=p:f==="multipart/form-data"?x=yield p.formData():x=yield p.text(),{data:x,error:null,response:p}}catch(i){return{data:null,error:i,response:i instanceof wv||i instanceof xv?i.context:void 0}}})}}var zr={},sy={},op={},wd={},ap={},lp={},z6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bc=z6();const W6=bc.fetch,Fb=bc.fetch.bind(bc),Ob=bc.Headers,H6=bc.Request,q6=bc.Response,Ac=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ob,Request:H6,Response:q6,default:Fb,fetch:W6},Symbol.toStringTag,{value:"Module"})),Y6=H_(Ac);var cp={};Object.defineProperty(cp,"__esModule",{value:!0});let V6=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};cp.default=V6;var $b=Fi&&Fi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(lp,"__esModule",{value:!0});const G6=$b(Y6),J6=$b(cp);let K6=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=G6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let u=null,d=null,p=null,m=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const w=await s.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=w:d=JSON.parse(w))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),_=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&_&&_.length>1&&(p=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,p=null,m=406,f="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await s.text();try{u=JSON.parse(y),Array.isArray(u)&&s.status===404&&(d=[],u=null,m=200,f="OK")}catch{s.status===404&&y===""?(m=204,f="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,m=200,f="OK"),u&&this.shouldThrowOnError)throw new J6.default(u)}return{error:u,data:d,count:p,status:m,statusText:f}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};lp.default=K6;var X6=Fi&&Fi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ap,"__esModule",{value:!0});const Q6=X6(lp);let Z6=class extends Q6.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ap.default=Z6;var ej=Fi&&Fi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wd,"__esModule",{value:!0});const tj=ej(ap);let nj=class extends tj.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};wd.default=nj;var rj=Fi&&Fi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(op,"__esModule",{value:!0});const gu=rj(wd);let ij=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new gu.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new gu.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new gu.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new gu.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new gu.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};op.default=ij;var up={},dp={};Object.defineProperty(dp,"__esModule",{value:!0});dp.version=void 0;dp.version="0.0.0-automated";Object.defineProperty(up,"__esModule",{value:!0});up.DEFAULT_HEADERS=void 0;const sj=dp;up.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${sj.version}`};var Bb=Fi&&Fi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sy,"__esModule",{value:!0});const oj=Bb(op),aj=Bb(wd),lj=up;let cj=class Ub{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},lj.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new oj.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ub(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(t).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{a.searchParams.append(d,p)})):(o="POST",l=t);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new aj.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};sy.default=cj;var Cc=Fi&&Fi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(zr,"__esModule",{value:!0});zr.PostgrestError=zr.PostgrestBuilder=zr.PostgrestTransformBuilder=zr.PostgrestFilterBuilder=zr.PostgrestQueryBuilder=zr.PostgrestClient=void 0;const zb=Cc(sy);zr.PostgrestClient=zb.default;const Wb=Cc(op);zr.PostgrestQueryBuilder=Wb.default;const Hb=Cc(wd);zr.PostgrestFilterBuilder=Hb.default;const qb=Cc(ap);zr.PostgrestTransformBuilder=qb.default;const Yb=Cc(lp);zr.PostgrestBuilder=Yb.default;const Vb=Cc(cp);zr.PostgrestError=Vb.default;var uj=zr.default={PostgrestClient:zb.default,PostgrestQueryBuilder:Wb.default,PostgrestFilterBuilder:Hb.default,PostgrestTransformBuilder:qb.default,PostgrestBuilder:Yb.default,PostgrestError:Vb.default};const{PostgrestClient:dj,PostgrestQueryBuilder:ME,PostgrestFilterBuilder:IE,PostgrestTransformBuilder:RE,PostgrestBuilder:FE,PostgrestError:OE}=uj;function hj(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const fj=hj(),pj="2.11.15",mj=`realtime-js/${pj}`,gj="1.0.0",Gb=1e4,yj=1e3;var Ou;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ou||(Ou={}));var fr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(fr||(fr={}));var Qi;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Qi||(Qi={}));var xg;(function(n){n.websocket="websocket"})(xg||(xg={}));var ba;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ba||(ba={}));class vj{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Jb{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Qt||(Qt={}));const bv=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=xj(o,n,e,i),s),{})},xj=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?Kb(s,o):wg(o)},Kb=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return _j(e,t)}switch(n){case Qt.bool:return wj(e);case Qt.float4:case Qt.float8:case Qt.int2:case Qt.int4:case Qt.int8:case Qt.numeric:case Qt.oid:return bj(e);case Qt.json:case Qt.jsonb:return Sj(e);case Qt.timestamp:return Nj(e);case Qt.abstime:case Qt.date:case Qt.daterange:case Qt.int4range:case Qt.int8range:case Qt.money:case Qt.reltime:case Qt.text:case Qt.time:case Qt.timestamptz:case Qt.timetz:case Qt.tsrange:case Qt.tstzrange:return wg(e);default:return wg(e)}},wg=n=>n,wj=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},bj=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Sj=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},_j=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Kb(e,a))}return n},Nj=n=>typeof n=="string"?n.replace(" ","T"):n,Xb=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class U0{constructor(e,t,r={},i=Gb){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sv;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Sv||(Sv={}));class $u{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$u.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=$u.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=$u.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const p=s[u];if(p){const m=d.map(_=>_.presence_ref),f=p.map(_=>_.presence_ref),x=d.filter(_=>f.indexOf(_.presence_ref)<0),y=p.filter(_=>m.indexOf(_.presence_ref)<0);x.length>0&&(a[u]=x),y.length>0&&(l[u]=y)}else a[u]=d}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const p=e[a].map(f=>f.presence_ref),m=d.filter(f=>p.indexOf(f.presence_ref)<0);e[a].unshift(...m)}r(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(p=>p.presence_ref);u=u.filter(p=>d.indexOf(p.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _v;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(_v||(_v={}));var Nv;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Nv||(Nv={}));var Os;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Os||(Os={}));class oy{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=fr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new U0(this,Qi.join,this.params,this.timeout),this.rejoinTimer=new Jb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=fr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qi.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new $u(this),this.broadcastEndpointURL=Xb(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==fr.closed){const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(Os.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Os.CLOSED));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var p;if(this.socket.setAuth(),d===void 0){e==null||e(Os.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,x=[];for(let y=0;y<f;y++){const _=m[y],{filter:{event:w,schema:b,table:N,filter:C}}=_,A=d&&d[y];if(A&&A.event===w&&A.schema===b&&A.table===N&&A.filter===C)x.push(Object.assign(Object.assign({},_),{id:A.id}));else{this.unsubscribe(),this.state=fr.errored,e==null||e(Os.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Os.SUBSCRIBED);return}}).receive("error",d=>{this.state=fr.errored,e==null||e(Os.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Os.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=fr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new U0(this,Qi.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new U0(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Qi;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,t,r);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var x,y,_;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((_=(y=f.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(f=>f.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var x,y,_,w,b,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const C=f.id,A=(x=f.filter)===null||x===void 0?void 0:x.event;return C&&((y=t.ids)===null||y===void 0?void 0:y.includes(C))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const C=(b=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return C==="*"||C===((N=t==null?void 0:t.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:y,table:_,commit_timestamp:w,type:b,errors:N}=x;m=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:w,eventType:b,new:{},old:{},errors:N}),this._getPayloadRecords(x))}f.callback(m,r)})}_isClosed(){return this.state===fr.closed}_isJoined(){return this.state===fr.joined}_isJoining(){return this.state===fr.joining}_isLeaving(){return this.state===fr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&oy.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Qi.close,{},e)}_onError(e){this._on(Qi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=bv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=bv(e.columns,e.old_record)),t}}const kv=()=>{},kj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jj{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gb,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=kv,this.ref=0,this.logger=kv,this.conn=null,this.sendBuffer=[],this.serializer=new vj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Qr(async()=>{const{default:l}=await Promise.resolve().then(()=>Ac);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${xg.websocket}`,this.httpEndpoint=Xb(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Jb(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=fj),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gj}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ou.connecting:return ba.Connecting;case Ou.open:return ba.Open;case Ou.closing:return ba.Closing;default:return ba.Closed}}isConnected(){return this.connectionState()===ba.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new oy(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:mj};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Qi.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(yj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Qi.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([kj],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class ay extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function qn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Aj extends ay{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bg extends ay{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Cj=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Qb=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Qr(async()=>{const{default:r}=await Promise.resolve().then(()=>Ac);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Ej=()=>Cj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qr(()=>Promise.resolve().then(()=>Ac),void 0)).Response:Response}),Sg=n=>{if(Array.isArray(n))return n.map(t=>Sg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Sg(r)}),e},Pj=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var qa=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const z0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Lj=(n,e,t)=>qa(void 0,void 0,void 0,function*(){const r=yield Ej();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new Aj(z0(i),s,o))}).catch(i=>{e(new bg(z0(i),i))}):e(new bg(z0(n),n))}),Tj=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(Pj(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t))};function bd(n,e,t,r,i,s){return qa(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Tj(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Lj(l,a,r))})})}function If(n,e,t,r){return qa(this,void 0,void 0,function*(){return bd(n,"GET",e,t,r)})}function $s(n,e,t,r,i){return qa(this,void 0,void 0,function*(){return bd(n,"POST",e,r,i,t)})}function _g(n,e,t,r,i){return qa(this,void 0,void 0,function*(){return bd(n,"PUT",e,r,i,t)})}function Dj(n,e,t,r){return qa(this,void 0,void 0,function*(){return bd(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Zb(n,e,t,r,i){return qa(this,void 0,void 0,function*(){return bd(n,"DELETE",e,r,i,t)})}var Br=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Mj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ij{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Qb(i)}uploadOrUpdate(e,t,r,i){return Br(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},jv),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),p=yield(e=="PUT"?_g:$s)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(qn(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Br(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Br(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:jv.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const p=yield _g(this.fetch,a.toString(),l,{headers:d});return{data:{path:s,fullPath:p.Key},error:null}}catch(l){if(qn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Br(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield $s(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new ay("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(qn(r))return{data:null,error:r};throw r}})}update(e,t,r){return Br(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Br(this,void 0,void 0,function*(){try{return{data:yield $s(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(qn(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Br(this,void 0,void 0,function*(){try{return{data:{path:(yield $s(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(qn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Br(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield $s(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(qn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Br(this,void 0,void 0,function*(){try{const i=yield $s(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(qn(i))return{data:null,error:i};throw i}})}download(e,t){return Br(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield If(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(qn(a))return{data:null,error:a};throw a}})}info(e){return Br(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield If(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Sg(r),error:null}}catch(r){if(qn(r))return{data:null,error:r};throw r}})}exists(e){return Br(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Dj(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(qn(r)&&r instanceof bg){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Br(this,void 0,void 0,function*(){try{return{data:yield Zb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(qn(t))return{data:null,error:t};throw t}})}list(e,t,r){return Br(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Mj),t),{prefix:e||""});return{data:yield $s(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(qn(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Rj="2.10.4",Fj={"X-Client-Info":`storage-js/${Rj}`};var wl=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class Oj{constructor(e,t={},r,i){const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},Fj),t),this.fetch=Qb(r)}listBuckets(){return wl(this,void 0,void 0,function*(){try{return{data:yield If(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(qn(e))return{data:null,error:e};throw e}})}getBucket(e){return wl(this,void 0,void 0,function*(){try{return{data:yield If(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(qn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return wl(this,void 0,void 0,function*(){try{return{data:yield $s(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(qn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return wl(this,void 0,void 0,function*(){try{return{data:yield _g(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(qn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return wl(this,void 0,void 0,function*(){try{return{data:yield $s(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(qn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return wl(this,void 0,void 0,function*(){try{return{data:yield Zb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(qn(t))return{data:null,error:t};throw t}})}}class $j extends Oj{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Ij(this.url,this.headers,e,this.fetch)}}const Bj="2.53.0";let ku="";typeof Deno<"u"?ku="deno":typeof document<"u"?ku="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ku="react-native":ku="node";const Uj={"X-Client-Info":`supabase-js-${ku}/${Bj}`},zj={headers:Uj},Wj={schema:"public"},Hj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qj={};var Yj=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Vj=n=>{let e;return n?e=n:typeof fetch>"u"?e=Fb:e=fetch,(...t)=>e(...t)},Gj=()=>typeof Headers>"u"?Ob:Headers,Jj=(n,e,t)=>{const r=Vj(t),i=Gj();return(s,o)=>Yj(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var Kj=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};function Xj(n){return n.endsWith("/")?n:n+"/"}function Qj(n,e){var t,r;const{db:i,auth:s,realtime:o,global:a}=n,{db:l,auth:u,realtime:d,global:p}=e,m={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},p),a),{headers:Object.assign(Object.assign({},(t=p==null?void 0:p.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Kj(this,void 0,void 0,function*(){return""})};return n.accessToken?m.accessToken=n.accessToken:delete m.accessToken,m}const eS="2.71.1",Al=30*1e3,Ng=3,W0=Ng*Al,Zj="http://localhost:9999",eA="supabase.auth.token",tA={"X-Client-Info":`gotrue-js/${eS}`},kg="X-Supabase-Api-Version",tS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rA=10*60*1e3;class ly extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function St(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class iA extends ly{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function sA(n){return St(n)&&n.name==="AuthApiError"}class nS extends ly{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ta extends ly{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class _o extends ta{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oA(n){return St(n)&&n.name==="AuthSessionMissingError"}class Eh extends ta{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ph extends ta{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Lh extends ta{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aA(n){return St(n)&&n.name==="AuthImplicitGrantRedirectError"}class Av extends ta{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jg extends ta{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function H0(n){return St(n)&&n.name==="AuthRetryableFetchError"}class Cv extends ta{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Ag extends ta{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ev=` 	
\r=`.split(""),lA=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Ev.length;e+=1)n[Ev[e].charCodeAt(0)]=-2;for(let e=0;e<Rf.length;e+=1)n[Rf[e].charCodeAt(0)]=e;return n})();function Pv(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Rf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Rf[r]),e.queuedBits-=6}}function rS(n,e,t){const r=lA[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Lv(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{dA(o,r,t)};for(let o=0;o<n.length;o+=1)rS(n.charCodeAt(o),i,s);return e.join("")}function cA(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function uA(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}cA(r,e)}}function dA(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function hA(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)rS(n.charCodeAt(i),t,r);return new Uint8Array(e)}function fA(n){const e=[];return uA(n,t=>e.push(t)),new Uint8Array(e)}function pA(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>Pv(i,t,r)),Pv(null,t,r),e.join("")}function mA(n){return Math.round(Date.now()/1e3)+n}function gA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Gi=()=>typeof window<"u"&&typeof document<"u",pa={tested:!1,writable:!1},iS=()=>{if(!Gi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pa.tested)return pa.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),pa.tested=!0,pa.writable=!0}catch{pa.tested=!0,pa.writable=!1}return pa.writable};function yA(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const sS=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Qr(async()=>{const{default:r}=await Promise.resolve().then(()=>Ac);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},vA=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Cl=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ma=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},wo=async(n,e)=>{await n.removeItem(e)};class hp{constructor(){this.promise=new hp.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}hp.promiseConstructor=Promise;function q0(n){const e=n.split(".");if(e.length!==3)throw new Ag("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!nA.test(e[r]))throw new Ag("JWT not in base64url format");return{header:JSON.parse(Lv(e[0])),payload:JSON.parse(Lv(e[1])),signature:hA(e[2]),raw:{header:e[0],payload:e[1]}}}async function xA(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function wA(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function bA(n){return("0"+n.toString(16)).substr(-2)}function SA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,bA).join("")}async function _A(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function NA(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await _A(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bl(n,e,t=!1){const r=SA();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await Cl(n,`${e}-code-verifier`,i);const s=await NA(r);return[s,r===s?"plain":"s256"]}const kA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jA(n){const e=n.headers.get(kg);if(!e||!e.match(kA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function AA(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function CA(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const EA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sl(n){if(!EA.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Y0(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Tv(n){return JSON.parse(JSON.stringify(n))}var PA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const xa=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),LA=[502,503,504];async function Dv(n){var e;if(!vA(n))throw new jg(xa(n),0);if(LA.includes(n.status))throw new jg(xa(n),n.status);let t;try{t=await n.json()}catch(s){throw new nS(xa(s),s)}let r;const i=jA(n);if(i&&i.getTime()>=tS["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Cv(xa(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new _o}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Cv(xa(t),n.status,t.weak_password.reasons);throw new iA(xa(t),n.status||500,r)}const TA=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function Ct(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[kg]||(s[kg]=tS["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await DA(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function DA(n,e,t,r,i,s){const o=TA(e,r,i,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new jg(xa(l),0)}if(a.ok||await Dv(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Dv(l)}}function Is(n){var e;let t=null;FA(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=mA(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Mv(n){const e=Is(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Co(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function MA(n){return{data:n,error:null}}function IA(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=PA(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function RA(n){return n}function FA(n){return n.access_token&&n.refresh_token&&n.expires_in}const V0=["global","local","others"];var OA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class $A{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=sS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=V0[0]){if(V0.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${V0.join(", ")}`);try{return await Ct(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Co})}catch(r){if(St(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=OA(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:IA,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(St(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ct(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Co})}catch(t){if(St(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await Ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:RA});if(d.error)throw d.error;const p=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(x.split(";")[1].split("=")[1]);u[`${_}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(St(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Sl(e);try{return await Ct(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Co})}catch(t){if(St(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Sl(e);try{return await Ct(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Co})}catch(r){if(St(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Sl(e);try{return await Ct(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Co})}catch(r){if(St(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Sl(e.userId);try{const{data:t,error:r}=await Ct(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(St(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Sl(e.userId),Sl(e.id);try{return{data:await Ct(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(St(t))return{data:null,error:t};throw t}}}function Iv(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function BA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _l={debug:!!(globalThis&&iS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class UA extends oS{}async function zA(n,e,t){_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),_l.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw _l.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new UA(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(_l.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}BA();const WA={url:Zj,storageKey:eA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Rv(n,e,t){return await t()}const Nl={};class hd{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=hd.nextInstanceID,hd.nextInstanceID+=1,this.instanceID>0&&Gi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},WA),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new $A({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=sS(i.fetch),this.lock=i.lock||Rv,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Gi()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=zA:this.lock=Rv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:iS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Iv(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Iv(this.memoryStorage)),Gi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Nl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Nl[this.storageKey]=Object.assign(Object.assign({},Nl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Nl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Nl[this.storageKey]=Object.assign(Object.assign({},Nl[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${eS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=yA(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Gi()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),aA(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return St(t)?{error:t}:{error:new nS("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Is}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(St(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:d,password:p,options:m}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await bl(this.storage,this.storageKey)),s=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:p,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:x},xform:Is})}else if("phone"in e){const{phone:d,password:p,options:m}=e;s=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Is})}else throw new Ph("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(St(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Mv})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Mv})}else throw new Ph("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Eh}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(St(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,s,o,a,l,u,d,p,m,f;let x,y;if("message"in e)x=e.message,y=e.signature;else{const{chain:_,wallet:w,statement:b,options:N}=e;let C;if(Gi())if(typeof w=="object")C=w;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))C=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=w}const A=new URL((t=N==null?void 0:N.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in C&&C.signIn){const P=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),b?{statement:b}:null));let E;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")E=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)E=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)x=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${A.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(i=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=N==null?void 0:N.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((a=N==null?void 0:N.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((p=(d=N==null?void 0:N.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...N.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const P=await C.signMessage(new TextEncoder().encode(x),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=P}}try{const{data:_,error:w}=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:pA(y)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Is});if(w)throw w;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Eh}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:w})}catch(_){if(St(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const t=await ma(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:o}=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Is});if(await wo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Eh}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(St(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Is}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Eh}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(St(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await bl(this.storage,this.storageKey));const{error:p}=await Ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await Ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ph("You must provide either an email or phone number.")}catch(a){if(St(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Is});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(St(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await bl(this.storage,this.storageKey)),await Ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:MA})}catch(s){if(St(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new _o;const{error:i}=await Ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(St(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Ct(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Ct(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Ph("You must provide either an email or phone number and a type")}catch(t){if(St(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ma(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<W0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await ma(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Y0()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Co}):await this._useSession(async t=>{var r,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _o}:await Ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Co})})}catch(t){if(St(t))return oA(t)&&(await this._removeSession(),await wo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new _o;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await bl(this.storage,this.storageKey));const{data:u,error:d}=await Ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Co});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(St(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _o;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:o}=q0(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(St(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new _o;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(St(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Gi())throw new Lh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Lh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Av("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Av("No code detected.");const{data:b,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new Lh("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(a);let m=d+p;l&&(m=parseInt(l));const f=m-d;f*1e3<=Al&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${p}s`);const x=m-p;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:y,error:_}=await this._getUser(s);if(_)throw _;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:m,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(St(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ma(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(sA(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await wo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=gA(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await bl(this.storage,this.storageKey,!0));try{return await Ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(St(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(St(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,d;const{data:p,error:m}=s;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ct(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Gi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(St(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await Ct(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(St(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await wA(async i=>(i>0&&await xA(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Is})),(i,s)=>{const o=200*Math.pow(2,i);return s&&H0(s)&&Date.now()+o-r<Al})}catch(r){if(this._debug(t,"error",r),St(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Gi()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ma(this.storage,this.storageKey);if(i&&this.userStorage){let o=await ma(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Cl(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Y0()}else if(i&&!i.user&&!i.user){const o=await ma(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await wo(this.storage,this.storageKey+"-user"),await Cl(this.storage,this.storageKey,i)):i.user=Y0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<W0;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${W0}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),H0(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new _o;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new hp;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new _o;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),St(s)){const o={session:null,error:s};return H0(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Cl(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=Tv(i);await Cl(this.storage,this.storageKey,s)}else{const i=Tv(t);await Cl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await wo(this.storage,this.storageKey),await wo(this.storage,this.storageKey+"-code-verifier"),await wo(this.storage,this.storageKey+"-user"),this.userStorage&&await wo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Gi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Al);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Al);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Al}ms, refresh threshold is ${Ng} ticks`),i<=Ng&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await bl(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Ct(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(St(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await Ct(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(St(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await Ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(St(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(St(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=q0(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+rA>i)return r;const{data:s,error:o}=await Ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:f,error:x}=await this.getSession();if(x||!f.session)return{data:null,error:x};r=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=q0(r);t!=null&&t.allowExpired||AA(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const d=CA(i.alg),p=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,fA(`${a}.${l}`)))throw new Ag("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}}}hd.nextInstanceID=0;const HA=hd;class qA extends HA{constructor(e){super(e)}}var YA=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class VA{constructor(e,t,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=Xj(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Wj,realtime:qj,auth:Object.assign(Object.assign({},Hj),{storageKey:u}),global:zj},p=Qj(r??{},d);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=Jj(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new dj(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new $j(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new U6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return YA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,d){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qA({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new jj(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const GA=(n,e,t)=>new VA(n,e,t);function JA(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const n=process.version.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}JA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Fv="https://cpzxnbhpzsssyhpuhsgh.supabase.co",Ov="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwenhuYmhwenNzc3locHVoc2doIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxMjExMDMsImV4cCI6MjA2ODY5NzEwM30.xB3KJ6FYeS5U08We1JqgSajutrdJ3vIvbRZVHmxUACc";let ft=null;if(Fv.includes("supabase.co")&&Ov.length>50)try{ft=GA(Fv,Ov,{auth:{persistSession:!1},global:{fetch:(n,e={})=>{const t=new AbortController,r=setTimeout(()=>t.abort(),1e4);return fetch(n,{...e,signal:t.signal}).finally(()=>{clearTimeout(r)}).catch(i=>{throw i.name==="AbortError"?new Error("Request timeout - please check your connection"):i})}}}),console.log(" Supabase client initialized")}catch(n){console.error(" Supabase initialization failed:",n)}else console.error(" Supabase credentials not configured. Please update the hardcoded values in src/lib/supabase.ts");const aS=async()=>{if(!ft)throw console.error(" Supabase not available - check your configuration"),new Error("Supabase not configured. Please set up your Supabase credentials in the .env file.");try{console.log(" Fetching roster entries from Supabase...");const{data:n,error:e}=await ft.from("roster_entries").select("*").order("date",{ascending:!1}).order("created_at",{ascending:!1});if(e)throw console.error(" Error fetching roster entries:",e),new Error(`Database error: ${e.message}`);return console.log(" Successfully fetched roster entries:",(n==null?void 0:n.length)||0),n||[]}catch(n){throw console.error(" Network error fetching roster entries:",n),n instanceof Error?n:new Error("Network error: Unable to connect to database. Please check your internet connection and Supabase configuration.")}},cy=async(n,e)=>{if(!ft)throw new Error("Database not available. Please check your connection.");try{console.log(" Adding roster entry to Supabase:",n);const t=new Date,r=`${t.getDate().toString().padStart(2,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`,i={date:n.date,shift_type:n.shiftType,assigned_name:n.assignedName,last_edited_by:e,last_edited_at:r,change_description:n.changeDescription||null},{data:s,error:o}=await ft.from("roster_entries").insert([i]).select().single();if(o)throw console.error(" Error adding roster entry:",o),new Error(`Failed to add roster entry: ${o.message}`);console.log(" Successfully added roster entry:",s);const a={date:n.date,shiftType:n.shiftType,assignedName:n.assignedName,editorName:e,action:"added"};return window.dispatchEvent(new CustomEvent("rosterCalendarSync",{detail:a})),s}catch(t){throw console.error(" Network error adding roster entry:",t),t instanceof Error?new Error(`Import failed: ${t.message}`):new Error("Import failed: Network or database error")}},lS=async(n,e,t)=>{if(!ft)throw new Error("Supabase not available. Please configure your Supabase credentials in .env file or src/lib/supabase.ts");try{console.log(" Updating roster entry in Supabase:",{id:n,formData:e});const{data:r,error:i}=await ft.from("roster_entries").select("*").eq("id",n).single();if(i)throw console.error(" Error fetching current entry:",i),new Error(`Failed to fetch current entry: ${i.message}`);const s=r.assigned_name!==e.assignedName,o=r.assigned_name;console.log(" UPDATE: Name change detection:",{oldName:o,newName:e.assignedName,isNameChange:s,editorName:t});const a=new Date,l=`${a.getDate().toString().padStart(2,"0")}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getFullYear()} ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}:${a.getSeconds().toString().padStart(2,"0")}`;let u=e.changeDescription;if(r.change_description==="Imported from PDF")u=`${e.changeDescription} (Original PDF: ${r.assigned_name})`;else if(r.change_description&&r.change_description.includes("(Original PDF:")){const x=r.change_description.match(/\(Original PDF: ([^)]+)\)/);x&&(u=`${e.changeDescription} (Original PDF: ${x[1]})`)}const d={date:e.date,shift_type:e.shiftType,assigned_name:e.assignedName,last_edited_by:t,last_edited_at:l,change_description:u||null,text_color:e.textColor||null},{data:p,error:m}=await ft.from("roster_entries").update(d).eq("id",n).select().single();if(m)throw console.error(" Error updating roster entry:",m),new Error(`Failed to update roster entry: ${m.message}`);if(console.log(" Successfully updated roster entry:",p),s){console.log(" UPDATE: Dispatching removal event for old name:",o);const x={date:e.date,shiftType:e.shiftType,assignedName:o,editorName:t,action:"removed"};window.dispatchEvent(new CustomEvent("rosterCalendarSync",{detail:x})),console.log(" UPDATE: Removal event dispatched for:",o),await new Promise(y=>setTimeout(y,100))}const f={date:e.date,shiftType:e.shiftType,assignedName:e.assignedName,editorName:t,action:"updated"};return window.dispatchEvent(new CustomEvent("rosterCalendarSync",{detail:f})),console.log(" UPDATE: Addition event dispatched for:",e.assignedName),p}catch(r){throw console.error(" Network error updating roster entry:",r),r}},cS=async n=>{if(!ft)throw new Error("Supabase not available. Please configure your Supabase credentials in .env file or src/lib/supabase.ts");try{console.log(" Deleting roster entry from Supabase:",n);const{data:e,error:t}=await ft.from("roster_entries").select("*").eq("id",n).single();if(t)throw console.error(" Error fetching entry before deletion:",t),new Error(`Failed to fetch entry before deletion: ${t.message}`);const{error:r}=await ft.from("roster_entries").delete().eq("id",n);if(r)throw console.error(" Error deleting roster entry:",r),new Error(`Failed to delete roster entry: ${r.message}`);if(console.log(" Successfully deleted roster entry:",n),e){console.log(" Dispatching rosterCalendarSync event for removal:",{date:e.date,shiftType:e.shift_type,assignedName:e.assigned_name,editorName:e.last_edited_by||"Unknown",action:"removed"});const i={date:e.date,shiftType:e.shift_type,assignedName:e.assigned_name,editorName:e.last_edited_by||"Unknown",action:"removed"};window.dispatchEvent(new CustomEvent("rosterCalendarSync",{detail:i})),console.log(" rosterCalendarSync event dispatched for removal")}}catch(e){throw console.error(" Network error deleting roster entry:",e),e}},KA=async()=>{if(!ft)throw new Error("Supabase not available. Please configure your Supabase credentials in .env file or src/lib/supabase.ts");try{console.log(" Clearing ALL roster entries from Supabase...");const{count:n,error:e}=await ft.from("roster_entries").select("*",{count:"exact",head:!0});e?console.error(" Error getting entry count:",e):console.log(` Found ${n} entries to delete`);const{error:t}=await ft.from("roster_entries").delete().neq("id","00000000-0000-0000-0000-000000000000");if(t)throw console.error(" Error clearing all roster entries:",t),new Error(`Failed to clear all roster entries: ${t.message}`);console.log(` Successfully cleared all ${n||"unknown number of"} roster entries`)}catch(n){throw console.error(" Network error clearing all roster entries:",n),n}},XA=async(n,e)=>{if(!ft)throw new Error("Supabase not available. Please configure your Supabase credentials in .env file or src/lib/supabase.ts");try{const t=`${n}-${(e+1).toString().padStart(2,"0")}-01`,r=new Date(n,e+1,0).getDate(),i=`${n}-${(e+1).toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}`;console.log(` Clearing roster entries for ${e+1}/${n} from Supabase...`),console.log(` Date range: ${t} to ${i}`);const{count:s,error:o}=await ft.from("roster_entries").select("*",{count:"exact",head:!0}).gte("date",t).lte("date",i);o?console.error(" Error getting month entry count:",o):console.log(` Found ${s} entries to delete for ${e+1}/${n}`);const{error:a}=await ft.from("roster_entries").delete().gte("date",t).lte("date",i);if(a)throw console.error(" Error clearing month roster entries:",a),new Error(`Failed to clear month roster entries: ${a.message}`);console.log(` Successfully cleared ${s||"unknown number of"} roster entries for ${e+1}/${n}`)}catch(t){throw console.error(" Network error clearing month roster entries:",t),t}},QA=async(n,e,t)=>{if(!ft)throw new Error("Supabase not available. Please configure your Supabase credentials in .env file or src/lib/supabase.ts");try{console.log(` Updating all staff remarks for ${n} with info: "${e}"`);const r=new Date,i=`${r.getDate().toString().padStart(2,"0")}-${(r.getMonth()+1).toString().padStart(2,"0")}-${r.getFullYear()} ${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}:${r.getSeconds().toString().padStart(2,"0")}`,{data:s,error:o}=await ft.from("roster_entries").select("*").eq("date",n);if(o)throw console.error(" Error fetching entries for date:",o),new Error(`Failed to fetch entries for date: ${o.message}`);if(!s||s.length===0){console.log(` No entries found for date ${n}`);return}console.log(` Found ${s.length} entries to update for ${n}`);for(const a of s){let l=a.change_description||"";if(l=l.replace(/Special Date: [^;]*;?\s*/g,""),e.trim()){const d=`Special Date: ${e.trim()}`;l=l?`${d}; ${l}`:d}const{error:u}=await ft.from("roster_entries").update({change_description:l||null,last_edited_by:t,last_edited_at:i}).eq("id",a.id);if(u)throw console.error(` Error updating entry ${a.id}:`,u),new Error(`Failed to update entry: ${u.message}`)}console.log(` Successfully updated ${s.length} entries for ${n}`)}catch(r){throw console.error(" Network error updating staff remarks:",r),r}},uS=({isOpen:n,onClose:e,currentMonth:t,currentYear:r})=>{const[i,s]=H.useState(""),[o,a]=H.useState(""),[l,u]=H.useState(!1),[d,p]=H.useState(null),[m,f]=H.useState("auth"),[x,y]=H.useState(!1);H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{const A=P=>{P.key==="Escape"&&n&&!l&&_()};if(n)return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[n,l]),H.useEffect(()=>{n&&(s(""),a(""),u(!1),p(null),f("auth"))},[n]);const _=()=>{l||e()},w=async()=>{if(console.log(" EXPORT STARTED with auth code:",i),!i||i.length<4){a("Please enter your authentication code");return}const A=mi(i);if(console.log(" Authenticated as:",A),!A){a("Invalid authentication code");return}console.log(" Starting calendar export process..."),u(!0),f("exporting"),a("");try{console.log(" Fetching roster entries...");const P=await aS();console.log(` Total entries: ${P.length}`);const E=P.filter(U=>{const L=new Date(U.date);if(!(L.getMonth()===t&&L.getFullYear()===r))return!1;if(A==="ADMIN")return!0;const T=U.assigned_name.replace(/\(R\)$/,"").trim().toUpperCase(),O=A.replace(/\(R\)$/,"").trim().toUpperCase();return T===O});if(console.log(` Found ${E.length} entries for ${A}`),E.forEach(U=>{console.log(` Entry: ${U.date} - ${U.shift_type} - ${U.assigned_name}`)}),E.length===0){console.log(" No entries found for this staff member and month"),p({success:!1,filename:"",entriesExported:0,errors:[`No shifts found for ${A} in ${N()}`]}),f("result");return}console.log(" Converting roster entries to calendar format...");const j={},D={};console.log(" Checking for special dates in all entries..."),P.forEach(U=>{if(U.change_description&&U.change_description.includes("Special Date:")){const L=U.change_description.match(/Special Date:\s*([^;]+)/);L&&L[1].trim()&&(D[U.date]=!0,console.log(` Found special date: ${U.date} - "${L[1].trim()}"`))}}),E.forEach(U=>{const L=U.date,T={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[U.shift_type];if(T){j[L]||(j[L]=[]),j[L].includes(T)||j[L].push(T);const J=new Date(L).getDay();(J===6&&U.shift_type==="Morning Shift (9-4)"||J>=1&&J<=5&&U.shift_type==="Morning Shift (9-4)")&&(D[L]=!0)}}),console.log(" Calendar updates to apply:",j),console.log(" Special date updates to apply:",D),console.log(" Dispatching bulk calendar update event..."),window.dispatchEvent(new CustomEvent("bulkCalendarUpdate",{detail:{calendarUpdates:j,specialDateUpdates:D,editorName:A,source:"calendar_export",entries:P}})),p({success:!0,filename:`${A}_${N()}.ics`,entriesExported:E.length,errors:[]}),f("result"),console.log(" Export completed successfully!")}catch(P){console.error(" Calendar export error:",P),p({success:!1,filename:"",entriesExported:0,errors:[P instanceof Error?P.message:"Unknown export error"]}),f("result")}finally{u(!1)}},b=A=>{A.target===A.currentTarget&&!l&&_()},N=()=>`${["January","February","March","April","May","June","July","August","September","October","November","December"][t]} ${r}`;if(!n)return null;const C=c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:b,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,WebkitOverflowScrolling:"touch",touchAction:"pan-y",display:"flex",alignItems:"stretch",justifyContent:"center",padding:"0"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",height:"100vh",maxWidth:"100vw",borderRadius:"0",display:"flex",flexDirection:"column"},onClick:A=>A.stopPropagation(),children:[c.jsxs("div",{className:"relative pb-4 border-b border-gray-200 flex-shrink-0 p-6",children:[!l&&c.jsx("button",{onClick:_,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Er,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx(Ys,{className:"w-6 h-6 text-green-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Export to Calendar"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[c.jsx(Cr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:N()})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",padding:"24px"},children:[m==="auth"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Authentication Code"}),c.jsxs("div",{className:"flex justify-center space-x-3 mb-3",children:[[0,1,2,3].map(A=>c.jsx("input",{type:x?"text":"password",value:i[A]||"",onChange:P=>{const E=P.target.value.toUpperCase();if(E.length<=1){const j=i.split("");if(j[A]=E,s(j.join("")),E&&A<3){const D=document.querySelector(`input[data-index="${A+1}"]`);D&&D.focus()}}},onKeyDown:P=>{if(P.key==="Backspace"&&!i[A]&&A>0){const E=document.querySelector(`input[data-index="${A-1}"]`);E&&E.focus()}},"data-index":A,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:A===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},A)),c.jsx("button",{type:"button",onTouchStart:()=>y(!0),onTouchEnd:()=>y(!1),onMouseDown:()=>y(!0),onMouseUp:()=>y(!1),onMouseLeave:()=>y(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg ml-2",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:x?c.jsx(kc,{className:"w-5 h-5"}):c.jsx(jc,{className:"w-5 h-5"})})]})]}),o&&c.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Jn,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-sm text-red-700",children:o})]})}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Cr,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"What happens next:"}),c.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[c.jsx("li",{children:" Enter your authentication code"}),c.jsxs("li",{children:[" Your shifts for ",N()," will be found"]}),c.jsx("li",{children:" They will automatically appear in your calendar tab"})]})]})]})})]}),m==="exporting"&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("div",{className:"w-8 h-8 border-4 border-green-200 border-t-green-600 rounded-full animate-spin"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Exporting to Calendar"}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["Converting roster data for ",N(),"..."]}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[c.jsx("p",{children:" Fetching your roster entries"}),c.jsx("p",{children:" Converting to calendar format"}),c.jsx("p",{children:" Updating calendar view"})]})]}),m==="result"&&d&&c.jsxs("div",{className:"space-y-6",children:[d.success?c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(pc,{className:"w-8 h-8 text-green-600"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Successful!"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Your calendar file has been downloaded"}),c.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"File:"}),c.jsx("span",{className:"text-green-800 font-medium",children:d.filename})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Shifts exported:"}),c.jsx("span",{className:"text-green-800 font-medium",children:d.entriesExported})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Month:"}),c.jsx("span",{className:"text-green-800 font-medium",children:N()})]})]})}),c.jsx("div",{className:"mt-4",children:c.jsx("button",{onClick:()=>{e(),setTimeout(()=>{console.log(" CALENDAR EXPORT: Switching to calendar tab after export"),window.dispatchEvent(new CustomEvent("switchToCalendarTab")),window.dispatchEvent(new CustomEvent("forceCalendarRefresh"))},100)},className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:c.jsx("span",{children:"View in Calendar"})})})]}):c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Jn,{className:"w-8 h-8 text-red-600"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Failed"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to export your calendar"}),c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:c.jsx("div",{className:"space-y-2 text-sm text-red-700",children:d.errors.map((A,P)=>c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(Jn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:A})]},P))})})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Next Steps:"}),c.jsx("ul",{className:"text-sm text-blue-700 space-y-1",children:d.success?c.jsxs(c.Fragment,{children:[c.jsx("li",{children:" Import the downloaded file"}),c.jsx("li",{children:" Your shifts will appear in your calendar"})]}):c.jsxs(c.Fragment,{children:[c.jsx("li",{children:" Check your authentication code"}),c.jsxs("li",{children:[" Ensure you have shifts in ",N()]}),c.jsx("li",{children:" Try again or contact support"})]})})]})]}),c.jsx("div",{className:"h-8"})]}),c.jsx("div",{className:"border-t border-gray-200 bg-gray-50 p-6 flex-shrink-0",children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:_,disabled:l,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsxs("button",{onClick:w,disabled:l||i.length<4||m!=="auth",className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:[c.jsx(Ys,{className:"w-4 h-4"}),c.jsx("span",{children:"Export To Calendar"})]})]})})]})});return xn.createPortal(C,document.body)};function ZA(n){if(typeof n!="number"||isNaN(n))return{formatted:"Rs 0.00"};let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"MUR",currencyDisplay:"symbol",minimumFractionDigits:2,maximumFractionDigits:2}).format(n);return t=t.replace(/MUR|/,"Rs"),t=t.replace(/Rs(\d)/,"Rs $1"),{formatted:t}}const Ec=({onLongPress:n,onPress:e,onDoublePress:t,delay:r=1e3})=>{const i=H.useRef(null),s=H.useRef(!1),o=H.useRef(!1),a=H.useRef(!1),l=H.useRef(0),u=H.useRef(null),d=H.useCallback(()=>{s.current=!1,i.current=setTimeout(()=>{s.current=!0,console.log(" Long press triggered!"),n()},r)},[n,r]),p=H.useCallback(()=>{i.current&&(clearTimeout(i.current),i.current=null),o.current=!1,a.current=!1},[]),m=H.useCallback(()=>{!s.current&&e&&(console.log(" Short press triggered!"),e()),s.current=!1,o.current=!1,a.current=!1},[e]),f=H.useCallback(()=>{l.current++,l.current===1?u.current=setTimeout(()=>{l.current=0},300):l.current===2&&(u.current&&(clearTimeout(u.current),u.current=null),l.current=0,console.log(" Double click triggered!"),t&&t())},[t]),x=H.useCallback(A=>{A.preventDefault(),!a.current&&(console.log(" Mouse down - starting long press timer"),o.current=!0,d())},[d]),y=H.useCallback(()=>{o.current&&(console.log(" Mouse up"),p(),m())},[p,m]),_=H.useCallback(()=>{o.current&&(console.log(" Mouse leave - canceling"),p())},[p]),w=H.useCallback(A=>{A.preventDefault(),A.stopPropagation(),!o.current&&(console.log(" Touch start - starting long press timer"),a.current=!0,d())},[d]),b=H.useCallback(()=>{a.current&&(console.log(" Touch end"),p(),m())},[p,m]),N=H.useCallback(()=>{a.current&&(console.log(" Touch cancel"),p())},[p]),C=H.useCallback(A=>{A.preventDefault(),A.stopPropagation(),s.current||f()},[f]);return{onMouseDown:x,onMouseUp:y,onMouseLeave:_,onTouchStart:w,onTouchEnd:b,onTouchCancel:N,onClick:C}},eC=(n,e,t)=>{const i={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[e];return!!(!i||i==="9-4"&&t.includes("12-10")||i==="12-10"&&t.includes("9-4")||i==="12-10"&&t.includes("4-10")||i==="4-10"&&t.includes("12-10")||t.includes(i))},tC=(n,e)=>{const r=new Date(n).getDay();return r===6&&e==="Morning Shift (9-4)"||r>=1&&r<=5&&e==="Morning Shift (9-4)"},nC=(n,e,t,r)=>{const{calendarLabel:i,schedule:s,setSchedule:o}=r;console.log(" rosterCalendarSync.ts: Processing removal for:",{date:n,shiftType:e,assignedName:t,calendarLabel:i});const a=t.replace(/\(R\)$/,"").trim().toUpperCase(),l=i.replace(/\(R\)$/,"").trim().toUpperCase();if(console.log(" rosterCalendarSync.ts: Removal name matching check (handles R variants):",{assignedName:t,calendarLabel:i,assignedBaseName:a,calendarBaseName:l,namesMatch:a===l,note:"Both NARAYYA and NARAYYA(R) should match NARAYYA calendar"}),a!==l)return console.log(` rosterCalendarSync.ts: Base names don't match for removal - skipping sync. Assigned base: "${a}", Calendar base: "${l}"`),!1;console.log(` rosterCalendarSync.ts: Base names match for removal - proceeding with sync (${t} matches ${i})`);const d={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[e];if(!d)return console.log(` rosterCalendarSync.ts: Cannot map shift type for removal: ${e}`),!1;const p=s[n]||[];if(console.log(` rosterCalendarSync.ts: Current shifts for ${n}:`,p),!p.includes(d))return console.log(` rosterCalendarSync.ts: Shift ${d} not found in calendar for ${n}`),!1;console.log(` rosterCalendarSync.ts: Removing shift ${d} from calendar on ${n}`),o(f=>{const x={...f},y=p.filter(_=>_!==d);return y.length===0?(delete x[n],console.log(` rosterCalendarSync.ts: No shifts left for ${n}, removing date entry completely`)):(x[n]=y,console.log(` rosterCalendarSync.ts: Updated ${n} with remaining shifts:`,y)),console.log(` rosterCalendarSync.ts: Schedule update completed for ${n}`),x}),console.log(" rosterCalendarSync.ts: Creating removal notification...");const m=document.createElement("div");return m.style.cssText=`
    position: fixed;
    top: 80px;
    right: 20px;
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    padding: 16px 20px;
    border-radius: 12px;
    box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
    z-index: 999999;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: 14px;
    font-weight: 500;
    max-width: 320px;
    animation: slideInRight 0.3s ease-out;
    border: 2px solid rgba(255, 255, 255, 0.2);
  `,m.innerHTML=`
    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
      <div style="width: 8px; height: 8px; background: white; border-radius: 50%; opacity: 0.9;"></div>
      <strong style="font-size: 15px;">Calendar Updated</strong>
    </div>
    <div style="font-size: 13px; line-height: 1.4; opacity: 0.95;">
      <strong>${t}</strong> removed from <strong>${i}</strong>'s calendar<br>
       <strong>${n}</strong> - ${e}
    </div>
  `,document.body.appendChild(m),console.log(" rosterCalendarSync.ts: Removal notification created and added to DOM"),setTimeout(()=>{document.body.contains(m)&&(m.style.animation="slideInRight 0.3s ease-out reverse",setTimeout(()=>{document.body.contains(m)&&(document.body.removeChild(m),console.log(" rosterCalendarSync.ts: Removal notification removed from DOM"))},300))},4e3),console.log(` ROSTER SYNC: Calendar updated successfully for ${n}`),!0},rC=()=>{if(!document.querySelector("#roster-sync-styles")){const n=document.createElement("style");n.id="roster-sync-styles",n.textContent=`
      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    `,document.head.appendChild(n)}};rC();const dS=(n,e)=>{const{calendarLabel:t,schedule:r,specialDates:i,setSchedule:s,setSpecialDates:o}=e,{date:a,shiftType:l,assignedName:u,editorName:d,action:p}=n,m=window.batchImportMode===!0;console.log(" ROSTER SYNC: Sync triggered with data:",{date:a,shiftType:l,assignedName:u,editorName:d,action:p,calendarLabel:t,isBatchImport:m,currentScheduleKeys:Object.keys(r).length,currentSpecialDates:Object.keys(i).length,currentScheduleForDate:r[a]||[]});const f=u.replace(/\(R\)$/,"").trim().toUpperCase(),x=t.replace(/\(R\)$/,"").trim().toUpperCase();if(console.log(" ROSTER SYNC: Name matching check (handles R variants):",{assignedName:u,calendarLabel:t,assignedBaseName:f,calendarBaseName:x,namesMatch:f===x,note:"Both NARAYYA and NARAYYA(R) should match NARAYYA calendar"}),f!==x)return console.log(` ROSTER SYNC: Base names don't match - skipping sync. Assigned base: "${f}", Calendar base: "${x}"`),!1;if(console.log(` ROSTER SYNC: Base names match - proceeding with sync (${u} matches ${t})`),m&&(window.batchImportStats||(window.batchImportStats={count:0,staffName:t,dates:new Set}),window.batchImportStats.count++,window.batchImportStats.dates.add(a)),p==="removed")return console.log(" ROSTER SYNC: Processing removal action"),nC(a,l,u,{calendarLabel:t,schedule:r,setSchedule:s});const y=e.entries||[],_=iC(a,y);console.log(" ROSTER SYNC: Checking if roster date is special:",{date:a,isRosterSpecialDate:_,currentCalendarSpecial:i[a]});const w=tC(a,l),b=i[a]===!0;console.log(" ROSTER SYNC: Special date analysis:",{date:a,shiftType:l,needsSpecial:w,currentIsSpecial:b,isRosterSpecialDate:_,dayOfWeek:new Date(a).getDay()});const C={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[l];if(!C)return console.log(` ROSTER SYNC: Cannot map shift type: ${l}`),!1;console.log(` ROSTER SYNC: Mapped shift "${l}" to calendar ID "${C}"`);const A=r[a]||[];if(console.log(` ROSTER SYNC: Current shifts for ${a}:`,A),eC(a,l,A))return console.log(` ROSTER SYNC: Shift conflict detected for ${C} on ${a} with existing shifts:`,A),!1;let P=!1;if((w||_)&&!b&&(console.log(` ROSTER SYNC: Marking ${a} as special date`),o(E=>({...E,[a]:!0})),P=!0),A.includes(C)?console.log(` ROSTER SYNC: Shift ${C} already exists in calendar on ${a}`):(console.log(` ROSTER SYNC: Adding shift ${C} to calendar on ${a}`),s(E=>({...E,[a]:[...A,C]})),P=!0),console.log(` ROSTER SYNC: Calendar updated: ${P}, Final schedule keys: ${Object.keys(r).length}`),P&&!m){const E=document.createElement("div");E.style.cssText=`
        position: fixed;
        top: 80px;
        right: 20px;
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        padding: 16px 20px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        z-index: 999999;
        font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        font-size: 14px;
        font-weight: 500;
        max-width: 320px;
        animation: slideInRight 0.3s ease-out;
        border: 2px solid rgba(255, 255, 255, 0.2);
      `,E.innerHTML=`
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
          <div style="width: 8px; height: 8px; background: white; border-radius: 50%; opacity: 0.9;"></div>
          <strong style="font-size: 15px;">Calendar Updated</strong>
        </div>
        <div style="font-size: 13px; line-height: 1.4; opacity: 0.95;">
          <strong>${u}</strong> added to <strong>${t}</strong>'s calendar<br>
           <strong>${a}</strong> - ${l}
          ${w||_?"<br> Date marked as special":""}
        </div>
      `,document.body.appendChild(E),setTimeout(()=>{document.body.contains(E)&&(E.style.animation="slideInRight 0.3s ease-out reverse",setTimeout(()=>{document.body.contains(E)&&document.body.removeChild(E)},300))},3e3)}return P},iC=(n,e)=>{console.log(` Checking if ${n} is special in roster entries...`);const t=e.filter(r=>r.date===n);console.log(` Found ${t.length} entries for ${n}`);for(const r of t)if(console.log(` Checking entry: ${r.assigned_name} - ${r.shift_type}`),console.log(` Change description: "${r.change_description}"`),r.change_description&&r.change_description.includes("Special Date:")){const i=r.change_description.match(/Special Date:\s*([^;]+)/);if(i&&i[1].trim())return console.log(` Found special date info: "${i[1].trim()}"`),!0}return console.log(` No special date info found for ${n}`),!1},sC=({currentDate:n,schedule:e,specialDates:t,onDateClick:r,onNavigateMonth:i,totalAmount:s,monthToDateAmount:o,onDateChange:a,scheduleTitle:l,onTitleUpdate:u,setSchedule:d,setSpecialDates:p,monthlySalary:m=0,onMonthlySalaryChange:f,globalSalary:x=0})=>{const[y,_]=H.useState(!1),[w,b]=H.useState(!1),[N,C]=H.useState(l),[A,P]=H.useState(!1),[E,j]=H.useState(!1),[D,U]=H.useState(!1),[L,F]=H.useState(!1),[T,O]=H.useState(null),[J,X]=H.useState(null),[se,q]=H.useState(!1),[ee,ie]=H.useState(!1),[re,M]=H.useState(""),[Y,G]=H.useState(""),[Z,te]=H.useState(!1),[ue,me]=H.useState(null),[ge,De]=H.useState(""),Pe=H.useRef(null),$e=H.useRef(new Set),Oe=new Date,He=n.getMonth(),ye=n.getFullYear(),Q=new Date(ye,He,1),lt=new Date(ye,He+1,0),Ye=Q.getDay(),Me=lt.getDate(),Ue=ye===Oe.getFullYear(),ce=m===0&&Ue,be=["January","February","March","April","May","June","July","August","September","October","November","December"],ke=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];H.useEffect(()=>{const fe=setInterval(()=>{console.log(" Auto-refresh check for month-to-date value")},6e4);return()=>clearInterval(fe)},[]),H.useEffect(()=>((y||ee)&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[y,ee]),H.useEffect(()=>{if(Pe.current){$e.current.clear();const fe=Array.from(Pe.current.querySelectorAll(".day-box")).filter(ot=>ot.getAttribute("data-day")!==null).sort((ot,vt)=>{const wt=parseInt(ot.getAttribute("data-day")||"0"),jt=parseInt(vt.getAttribute("data-day")||"0");return wt-jt});pr.set(fe,{opacity:0,x:30,scale:.95,force3D:!0,transformOrigin:"center center"});const et=Pe.current.querySelectorAll(".shift-text");pr.set(et,{opacity:0,x:10,scale:.9,force3D:!0});const Nt=Pe.current.querySelectorAll(".special-text");pr.set(Nt,{opacity:0,scale:.9,x:15,force3D:!0});const ht=pr.timeline({defaults:{ease:"power2.out",force3D:!0}});fe.forEach((ot,vt)=>{const wt=parseInt(ot.getAttribute("data-day")||"0"),jt=ot.querySelectorAll(".shift-text"),en=ot.querySelectorAll(".special-text");$e.current.add(ot);const ir=(wt-1)*.04;ht.to(ot,{opacity:1,x:0,scale:1,duration:.6,delay:ir,ease:"back.out(1.2)"},0),jt.length>0&&(jt.forEach(ni=>$e.current.add(ni)),ht.to(jt,{opacity:1,x:0,scale:1,duration:.4,stagger:.06,ease:"power2.out"},ir+.1)),en.length>0&&(en.forEach(ni=>$e.current.add(ni)),ht.to(en,{opacity:1,x:0,scale:1,duration:.4,ease:"elastic.out(1, 0.5)"},ir+.15))}),fe.forEach(ot=>{const vt=ot;vt.addEventListener("mouseenter",()=>{$e.current.has(vt)&&pr.to(vt,{scale:1.02,duration:.2,ease:"power2.out"})}),vt.addEventListener("mouseleave",()=>{$e.current.has(vt)&&pr.to(vt,{scale:1,duration:.2,ease:"power2.out"})}),vt.addEventListener("click",()=>{$e.current.has(vt)&&pr.to(vt,{scale:.98,duration:.1,ease:"power2.out",yoyo:!0,repeat:1})})})}},[n,e,t]),H.useEffect(()=>{const fe=et=>{et.key==="Escape"&&(_(!1),ie(!1))};if(y||ee)return document.addEventListener("keydown",fe),()=>document.removeEventListener("keydown",fe)},[y,ee]);const we=fe=>{fe.preventDefault(),fe.stopPropagation(),fe.target===fe.currentTarget&&_(!1)},_e=fe=>`${ye}-${(He+1).toString().padStart(2,"0")}-${fe.toString().padStart(2,"0")}`,Ie=fe=>{const et=new Date;return et.getDate()===fe&&et.getMonth()===He&&et.getFullYear()===ye},Ae=fe=>{const et=new Date,Nt=new Date(ye,He,fe),ht=new Date(et.getFullYear(),et.getMonth(),et.getDate());return Nt<ht},Je=fe=>new Date(ye,He,fe).getDay(),Xe=fe=>Je(fe)===0,We=fe=>{const et=_e(fe);return t[et]===!0},Le=fe=>{const et=_e(fe),Nt=e[et]||[];(fe===1||fe===2||fe===21)&&(console.log(` CALENDAR DEBUG: Day ${fe} (${et}) has shifts:`,Nt),console.log(` CALENDAR DEBUG: Current month/year: ${He+1}/${ye}`),console.log(" CALENDAR DEBUG: Schedule keys:",Object.keys(e)));const ht=["9-4","4-10","12-10","N"];return Nt.sort((ot,vt)=>{const wt=ht.indexOf(ot),jt=ht.indexOf(vt);return(wt===-1?999:wt)-(jt===-1?999:jt)})},kt=fe=>Mb.find(et=>et.id===fe),pt=fe=>Ie(fe)?"text-green-700 font-bold":Xe(fe)||We(fe)?"text-red-600 font-bold":"text-gray-900",wn=fe=>ZA(fe).formatted,_t=()=>{let fe=0,et=0;return Object.entries(e).forEach(([Nt,ht])=>{const ot=new Date(Nt);ot.getMonth()===He&&ot.getFullYear()===ye&&(fe+=ht.length)}),{month:He,year:ye,totalShifts:fe,totalAmount:et}},Lt=()=>{const fe=Object.entries(e).some(([Nt,ht])=>{const ot=new Date(Nt);return ot.getMonth()===He&&ot.getFullYear()===ye&&ht.length>0&&ht.some(vt=>vt.trim()!=="")}),et=Object.entries(t).some(([Nt,ht])=>{const ot=new Date(Nt);return ot.getMonth()===He&&ot.getFullYear()===ye&&ht===!0});return fe||et},rr=Ec({onLongPress:()=>{q(!0),Lt()&&U(!0),setTimeout(()=>q(!1),500)},onPress:()=>{se||setTimeout(()=>{se||(_(!0),De(m>0?m.toString():ce?x.toString():"0"))},50)},delay:500}),ze=fe=>{fe.type==="click"&&!se&&setTimeout(()=>{!se&&!y&&_(!0)},100)},At=(fe,et)=>{a(new Date(fe,et,1)),_(!1)},he=()=>{b(!0),C(l)},Fe=()=>{u(N.trim()||"Work Schedule"),b(!1)},Ge=()=>{C(l),b(!1)},rt=fe=>{fe.key==="Enter"?Fe():fe.key==="Escape"&&Ge()},Ke=fe=>{r(fe)},dt=(fe,et)=>{et.preventDefault();const Nt=_e(fe),ht=e[Nt]&&e[Nt].length>0,ot=t[Nt]===!0;if(!(ht||ot))return;const wt=setTimeout(()=>{O(Nt),P(!0),X(null)},800);X(wt)},It=()=>{J&&(clearTimeout(J),X(null))},Fn=async fe=>new Promise((et,Nt)=>{try{d(ht=>{const ot={...ht};return delete ot[fe],ot}),p(ht=>{const ot={...ht};return delete ot[fe],ot}),console.log(` Successfully cleared date ${fe}`),et()}catch(ht){console.error(` Error clearing date ${fe}:`,ht),Nt(ht)}}),ti=async(fe,et)=>new Promise((Nt,ht)=>{try{const ot=new Date(fe,et+1,0).getDate(),vt=[];for(let wt=1;wt<=ot;wt++){const jt=`${fe}-${(et+1).toString().padStart(2,"0")}-${wt.toString().padStart(2,"0")}`;vt.push(jt)}d(wt=>{const jt={...wt};return vt.forEach(en=>{delete jt[en]}),jt}),p(wt=>{const jt={...wt};return vt.forEach(en=>{delete jt[en]}),jt}),console.log(` Successfully cleared month ${et+1}/${fe}`),Nt()}catch(ot){console.error(` Error clearing month ${et+1}/${fe}:`,ot),ht(ot)}}),bi=async()=>{if(!re||re.length<4){G("Please enter your authentication code");return}const fe=mi(re);if(!fe){G("Invalid authentication code");return}te(!0),G("");try{console.log(` Importing roster entries for ${fe}...`);const et=await aS(),Nt=fe.replace(/\(R\)$/,"").trim().toUpperCase(),ht=et.filter(jt=>jt.assigned_name.replace(/\(R\)$/,"").trim().toUpperCase()===Nt);console.log(` Found ${ht.length} roster entries for ${fe}`);let ot=0,vt=0,wt=0;for(const jt of ht)try{const en={date:jt.date,shiftType:jt.shift_type,assignedName:jt.assigned_name,editorName:fe,action:"added"};dS(en,{calendarLabel:fe,schedule:e,specialDates:t,setSchedule:d,setSpecialDates:p})?(ot++,console.log(` Added ${jt.shift_type} on ${jt.date}`)):(vt++,console.log(` Skipped ${jt.shift_type} on ${jt.date} (conflict or already exists)`))}catch(en){wt++,console.error(` Error processing entry for ${jt.date}:`,en)}me({added:ot,skipped:vt,errors:wt}),ot>0&&console.log(` Import completed: ${ot} added, ${vt} skipped, ${wt} errors`)}catch(et){console.error(" Import failed:",et),G("Failed to import roster data. Please try again.")}finally{te(!1)}},st=()=>{ie(!1),M(""),G(""),me(null)};H.useEffect(()=>{console.log(" CALENDAR DEBUG: Current calendar state:",{currentMonth:He+1,currentYear:ye,scheduleKeys:Object.keys(e),scheduleEntries:Object.entries(e).slice(0,5),specialDatesKeys:Object.keys(t),totalScheduleEntries:Object.keys(e).length,totalSpecialDates:Object.keys(t).length,sampleScheduleData:Object.entries(e).slice(0,3).map(([fe,et])=>({date:fe,shifts:et,dayOfWeek:new Date(fe).getDay()}))})},[e,t,He,ye]);const Tr=fe=>{i(fe)},Dr=Oe.getMonth()===He&&Oe.getFullYear()===ye,bn=[];for(let fe=0;fe<Ye;fe++)bn.push(null);for(let fe=1;fe<=Me;fe++)bn.push(fe);const Sn=bn.length,fn=Math.ceil(Sn/7),no=(()=>{const fe=[];for(let et=0;et<fn;et++){let Nt=0;for(let ir=0;ir<7;ir++){const ni=et*7+ir;if(ni<bn.length){const os=bn[ni];if(os){const Va=Le(os),Pc=We(os);let ro=Va.length;Pc&&(ro+=1),ro=Math.min(ro,4),Nt=Math.max(Nt,ro)}}}const ht=window.innerWidth>=640?60:50,ot=window.innerWidth>=640?16:12,vt=window.innerWidth>=640?16:12,wt=ht+Nt*ot+vt,jt=window.innerWidth>=640?70:55,en=Math.max(wt,jt);fe.push(`${en}px`)}return fe})();return c.jsxs("div",{className:"bg-white overflow-hidden select-none",style:{userSelect:"none",WebkitUserSelect:"none",width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)"},children:[c.jsxs("div",{className:"border-b border-gray-200",style:{padding:window.innerWidth>=640?"24px":"16px",paddingTop:window.innerWidth>=640?"24px":"16px"},children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[c.jsx(Cr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-indigo-600"}),w?c.jsx("div",{className:"flex items-center space-x-2",children:c.jsx("input",{type:"text",value:N,onChange:fe=>C(fe.target.value),onKeyDown:rt,onBlur:Fe,className:"text-xl sm:text-3xl font-bold text-gray-900 text-center bg-transparent border-b-2 border-indigo-500 focus:outline-none min-w-[250px] sm:min-w-[300px]",autoFocus:!0})}):c.jsxs("button",{onClick:he,className:"flex items-center space-x-2 text-xl sm:text-3xl font-bold text-gray-900 text-center hover:text-indigo-600 transition-colors duration-200 group select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("span",{className:"select-none",children:l}),c.jsx(qN,{className:"w-4 h-4 sm:w-5 sm:h-5 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]})]}),c.jsxs("div",{className:"flex items-center justify-center space-x-3 sm:space-x-4",children:[c.jsx("button",{onClick:()=>Tr("prev"),className:"w-10 h-10 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-600 transition-colors duration-200 active:scale-95 select-none",style:{userSelect:"none",WebkitUserSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",padding:"0",margin:"0",border:"none",outline:"none"},children:c.jsx(Pw,{className:"w-5 h-5",style:{display:"block",margin:"0 auto"}})}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{...rr,onClick:ze,className:"text-lg sm:text-xl font-bold text-gray-700 text-center px-3 sm:px-4 py-2 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:c.jsxs("span",{className:"select-none",children:[be[He]," ",ye]})})}),c.jsx("button",{onClick:()=>Tr("next"),className:"w-10 h-10 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-600 transition-colors duration-200 active:scale-95 select-none",style:{userSelect:"none",WebkitUserSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",padding:"0",margin:"0",border:"none",outline:"none"},children:c.jsx(Lw,{className:"w-5 h-5",style:{display:"block",margin:"0 auto"}})})]})]}),y&&xn.createPortal(c.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:window.innerWidth>window.innerHeight?"flex-start":"center",justifyContent:"center",zIndex:99999,padding:window.innerWidth>window.innerHeight?"8px":"16px",paddingTop:window.innerWidth>window.innerHeight?"4px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none"},onClick:we,onTouchStart:fe=>{fe.stopPropagation()},onTouchEnd:fe=>{fe.preventDefault(),fe.stopPropagation()},children:c.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",maxWidth:window.innerWidth>window.innerHeight?"90vw":"400px",width:"100%",maxHeight:window.innerWidth>window.innerHeight?"95vh":"90vh",display:"flex",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",margin:window.innerWidth>window.innerHeight?"4px 0":"16px 0"},onClick:fe=>{fe.stopPropagation(),fe.preventDefault()},onTouchStart:fe=>{fe.stopPropagation()},onTouchEnd:fe=>{fe.stopPropagation()},children:[c.jsxs("div",{style:{position:"relative",padding:window.innerWidth>window.innerHeight?"12px":"24px",paddingBottom:window.innerWidth>window.innerHeight?"8px":"16px",borderBottom:"1px solid #e5e7eb",flexShrink:0},children:[c.jsx("button",{onClick:fe=>{fe.preventDefault(),fe.stopPropagation(),_(!1)},onTouchEnd:fe=>{fe.preventDefault(),fe.stopPropagation(),_(!1)},style:{position:"absolute",top:"16px",right:"16px",padding:"8px",borderRadius:"8px",backgroundColor:"transparent",border:"none",color:"#6b7280",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:c.jsx(Er,{style:{width:"20px",height:"20px"}})}),c.jsx("button",{onClick:()=>F(!0),className:"p-2 rounded-lg hover:bg-green-100 text-green-600 hover:text-green-700 transition-colors duration-200",title:"Export shifts to external calendar",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:c.jsx(Ys,{className:"w-5 h-5"})}),c.jsx("div",{style:{textAlign:"center"},children:c.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#111827",marginBottom:"4px",margin:0},children:"Select Month & Year"})})]}),c.jsxs("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"24px"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px",textAlign:"center"},children:"Year"}),c.jsx("select",{value:ye,onChange:fe=>At(Number(fe.target.value),He),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"8px",textAlign:"center",fontSize:"14px",touchAction:"manipulation"},children:Array.from({length:10},(fe,et)=>ye-5+et).map(fe=>c.jsx("option",{value:fe,children:fe},fe))})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px",textAlign:"center"},children:"Month"}),c.jsx("select",{value:He,onChange:fe=>At(ye,Number(fe.target.value)),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"8px",textAlign:"center",fontSize:"14px",touchAction:"manipulation"},children:be.map((fe,et)=>c.jsx("option",{value:et,children:fe},et))})]})]}),c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px",textAlign:"center"},children:["Salary for ",be[He]," ",ye]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("input",{type:"text",inputMode:"numeric",value:ge,onChange:fe=>{const et=fe.target.value.replace(/[^\d]/g,"");De(et)},onBlur:()=>{if(f&&ge){const fe=parseInt(ge,10)||0;f(ye,He,fe)}},style:{width:"100%",padding:"12px 16px",paddingRight:ce?"40px":"16px",border:ce?"2px solid #10b981":"2px solid #d1d5db",borderRadius:"8px",textAlign:"center",fontSize:"16px",fontFamily:"monospace",touchAction:"manipulation",backgroundColor:ce?"#f0fdf4":"white",color:ce?"#059669":"#111827"}}),ce&&c.jsx("div",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:"#10b981",fontSize:"18px"},children:""})]}),c.jsx("p",{style:{fontSize:"12px",color:ce?"#059669":"#6b7280",marginTop:"8px",textAlign:"center",fontWeight:ce?"600":"400"},children:ce?" Using global salary from Settings. Edit to set custom salary for this month.":m===0?"No salary set for this month. Enter a value to set custom salary.":"Custom salary for this month. Won't change when you update global salary."})]})]}),c.jsx("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",paddingTop:0,flexShrink:0},children:c.jsx("button",{onClick:fe=>{fe.preventDefault(),fe.stopPropagation(),_(!1)},onTouchEnd:fe=>{fe.preventDefault(),fe.stopPropagation(),_(!1)},style:{width:"100%",padding:"12px",backgroundColor:"#4f46e5",color:"white",fontWeight:"600",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"16px",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:"Close"})})]})}),document.body),c.jsxs("div",{className:"p-3 sm:p-6",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 sm:gap-2 mb-3 sm:mb-4",children:ke.map((fe,et)=>c.jsx("div",{className:`p-2 sm:p-3 text-center font-semibold text-xs sm:text-sm select-none ${et===0?"text-red-600":"text-gray-600"}`,style:{userSelect:"none",WebkitUserSelect:"none"},children:fe},fe))}),c.jsx("div",{className:"mb-4 sm:mb-6 select-none w-full mx-auto",ref:Pe,style:{userSelect:"none",WebkitUserSelect:"none",display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:window.innerWidth>=640?"8px":"4px",justifyContent:"center",alignContent:"start",maxWidth:"100%",margin:"0 auto"},children:bn.map((fe,et)=>{const Nt=Math.floor(et/7),ht=fe?Le(fe):[],ot=fe?We(fe):!1,vt=fe?Ie(fe):!1;return fe&&Ae(fe),c.jsx("div",{"data-day":fe,className:`day-box p-1 sm:p-2 rounded-lg border-2 transition-colors duration-200 overflow-hidden relative select-none ${fe?vt?"cursor-pointer border-indigo-400 shadow-lg bg-yellow-100 hover:bg-yellow-200 active:bg-yellow-200":"cursor-pointer hover:border-indigo-400 hover:shadow-lg bg-yellow-50 border-yellow-200 hover:bg-yellow-100 active:bg-yellow-200":"border-transparent"}`,style:{height:no[Nt],userSelect:"none",WebkitUserSelect:"none",display:"flex",flexDirection:"column"},onClick:()=>fe&&Ke(fe),onMouseDown:wt=>fe&&dt(fe,wt),onMouseUp:It,onMouseLeave:It,onTouchStart:wt=>fe&&dt(fe,wt),onTouchEnd:It,children:fe&&c.jsxs("div",{className:"flex flex-col select-none h-full",children:[Ae(fe)&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:c.jsx("div",{className:"text-gray-300 text-4xl sm:text-5xl font-bold opacity-30 select-none",children:""})}),c.jsx("div",{className:`flex-shrink-0 mb-1.5 sm:mb-2 relative ${Ae(fe)?"z-30":""}`,children:c.jsxs("div",{className:`text-sm sm:text-base text-center font-semibold ${pt(fe)} relative select-none`,children:[vt&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-6 h-6 sm:w-7 sm:h-7 border-2 border-green-500 rounded-full animate-pulse",style:{boxShadow:"0 0 0 1px rgba(34, 197, 94, 0.2), 0 0 10px rgba(34, 197, 94, 0.3)",animation:"todayPulse 2s ease-in-out infinite"}})}),c.jsx("span",{className:"relative z-10 select-none",children:fe}),ht.length>0&&ht.some(wt=>wt.trim()!=="")&&c.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})}),c.jsxs("div",{className:`flex flex-col items-center justify-start space-y-0.5 sm:space-y-1 px-0.5 select-none min-w-0 flex-1 ${Ae(fe)?"z-30":""}`,children:[ot&&c.jsx("div",{className:"special-text text-[8px] sm:text-[9px] text-red-500 font-bold leading-none mt-0.5 flex justify-center select-none",children:c.jsx("div",{className:"text-center select-none",children:"SPECIAL"})}),ht.map((wt,jt)=>{const en=kt(wt);return en?c.jsx("div",{className:`shift-text text-[8px] sm:text-[11px] font-bold leading-tight text-black flex-shrink-0 w-full select-none whitespace-nowrap overflow-hidden ${Ae(fe)?"opacity-60":""}`,children:c.jsx("div",{className:"text-center select-none truncate px-0.5",children:en.time})},`${wt}-${jt}`):null})]})]})},et)})}),c.jsxs("div",{className:"space-y-3 sm:space-y-4 select-none mt-4 sm:mt-6",style:{userSelect:"none",WebkitUserSelect:"none",paddingBottom:Dr?"30px":"20px",marginBottom:"10px"},children:[Dr&&c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4 mb-4",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ik,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),c.jsx("span",{className:"text-base sm:text-lg font-semibold text-green-800 select-none",children:"Month to Date"})]}),c.jsx("span",{className:"text-lg sm:text-2xl font-bold text-green-900 select-none",children:wn(o)})]}),c.jsxs("p",{className:"text-xs sm:text-sm text-green-600 mt-2 text-center select-none",children:["Amount earned from start of month to today (",Oe.getDate(),"/",He+1,"/",ye,")"]})]}),c.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 sm:p-4",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(NN,{className:"w-4 h-4 sm:w-5 sm:h-5 text-indigo-600"}),c.jsx("span",{className:"text-base sm:text-lg font-semibold text-indigo-800 select-none",children:"Monthly Total"})]}),c.jsx("span",{className:"text-lg sm:text-2xl font-bold text-indigo-900 select-none",children:wn(s)})]}),c.jsxs("p",{className:"text-xs sm:text-sm text-indigo-600 mt-2 text-center select-none",children:["Total amount for all scheduled shifts in ",be[He]," ",ye]})]})]})]}),c.jsx(N6,{isOpen:A,selectedDate:T,schedule:e,specialDates:t,onConfirm:Fn,onCancel:()=>{P(!1),O(null)}}),c.jsx(k6,{isOpen:E,selectedMonth:He,selectedYear:ye,onConfirm:ti,onCancel:()=>j(!1)}),c.jsx(j6,{isOpen:D,monthData:_t(),onConfirm:ti,onCancel:()=>U(!1)}),c.jsx(uS,{isOpen:L,onClose:()=>F(!1),currentMonth:n.getMonth(),currentYear:n.getFullYear()}),ee&&xn.createPortal(c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:window.innerWidth>window.innerHeight?"flex-start":"center",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"8px":"16px",paddingTop:window.innerWidth>window.innerHeight?"4px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},onClick:fe=>{fe.target===fe.currentTarget&&st()},children:c.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",maxWidth:window.innerWidth>window.innerHeight?"90vw":"400px",width:"100%",maxHeight:window.innerWidth>window.innerHeight?"95vh":"90vh",display:"flex",flexDirection:"column",margin:window.innerWidth>window.innerHeight?"4px 0":"16px 0"},onClick:fe=>fe.stopPropagation(),children:[c.jsxs("div",{style:{position:"relative",padding:window.innerWidth>window.innerHeight?"12px":"24px",paddingBottom:window.innerWidth>window.innerHeight?"8px":"16px",borderBottom:"1px solid #e5e7eb",flexShrink:0},children:[c.jsx("button",{onClick:st,disabled:Z,style:{position:"absolute",top:"16px",right:"16px",padding:"8px",borderRadius:"8px",backgroundColor:"transparent",border:"none",color:"#6b7280",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:c.jsx(Er,{style:{width:"20px",height:"20px"}})}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:"#dbeafe",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px auto"},children:c.jsx(Ys,{style:{width:"24px",height:"24px",color:"#2563eb"}})}),c.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#111827",marginBottom:"8px",margin:0},children:"Import Your Roster"}),c.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:0},children:"Import your assigned shifts from the roster database"})]})]}),c.jsx("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:ue?c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:"#dcfce7",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px auto"},children:c.jsx("svg",{style:{width:"24px",height:"24px",color:"#16a34a"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("h4",{style:{fontSize:"18px",fontWeight:"bold",color:"#111827",marginBottom:"16px",margin:"0 0 16px 0"},children:"Import Complete!"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#16a34a"},children:ue.added}),c.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Added"})]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f59e0b"},children:ue.skipped}),c.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Skipped"})]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#ef4444"},children:ue.errors}),c.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Errors"})]})]}),ue.added>0&&c.jsxs("p",{style:{fontSize:"14px",color:"#16a34a",marginBottom:"16px",margin:"0 0 16px 0"},children:[" ",ue.added," shifts added to your calendar!"]}),ue.skipped>0&&c.jsxs("p",{style:{fontSize:"12px",color:"#f59e0b",marginBottom:"16px",margin:"0 0 16px 0"},children:[" ",ue.skipped," shifts skipped (conflicts or already exist)"]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{marginBottom:"24px"},children:[c.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Your Authentication Code"}),c.jsx("input",{type:"text",value:re,onChange:fe=>M(fe.target.value.toUpperCase()),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",textAlign:"center",fontFamily:"monospace",fontSize:"18px",letterSpacing:"0.1em",textTransform:"uppercase",touchAction:"manipulation"},placeholder:"Enter your code",maxLength:4,autoComplete:"off",autoFocus:!0})]}),Y&&c.jsx("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px"},children:c.jsx("p",{style:{fontSize:"14px",color:"#dc2626",textAlign:"center",margin:0},children:Y})}),c.jsxs("div",{style:{padding:"16px",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"8px",marginBottom:"24px"},children:[c.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#0369a1",marginBottom:"8px",margin:"0 0 8px 0"},children:"How it works:"}),c.jsxs("ul",{style:{fontSize:"12px",color:"#0c4a6e",margin:0,paddingLeft:"16px"},children:[c.jsx("li",{children:"Enter your authentication code"}),c.jsx("li",{children:"System finds all your roster assignments"}),c.jsx("li",{children:"Adds them to your personal calendar"}),c.jsx("li",{children:"Skips dates that already have shifts"}),c.jsx("li",{children:"Marks special dates automatically"})]})]})]})}),c.jsx("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",paddingTop:0,flexShrink:0},children:ue?c.jsx("button",{onClick:st,style:{width:"100%",padding:"12px",backgroundColor:"#2563eb",color:"white",fontWeight:"600",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"16px",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:"Close"}):c.jsxs("div",{style:{display:"flex",gap:"12px"},children:[c.jsx("button",{onClick:st,disabled:Z,style:{flex:1,padding:"12px",backgroundColor:"#f3f4f6",color:"#374151",fontWeight:"600",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"16px",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",opacity:Z?.5:1},children:"Cancel"}),c.jsx("button",{onClick:bi,disabled:Z||re.length<4,style:{flex:1,padding:"12px",backgroundColor:Z||re.length<4?"#d1d5db":"#2563eb",color:"white",fontWeight:"600",borderRadius:"8px",border:"none",cursor:Z||re.length<4?"not-allowed":"pointer",fontSize:"16px",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:Z?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),c.jsx("span",{children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Ys,{style:{width:"16px",height:"16px"}}),c.jsx("span",{children:"Import"})]})})]})})]})}),document.body),c.jsx("style",{jsx:!0,children:`
        @keyframes todayPulse {
          0%, 100% {
            transform: scale(1);
            opacity: 1;
          }
          50% {
            transform: scale(1.1);
            opacity: 0.8;
          }
        }
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},oC=({selectedDate:n,schedule:e,specialDates:t,onToggleShift:r,onToggleSpecialDate:i,onClose:s})=>{const[o,a]=H.useState(!1),[l,u]=H.useState({});H.useEffect(()=>{n&&(a(t[n]===!0),u(e))},[n,t,e]),H.useEffect(()=>{u(e)},[e]);const d=E=>{if(!n)return;const j=l[n]||[];if(j.includes(E)){const D=j.filter(U=>U!==E);u(U=>({...U,[n]:D}))}else f(E,n)&&u(D=>({...D,[n]:[...j,E]}));r(E)},p=H.useCallback(()=>{if(n){const j=new Date(n).getDate();s(),setTimeout(()=>{const D=document.querySelector(`[data-day="${j}"]`);D?(console.log(` Scrolling back to date ${j}`),D.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),D.style.transition="all 0.3s ease",D.style.transform="scale(1.05)",D.style.boxShadow="0 0 20px rgba(99, 102, 241, 0.5)",setTimeout(()=>{D.style.transform="",D.style.boxShadow=""},600)):console.warn(` Could not find date element for day ${j}`)},100)}else s()},[n,s]);H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]);const m=E=>{E.target===E.currentTarget&&p()};if(H.useEffect(()=>{const E=j=>{j.key==="Escape"&&p()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[p]),!n)return null;const f=(E,j)=>{const D=l[j]||[];return!(E==="9-4"&&D.includes("12-10")||E==="12-10"&&D.includes("9-4")||E==="12-10"&&D.includes("4-10")||E==="4-10"&&D.includes("12-10"))},x=E=>new Date(E).getDay(),y=(E,j)=>{const D=x(E),U=[];return j?U.push("9-4","4-10","N"):D===6?U.push("12-10","N"):D===0?U.push("9-4","4-10","N"):U.push("4-10","N"),Mb.filter(L=>U.includes(L.id))},_=E=>{const j=new Date(E),D=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],L=D[j.getDay()],F=j.getDate().toString().padStart(2,"0"),T=U[j.getMonth()],O=j.getFullYear();return{dayName:L,dateString:`${F}-${T}-${O}`}},w=async()=>{const E=!o;a(E),i(n,E);const j=e[n]||[];E?j.includes("12-10")&&r("12-10"):x(n)!==0&&j.includes("9-4")&&r("9-4")},{dayName:b,dateString:N}=_(n),C=x(n),A=C===0,P=y(n,o);return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",onClick:m,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,WebkitOverflowScrolling:"touch",touchAction:"pan-y",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",marginTop:window.innerWidth>window.innerHeight?"2px":"2rem",marginBottom:window.innerWidth>window.innerHeight?"2px":"2rem",maxWidth:window.innerWidth>window.innerHeight?"95vw":"28rem",maxHeight:window.innerWidth>window.innerHeight?"98vh":"none",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden"},onClick:E=>{E.stopPropagation()},children:[c.jsxs("div",{className:"relative pb-4 border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[c.jsx("button",{onClick:p,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200 select-none z-10",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Er,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[c.jsx(Ew,{className:"w-4 h-4 text-green-600"}),c.jsx("span",{className:"text-sm text-green-600 font-medium select-none",children:"Changes saved automatically"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1 select-none",children:b}),c.jsx("p",{className:"text-lg text-gray-700 select-none",children:N})]})]}),c.jsxs("div",{className:"overflow-y-auto flex-1",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",maxHeight:window.innerWidth>window.innerHeight?"calc(98vh - 100px)":"70vh",padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[c.jsx("div",{className:"flex items-center justify-center space-x-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg mb-4",children:c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:o,onChange:w,className:"w-4 h-4 text-yellow-600 focus:ring-yellow-500 focus:ring-2 rounded"}),c.jsx("span",{className:"text-sm font-medium text-yellow-800 select-none",children:"Special Date"})]})}),A&&!o&&c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:c.jsxs("p",{className:"text-xs text-blue-800 text-center select-none",children:[c.jsx("strong",{children:"Sunday:"})," Available shifts for this day"]})}),o&&c.jsx("div",{className:"p-2 bg-yellow-100 border border-yellow-300 rounded-lg mb-4",children:c.jsxs("p",{className:"text-xs text-yellow-800 text-center select-none",children:[c.jsx("strong",{children:"Special Date:"})," ",A?"Sunday marked as special":"Available shifts for this special day"]})}),c.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg mb-4",children:c.jsxs("p",{className:"text-sm text-gray-700 text-center select-none",children:[c.jsx("strong",{children:o?"Special Date":C===0?"Sunday":C===6?"Saturday":"Weekday"}),"  ",P.length," shift",P.length!==1?"s":""," available"]})}),c.jsx("div",{className:"space-y-3 mb-6",children:P.map(E=>{const j=(l[n]||[]).includes(E.id),D=f(E.id,n),U=!j&&!D;return c.jsx("button",{onClick:()=>d(E.id),disabled:U,className:`w-full p-4 rounded-lg border-2 text-center transition-all duration-200 select-none ${j?`${E.color} border-current shadow-md transform scale-[1.02]`:U?"bg-gray-50 text-gray-400 border-gray-200 cursor-not-allowed opacity-50":"bg-white border-gray-300 hover:border-gray-400 hover:bg-gray-50 active:bg-gray-100"}`,style:{userSelect:"none",WebkitUserSelect:"none",touchAction:"manipulation"},children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"text-left flex-1",children:[c.jsx("div",{className:"font-semibold select-none",children:E.label}),c.jsx("div",{className:"text-sm opacity-75 select-none",children:E.time}),U&&c.jsx("div",{className:"text-xs mt-1 text-red-500 select-none",children:"Cannot combine with current shifts"})]}),j&&c.jsx("div",{className:"w-6 h-6 bg-current rounded-full flex items-center justify-center",children:c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})},E.id)})}),!o&&c.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:c.jsx("p",{className:"text-xs text-gray-600 text-center select-none",children:C===6?c.jsx(c.Fragment,{children:"Not showing: Sunday/Special (9-4) and Evening (4-10) - only available on Sundays or Special dates"}):C===0?c.jsx(c.Fragment,{children:"Not showing: Saturday Regular (12-10) - only available on Saturdays"}):c.jsx(c.Fragment,{children:"Not showing: Saturday Regular (12-10) and Sunday/Special (9-4) - only available on weekends or special dates"})})}),c.jsx("div",{className:"h-8"})]})]})})},aC=({settings:n,onUpdateBasicSalary:e,onUpdateShiftHours:t})=>{var N,C,A;const[r,i]=H.useState(""),[s,o]=H.useState({}),a=P=>`Rs ${P.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,l=P=>`Rs ${P.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,u=P=>P.toLocaleString("en-US"),d=P=>parseInt(P.replace(/,/g,""),10)||0,p=P=>{const j=P.target.value.replace(/[^\d,]/g,""),D=d(j),U=u(D);i(U),e(D)},m=()=>{i(u(n.basicSalary||0))},f=()=>{i("")},x=()=>r||`Rs ${u(n.basicSalary||0)}`,y=P=>P*((n==null?void 0:n.hourlyRate)||0),_=(P,E)=>{o(j=>({...j,[P]:E}))},w=P=>{const E=s[P]||"";let j=0;E!==""&&(j=parseFloat(E)||0,j<0&&(j=0)),t(P,j),o(D=>{const U={...D};return delete U[P],U})},b=P=>P.id in s?s[P.id]:P.hours===0?"":P.hours.toString();return n?!n.shiftCombinations||n.shiftCombinations.length===0?c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[c.jsx(Zm,{className:"w-6 h-6 text-amber-600"}),c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-amber-900 text-center",children:"Missing Shift Combinations"})]}),c.jsxs("div",{className:"text-center p-6 bg-amber-50 rounded-lg",children:[c.jsx("p",{className:"text-amber-700 mb-4",children:"Shift combinations are missing from settings. This will prevent amount calculations."}),c.jsxs("div",{className:"text-sm text-amber-600 space-y-1 mb-4",children:[c.jsx("p",{children:c.jsx("strong",{children:"Current Settings:"})}),c.jsxs("p",{children:["Basic Salary: Rs ",((N=n.basicSalary)==null?void 0:N.toLocaleString())||"Not set"]}),c.jsxs("p",{children:["Hourly Rate: Rs ",((C=n.hourlyRate)==null?void 0:C.toFixed(2))||"Not set"]}),c.jsxs("p",{children:["Shift Combinations: ",((A=n.shiftCombinations)==null?void 0:A.length)||0]})]}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"Reload Page"})]})]}):c.jsxs("div",{className:"bg-white",style:{width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",padding:window.innerWidth>=640?"24px":"16px",paddingTop:window.innerWidth>=640?"24px":"16px"},children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[c.jsx(Dw,{className:"w-6 h-6 text-indigo-600"}),c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 text-center",children:"Settings & Configuration"})]}),c.jsxs("div",{className:"mb-8 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-4 text-center",children:"Salary Configuration"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-center",children:"Basic Salary (Monthly)"}),c.jsx("div",{className:"relative max-w-xs mx-auto",children:c.jsx("input",{type:"text",value:x(),onChange:p,onFocus:m,onBlur:f,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center text-base font-medium",placeholder:"Rs 30,000"})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-center",children:"Hourly Rate (Auto-calculated)"}),c.jsx("div",{className:"relative max-w-xs mx-auto",children:c.jsx("input",{type:"text",value:l(n.hourlyRate||0),readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 text-center text-base font-medium"})}),c.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Formula: Basic Salary  12  52  40"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-4 text-center",children:"Work Hours Configuration"}),c.jsx("div",{className:"block sm:hidden space-y-3",children:n.shiftCombinations.map(P=>c.jsxs("div",{className:"p-4 rounded-lg border bg-white",children:[c.jsx("div",{className:"text-center mb-3",children:c.jsx("div",{className:"font-semibold text-gray-800 text-sm mb-1",children:P.combination})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1 text-center",children:"Hours"}),c.jsx("input",{type:"text",inputMode:"decimal",value:b(P),onChange:E=>_(P.id,E.target.value),onBlur:()=>w(P.id),className:"w-full px-2 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center text-sm",placeholder:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1 text-center",children:"Amount"}),c.jsx("span",{className:"px-2 py-2 bg-gray-100 rounded text-center text-sm font-mono text-gray-700 block",children:a(y(P.hours||0))})]})]})]},P.id))}),c.jsx("div",{className:"hidden sm:block overflow-x-auto",children:c.jsxs("table",{className:"w-full border-collapse border border-gray-300 rounded-lg",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-100",children:[c.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700",children:"Shift Combination"}),c.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700",children:"Hours"}),c.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700",children:"Amount (Rs)"})]})}),c.jsx("tbody",{children:n.shiftCombinations.map(P=>c.jsxs("tr",{className:"bg-white",children:[c.jsx("td",{className:"border border-gray-300 px-4 py-3 font-medium text-gray-800 text-center",children:P.combination}),c.jsx("td",{className:"border border-gray-300 px-4 py-3 text-center",children:c.jsx("input",{type:"text",inputMode:"decimal",value:b(P),onChange:E=>_(P.id,E.target.value),onBlur:()=>w(P.id),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center",placeholder:"0"})}),c.jsx("td",{className:"border border-gray-300 px-4 py-3 font-mono text-gray-700 text-center",children:a(y(P.hours||0))})]},P.id))})]})})]})]}):c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[c.jsx(Zm,{className:"w-6 h-6 text-red-600"}),c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-red-900 text-center",children:"Settings Loading Error"})]}),c.jsxs("div",{className:"text-center p-6 bg-red-50 rounded-lg",children:[c.jsx("p",{className:"text-red-700 mb-4",children:"Settings data is not available. This may be due to:"}),c.jsxs("ul",{className:"text-sm text-red-600 space-y-1",children:[c.jsx("li",{children:" Database initialization issues"}),c.jsx("li",{children:" Import process incomplete"}),c.jsx("li",{children:" Browser storage problems"})]}),c.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reload Page"})]})]})},lC=({onImportData:n,onExportData:e})=>{const[t,r]=H.useState(null);H.useEffect(()=>{(async()=>{})()},[]);const i=l=>{var d;const u=(d=l.target.files)==null?void 0:d[0];if(u){const p=new FileReader;p.onload=m=>{var f;try{const x=JSON.parse((f=m.target)==null?void 0:f.result);n(x)}catch{alert("Invalid file format. Please select a valid JSON file.")}},p.readAsText(u)}l.target.value=""},s=async()=>{try{const l=document.querySelector(".export-button");l&&(l.disabled=!0,l.textContent="Exporting..."),await e(),alert(" Data exported successfully! Check your downloads folder."),l&&(l.disabled=!1,l.textContent="Export Schedule")}catch(l){console.error("Export failed:",l),alert(" Export failed. Please try again.");const u=document.querySelector(".export-button");u&&(u.disabled=!1,u.textContent="Export Schedule")}},o=l=>{if(l===0)return"0 Bytes";const u=1024,d=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(l)/Math.log(u));return parseFloat((l/Math.pow(u,p)).toFixed(2))+" "+d[p]};return t?t.available===50*1024*1024?{isEstimate:!0,actualAvailable:"Several GB",note:"Actual storage is much larger - this is a browser limitation"}:{isEstimate:!1,actualAvailable:o(t.available),note:null}:null,c.jsxs("div",{className:"bg-white",style:{width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",padding:"24px",paddingTop:"24px"},children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-8",children:[c.jsx(eg,{className:"w-6 h-6 text-indigo-600"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center",children:"Data Management"})]}),c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[c.jsx(eg,{className:"w-5 h-5 text-gray-600"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 text-center",children:"Import & Export"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:c.jsx(Ys,{className:"w-6 h-6 text-green-600"})}),c.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Export Data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Download your schedule, settings, and configurations as a backup file"})]}),c.jsxs("button",{onClick:s,className:"export-button w-full flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Ys,{className:"w-4 h-4"}),c.jsx("span",{children:"Export Schedule"})]})]}),c.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:c.jsx(jf,{className:"w-6 h-6 text-blue-600"})}),c.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Import Data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Restore your schedule from a previously exported backup file"})]}),c.jsxs("label",{className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg cursor-pointer transition-colors duration-200 font-medium",children:[c.jsx(jf,{className:"w-4 h-4"}),c.jsx("span",{children:"Import Schedule"}),c.jsx("input",{type:"file",accept:".json",onChange:i,className:"hidden"})]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[c.jsx(ns,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h3",{className:"text-lg font-semibold text-indigo-800 text-center",children:"File Information"})]}),c.jsxs("div",{className:"space-y-3 text-sm text-indigo-700",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Export Format:"})," JSON (.json)"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"File Name:"})," Roster_dd-mm-yyyy.json"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Current Version:"})," 3.0 (IndexedDB powered)"]})]}),c.jsxs("div",{className:"border-t border-indigo-200 pt-3",children:[c.jsx("p",{className:"text-center font-medium mb-2",children:"Exported Data Includes:"}),c.jsxs("ul",{className:"space-y-1 text-center",children:[c.jsx("li",{children:" All scheduled shifts and dates"}),c.jsx("li",{children:" Special date markings"}),c.jsx("li",{children:" Salary and hourly rate settings"}),c.jsx("li",{children:" Work hours configuration"}),c.jsx("li",{children:" Custom schedule title"}),c.jsx("li",{children:" Export timestamp and version"})]})]}),c.jsxs("div",{className:"border-t border-indigo-200 pt-3",children:[c.jsx("p",{className:"text-center font-medium mb-2",children:"Import Compatibility:"}),c.jsxs("ul",{className:"space-y-1 text-center",children:[c.jsx("li",{children:" Version 3.0+: Full IndexedDB compatibility"}),c.jsx("li",{children:" Version 2.0+: Full compatibility with special dates"}),c.jsx("li",{children:" Version 1.0: Basic compatibility (special dates reset)"})]})]}),(()=>{const l=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,u=/iPad|iPhone|iPod/.test(navigator.userAgent);return l&&u?c.jsxs("div",{className:"border-t border-indigo-200 pt-3",children:[c.jsx("p",{className:"text-center font-medium mb-2 text-amber-700",children:" PWA Mode (Installed App):"}),c.jsxs("ul",{className:"space-y-1 text-center text-amber-600",children:[c.jsx("li",{children:" Data will be copied to clipboard"}),c.jsx("li",{children:" Use Notes app to save as file"}),c.jsx("li",{children:" Or use browser version for direct download"})]})]}):null})()]})]}),c.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:c.jsx("div",{className:"text-center",children:c.jsxs("p",{className:"text-sm text-amber-800",children:[c.jsx("strong",{children:" Important:"})," Importing data will replace your current schedule and settings. Make sure to export your current data first if you want to keep it as a backup."]})})})]})]})},cC=({activeTab:n,onTabChange:e})=>{Vg.useEffect(()=>{const f=document.createElement("style");return f.textContent=`
      @keyframes iconPulse {
        0%, 100% {
          transform: scale(1);
          opacity: 0.7;
        }
        50% {
          transform: scale(1.05);
          opacity: 1;
        }
      }
      
      @keyframes iconBounce {
        0%, 20%, 50%, 80%, 100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-2px);
        }
        60% {
          transform: translateY(-1px);
        }
      }
    `,document.head.appendChild(f),()=>{document.head.contains(f)&&document.head.removeChild(f)}},[]);const[t,r]=H.useState(null),[i,s]=H.useState(n);H.useEffect(()=>{s(n)},[n]);const o=f=>{if(f===i)return;const x=document.querySelector(`[data-tab-id="${f}"] .tab-icon`);x&&pr.to(x,{scale:1.2,duration:.15,ease:"power2.out",yoyo:!0,repeat:1,force3D:!0});const y=document.querySelector(".tab-background");y?pr.to(y,{scale:.95,opacity:.7,duration:.1,ease:"power2.out",force3D:!0,onComplete:()=>{s(f),pr.to(y,{scale:1,opacity:1,duration:.2,ease:"power2.out",force3D:!0})}}):s(f),e(f)},a=f=>{if(f===i)return;const x=document.querySelector(`[data-tab-id="${f}"] .tab-icon`);x&&pr.to(x,{scale:1.15,duration:.1,ease:"power2.out",force3D:!0,onComplete:()=>{pr.to(x,{scale:1,duration:.15,ease:"power2.out",force3D:!0})}}),s(f),e(f)},l=[{id:"calendar",icon:Cr,label:"Calendar"},{id:"settings",icon:Dw,label:"Settings"},{id:"data",icon:eg,label:"Data"},{id:"roster",icon:tg,label:"Roster"}],d=(f=>l.findIndex(x=>x.id===f))(n),p=d,m=p!==-1;return c.jsx("div",{className:"w-full",children:c.jsx("div",{className:"relative bg-white/90 backdrop-blur-md shadow-lg border-b border-gray-200/50 p-2",style:{width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",borderRadius:"0px"},children:c.jsxs("div",{className:"relative grid grid-cols-4 w-full max-w-6xl mx-auto",children:[m&&c.jsx("div",{className:"tab-background absolute inset-y-0 bg-blue-500/10 rounded-xl transition-all duration-300 ease-out",style:{width:"calc(25% - 8px)",left:`calc(${p*25}% + 4px)`,top:"0px",bottom:"0px"}}),d!==-1&&c.jsx("div",{className:"absolute top-1 h-0.5 bg-blue-500 rounded-full transition-all duration-300 ease-out",style:{width:"calc(25% - 48px)",left:`calc(${d*25}% + 24px)`}}),l.map((f,x)=>{const y=f.icon,_=f.id===n,w=t===f.id,b=_||w;return c.jsx("button",{"data-tab-id":f.id,onClick:()=>o(f.id),onTouchStart:()=>a(f.id),onMouseEnter:()=>r(f.id),onMouseLeave:()=>r(null),className:"relative h-12 flex items-center transition-all duration-200 rounded-xl overflow-hidden px-2 pt-2",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:c.jsxs("div",{className:`flex items-center h-full w-full transition-all duration-300 ${b?"justify-center space-x-1":"justify-center"}`,children:[c.jsx(y,{className:"tab-icon w-5 h-5 transition-all duration-300 flex-shrink-0 hover:scale-[1.4] active:scale-95",style:{color:_?"#2563eb":w?"#3b82f6":"#4b5563",animation:_?"none":"iconPulse 2s ease-in-out infinite"}}),c.jsx("div",{className:`overflow-hidden transition-all duration-300 ${b?"max-w-[70px] opacity-100":"max-w-0 opacity-0"}`,children:c.jsx("span",{className:`text-[10px] font-medium whitespace-nowrap block transition-all duration-300 ${_?"text-blue-600":w?"text-blue-500":"text-gray-600"}`,children:f.label})})]})},f.id)})]})})})},uC=(n,e,t,r,i,s)=>{const{totalAmount:o,monthToDateAmount:a}=H.useMemo(()=>{var N;const l=new Date,u=r?r.getFullYear():l.getFullYear(),d=u>l.getFullYear(),p=(s==null||s===0)&&!d,m=s&&s>0?s:p&&(e==null?void 0:e.basicSalary)||0,f=m>0?m*12/52/40:(e==null?void 0:e.hourlyRate)||0;console.log(" Calculating amounts with data:",{viewingYear:u,todayYear:l.getFullYear(),isFutureYear:d,monthlySalary:s,shouldUseGlobalSalary:p,scheduleKeys:Object.keys(n||{}),scheduleCount:Object.keys(n||{}).length,settingsBasicSalary:e==null?void 0:e.basicSalary,monthlySalary:s,effectiveSalary:m,effectiveHourlyRate:f,settingsHourlyRate:e==null?void 0:e.hourlyRate,settingsCombinations:(N=e==null?void 0:e.shiftCombinations)==null?void 0:N.length,specialDatesCount:Object.keys(t||{}).length,refreshKey:i});let x=0,y=0;const _=new Date,w=r?r.getMonth():_.getMonth(),b=r?r.getFullYear():_.getFullYear();return!n||Object.keys(n).length===0?(console.log(" No schedule data available"),{totalAmount:0,monthToDateAmount:0}):!e||!e.shiftCombinations||e.shiftCombinations.length===0?(console.log(" No settings or shift combinations available"),{totalAmount:0,monthToDateAmount:0}):(console.log(" Processing schedule entries..."),Object.entries(n).forEach(([C,A])=>{if(!A||A.length===0)return;console.log(` Processing date ${C} with shifts:`,A);const P=new Date(C),E=P.getMonth(),j=P.getFullYear();if(E!==w||j!==b){console.log(` Skipping ${C} - not in current month/year`);return}const D=t&&t[C]===!0,U=P.getDay();if(console.log(` Date ${C}: dayOfWeek=${U}, isSpecial=${D}`),A.forEach(L=>{console.log(` Calculating shift: ${L}`);let F=e.shiftCombinations.find(T=>T.id.replace(/AM/g,"9-4")===L);if(F&&f){const T=F.hours*f;if(x+=T,console.log(` Found single shift ${F.combination} (${F.hours}h) = Rs ${T.toFixed(2)}`),E===_.getMonth()&&j===_.getFullYear()){const O=P.getDate(),J=_.getDate();if(O<J){let X=!0;if(L==="N"){const se=new Date(P),q=new Date(se);q.setDate(q.getDate()+1),q.setHours(9,0,0,0),X=_>=q}X&&(y+=T,console.log(` Added to month-to-date (previous day): Rs ${T.toFixed(2)}`))}else if(O===J){const X=_.getHours(),se=_.getMinutes();let q=0;switch(L){case"9-4":q=16;break;case"4-10":q=22;break;case"12-10":q=22;break;case"N":q=9;break;default:q=16}let ee=!1;if(L==="N"){const ie=new Date(P),re=new Date(ie);re.setDate(re.getDate()+1),re.setHours(9,0,0,0),ee=_>=re}else ee=X>q||X===q&&se>=0;ee?(y+=T,console.log(` Added to month-to-date (today, shift ended): Rs ${T.toFixed(2)}`)):console.log(` Not adding to month-to-date (today, shift not ended yet): ${L}`)}}}else console.log(` No single shift combination found for ${L}`)}),A.length>1){const F=[...A].sort().join("+");console.log(` Looking for multi-shift combination: ${F}`);const T=e.shiftCombinations.find(O=>O.id.replace(/AM/g,"9-4")===F);if(T&&f){const O=A.reduce((se,q)=>{const ee=e.shiftCombinations.find(ie=>ie.id===q);return se+(ee?ee.hours*f:0)},0),X=T.hours*f-O;if(x+=X,console.log(` Found multi-combination ${T.combination}, adjusting by Rs ${X.toFixed(2)}`),E===_.getMonth()&&j===_.getFullYear()){const se=P.getDate(),q=_.getDate();if(se<q){let ee=!0;if(A.includes("N")){const ie=new Date(P),re=new Date(ie);re.setDate(re.getDate()+1),re.setHours(9,0,0,0),ee=_>=re}ee&&(y+=X)}else if(se===q){let ee=!0;for(const ie of A)if(ie==="N"){const re=new Date(P),M=new Date(re);if(M.setDate(M.getDate()+1),M.setHours(9,0,0,0),_<M){ee=!1;break}}else{let re=0;switch(ie){case"9-4":re=16;break;case"4-10":re=22;break;case"12-10":re=22;break;default:re=16}const M=_.getHours(),Y=_.getMinutes();if(!(M>re||M===re&&Y>=0)){ee=!1;break}}ee&&(y+=X,console.log(` Added multi-shift to month-to-date: Rs ${X.toFixed(2)}`))}}}}}),console.log(` Final totals: Monthly=${x.toFixed(2)}, MTD=${y.toFixed(2)}`),{totalAmount:x,monthToDateAmount:y})},[n,e,t,r,i,s,JSON.stringify(n),JSON.stringify(e),JSON.stringify(t)]);return{totalAmount:o,monthToDateAmount:a}};class dC{constructor(){Ut(this,"db",null);Ut(this,"dbName","WorkScheduleDB");Ut(this,"version",3);Ut(this,"initPromise",null)}async init(){return this.initPromise?this.initPromise:(this.initPromise=this._init(),this.initPromise)}async _init(){return new Promise((e,t)=>{if(console.log(" Initializing IndexedDB..."),!window.indexedDB){console.error(" IndexedDB not supported"),t(new Error("IndexedDB not supported"));return}const r=indexedDB.open(this.dbName,this.version);r.onerror=()=>{console.error(" Failed to open IndexedDB:",r.error),t(new Error(`Failed to open database: ${r.error}`))},r.onsuccess=()=>{this.db=r.result,console.log(" IndexedDB initialized successfully"),e()},r.onupgradeneeded=i=>{console.log(" Upgrading IndexedDB schema...");const s=i.target.result;s.objectStoreNames.contains("schedule")||(console.log(" Creating schedule store"),s.createObjectStore("schedule",{keyPath:"date"})),s.objectStoreNames.contains("specialDates")||(console.log(" Creating specialDates store"),s.createObjectStore("specialDates",{keyPath:"date"})),s.objectStoreNames.contains("settings")||(console.log(" Creating settings store"),s.createObjectStore("settings",{keyPath:"key"})),s.objectStoreNames.contains("metadata")||(console.log(" Creating metadata store"),s.createObjectStore("metadata",{keyPath:"key"})),s.objectStoreNames.contains("monthlySalaries")||(console.log(" Creating monthlySalaries store"),s.createObjectStore("monthlySalaries",{keyPath:"monthKey"})),console.log(" IndexedDB schema upgrade completed")},setTimeout(()=>{this.db||(console.error(" IndexedDB initialization timeout"),t(new Error("Database initialization timeout")))},1e4)})}async ensureDB(){if(this.db||await this.init(),!this.db)throw new Error("Database not initialized");return this.db}async getSchedule(){const e=await this.ensureDB();return new Promise((t,r)=>{const o=e.transaction(["schedule"],"readonly").objectStore("schedule").getAll();o.onsuccess=()=>{const a={};o.result.forEach(l=>{a[l.date]=l.shifts}),t(a)},o.onerror=()=>{r(new Error("Failed to get schedule"))}})}async setSchedule(e){const t=await this.ensureDB();return console.log(" Saving schedule to IndexedDB:",Object.keys(e).length,"entries"),new Promise((r,i)=>{const s=t.transaction(["schedule"],"readwrite"),o=s.objectStore("schedule");s.onerror=()=>{console.error(" Transaction error:",s.error),i(new Error(`Transaction failed: ${s.error}`))},s.oncomplete=()=>{console.log(" Schedule saved successfully"),r()};const a=o.clear();a.onsuccess=()=>{let l=0,u=0,d=!1;Object.entries(e).forEach(([p,m])=>{if(m.length>0){l++;const f=o.add({date:p,shifts:m});f.onsuccess=()=>{u++,u===l&&!d&&console.log(` All ${u} schedule entries saved`)},f.onerror=()=>{d||(d=!0,console.error(` Failed to add schedule for ${p}:`,f.error),i(new Error(`Failed to add schedule for ${p}: ${f.error}`)))}}}),l===0&&console.log(" No schedule data to save")},a.onerror=()=>{console.error(" Failed to clear schedule:",a.error),i(new Error(`Failed to clear schedule: ${a.error}`))}})}async getSpecialDates(){const e=await this.ensureDB();return new Promise((t,r)=>{const o=e.transaction(["specialDates"],"readonly").objectStore("specialDates").getAll();o.onsuccess=()=>{const a={};o.result.forEach(l=>{a[l.date]=l.isSpecial}),t(a)},o.onerror=()=>{r(new Error("Failed to get special dates"))}})}async setSpecialDates(e){const t=await this.ensureDB();return console.log(" Saving special dates to IndexedDB:",Object.keys(e).length,"entries"),new Promise((r,i)=>{const s=t.transaction(["specialDates"],"readwrite"),o=s.objectStore("specialDates");s.onerror=()=>{console.error(" Special dates transaction error:",s.error),i(new Error(`Transaction failed: ${s.error}`))},s.oncomplete=()=>{console.log(" Special dates saved successfully"),r()};const a=o.clear();a.onsuccess=()=>{let l=0,u=0,d=!1;Object.entries(e).forEach(([p,m])=>{if(m){l++;const f=o.add({date:p,isSpecial:m});f.onsuccess=()=>{u++,u===l&&!d&&console.log(` All ${u} special dates saved`)},f.onerror=()=>{d||(d=!0,console.error(` Failed to add special date for ${p}:`,f.error),i(new Error(`Failed to add special date for ${p}: ${f.error}`)))}}}),l===0&&console.log(" No special dates to save")},a.onerror=()=>{console.error(" Failed to clear special dates:",a.error),i(new Error(`Failed to clear special dates: ${a.error}`))}})}async getSetting(e){const t=await this.ensureDB();return new Promise((r,i)=>{const a=t.transaction(["settings"],"readonly").objectStore("settings").get(e);a.onsuccess=()=>{const l=a.result?a.result.value:null;if(e==="workSettings"&&l&&typeof l=="object"){!l.shiftCombinations||l.shiftCombinations.length;{console.log(" Auto-fixing missing shift combinations in getSetting");const u={...l,shiftCombinations:ql};this.setSetting(e,u).catch(d=>console.error("Failed to save fixed settings:",d)),r(u);return}}e==="authCodes"&&l&&console.log(" Loading auth codes from IndexedDB:",Array.isArray(l)?l.length:"invalid format"),r(l)},a.onerror=()=>{i(new Error(`Failed to get setting: ${e}`))}})}async setSetting(e,t){const r=await this.ensureDB();return console.log(` Saving setting "${e}" to IndexedDB:`,t),new Promise((i,s)=>{const o=r.transaction(["settings"],"readwrite"),a=o.objectStore("settings");o.onerror=()=>{console.error(` Settings transaction error for "${e}":`,o.error),s(new Error(`Transaction failed: ${o.error}`))},o.oncomplete=()=>{console.log(` Setting "${e}" saved successfully`),i()};const l=a.put({key:e,value:t});l.onsuccess=()=>{console.log(` Setting "${e}" put operation completed`)},l.onerror=()=>{console.error(` Failed to set setting "${e}":`,l.error),s(new Error(`Failed to set setting: ${e} - ${l.error}`))}})}async getMetadata(e){const t=await this.ensureDB();return new Promise((r,i)=>{const a=t.transaction(["metadata"],"readonly").objectStore("metadata").get(e);a.onsuccess=()=>{r(a.result?a.result.value:null)},a.onerror=()=>{i(new Error(`Failed to get metadata: ${e}`))}})}async setMetadata(e,t){const r=await this.ensureDB();return console.log(` Saving metadata "${e}" to IndexedDB:`,t),new Promise((i,s)=>{const o=r.transaction(["metadata"],"readwrite"),a=o.objectStore("metadata");o.onerror=()=>{console.error(` Metadata transaction error for "${e}":`,o.error),s(new Error(`Transaction failed: ${o.error}`))},o.oncomplete=()=>{console.log(` Metadata "${e}" saved successfully`),i()};const l=a.put({key:e,value:t});l.onsuccess=()=>{console.log(` Metadata "${e}" put operation completed`)},l.onerror=()=>{console.error(` Failed to set metadata "${e}":`,l.error),s(new Error(`Failed to set metadata: ${e} - ${l.error}`))}})}async exportAllData(){var l,u;console.log(" Exporting all data from IndexedDB...");const e=()=>{const d=new Date,p=d.getDate().toString().padStart(2,"0"),m=(d.getMonth()+1).toString().padStart(2,"0"),f=d.getFullYear();return`Roster_${p}-${m}-${f}.json`},[t,r,i,s]=await Promise.all([this.getSchedule(),this.getSpecialDates(),this.getSetting("workSettings"),this.getMetadata("scheduleTitle")]),o=i||{basicSalary:35e3,hourlyRate:173.08,shiftCombinations:ql};o&&(!o.shiftCombinations||o.shiftCombinations.length===0)&&(o.shiftCombinations=ql);const a={schedule:t,specialDates:r,settings:o,scheduleTitle:s||"Work Schedule",exportDate:new Date().toISOString(),version:"3.0",filename:e().replace("Roster_","ANWH_")};return console.log(" Export data prepared:",{scheduleEntries:Object.keys(a.schedule).length,specialDatesEntries:Object.keys(a.specialDates).length,settingsIncluded:!!a.settings,shiftCombinations:((u=(l=a.settings)==null?void 0:l.shiftCombinations)==null?void 0:u.length)||0,filename:a.filename}),a}async importAllData(e){var r;console.log(" Importing data to IndexedDB:",{hasSchedule:!!e.schedule,hasSpecialDates:!!e.specialDates,hasSettings:!!e.settings,hasTitle:!!e.scheduleTitle,version:e.version});const t=[];if(e.schedule&&(console.log(" Importing schedule with",Object.keys(e.schedule).length,"entries"),t.push(this.setSchedule(e.schedule))),e.specialDates&&(console.log(" Importing special dates with",Object.keys(e.specialDates).length,"entries"),t.push(this.setSpecialDates(e.specialDates))),e.settings){const i={...e.settings};(!i.shiftCombinations||i.shiftCombinations.length===0)&&(console.log(" Adding missing shift combinations to imported settings"),i.shiftCombinations=ql),console.log(" Importing settings:",{basicSalary:i.basicSalary,hourlyRate:i.hourlyRate,shiftCombinations:((r=i.shiftCombinations)==null?void 0:r.length)||0}),t.push(this.setSetting("workSettings",i))}e.scheduleTitle&&(console.log(" Importing schedule title:",e.scheduleTitle),t.push(this.setMetadata("scheduleTitle",e.scheduleTitle))),await Promise.all(t),console.log(" All data imported successfully to IndexedDB")}async getStorageInfo(){if("storage"in navigator&&"estimate"in navigator.storage)try{const e=await navigator.storage.estimate();return console.log(" Storage estimate:",e),{used:e.usage||0,available:e.quota||0}}catch(e){console.warn("Storage estimate not available:",e)}return console.log(" Using fallback storage estimate for iPhone Safari"),{used:0,available:50*1024*1024}}async getMonthlySalary(e,t){const r=await this.ensureDB(),i=`${e}-${t.toString().padStart(2,"0")}`;return new Promise((s,o)=>{const u=r.transaction(["monthlySalaries"],"readonly").objectStore("monthlySalaries").get(i);u.onsuccess=()=>{const d=u.result?u.result.salary:0;s(d)},u.onerror=()=>{o(new Error(`Failed to get monthly salary for ${i}`))}})}async setMonthlySalary(e,t,r){const i=await this.ensureDB(),s=`${e}-${t.toString().padStart(2,"0")}`;return console.log(` Saving monthly salary for ${s}:`,r),new Promise((o,a)=>{const l=i.transaction(["monthlySalaries"],"readwrite"),u=l.objectStore("monthlySalaries");l.onerror=()=>{console.error(` Monthly salary transaction error for "${s}":`,l.error),a(new Error(`Transaction failed: ${l.error}`))},l.oncomplete=()=>{console.log(` Monthly salary for "${s}" saved successfully`),o()};const d=u.put({monthKey:s,salary:r});d.onsuccess=()=>{console.log(` Monthly salary for "${s}" put operation completed`)},d.onerror=()=>{console.error(` Failed to set monthly salary for "${s}":`,d.error),a(new Error(`Failed to set monthly salary: ${s} - ${d.error}`))}})}async getAllMonthlySalaries(){const e=await this.ensureDB();return new Promise((t,r)=>{const o=e.transaction(["monthlySalaries"],"readonly").objectStore("monthlySalaries").getAll();o.onsuccess=()=>{const a={};o.result.forEach(l=>{a[l.monthKey]=l.salary}),t(a)},o.onerror=()=>{r(new Error("Failed to get all monthly salaries"))}})}}const Gt=new dC,hS=Object.freeze(Object.defineProperty({__proto__:null,workScheduleDB:Gt},Symbol.toStringTag,{value:"Module"}));function $v(n,e,t="setting"){const[r,i]=H.useState(e),[s,o]=H.useState(!0),[a,l]=H.useState(null),u=H.useCallback(async()=>{try{console.log(` Loading ${t} "${n}" from IndexedDB...`),o(!0),l(null),await Gt.init();const p=t==="setting"?await Gt.getSetting(n):await Gt.getMetadata(n);if(console.log(` Retrieved ${t} "${n}":`,p),p!==null)if(n==="workSettings"&&typeof p=="object"&&p!==null){const m=p;!m.shiftCombinations||m.shiftCombinations.length;{console.log(` Fixing missing shift combinations for ${n}`);const f={...m,shiftCombinations:ql};await Gt.setSetting(n,f),i(f),console.log(` Fixed and saved ${n} with default shift combinations`)}}else i(p),console.log(` Loaded ${t} "${n}" successfully`);else console.log(` No stored value for ${t} "${n}", using initial value:`,e),i(e),t==="setting"?await Gt.setSetting(n,e):await Gt.setMetadata(n,e),console.log(` Saved initial value for ${t} "${n}"`)}catch(p){console.error(` Error loading ${n} from IndexedDB:`,p),l(p instanceof Error?p.message:"Unknown error"),i(e)}finally{o(!1)}},[n,t,JSON.stringify(e)]);H.useEffect(()=>{u()},[u]);const d=H.useCallback(async p=>{try{l(null);const m=typeof p=="function"?p(r):p;console.log(` Saving ${t} "${n}":`,m),i(m),await Gt.init(),t==="setting"?await Gt.setSetting(n,m):await Gt.setMetadata(n,m),console.log(` Saved ${t} "${n}" successfully`),await new Promise(f=>setTimeout(f,100))}catch(m){if(console.error(` Error saving ${n} to IndexedDB:`,m),l(m instanceof Error?m.message:"Unknown error"),m instanceof Error&&m.message.includes("Transaction")){console.log(" Retrying save operation...");try{await new Promise(f=>setTimeout(f,500)),t==="setting"?await Gt.setSetting(n,valueToStore):await Gt.setMetadata(n,valueToStore),console.log(` Retry successful for ${t} "${n}"`),l(null)}catch(f){console.error(` Retry failed for ${n}:`,f)}}}},[n,r,t]);return[r,d,{isLoading:s,error:a,refresh:u}]}function hC(){const[n,e]=H.useState({}),[t,r]=H.useState({}),[i,s]=H.useState(!0),[o,a]=H.useState(null),l=H.useCallback(async()=>{try{console.log(" Loading schedule data from IndexedDB..."),s(!0),a(null),await Gt.init();const[p,m]=await Promise.all([Gt.getSchedule(),Gt.getSpecialDates()]);console.log(" Retrieved schedule data:",{scheduleEntries:Object.keys(p).length,specialDatesEntries:Object.keys(m).length}),e(p),r(m),console.log(" Schedule data loaded successfully")}catch(p){console.error(" Error loading schedule data:",p),a(p instanceof Error?p.message:"Unknown error")}finally{s(!1)}},[]);H.useEffect(()=>{l()},[l]);const u=H.useCallback(async p=>{try{a(null);const m=typeof p=="function"?p(n):p;console.log(" Saving schedule data:",{entries:Object.keys(m).length}),e(m),await Gt.init(),await Gt.setSchedule(m),console.log(" Schedule data saved successfully"),await new Promise(f=>setTimeout(f,100))}catch(m){if(console.error(" Error saving schedule:",m),a(m instanceof Error?m.message:"Unknown error"),m instanceof Error&&m.message.includes("Transaction")){console.log(" Retrying schedule save...");try{await new Promise(f=>setTimeout(f,500)),await Gt.setSchedule(scheduleToStore),console.log(" Schedule retry successful"),a(null)}catch(f){console.error(" Schedule retry failed:",f)}}}},[n]),d=H.useCallback(async p=>{try{a(null);const m=typeof p=="function"?p(t):p;console.log(" Saving special dates data:",{entries:Object.keys(m).length}),r(m),await Gt.init(),await Gt.setSpecialDates(m),console.log(" Special dates data saved successfully"),await new Promise(f=>setTimeout(f,100))}catch(m){if(console.error(" Error saving special dates:",m),a(m instanceof Error?m.message:"Unknown error"),m instanceof Error&&m.message.includes("Transaction")){console.log(" Retrying special dates save...");try{await new Promise(f=>setTimeout(f,500)),await Gt.setSpecialDates(specialDatesToStore),console.log(" Special dates retry successful"),a(null)}catch(f){console.error(" Special dates retry failed:",f)}}}},[t]);return{schedule:n,specialDates:t,setSchedule:u,setSpecialDates:d,isLoading:i,error:o,refreshData:l}}class fS{constructor(e={}){Ut(this,"options");Ut(this,"modalDisplayCount",0);Ut(this,"maxModalDisplayCount");Ut(this,"isIOS");Ut(this,"isAndroid");Ut(this,"isStandaloneMode");Ut(this,"isMobile");Ut(this,"isChrome");Ut(this,"isSafari");Ut(this,"isFirefox");Ut(this,"isEdge");Ut(this,"isOpera");Ut(this,"isSamsung");this.options={appName:"X-ray ANWH",appIconUrl:"/icon.png",maxModalDisplayCount:1,skipFirstVisit:!1,startDelay:3e3,lifespan:15e3,displayPace:999999,mustShowCustomPrompt:!1,...e},this.maxModalDisplayCount=this.options.maxModalDisplayCount||3;const t=navigator.userAgent;this.isIOS=/iPad|iPhone|iPod/.test(t),this.isAndroid=/Android/.test(t),this.isMobile=this.isIOS||this.isAndroid,this.isChrome=/Chrome/.test(t)&&!/Edge/.test(t),this.isSafari=/Safari/.test(t)&&!/Chrome/.test(t),this.isFirefox=/Firefox/.test(t),this.isEdge=/Edge/.test(t),this.isOpera=/Opera/.test(t)||/OPR/.test(t),this.isSamsung=/SamsungBrowser/.test(t),this.isStandaloneMode=this.isStandalone(),console.log(" AddToHomescreen Detection:",{isIOS:this.isIOS,isAndroid:this.isAndroid,isMobile:this.isMobile,isChrome:this.isChrome,isSafari:this.isSafari,isSamsung:this.isSamsung,isFirefox:this.isFirefox,isStandalone:this.isStandaloneMode,userAgent:t});const r=localStorage.getItem("addToHomescreenModalCount");this.modalDisplayCount=r?parseInt(r,10):0}isStandalone(){const e=window.matchMedia("(display-mode: standalone)").matches,t=window.navigator.standalone===!0,r=document.referrer.includes("android-app://"),i=window.matchMedia("(display-mode: fullscreen)").matches,s=window.matchMedia("(display-mode: minimal-ui)").matches,o=window.location.search.includes("standalone=true"),a="matchMedia"in window&&window.matchMedia("(display-mode: standalone)").matches&&window.navigator.userAgent.includes("wv");return console.log(" Standalone Detection:",{isStandaloneDisplay:e,isIOSStandalone:t,isAndroidStandalone:r,isFullscreen:i,isMinimalUI:s,hasStandaloneInURL:o,isInWebApk:a,userAgent:navigator.userAgent}),e||t||r||i||s||o||a}canPrompt(){const e=localStorage.getItem("addToHomescreenShownOnce")==="true",t=!this.isStandaloneMode&&!e&&this.modalDisplayCount<this.maxModalDisplayCount&&this.isMobile&&(this.isAndroid||this.isIOS);return console.log(" Can Prompt Check:",{isStandalone:this.isStandaloneMode,hasBeenShown:e,displayCount:this.modalDisplayCount,maxCount:this.maxModalDisplayCount,isMobile:this.isMobile,isAndroid:this.isAndroid,isIOS:this.isIOS,canShow:t}),t||this.options.mustShowCustomPrompt}show(e){if(!this.canPrompt()&&!this.options.mustShowCustomPrompt){console.log(" AddToHomescreen: Cannot show prompt");return}this.modalDisplayCount++,localStorage.setItem("addToHomescreenModalCount",this.modalDisplayCount.toString()),localStorage.setItem("addToHomescreenShownOnce","true");const t=e||this.getDefaultMessage();this.showModal(t)}clearModalDisplayCount(){this.modalDisplayCount=0,localStorage.removeItem("addToHomescreenModalCount"),localStorage.removeItem("addToHomescreenFirstVisit"),localStorage.removeItem("addToHomescreenShownOnce")}getDefaultMessage(){return this.isIOS&&this.isSafari?`Install ${this.options.appName} on your iPhone: tap the Share button and then "Add to Home Screen".`:this.isAndroid&&this.isChrome?`Install ${this.options.appName} on your Android device: tap the menu button and then "Add to Home Screen" or "Install App".`:this.isAndroid&&this.isSamsung?`Install ${this.options.appName} on your Samsung device: tap the menu button () and then "Add page to" or "Install App".`:this.isAndroid&&this.isFirefox?`Install ${this.options.appName} on your Android device: tap the menu button () and then "Install" or "Add to Home Screen".`:this.isAndroid?`Install ${this.options.appName} on your Android device: look for "Add to Home Screen", "Install App", or "Install" in your browser menu.`:`Add ${this.options.appName} to your device for quick access!`}showModal(e){const t=document.createElement("div");t.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 999999;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      animation: fadeIn 0.3s ease-out;
    `;const r=document.createElement("style");r.textContent=`
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      @keyframes slideUp {
        from { transform: translateY(30px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }
    `,document.head.appendChild(r);const i=document.createElement("div");i.style.cssText=`
      background: white;
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      text-align: center;
      position: relative;
      animation: slideUp 0.3s ease-out;
    `;const s=document.createElement("img");s.src=this.options.appIconUrl||"/icon.svg",s.style.cssText=`
      width: 64px;
      height: 64px;
      border-radius: 12px;
      margin-bottom: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    `,s.onerror=()=>{s.style.display="none"};const o=document.createElement("h3");o.textContent=`Install ${this.options.appName}`,o.style.cssText=`
      margin: 0 0 12px 0;
      font-size: 20px;
      font-weight: 600;
      color: #1a1a1a;
    `;const a=document.createElement("p");a.textContent=e,a.style.cssText=`
      margin: 0 0 24px 0;
      font-size: 16px;
      line-height: 1.5;
      color: #666;
    `;const l=document.createElement("div");l.style.cssText=`
      background: ${this.isIOS?"#f0f9ff":this.isAndroid?"#f0fdf4":"#f3f4f6"};
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      text-align: left;
    `,this.isIOS&&this.isSafari?l.innerHTML=`
        <div style="font-weight: 600; margin-bottom: 8px; color: #0369a1;"> How to install on iOS:</div>
        <div style="font-size: 14px; color: #0c4a6e; line-height: 1.5;">
          1. Tap the <strong>Share</strong> button <span style="font-size: 18px;"></span> in Safari<br>
          2. Scroll down and tap <strong>"Add to Home Screen"</strong><br>
          3. Tap <strong>"Add"</strong> to confirm installation
        </div>
      `:this.isAndroid?l.innerHTML=`
        <div style="font-weight: 600; margin-bottom: 8px; color: #166534;"> How to install on Android:</div>
        <div style="font-size: 14px; color: #14532d; line-height: 1.5;">
          1. Tap the <strong>Menu</strong> button <span style="font-size: 18px;"></span> (three dots)<br>
          2. Look for <strong>"Add to Home Screen"</strong>, <strong>"Install App"</strong>, or <strong>"Install"</strong><br>
          3. Tap <strong>"Install"</strong> or <strong>"Add"</strong> to confirm<br>
          <small style="color: #16a34a; margin-top: 4px; display: block;"> Works in Chrome, Samsung Browser, Firefox, and Edge</small>
        </div>
      `:l.innerHTML=`
        <div style="color: #374151; font-size: 14px; text-align: center;">
          Open this page in your mobile browser to install the app!
        </div>
      `;const u=document.createElement("button");u.textContent="Maybe Later",u.style.cssText=`
      background: #f3f4f6;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      font-size: 16px;
      font-weight: 500;
      color: #5f6368;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.2s;
    `,u.addEventListener("click",()=>{localStorage.setItem("addToHomescreenLastDismissed",Date.now().toString()),localStorage.setItem("appManuallyInstalled","true"),document.body.removeChild(t),document.head.removeChild(r)}),u.addEventListener("mouseover",()=>{u.style.backgroundColor="#e5e7eb"}),u.addEventListener("mouseout",()=>{u.style.backgroundColor="#f3f4f6"}),i.appendChild(s),i.appendChild(o),i.appendChild(a),i.appendChild(l),i.appendChild(u),t.appendChild(i),document.body.appendChild(t),t.addEventListener("click",d=>{d.target===t&&(localStorage.setItem("addToHomescreenLastDismissed",Date.now().toString()),document.body.removeChild(t),document.head.removeChild(r))}),setTimeout(()=>{document.body.contains(t)&&(localStorage.setItem("addToHomescreenLastDismissed",Date.now().toString()),document.body.removeChild(t),document.head.removeChild(r))},this.options.lifespan||15e3)}}window.addToHomescreen=n=>new fS(n);const fC=()=>{const[n,e]=H.useState([]),[t,r]=H.useState(!0),[i,s]=H.useState(null),[o,a]=H.useState("disconnected"),l=H.useRef(!0);H.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const u=H.useCallback(async()=>{if(!ft){s("Supabase not configured"),r(!1);return}try{s(null),console.log(" Loading roster entries...");const{data:p,error:m}=await ft.from("roster_entries").select("*").order("date",{ascending:!1}).order("created_at",{ascending:!1});if(m)throw new Error(m.message);l.current&&(e(p||[]),console.log(" Loaded roster entries:",(p==null?void 0:p.length)||0))}catch(p){console.error(" Error loading roster entries:",p),l.current&&s(p instanceof Error?p.message:"Failed to load roster entries")}finally{l.current&&r(!1)}},[]),d=H.useCallback(async p=>{if(!ft)throw new Error("Supabase not configured");try{const{error:m}=await ft.from("roster_entries").delete().eq("id",p);if(m)throw new Error(m.message);l.current&&e(f=>f.filter(x=>x.id!==p))}catch(m){throw console.error(" Error removing entry:",m),m}},[]);return H.useEffect(()=>{if(!ft){console.log(" Supabase not available for real-time updates");return}console.log(" Setting up real-time subscription..."),a("connecting");const p=ft.channel("roster_changes").on("postgres_changes",{event:"*",schema:"public",table:"roster_entries"},m=>{try{if(console.log(" Real-time update received:",m),!l.current){console.log(" Component unmounted, ignoring real-time update");return}m.eventType==="INSERT"&&m.new?e(f=>f.some(y=>y.id===m.new.id)?f:[m.new,...f]):m.eventType==="UPDATE"&&m.new?e(f=>f.map(x=>x.id===m.new.id?m.new:x)):m.eventType==="DELETE"&&m.old&&e(f=>f.filter(x=>x.id!==m.old.id)),window.dispatchEvent(new CustomEvent("rosterRealtimeUpdate",{detail:m}))}catch(f){console.error(" Error handling real-time update:",f)}}).subscribe(m=>{console.log(" Real-time subscription status:",m),l.current&&(m==="SUBSCRIBED"?(a("connected"),console.log(" Real-time connection established")):m==="CHANNEL_ERROR"?(a("error"),console.log(" Real-time connection error")):m==="TIMED_OUT"?(a("error"),console.log(" Real-time connection timed out")):m==="CLOSED"&&(a("disconnected"),console.log(" Real-time connection closed")))});return u(),()=>{console.log(" Cleaning up real-time subscription..."),ft.removeChannel(p)}},[u]),{entries:n,loading:t,error:i,realtimeStatus:o,loadEntries:u,removeEntry:d}},pC=n=>{const e=new Date(n),t=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getFullYear();return`${t}/${r}/${i}`},mC=n=>({"Morning Shift (9-4)":"Morning (9-4)","Evening Shift (4-10)":"Evening (4-10)","Saturday Regular (12-10)":"Saturday (12-10)","Night Duty":"Night Duty (N)","Sunday/Public Holiday/Special":"Special (9-4)"})[n]||n,Cg=(n,e)=>{console.log(" parseNameChange called with:",{description:n,assignedName:e});const t=n.match(/\(Original PDF: ([^)]+)\)/);if(console.log(" Original PDF match:",t),t){let s=t[1].trim();return s.includes("(R")&&!s.includes("(R)")&&(s=s.replace("(R","(R)")),console.log(" Using original PDF assignment:",{oldName:s,newName:e}),{oldName:s,newName:e,isNameChange:!0}}const r=n.match(/Name changed from "([^"]+)" to "([^"]+)"/g);if(console.log(" Name change matches found:",r),r&&r.length>0){const s=r[r.length-1];console.log(" Using last match:",s);const o=s.match(/Name changed from "([^"]+)" to "([^"]+)"/);if(console.log(" Parsed last match:",o),o){let a=o[1].trim(),l=o[2].trim();return a.includes("(R")&&!a.includes("(R)")&&(a=a.replace("(R","(R)")),l.includes("(R")&&!l.includes("(R)")&&(l=l.replace("(R","(R)")),console.log(" Returning immediate change:",{oldName:a,newName:l}),{oldName:a,newName:l,isNameChange:!0}}}const i=n.match(/Name changed from "([^"]+)" to "([^"]+)"/);if(console.log(" Single match fallback:",i),i){let s=i[1].trim(),o=i[2].trim();return s.includes("(R")&&!s.includes("(R)")&&(s=s.replace("(R","(R)")),o.includes("(R")&&!o.includes("(R)")&&(o=o.replace("(R","(R)")),console.log(" Returning single match:",{oldName:s,newName:o}),{oldName:s,newName:o,isNameChange:!0}}return console.log(" No name change detected"),{oldName:null,newName:null,isNameChange:!1}};class uy{constructor(e){Ut(this,"timeline",null);Ut(this,"options");Ut(this,"isPaused",!1);Ut(this,"scrollTimeout",null);this.options={pauseDuration:1,scrollDuration:2.5,easing:"power2.inOut",...e}}pause(){this.timeline&&!this.isPaused&&(this.timeline.pause(),this.isPaused=!0,console.log(" ScrollingText animation paused"))}resume(){this.timeline&&this.isPaused&&(this.timeline.resume(),this.isPaused=!1,console.log(" ScrollingText animation resumed"))}handleScrollStart(){this.pause(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.resume(),this.scrollTimeout=null},150)}start(){this.stop();const{container:e,textElement:t,pauseDuration:r,scrollDuration:i,easing:s}=this.options;pr.set(t,{x:0}),e.offsetWidth,t.offsetWidth;const o=e.offsetWidth,a=t.scrollWidth;if(console.log(" ScrollingTextAnimator dimensions:",{containerWidth:o,textWidth:a,needsScrolling:a>o}),a<=o){console.log(" Text fits in container, no animation needed");return}const l=a-o;this.timeline=pr.timeline({repeat:-1,ease:s}),this.timeline.to(t,{duration:r,x:0,ease:"none"}).to(t,{duration:i,x:-l,ease:s}).to(t,{duration:r,x:-l,ease:"none"}).to(t,{duration:i,x:0,ease:s}),console.log(" TweenMax animation started with enhanced timing for longer text")}stop(){this.timeline&&(this.timeline.kill(),this.timeline=null)}updateText(e){this.options.text=e,this.start()}static create(e){const t=new uy(e);return t.start(),t}}const mr=({text:n,className:e="",children:t,pauseDuration:r=1,scrollDuration:i=2.5,easing:s="power2.inOut"})=>{const o=H.useRef(null),a=H.useRef(null),[l,u]=H.useState(!1),d=H.useRef(null),p=H.useRef(null);return H.useEffect(()=>{const m=()=>{if(!o.current||!a.current)return;const y=o.current,_=a.current;d.current&&(d.current.stop(),d.current=null),p.current&&(window.removeEventListener("scroll",p.current,{passive:!0}),document.removeEventListener("scroll",p.current,{passive:!0}),p.current=null),y.offsetWidth,_.offsetWidth;const w=y.offsetWidth,b=_.scrollWidth,N=n||"children content",C=N.includes(" "),A=N.length>30;if(b>w){u(!0);const P=C&&A?3:r,E=C&&A?7:i,j=C&&A?"power1.inOut":s;d.current=uy.create({container:y,textElement:_,text:N,pauseDuration:P,scrollDuration:E,easing:j}),console.log(" Started enhanced TweenMax animation for text:",N);const D=()=>{d.current&&d.current.handleScrollStart()};window.addEventListener("scroll",D,{passive:!0}),document.addEventListener("scroll",D,{passive:!0});let U=y.parentElement;for(;U;)(U.scrollHeight>U.clientHeight||U.scrollWidth>U.clientWidth)&&U.addEventListener("scroll",D,{passive:!0}),U=U.parentElement;p.current=D}else u(!1),console.log(" Text fits in container, no animation needed")};m();const f=()=>{setTimeout(m,100)};window.addEventListener("resize",f);const x=new MutationObserver(()=>{setTimeout(m,50)});return o.current&&x.observe(o.current,{childList:!0,subtree:!0,characterData:!0}),()=>{window.removeEventListener("resize",f),x.disconnect(),p.current&&(window.removeEventListener("scroll",p.current,{passive:!0}),document.removeEventListener("scroll",p.current,{passive:!0}),p.current=null),d.current&&(d.current.stop(),d.current=null)}},[n,t,r,i,s]),H.useEffect(()=>()=>{p.current&&(window.removeEventListener("scroll",p.current,{passive:!0}),document.removeEventListener("scroll",p.current,{passive:!0}),p.current=null),d.current&&(d.current.stop(),d.current=null)},[]),c.jsx("div",{ref:o,className:`w-full ${e}`,style:{position:"relative",width:"100%",maxWidth:"100%",overflow:"hidden"},children:c.jsx("div",{ref:a,className:"whitespace-nowrap",style:{display:"inline-block",minWidth:"100%",maxWidth:"none",overflow:"hidden"},children:t||n})})},pS=({isOpen:n,entry:e,onClose:t})=>{if(!n||!e)return null;const r=o=>{try{const[a,l]=o.split(" "),[u,d,p]=a.split("-"),[m,f,x]=l.split(":"),y=new Date(parseInt(p),parseInt(d)-1,parseInt(u),parseInt(m),parseInt(f),parseInt(x||"0")),_=`${u}-${d}-${p}`,w=`${m}h${f}`;return`${_} at ${w}`}catch{return o}},i=Cg(e.change_description||"",e.assigned_name),s=c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsxs("div",{className:"relative p-6 pb-4 border-b border-gray-200",children:[c.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Er,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(Mw,{className:"w-6 h-6 text-blue-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Edit Details"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(Cr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:pC(e.date)})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto select-none",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Shift Type"}),c.jsx(mr,{text:e.shift_type,className:"text-gray-900 font-semibold select-none"})]}),c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Current Assignment"}),c.jsx(mr,{text:e.assigned_name,className:"text-gray-900 font-semibold select-none"})]}),i.isNameChange&&c.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-yellow-800 mb-2 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Name Change"}),c.jsx(mr,{className:"select-none",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(Wr,{className:"w-4 h-4 text-red-600 flex-shrink-0"}),c.jsx("span",{className:"text-red-600 font-medium line-through select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:i.oldName||"Unknown"}),c.jsx("span",{className:"text-gray-500 select-none flex-shrink-0",style:{userSelect:"none",WebkitUserSelect:"none"},children:""}),c.jsx(Wr,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-green-600 font-medium select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:i.newName||e.assigned_name})]})})]}),e.change_description&&c.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-blue-800 mb-1 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Change Description"}),c.jsx(mr,{text:e.change_description.replace(/\s*\(Original PDF: [^)]+\)/,""),className:"text-blue-700 text-sm"})]}),i.isNameChange&&c.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-amber-800 mb-2 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Initial Assignment"}),c.jsx(mr,{className:"select-none",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(Wr,{className:"w-4 h-4 text-amber-600 flex-shrink-0"}),c.jsx("span",{className:"text-amber-700 font-medium select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:i.oldName})]})})]}),e.last_edited_by&&c.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"text-sm font-medium text-green-800 mb-2 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Last Modified"}),c.jsxs("div",{className:"space-y-1 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(mr,{className:"select-none",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(Wr,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-green-700 font-medium select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:e.last_edited_by})]})}),e.last_edited_at&&c.jsx(mr,{className:"select-none",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx(O1,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-green-700 text-sm select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:r(e.last_edited_at)})]})})]})]})]}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:t,className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Close"})})]})]})});return xn.createPortal(s,document.body)},gC=({isOpen:n,date:e,currentSpecialInfo:t,onSave:r,onClose:i,authCode:s})=>{const[o,a]=H.useState(!1),[l,u]=H.useState(""),[d,p]=H.useState(!1),[m,f]=H.useState(null);if(H.useEffect(()=>{n&&t?(a(t.isSpecial),u(t.info||"")):n&&(a(!1),u(""))},[n,t]),H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{const w=b=>{b.key==="Escape"&&n&&i()};if(n)return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n,i]),!n||!e)return null;const x=w=>{const b=new Date(w),N=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],C=["January","February","March","April","May","June","July","August","September","October","November","December"],A=N[b.getDay()],P=b.getDate(),E=C[b.getMonth()],j=b.getFullYear();return`${A}, ${E} ${P}, ${j}`},y=()=>{d||(p(!0),f(null),r(o,o?l:"").then(()=>{i()}).catch(w=>{console.error("Failed to save special date:",w),f(w instanceof Error?w.message:"Failed to save special date")}).finally(()=>{p(!1)}))},_=w=>{w.target===w.currentTarget&&i()};return xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:_,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",maxHeight:"90vh",display:"flex",flexDirection:"column"},onClick:w=>w.stopPropagation(),children:[c.jsxs("div",{className:"relative p-6 pb-4 border-b border-gray-200 flex-shrink-0",children:[c.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200",children:c.jsx(Er,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${o?"bg-red-100":"bg-blue-100"}`,children:c.jsx(Z2,{className:`w-6 h-6 ${o?"text-red-600":"text-blue-600"}`})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Mark Special Date"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[c.jsx(Cr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:x(e)})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{className:"space-y-6",children:[m&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Jn,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-sm text-red-700",children:m})]})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 p-4 bg-gray-50 rounded-lg",children:c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:o,onChange:w=>a(w.target.checked),className:"w-5 h-5 text-red-600 focus:ring-red-500 focus:ring-2 rounded"}),c.jsx("span",{className:"text-lg font-medium text-gray-800",children:"Mark as Special Date"})]})}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Jn,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Special Date Effects:"}),c.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[c.jsx("li",{children:" Date will appear red and pulsating in the table"}),c.jsx("li",{children:" Info text will be added to all staff remarks for this date"}),c.jsx("li",{children:" Helps identify important dates (holidays, events, etc.)"})]})]})]})}),o&&c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[c.jsx(ns,{className:"w-4 h-4 inline mr-2"}),"Special Date Information"]}),c.jsx("textarea",{value:l,onChange:w=>u(w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none",rows:3,placeholder:"Enter information about this special date (e.g., 'Public Holiday - Independence Day')",maxLength:200}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[l.length,"/200 characters  This will be added to all staff remarks for this date"]})]}),o&&c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Preview:"}),c.jsxs("div",{className:"text-sm text-red-700",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("div",{className:"w-4 h-4 bg-red-500 rounded animate-pulse"}),c.jsxs("span",{className:"font-medium",children:[x(e)," - Special Date"]})]}),l&&c.jsx("div",{className:"bg-white p-2 rounded border",children:c.jsxs("span",{className:"text-gray-700",children:['Staff remarks: "',l,'"']})})]})]})]})}),c.jsx("div",{className:"border-t border-gray-200 p-6 flex-shrink-0",children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:i,disabled:d,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:y,disabled:d,className:`flex-1 px-4 py-3 ${o?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 flex items-center justify-center space-x-2`,children:d?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Saving..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Z2,{className:"w-4 h-4"}),c.jsx("span",{children:o?"Mark Special":"Remove Special"})]})})]})})]})}),document.body)},mS=({isOpen:n,entry:e,availableStaff:t,allEntriesForShift:r=[],onSelectStaff:i,onSelectStaffWithColor:s,onClose:o,authCode:a})=>{const[l,u]=H.useState(""),[d,p]=H.useState("#000000"),[m,f]=H.useState(!1);if(H.useEffect(()=>{console.log(" StaffSelectionModal props:",{isOpen:n,entry:e==null?void 0:e.assigned_name,entryId:e==null?void 0:e.id,availableStaffLength:t==null?void 0:t.length,allEntriesForShiftLength:r==null?void 0:r.length,allEntriesForShift:r==null?void 0:r.map(A=>({id:A.id,assigned_name:A.assigned_name}))})},[n,e,t,r]),H.useEffect(()=>{a&&f(Zs(a))},[a]),H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{if(n&&e&&(u(e.assigned_name),m)){let A="#000000";if(e.text_color)A=e.text_color;else{const P=(()=>{if(!e.change_description)return!1;const j=e.change_description.match(/\(Original PDF: ([^)]+)\)/);if(j){let D=j[1].trim();return D.includes("(R")&&!D.includes("(R)")&&(D=D.replace("(R","(R)")),e.assigned_name===D&&e.last_edited_by==="ADMIN"}return!1})(),E=e.change_description&&e.change_description.includes("Name changed from")&&e.last_edited_by;P?A="#059669":E?A="#dc2626":A="#000000"}p(A)}},[n,e,m]),!n||!e)return null;const x=A=>A.replace(/\(R\)$/,"").trim(),_=(()=>{if(console.log(" availableStaff:",t),console.log(" entry:",e),console.log(" allEntriesForShift:",r),!r||r.length===0){const j=t.filter(U=>U!=="ADMIN"),D=Da(j);return console.log(" Filtered staff (no entries):",D),D}const A=r.filter(j=>j.id!==(e==null?void 0:e.id)).map(j=>j.assigned_name);console.log(" assignedStaff (excluding current entry):",A);let P=t.filter(j=>j!=="ADMIN");if(m||(P=P.filter(j=>e&&j===e.assigned_name?!0:!A.includes(j))),console.log(" filtered after removing assigned staff:",P),e!=null&&e.assigned_name.includes("(R)")){const j=x(e.assigned_name);P=P.filter(D=>D!==j),console.log(" filtered after removing base name (current is R variant):",P)}if(e!=null&&e.assigned_name&&!e.assigned_name.includes("(R)")){const j=`${e.assigned_name}(R)`;P=P.filter(D=>D!==j),console.log(" filtered after removing R variant (current is base name):",P)}A.forEach(j=>{if(j.includes("(R)")){const D=x(j);P=P.filter(U=>U!==D),console.log(` filtered after removing base name ${D} (assigned is R variant ${j}):`,P)}else{const D=`${j}(R)`;P=P.filter(U=>U!==D),console.log(` filtered after removing R variant ${D} (assigned is base name ${j}):`,P)}});const E=Da(P);return console.log(" Final filtered staff:",E),E})();console.log(" filteredStaff:",_),console.log(" NARAYYA in filteredStaff:",_.filter(A=>A.includes("NARAYYA")));const w=A=>{u(A)},b=A=>new Date(A).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),N=()=>{const A=l!==e.assigned_name;let P="#000000";if(e.text_color)P=e.text_color;else{const j=(()=>{if(!e.change_description)return!1;const U=e.change_description.match(/\(Original PDF: ([^)]+)\)/);if(U){let L=U[1].trim();return L.includes("(R")&&!L.includes("(R)")&&(L=L.replace("(R","(R)")),e.assigned_name===L&&e.last_edited_by==="ADMIN"}return!1})(),D=e.change_description&&e.change_description.includes("Name changed from")&&e.last_edited_by;j?P="#059669":D?P="#dc2626":P="#000000"}const E=m&&d!==P;l&&(A||E)&&(s&&m&&E||s&&m&&A?s(l,d):i(l)),o()},C=A=>{A.target===A.currentTarget&&o()};return xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[99999]",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"8px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},onClick:C,children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxWidth:window.innerWidth>window.innerHeight?"90vw":"28rem",maxHeight:"90vh",margin:window.innerWidth>window.innerHeight?"4px 0":"0",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("div",{className:"border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"16px"},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1 text-center",children:"Select Staff Member"}),c.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[e.assigned_name,"  ",l||e.assigned_name]})]}),c.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:c.jsx(Er,{className:"w-5 h-5"})})]})}),c.jsx("div",{className:"border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"16px"},children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-700",children:[c.jsx(Cr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:b(e.date)})]}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-700",children:[c.jsx(O1,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:e.shift_type})]}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Current Assignment"}),c.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.assigned_name})]})})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto",style:{padding:window.innerWidth>window.innerHeight?"8px":"16px",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-3 text-center",children:["Available Staff (",_.length,")"]}),_.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-gray-500 mb-2",children:"No available staff"}),c.jsx("div",{className:"text-xs text-gray-400",children:"All staff are already assigned to this shift"})]}):_.map(A=>{const P=r.some(j=>j.assigned_name===A&&j.shift_type===e.shift_type&&j.id!==(e==null?void 0:e.id)),E=l===A;return c.jsx("button",{onClick:()=>w(A),className:`w-full p-4 rounded-lg border-2 text-left transition-all duration-200 ${E?"border-blue-500 bg-blue-50 text-blue-900":P?"border-yellow-300 bg-yellow-50 text-yellow-900":"border-gray-200 bg-white hover:border-gray-300 hover:bg-gray-50"}`,style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:c.jsx(Wr,{className:"w-5 h-5 text-gray-600"})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:A}),c.jsx("div",{className:"text-sm text-gray-500",children:x(A)})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[P&&c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Assigned"}),E&&c.jsx(Ew,{className:"w-5 h-5 text-blue-600"})]})]})},A)})]})}),c.jsx("div",{className:"border-t border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"16px"},children:c.jsxs("div",{className:"space-y-3",children:[m&&c.jsxs("div",{className:"flex flex-col space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700",children:[c.jsx(WN,{className:"w-4 h-4"}),c.jsx("span",{children:"Text Color"})]}),c.jsx("div",{className:"w-8 h-8 rounded border-2 border-gray-300",style:{backgroundColor:d}})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:[{color:"#000000",label:"Black"},{color:"#dc2626",label:"Red"},{color:"#059669",label:"Green"}].map(({color:A,label:P})=>c.jsx("button",{onClick:()=>p(A),className:`w-8 h-8 rounded-full border-2 ${d===A?"border-gray-800 ring-2 ring-offset-2 ring-blue-500":"border-gray-300"}`,style:{backgroundColor:A},title:P},A))})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:o,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:N,disabled:!l,className:`flex-1 px-4 py-3 rounded-lg font-medium transition-colors duration-200 ${l?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Confirm"})]})]})})]})}),document.body)},yC=()=>Bn.filter(n=>n.name!=="ADMIN").map(n=>n.name).sort(),vC=({entry:n,onUpdate:e,onShowDetails:t,allEntriesForShift:r=[],isSpecialDate:i=!1,specialDateInfo:s})=>{const[o,a]=H.useState(!1),[l,u]=H.useState(""),[d,p]=H.useState(!1),[m,f]=H.useState(""),[x,y]=H.useState(!1),[_,w]=H.useState(!1),[b,N]=H.useState(!1);Vg.useEffect(()=>(d&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[d]);const C=T=>T.change_description&&T.change_description.includes("Name changed from")&&T.last_edited_by,A=T=>{if(!T.change_description)return!1;const O=T.change_description.match(/\(Original PDF: ([^)]+)\)/);if(O){let J=O[1].trim();return J.includes("(R")&&!J.includes("(R)")&&(J=J.replace("(R","(R)")),T.assigned_name===J}return!1},P=()=>n.text_color?n.text_color:A(n)?"#059669":C(n)?"#dc2626":"#000000",E=Ec({onLongPress:()=>{console.log(" Long press detected on entry:",n.id),p(!0)},onDoublePress:()=>{C(n)&&t&&n.last_edited_by!=="ADMIN"&&(console.log(" Double press detected on edited entry:",n.id),t(n))},delay:2500}),j=()=>{if(!mi(l)){f("Invalid authentication code");return}p(!1),a(!0),f("")},D=async T=>{await U(T)},U=async(T,O)=>{if(console.log(" RosterEntryCell: handleStaffSelectWithColor called with:",{newStaffName:T,textColor:O,currentAssignedName:n.assigned_name,entryId:n.id}),T===n.assigned_name)if(console.log(" RosterEntryCell: Name unchanged, checking color change..."),O&&O!==P())console.log(" RosterEntryCell: Color-only change detected, proceeding with update");else{console.log(" RosterEntryCell: No changes detected, closing modal"),a(!1);return}if(T===n.assigned_name&&!O){a(!1);return}y(!0),N(!0);try{const J=mi(l);if(!J)return;console.log(" RosterEntryCell: Updating entry with:",{newStaffName:T,textColor:O,editorName:J});const X=await lS(n.id,{date:n.date,shiftType:n.shift_type,assignedName:T,changeDescription:`Name changed from "${n.assigned_name}" to "${T}"`,textColor:O},J);console.log(" RosterEntryCell: Entry updated successfully:",X),e&&e(X),a(!1),u("")}catch(J){console.error("Failed to update entry:",J),alert("Failed to update entry. Please try again.")}finally{y(!1),setTimeout(()=>N(!1),1e3)}},L=()=>{p(!1),u(""),f("")},F=()=>{a(!1),u("")};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{...E,style:{padding:"4px 2px",margin:0,textAlign:"center",fontSize:window.innerWidth>window.innerHeight?"10px":"12px",fontWeight:"500",color:P(),cursor:"pointer",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",MozUserSelect:"none",msUserSelect:"none",outline:"none",background:"transparent",width:"100%",maxWidth:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"32px",position:"relative",zIndex:60,animation:b?"goldenPulse 1.2s ease-in-out infinite":i&&s&&s.trim()?"pulse 2s ease-in-out infinite":"none",transform:b?"scale(1.05)":"scale(1)",transition:"all 0.4s ease-out",boxShadow:b?"0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4), inset 0 0 10px rgba(255, 215, 0, 0.2)":"none",backgroundColor:b?"rgba(255, 215, 0, 0.15)":"transparent",borderRadius:b?"6px":"0",border:b?"2px solid #ffd700":"none"},children:[c.jsx(mr,{text:n.assigned_name,className:"text-center w-full"}),b&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{position:"absolute",top:"2px",left:"2px",width:"4px",height:"4px",backgroundColor:"#ffd700",borderRadius:"50%",animation:"sparkle1 2s ease-in-out infinite",zIndex:65}}),c.jsx("div",{style:{position:"absolute",bottom:"2px",right:"8px",width:"3px",height:"3px",backgroundColor:"#ffed4e",borderRadius:"50%",animation:"sparkle2 2.5s ease-in-out infinite",zIndex:65}}),c.jsx("div",{style:{position:"absolute",top:"50%",left:"1px",width:"2px",height:"2px",backgroundColor:"#fbbf24",borderRadius:"50%",animation:"sparkle3 1.8s ease-in-out infinite",zIndex:65}})]})]}),c.jsx("style",{jsx:!0,children:`
        @keyframes goldenPulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4);
          }
          50% {
            opacity: 0.9;
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 215, 0, 1), 0 0 60px rgba(255, 215, 0, 0.6);
          }
        }
        
        @keyframes goldenDot {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
            box-shadow: 0 0 8px rgba(255, 215, 0, 0.8);
          }
          50% {
            opacity: 0.7;
            transform: scale(1.3);
            box-shadow: 0 0 15px rgba(255, 215, 0, 1);
          }
        }
        
        @keyframes sparkle1 {
          0%, 100% {
            opacity: 0;
            transform: scale(0) rotate(0deg);
          }
          25% {
            opacity: 1;
            transform: scale(1) rotate(90deg);
          }
          50% {
            opacity: 0.8;
            transform: scale(1.2) rotate(180deg);
          }
          75% {
            opacity: 0.6;
            transform: scale(0.8) rotate(270deg);
          }
        }
        
        @keyframes sparkle2 {
          0%, 100% {
            opacity: 0;
            transform: scale(0);
          }
          30% {
            opacity: 1;
            transform: scale(1.5);
          }
          60% {
            opacity: 0.7;
            transform: scale(1);
          }
        }
        
        @keyframes sparkle3 {
          0%, 100% {
            opacity: 0;
            transform: scale(0) translateY(0);
          }
          40% {
            opacity: 1;
            transform: scale(1.8) translateY(-2px);
          }
          80% {
            opacity: 0.5;
            transform: scale(1) translateY(0);
          }
        }
      `}),d&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center p-4",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999999999,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",pointerEvents:"auto"},onWheel:T=>T.preventDefault(),onScroll:T=>T.preventDefault(),onClick:T=>{T.preventDefault(),T.stopPropagation(),T.target===T.currentTarget&&L()},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Authentication Required"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex space-x-3 mb-3",children:[0,1,2,3].map(T=>c.jsx("input",{type:_?"text":"password",value:l[T]||"",onChange:O=>{const J=O.target.value.toUpperCase();if(J.length<=1){const X=l.split("");if(X[T]=J,u(X.join("")),J&&T<3){const se=document.querySelector(`input[data-index="${T+1}"]`);se&&se.focus()}}},onKeyDown:O=>{if(O.key==="Backspace"&&!l[T]&&T>0){const J=document.querySelector(`input[data-index="${T-1}"]`);J&&J.focus()}},"data-index":T,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:T===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},T))}),l.length===4&&c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onTouchStart:()=>w(!0),onTouchEnd:()=>w(!1),onMouseDown:()=>w(!0),onMouseUp:()=>w(!1),onMouseLeave:()=>w(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:_?c.jsx(kc,{className:"w-5 h-5"}):c.jsx(jc,{className:"w-5 h-5"})})})]})]}),m&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:m})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:L,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:j,disabled:l.length<4,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200",children:"Continue"})]})]})})}),document.body),c.jsx(mS,{isOpen:o,entry:n,availableStaff:yC(),allEntriesForShift:r,onSelectStaff:D,onSelectStaffWithColor:U,onClose:F,authCode:l})]})},xC=({date:n,isToday:e,isPastDate:t,isFutureDate:r,onDoublePress:i,onLongPress:s,isSpecialDate:o=!1,specialDateInfo:a})=>c.jsx("td",{style:{padding:"4px",textAlign:"center",minHeight:"50px",margin:0,backgroundColor:e?"#bbf7d0":o?"#fecaca":t?"#fef2f2":r?"#f0fdf4":"#ffffff",background:e?"#bbf7d0":o?"#fecaca":t?"#fef2f2":r?"#f0fdf4":"#ffffff",opacity:1,border:"2px solid #374151",width:"15%",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",WebkitTransform:"translate3d(0,0,0)",WebkitTouchCallout:"none"},children:c.jsxs("button",{...Ec({onLongPress:s,onDoublePress:i,delay:2500}),className:`text-center w-full h-full p-1 rounded transition-colors duration-200 ${e?"bg-green-300":o?"bg-red-300":"hover:bg-gray-100"}`,style:{background:"transparent",cursor:"pointer",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",margin:0,padding:0,textAlign:"center",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",WebkitTransform:"translate3d(0,0,0)",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,border:"none",outline:"none",boxShadow:"none"},children:[c.jsxs("div",{className:`font-medium text-[10px] sm:text-[12px] leading-tight relative z-20 flex flex-col items-center justify-center ${e?"text-green-900":o?"text-red-900":"text-gray-900"}`,style:{textAlign:"center",width:"100%",display:"block",fontSize:window.innerWidth>window.innerHeight?"12px":"14px",fontWeight:"500",animation:o?"pulse 2s ease-in-out infinite":"none"},children:[c.jsx("div",{style:{textAlign:"center",fontSize:window.innerWidth>window.innerHeight?"10px":"12px",fontWeight:"bold"},children:(()=>{const l=new Date(n);return["SUN","MON","TUE","WED","THU","FRI","SAT"][l.getDay()]})()}),c.jsx("div",{style:{textAlign:"center",fontSize:window.innerWidth>window.innerHeight?"10px":"12px",fontWeight:"500"},children:(()=>{const l=new Date(n),u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=l.getDate(),p=u[l.getMonth()];return`${d}-${p}`})()}),c.jsx("div",{style:{textAlign:"center",fontSize:window.innerWidth>window.innerHeight?"10px":"12px",fontWeight:"500"},children:new Date(n).getFullYear()})]}),o&&a&&a.trim()!==""&&c.jsx("div",{className:"relative mt-1 left-0 right-0 z-20",style:{height:"20px",overflow:"hidden",padding:"0 2px",width:"100%"},children:c.jsx(mr,{text:a,className:`${e?"text-green-800":"text-red-800"} font-medium`})})]})}),wC=({entries:n,loading:e,realtimeStatus:t="disconnected",onRefresh:r,selectedDate:i,onDateChange:s,onExportToCalendar:o,setActiveTab:a})=>{H.useEffect(()=>{const he=Fe=>{const{month:Ge,year:rt}=Fe.detail;console.log(` RosterTableView: Received navigation event to ${Ge+1}/${rt}`);const Ke=new Date(rt,Ge,1);s(Ke)};return window.addEventListener("navigateToMonth",he),()=>window.removeEventListener("navigateToMonth",he)},[s]);const[l,u]=H.useState(null),[d,p]=H.useState(!1),[m,f]=H.useState(0),[x,y]=H.useState(!1),[_,w]=H.useState(""),[b,N]=H.useState(null),[C,A]=H.useState(new Date().getFullYear()),[P,E]=H.useState(!1),[j,D]=H.useState(null),[U,L]=H.useState(!1),[F,T]=H.useState(!1),[O,J]=H.useState(!1),[X,se]=H.useState(null),[q,ee]=H.useState(!1),[ie,re]=H.useState(""),[M,Y]=H.useState(""),[G,Z]=H.useState(null),[te,ue]=H.useState(""),[me,ge]=H.useState([]),[De,Pe]=H.useState(!1),[$e,Oe]=H.useState(!1),He=H.useRef(!0),ye=he=>{const Fe=new Date(i);he==="prev"?Fe.setMonth(Fe.getMonth()-1):Fe.setMonth(Fe.getMonth()+1),s(Fe)},Q=()=>`${["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()]} ${i.getFullYear()}`,lt=(he,Fe)=>{const Ge=new Date(Fe,he,1);s(Ge),L(!1)};H.useEffect(()=>(He.current=!0,()=>{He.current=!1}),[]);const Ye=n.filter(he=>{const Fe=new Date(he.date);return Fe.getMonth()===i.getMonth()&&Fe.getFullYear()===i.getFullYear()});H.useEffect(()=>{const he=Fe=>{console.log(" Table view received real-time update:",Fe.detail)};return window.addEventListener("rosterRealtimeUpdate",he),()=>window.removeEventListener("rosterRealtimeUpdate",he)},[]);const Me=async he=>{y(!0);const Fe=new Date().toISOString().split("T")[0];N(Fe);try{console.log(" Manual refresh triggered in table view"),await new Promise(Ge=>setTimeout(Ge,1e3)),w(new Date().toLocaleTimeString()),console.log(" Manual refresh completed")}catch(Ge){console.error("Manual refresh error:",Ge)}finally{y(!1),N(null)}};H.useEffect(()=>{if(window.disableAutoScroll){console.log(" TABLE TAB-SWITCH AUTO-SCROLL: Skipping due to PDF import in progress");return}if(console.log(" TABLE TAB-SWITCH AUTO-SCROLL: Effect triggered"),!F&&!e&&Ye.length>0){const he=new Date,Fe=i.getMonth()===he.getMonth()&&i.getFullYear()===he.getFullYear();if(console.log(" TABLE TAB-SWITCH AUTO-SCROLL: Should auto-scroll?",{hasTabSwitched:F,loading:e,entriesLength:Ye.length,isCurrentMonth:Fe}),Fe){const Ge=he.toISOString().split("T")[0],rt=Ye.find(Ke=>Ke.date===Ge);console.log(" TABLE TAB-SWITCH AUTO-SCROLL: Today entry found?",{todayEntry:!!rt,todayString:Ge}),rt&&(console.log(` TABLE TAB-SWITCH AUTO-SCROLL: Scrolling to today: ${Ge}`),setTimeout(()=>{const Ke=document.querySelector(`[data-date="${Ge}"]`)||document.querySelector(`tr[data-date="${Ge}"]`);Ke?(Ke.scrollIntoView({behavior:"smooth",block:"center"}),console.log(` TABLE TAB-SWITCH AUTO-SCROLL: Successfully scrolled to: ${Ge}`)):console.log(` TABLE TAB-SWITCH AUTO-SCROLL: Element not found for: ${Ge}`)},500))}T(!0)}},[e,Ye,i,F]),H.useEffect(()=>{console.log(" TABLE TAB-SWITCH: Component mounted, resetting tab switch flag"),T(!1)},[]),H.useEffect(()=>{const he=Fe=>{console.log(" Table view: Roster updated, refreshing data..."),r&&r()};return window.addEventListener("rosterUpdated",he),()=>window.removeEventListener("rosterUpdated",he)},[r]);const Ue=[...Ye].sort((he,Fe)=>new Date(he.date).getTime()-new Date(Fe.date).getTime()),ce=Ue.reduce((he,Fe)=>{const Ge=Fe.date;return he[Ge]||(he[Ge]=[]),he[Ge].push(Fe),he},{}),be=he=>{u(he),p(!0)},ke=he=>{if(!He.current){console.warn("Component unmounted, skipping loadEntries call");return}r&&r()},we=he=>{console.log(" SPECIAL DATE: Double tap detected on date:",he),se(he),Z("special"),ue(""),ge([]),ee(!0),re(""),Y("")},_e=he=>{console.log(" ADD STAFF: Long press detected on date:",he),se(he),Z("addStaff"),ue(""),ge([]),ee(!0),re(""),Y("")},Ie=()=>{console.log(" AUTH: Submit clicked with:",{authCode:ie,actionType:G,selectedSpecialDate:X});const he=mi(ie);if(!he||!Zs(ie)){Y(he?"Admin access required for special date marking":"Invalid authentication code");return}console.log(" AUTH: Validation successful, editor:",he),G==="special"&&X?(console.log(" AUTH: Opening special date modal for:",X),ee(!1),re(""),Y(""),setTimeout(()=>{console.log(" AUTH: Actually opening special date modal now"),J(!0)},100)):(ee(!1),Y(""))},Ae=async(he,Fe)=>{if(X){console.log(" SPECIAL DATE: Saving special date:",{date:X,isSpecial:he,info:Fe});try{const Ge=mi(ie)||"ADMIN";await QA(X,he?Fe.trim():"",Ge),r&&await r(),f(rt=>rt+1),console.log(" SPECIAL DATE: Saved successfully")}catch(Ge){throw console.error(" SPECIAL DATE: Save failed:",Ge),Ge}}},Je=()=>{console.log(" SPECIAL DATE: Closing modal"),J(!1),se(null),Z(null)},Xe=he=>{ge(Fe=>Fe.includes(he)?Fe.filter(Ge=>Ge!==he):[...Fe,he])},We=async()=>{if(!(!X||!te||!ie)){Pe(!0);try{const he=mi(ie);if(!he)return;const Ge=(ce[X]||[]).filter(It=>It.shift_type===te),rt=Ge.map(It=>It.assigned_name),Ke=me.filter(It=>!rt.includes(It)),dt=rt.filter(It=>!me.includes(It));for(const It of Ge)dt.includes(It.assigned_name)&&await cS(It.id);for(const It of Ke)await cy({date:X,shiftType:te,assignedName:It,changeDescription:`Added by ${he}`},he);r&&await r(),Le()}catch(he){console.error("Failed to update roster:",he),alert("Failed to update roster. Please try again.")}finally{Pe(!1)}}},Le=()=>{console.log(" AUTH: Closing modal"),ee(!1),re(""),Y(""),Z(null),se(null),ue(""),ge([])},pt=!X||!te?xr.filter(he=>he!=="ADMIN"):Da(xr.filter(he=>he!=="ADMIN")),wn=he=>{const Fe=new Date,Ge=Fe.getFullYear()+"-"+String(Fe.getMonth()+1).padStart(2,"0")+"-"+String(Fe.getDate()).padStart(2,"0");return he===Ge},_t=he=>{const Fe=new Date,Ge=Fe.getFullYear()+"-"+String(Fe.getMonth()+1).padStart(2,"0")+"-"+String(Fe.getDate()).padStart(2,"0");return he<Ge},Lt=he=>{const Fe=new Date,Ge=Fe.getFullYear()+"-"+String(Fe.getMonth()+1).padStart(2,"0")+"-"+String(Fe.getDate()).padStart(2,"0");return he>Ge},rr=he=>{const Fe=new Date(he),rt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][Fe.getDay()],Ke=Fe.getDate().toString().padStart(2,"0"),dt=(Fe.getMonth()+1).toString().padStart(2,"0"),It=Fe.getFullYear().toString().slice(-2);return{dayName:rt,dateString:`${Ke}-${dt}-${It}`}},ze=he=>{const Fe=ce[he]||[];for(const Ge of Fe)if(Ge.change_description&&Ge.change_description.includes("Special Date:")){const rt=Ge.change_description.match(/Special Date:\s*([^;]+)/);if(rt&&rt[1].trim())return rt[1].trim()}},At=he=>ze(he)!==void 0;return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-white rounded-lg mb-4 p-4 shadow-sm sticky top-0 z-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex items-center justify-center flex-shrink-0",children:c.jsx("button",{onClick:o,className:"p-1 bg-green-600 hover:bg-green-700 text-white rounded transition-colors duration-200",title:"Export to Calendar",children:c.jsx(Ys,{className:"w-3 h-3"})})}),c.jsx("div",{className:"flex items-center justify-center flex-1 min-w-0",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>ye("prev"),className:"p-2 rounded-lg hover:bg-gray-100 text-gray-600 hover:text-gray-800 transition-colors duration-200",title:"Previous month",children:c.jsx(Pw,{className:"w-5 h-5"})}),c.jsx(Cr,{className:"w-6 h-6 text-indigo-600 pointer-events-none"}),c.jsx("div",{className:"ml-2 relative",children:c.jsx("button",{onClick:()=>L(!0),disabled:x,className:"text-sm font-semibold text-gray-900 bg-transparent border-none outline-none cursor-pointer rounded px-2 py-1 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",style:{minWidth:"fit-content",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"140px",fontSize:window.innerWidth<=375?"12px":"14px"},children:Q()})}),c.jsx("button",{onClick:()=>ye("next"),className:"p-2 rounded-lg hover:bg-gray-100 text-gray-600 hover:text-gray-800 transition-colors duration-200",title:"Next month",children:c.jsx(Lw,{className:"w-5 h-5"})})]})}),c.jsx("div",{className:"flex items-center justify-center flex-shrink-0",children:c.jsxs("button",{onClick:()=>Me(),disabled:x,className:"p-2 rounded-lg text-gray-600 transition-colors duration-200 relative z-50 flex items-center justify-center",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent",position:"relative",zIndex:50,transform:"translate3d(0,0,0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",WebkitTransform:"translate3d(0,0,0)",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"},title:"Manual refresh",children:[c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",position:"relative"},children:c.jsx("svg",{style:{width:"18px",height:"18px",animation:x?"spin 1s linear infinite":"none",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"12px",height:"12px",position:"relative"},children:c.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:t==="connected"?"#10b981":t==="connecting"?"#f59e0b":t==="error"?"#ef4444":"#6b7280",animation:t==="connecting"?"pulse 1.5s ease-in-out infinite":"none",boxShadow:t==="connected"?"0 0 8px rgba(16, 185, 129, 0.8)":"none",backfaceVisibility:"hidden"}})})]})})]})}),e?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):Ue.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Cr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"No roster entries found"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"No entries available for this month"})]}):c.jsx("div",{className:"bg-white",style:{width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",overflowX:"hidden"},children:c.jsx("div",{style:{height:window.innerWidth>window.innerHeight?"60vh":"70vh",minHeight:"400px",maxHeight:"80vh",WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"auto"},children:c.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",tableLayout:"fixed"},children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{style:{position:"sticky",top:"-2px",zIndex:150,backgroundColor:"#000000",color:"white",padding:"8px",textAlign:"center",fontSize:"14px",fontWeight:"bold",border:"2px solid #374151",width:"15%"},children:"Date"}),c.jsx("th",{style:{position:"sticky",top:"-2px",zIndex:150,backgroundColor:"#000000",color:"white",padding:"8px",textAlign:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid #374151",width:"21.25%"},children:"9-4"}),c.jsx("th",{style:{position:"sticky",top:"-2px",zIndex:150,backgroundColor:"#000000",color:"white",padding:"8px",textAlign:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid #374151",width:"21.25%"},children:"12-10"}),c.jsx("th",{style:{position:"sticky",top:"-2px",zIndex:150,backgroundColor:"#000000",color:"white",padding:"8px",textAlign:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid #374151",width:"21.25%"},children:"4-10"}),c.jsx("th",{style:{position:"sticky",top:"-2px",zIndex:150,backgroundColor:"#000000",color:"white",padding:"8px",textAlign:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid #374151",width:"21.25%"},children:"N"})]})}),c.jsx("tbody",{children:Object.entries(ce).map(([he,Fe])=>c.jsxs("tr",{"data-date":he,style:{backgroundColor:wn(he)?"#bbf7d0":At(he)?"#fecaca":_t(he)?"#fef2f2":Lt(he)?"#f0fdf4":"#ffffff",background:wn(he)?"#bbf7d0":At(he)?"#fecaca":_t(he)?"#fef2f2":Lt(he)?"#f0fdf4":"#ffffff"},children:[c.jsx(xC,{date:he,isToday:wn(he),isPastDate:_t(he),isFutureDate:Lt(he),onDoublePress:()=>we(he),onLongPress:()=>_e(he),isSpecialDate:At(he)&&ze(he)!==void 0,specialDateInfo:ze(he)}),yg.map(Ge=>{const rt=Fe.filter(dt=>dt.shift_type===Ge),Ke=Da(rt.map(dt=>dt.assigned_name)).map(dt=>rt.find(It=>It.assigned_name===dt)).filter(Boolean);return c.jsxs("td",{style:{padding:"0",margin:"0",textAlign:"center",minHeight:"50px",border:"2px solid #374151",position:"relative",width:"21.25%",overflow:"hidden",cursor:"pointer"},children:[c.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:5,touchAction:"manipulation",backgroundColor:"transparent",border:"none",outline:"none"}}),c.jsxs("div",{className:"space-y-1 relative z-60",style:{minHeight:"50px",padding:"4px 2px"},children:[_t(he)&&rt.length>0&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:c.jsx("div",{className:"font-bold select-none",style:{fontSize:window.innerWidth>window.innerHeight?"clamp(1.5rem, 6vw, 3rem)":"clamp(3rem, 10vw, 6rem)",lineHeight:"1",color:"#fca5a5",opacity:.2,transform:"scale(1.5)"},children:"X"})}),Ke.map((dt,It)=>c.jsx(vC,{entry:dt,onUpdate:ke,onShowDetails:be,allEntriesForShift:Ke,isSpecialDate:At(he),specialDateInfo:ze(he)},dt.id))]})]},Ge)})]},he))})]})})}),q&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",overflow:"auto",overflowY:"auto",touchAction:"pan-y",WebkitOverflowScrolling:"touch"},onClick:he=>{he.target===he.currentTarget&&Le()},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{userSelect:"none",WebkitUserSelect:"none",maxHeight:"90vh",maxWidth:"28rem",display:"flex",flexDirection:"column",backgroundColor:"#ffffff",zIndex:2147483647,touchAction:"auto",overflow:"hidden",margin:"0"},onClick:he=>he.stopPropagation(),children:c.jsxs("div",{style:{padding:"24px"},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Authentication Required"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex space-x-3 mb-3",children:[0,1,2,3].map(he=>c.jsx("input",{type:$e?"text":"password",value:ie[he]||"",onChange:Fe=>{const Ge=Fe.target.value.toUpperCase();if(Ge.length<=1){const rt=ie.split("");if(rt[he]=Ge,re(rt.join("")),Ge&&he<3){const Ke=document.querySelector(`input[data-index="${he+1}"]`);Ke&&Ke.focus()}}},onKeyDown:Fe=>{if(Fe.key==="Backspace"&&!ie[he]&&he>0){const Ge=document.querySelector(`input[data-index="${he-1}"]`);Ge&&Ge.focus()}},"data-index":he,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:he===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},he))}),c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onTouchStart:()=>Oe(!0),onTouchEnd:()=>Oe(!1),onMouseDown:()=>Oe(!0),onMouseUp:()=>Oe(!1),onMouseLeave:()=>Oe(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:$e?c.jsx(kc,{className:"w-5 h-5"}):c.jsx(jc,{className:"w-5 h-5"})})})]})]}),M&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:M})}),G==="addStaff"&&c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Shift Type"}),c.jsxs("select",{value:te,onChange:he=>{if(ue(he.target.value),he.target.value&&X){const rt=(ce[X]||[]).filter(Ke=>Ke.shift_type===he.target.value).map(Ke=>Ke.assigned_name);ge(rt)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[c.jsx("option",{value:"",children:"Select shift type"}),yg.map(he=>c.jsx("option",{value:he,children:he},he))]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:Le,disabled:De,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:Ie,disabled:ie.length<4||!Zs(ie)||De||G==="addStaff"&&!te,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200",children:"Continue"})]})]})})}),document.body),G==="addStaff"&&X&&te&&ie&&!q&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxWidth:"28rem",maxHeight:"90vh",margin:"0",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsxs("div",{className:"border-b border-gray-200 flex-shrink-0",style:{padding:"24px",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Edit Staff Assignment"}),c.jsxs("p",{className:"text-sm text-gray-600 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[rr(X).dateString," (",new Date(X).toLocaleDateString("en-US",{weekday:"long"}),") - ",te]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",style:{padding:"24px",WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:c.jsx("div",{className:"space-y-3",children:pt.map(he=>c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("input",{type:"checkbox",checked:me.includes(he),onChange:()=>Xe(he),className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm font-medium text-gray-900 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:he})]},he))})}),c.jsx("div",{className:"border-t border-gray-200 flex-shrink-0",style:{padding:"24px",userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"flex space-x-33",children:[c.jsx("button",{onClick:Le,disabled:De,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Cancel"}),c.jsx("button",{onClick:We,disabled:De,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 flex items-center justify-center space-x-2 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:De?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Saving..."})]}):c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Save Changes"})})]})})]})}),document.body),U&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},onClick:he=>{he.target===he.currentTarget&&L(!1)},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{maxWidth:"28rem",userSelect:"none",WebkitUserSelect:"none"},onClick:he=>he.stopPropagation(),children:c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6 text-center",children:"Select Month and Year"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),c.jsx("select",{value:i.getMonth(),onChange:he=>{const Fe=parseInt(he.target.value);lt(Fe,i.getFullYear())},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((he,Fe)=>c.jsx("option",{value:Fe,children:he},Fe))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),c.jsx("select",{value:i.getFullYear(),onChange:he=>{const Fe=parseInt(he.target.value);lt(i.getMonth(),Fe)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center",children:Array.from({length:10},(he,Fe)=>new Date().getFullYear()-5+Fe).map(he=>c.jsx("option",{value:he,children:he},he))})]})]}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:()=>L(!1),className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})})]})})}),document.body),c.jsx(gC,{isOpen:O,date:X,currentSpecialInfo:{isSpecial:X?At(X):!1,info:X&&ze(X)||""},onSave:Ae,onClose:Je,authCode:ie}),c.jsx(pS,{isOpen:d,entry:l,onClose:()=>{p(!1),u(null)}})]})},bC=()=>Bn.filter(n=>n.name!=="ADMIN").map(n=>n.name).sort(),SC=({entry:n,onUpdate:e,onShowDetails:t,allEntriesForShift:r=[],isSpecialDate:i=!1,specialDateInfo:s})=>{const[o,a]=H.useState(!1),[l,u]=H.useState(""),[d,p]=H.useState(!1),[m,f]=H.useState(""),[x,y]=H.useState(!1),[_,w]=H.useState(!1),[b,N]=H.useState(!1);Vg.useEffect(()=>(d&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[d]);const C=T=>T.change_description&&T.change_description.includes("Name changed from")&&T.last_edited_by,A=T=>{if(!T.change_description)return!1;const O=T.change_description.match(/\(Original PDF: ([^)]+)\)/);if(O){let J=O[1].trim();return J.includes("(R")&&!J.includes("(R)")&&(J=J.replace("(R","(R)")),T.assigned_name===J}return!1},P=()=>n.text_color?n.text_color:A(n)?"#059669":C(n)?"#dc2626":"#000000",E=Ec({onLongPress:()=>{console.log(" Long press detected on entry:",n.id),p(!0)},onDoublePress:()=>{C(n)&&t&&n.last_edited_by!=="ADMIN"&&(console.log(" Double press detected on edited entry:",n.id),t(n))},delay:5e3}),j=()=>{if(!mi(l)){f("Invalid authentication code");return}p(!1),a(!0),f("")},D=async T=>{await U(T)},U=async(T,O)=>{if(T===n.assigned_name){a(!1);return}y(!0),w(!0);try{const J=mi(l);if(!J)return;const X=await lS(n.id,{date:n.date,shiftType:n.shift_type,assignedName:T,changeDescription:`Name changed from "${n.assigned_name}" to "${T}"`,textColor:O},J);e&&e(X),a(!1),u("")}catch(J){console.error("Failed to update entry:",J),alert("Failed to update entry. Please try again.")}finally{y(!1),setTimeout(()=>w(!1),1e3)}},L=()=>{p(!1),u(""),f("")},F=()=>{a(!1),u("")};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{...E,style:{padding:"4px 2px",margin:0,textAlign:"center",fontSize:window.innerWidth>window.innerHeight?"10px":"12px",fontWeight:"500",color:P(),cursor:"pointer",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",MozUserSelect:"none",msUserSelect:"none",outline:"none",background:"transparent",width:"100%",maxWidth:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"32px",position:"relative",zIndex:60,animation:_?"goldenPulse 1.2s ease-in-out infinite":i&&s&&s.trim()?"pulse 2s ease-in-out infinite":"none",transform:_?"scale(1.05)":"scale(1)",transition:"all 0.4s ease-out",boxShadow:_?"0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4), inset 0 0 10px rgba(255, 215, 0, 0.2)":"none",backgroundColor:_?"rgba(255, 215, 0, 0.15)":"transparent",borderRadius:_?"6px":"0",border:_?"2px solid #ffd700":"none"},children:[c.jsx(mr,{text:n.assigned_name,className:"text-center w-full",style:{color:P(),fontWeight:"500",fontSize:"inherit",textAlign:"center",width:"100%",border:"none",outline:"none",filter:_?"brightness(1.2) contrast(1.1)":"none",textShadow:_?"0 0 8px rgba(255, 215, 0, 0.6)":"none"}}),_&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{position:"absolute",top:"2px",left:"2px",width:"4px",height:"4px",backgroundColor:"#ffd700",borderRadius:"50%",animation:"sparkle1 2s ease-in-out infinite",zIndex:65}}),c.jsx("div",{style:{position:"absolute",bottom:"2px",right:"8px",width:"3px",height:"3px",backgroundColor:"#ffed4e",borderRadius:"50%",animation:"sparkle2 2.5s ease-in-out infinite",zIndex:65}}),c.jsx("div",{style:{position:"absolute",top:"50%",left:"1px",width:"2px",height:"2px",backgroundColor:"#fbbf24",borderRadius:"50%",animation:"sparkle3 1.8s ease-in-out infinite",zIndex:65}})]})]}),c.jsx("style",{jsx:!0,children:`
        @keyframes goldenPulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4);
          }
          50% {
            opacity: 0.9;
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 215, 0, 1), 0 0 60px rgba(255, 215, 0, 0.6);
          }
        }
        
        @keyframes goldenDot {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
            box-shadow: 0 0 8px rgba(255, 215, 0, 0.8);
          }
          50% {
            opacity: 0.7;
            transform: scale(1.3);
            box-shadow: 0 0 15px rgba(255, 215, 0, 1);
          }
        }
        
        @keyframes sparkle1 {
          0%, 100% {
            opacity: 0;
            transform: scale(0) rotate(0deg);
          }
          25% {
            opacity: 1;
            transform: scale(1) rotate(90deg);
          }
          50% {
            opacity: 0.8;
            transform: scale(1.2) rotate(180deg);
          }
          75% {
            opacity: 0.6;
            transform: scale(0.8) rotate(270deg);
          }
        }
        
        @keyframes sparkle2 {
          0%, 100% {
            opacity: 0;
            transform: scale(0);
          }
          30% {
            opacity: 1;
            transform: scale(1.5);
          }
          60% {
            opacity: 0.7;
            transform: scale(1);
          }
        }
        
        @keyframes sparkle3 {
          0%, 100% {
            opacity: 0;
            transform: scale(0) translateY(0);
          }
          40% {
            opacity: 1;
            transform: scale(1.8) translateY(-2px);
          }
          80% {
            opacity: 0.5;
            transform: scale(1) translateY(0);
          }
        }
      `}),d&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center p-4",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999999999,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",pointerEvents:"auto"},onWheel:T=>T.preventDefault(),onScroll:T=>T.preventDefault(),onClick:T=>{T.preventDefault(),T.stopPropagation(),T.target===T.currentTarget&&L()},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Authentication Required"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex space-x-3 mb-3",children:[0,1,2,3].map(T=>c.jsx("input",{type:b?"text":"password",value:l[T]||"",onChange:O=>{const J=O.target.value.toUpperCase();if(J.length<=1){const X=l.split("");if(X[T]=J,u(X.join("")),J&&T<3){const se=document.querySelector(`input[data-index="${T+1}"]`);se&&se.focus()}}},onKeyDown:O=>{if(O.key==="Backspace"&&!l[T]&&T>0){const J=document.querySelector(`input[data-index="${T-1}"]`);J&&J.focus()}},"data-index":T,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:T===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},T))}),l.length===4&&c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onTouchStart:()=>N(!0),onTouchEnd:()=>N(!1),onMouseDown:()=>N(!0),onMouseUp:()=>N(!1),onMouseLeave:()=>N(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:b?c.jsx(kc,{className:"w-5 h-5"}):c.jsx(jc,{className:"w-5 h-5"})})})]})]}),m&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:m})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:L,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:j,disabled:l.length<4,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200",children:"Continue"})]})]})})}),document.body),c.jsx(mS,{isOpen:o,entry:n,availableStaff:bC(),allEntriesForShift:r,onSelectStaff:D,onSelectStaffWithColor:U,onClose:F,authCode:l})]})},_C=({date:n,onLongPress:e,isToday:t,realtimeStatus:r="disconnected",onManualRefresh:i,isRefreshing:s=!1})=>{const o=Ec({onLongPress:e,delay:2500}),a=l=>{const u=new Date(l),d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=d[u.getDay()],f=u.getDate(),x=p[u.getMonth()],y=u.getFullYear(),_=`${m} ${f}-${x}-${y}`;return t(l)?`${_} (Today)`:_};return c.jsx("div",{...o,style:{position:"sticky",top:"0px",zIndex:150,padding:window.innerWidth>window.innerHeight?"8px 12px":"16px 16px",margin:"0",border:"none",fontSize:window.innerWidth>window.innerHeight?"14px":"18px",fontWeight:"bold",textAlign:"center",color:"white",backgroundColor:t(n)?"#059669":"#4f46e5",background:t(n)?"#059669":"#4f46e5",opacity:1,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",cursor:"pointer",touchAction:"manipulation",width:"100%",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",overflow:"hidden",contain:"layout style paint"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",position:"relative",minHeight:window.innerWidth>window.innerHeight?"20px":"24px",overflow:"hidden"},children:[c.jsx("div",{style:{display:"flex",alignItems:"center",flexShrink:0,width:window.innerWidth>window.innerHeight?"20px":"24px",justifyContent:"center"},children:c.jsx(Cr,{style:{width:window.innerWidth>window.innerHeight?"16px":"20px",height:window.innerWidth>window.innerHeight?"16px":"20px",color:"white"}})}),c.jsxs("div",{style:{flex:1,textAlign:"center",fontWeight:"bold",fontSize:window.innerWidth>window.innerHeight?"14px":"16px",color:"white",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:window.innerWidth>window.innerHeight?"20px":"24px"},children:[c.jsx("span",{children:a(n)}),i&&c.jsxs("button",{onClick:l=>{l.stopPropagation(),i(n)},disabled:s,style:{background:"transparent",border:"none",padding:"2px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",opacity:s?.7:1,touchAction:"manipulation",WebkitTapHighlightColor:"transparent",flexShrink:0,width:"32px",height:"24px",justifyContent:"center",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden"},title:r==="connected"?"Manual refresh (Real-time active)":r==="connecting"?"Manual refresh (Connecting...)":r==="error"?"Manual refresh (Real-time failed)":"Manual refresh (Real-time disconnected)",children:[c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",position:"relative"},children:c.jsx("svg",{style:{width:"18px",height:"18px",animation:s?"spin 1s linear infinite":"none",transform:"translate3d(0,0,0)",backfaceVisibility:"hidden"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"12px",height:"12px",position:"relative"},children:c.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:r==="connected"?"#10b981":r==="connecting"?"#f59e0b":r==="error"?"#ef4444":"#6b7280",animation:r==="connecting"?"pulse 1.5s ease-in-out infinite":"none",boxShadow:r==="connected"?"0 0 8px rgba(16, 185, 129, 0.8)":"none",backfaceVisibility:"hidden"}})})]})]}),c.jsx("div",{style:{width:window.innerWidth>window.innerHeight?"20px":"24px",flexShrink:0,height:window.innerWidth>window.innerHeight?"20px":"24px"}})]})})},NC=({entries:n,loading:e,realtimeStatus:t="disconnected",onRefresh:r,selectedDate:i,onDateChange:s})=>{H.useEffect(()=>{const ce=be=>{const{month:ke,year:we}=be.detail;console.log(` RosterCardView: Received navigation event to ${ke+1}/${we}`);const _e=new Date(we,ke,1);s(_e)};return window.addEventListener("navigateToMonth",ce),()=>window.removeEventListener("navigateToMonth",ce)},[s]);const[o,a]=H.useState(null),[l,u]=H.useState(!1),[d,p]=H.useState(null),[m,f]=H.useState(!1),[x,y]=H.useState(""),[_,w]=H.useState(""),[b,N]=H.useState(""),[C,A]=H.useState([]),[P,E]=H.useState(!1),[j,D]=H.useState(0),[U,L]=H.useState(!1),[F,T]=H.useState(""),[O,J]=H.useState(null),[X,se]=H.useState(!1),q=H.useRef(!0),ee=n.filter(ce=>{const be=new Date(ce.date);return be.getMonth()===i.getMonth()&&be.getFullYear()===i.getFullYear()});H.useEffect(()=>(q.current=!0,()=>{q.current=!1}),[]),H.useEffect(()=>{const ce=be=>{console.log(" Card view received real-time update:",be.detail)};return window.addEventListener("rosterRealtimeUpdate",ce),()=>window.removeEventListener("rosterRealtimeUpdate",ce)},[]);const ie=async ce=>{L(!0);const be=ce||new Date().toISOString().split("T")[0];J(be);try{console.log(" Manual refresh triggered in card view"),await new Promise(ke=>setTimeout(ke,1e3)),T(new Date().toLocaleTimeString()),console.log(" Manual refresh completed")}catch(ke){console.error("Manual refresh error:",ke)}finally{L(!1),J(null)}};H.useEffect(()=>{const ce=()=>{console.log(" Card view: Orientation change detected"),console.log(" Card view: Orientation settled")};return window.addEventListener("orientationchange",ce),()=>window.removeEventListener("orientationchange",ce)},[]),H.useEffect(()=>{if(window.disableAutoScroll){console.log(" CARD TAB-SWITCH AUTO-SCROLL: Skipping due to PDF import in progress");return}if(console.log(" CARD TAB-SWITCH AUTO-SCROLL: Effect triggered"),!X&&!e&&ee.length>0){const ce=new Date,be=i.getMonth()===ce.getMonth()&&i.getFullYear()===ce.getFullYear();if(console.log(" CARD TAB-SWITCH AUTO-SCROLL: Should auto-scroll?",{hasTabSwitched:X,loading:e,entriesLength:ee.length,isCurrentMonth:be}),be){const ke=ce.toISOString().split("T")[0],we=ee.find(_e=>_e.date===ke);console.log(" CARD TAB-SWITCH AUTO-SCROLL: Today entry found?",{todayEntry:!!we,todayString:ke}),we&&(console.log(` CARD TAB-SWITCH AUTO-SCROLL: Scrolling to today: ${ke}`),setTimeout(()=>{const _e=document.querySelector(`[data-date="${ke}"]`);_e?(_e.scrollIntoView({behavior:"smooth",block:"center"}),console.log(` CARD TAB-SWITCH AUTO-SCROLL: Successfully scrolled to: ${ke}`)):console.log(` CARD TAB-SWITCH AUTO-SCROLL: Element not found for: ${ke}`)},500))}se(!0)}},[e,ee,i,X]),H.useEffect(()=>{console.log(" CARD TAB-SWITCH: Component mounted, resetting tab switch flag"),se(!1)},[]),H.useEffect(()=>{const ce=be=>{console.log(" Card view: Roster updated, refreshing data..."),r&&r()};return window.addEventListener("rosterUpdated",ce),()=>window.removeEventListener("rosterUpdated",ce)},[r]);const re=[...ee].sort((ce,be)=>new Date(ce.date).getTime()-new Date(be.date).getTime()),M=re.reduce((ce,be)=>{const ke=be.date;return ce[ke]||(ce[ke]=[]),ce[ke].push(be),ce},{}),Y=ce=>{const be=ce.map(_e=>_e.assigned_name),ke=Da(be),we=new Map;return ce.forEach(_e=>{we.set(_e.assigned_name,_e)}),ke.map(_e=>we.get(_e)).filter(Boolean)},G=ce=>({"Morning Shift (9-4)":"bg-red-100 text-red-800 border-red-200","Evening Shift (4-10)":"bg-blue-100 text-blue-800 border-blue-200","Saturday Regular (12-10)":"bg-gray-100 text-gray-800 border-gray-200","Night Duty":"bg-green-100 text-green-800 border-green-200","Sunday/Public Holiday/Special":"bg-purple-100 text-purple-800 border-purple-200"})[ce]||"bg-gray-100 text-gray-800 border-gray-200",Z=ce=>{const be=new Date(ce),ke=be.getDate().toString().padStart(2,"0"),we=(be.getMonth()+1).toString().padStart(2,"0"),_e=be.getFullYear().toString().slice(-2);return`${ke}-${we}-${_e}`},te=ce=>{const be={};return ce.forEach(ke=>{be[ke.shift_type]||(be[ke.shift_type]=[]),be[ke.shift_type].push(ke)}),Object.keys(be).forEach(ke=>{be[ke]=Y(be[ke])}),be},ue=["Morning Shift (9-4)","Saturday Regular (12-10)","Evening Shift (4-10)","Night Duty","Sunday/Public Holiday/Special"],me=ce=>{a(ce),u(!0)},ge=ce=>{if(!q.current){console.warn("Component unmounted, skipping loadEntries call");return}r&&r(),q.current&&r&&r()},De=()=>{const ce=mi(x);if(!ce||!Zs(x)){w(ce?"Admin access required for date editing":"Invalid authentication code");return}if(f(!1),w(""),d&&b){const we=(M[d]||[]).filter(_e=>_e.shift_type===b).map(_e=>_e.assigned_name);A(we)}},Pe=ce=>{A(be=>be.includes(ce)?be.filter(ke=>ke!==ce):[...be,ce])},$e=async()=>{if(!(!d||!b||!x)){E(!0);try{const ce=mi(x);if(!ce)return;const ke=(M[d]||[]).filter(Ae=>Ae.shift_type===b),we=ke.map(Ae=>Ae.assigned_name),_e=C.filter(Ae=>!we.includes(Ae)),Ie=we.filter(Ae=>!C.includes(Ae));for(const Ae of ke)Ie.includes(Ae.assigned_name)&&await cS(Ae.id);for(const Ae of _e)await cy({date:d,shiftType:b,assignedName:Ae,changeDescription:`Added by ${ce}`},ce);r&&await r(),D(Ae=>Ae+1),window.dispatchEvent(new CustomEvent("rosterUpdated",{detail:{type:"bulk_edit",date:d,shift:b,staffAdded:_e,staffRemoved:Ie}})),Oe()}catch(ce){console.error("Failed to update roster:",ce),alert("Failed to update roster. Please try again.")}finally{E(!1)}}},Oe=()=>{p(null),N(""),A([]),y(""),w(""),f(!1)},He=ce=>{const be=new Date,ke=be.getFullYear()+"-"+String(be.getMonth()+1).padStart(2,"0")+"-"+String(be.getDate()).padStart(2,"0");return ce===ke},ye=ce=>{const be=new Date,ke=be.getFullYear()+"-"+String(be.getMonth()+1).padStart(2,"0")+"-"+String(be.getDate()).padStart(2,"0");return ce<ke},Q=ce=>{const be=M[ce]||[];for(const ke of be)if(ke.change_description&&ke.change_description.includes("Special Date:")){const we=ke.change_description.match(/Special Date:\s*([^;]+)/);if(we&&we[1].trim())return we[1].trim()}return null},lt=ce=>Q(ce)!==null,Ye=ce=>ce.replace(/\(R\)$/,"").trim(),Ue=(()=>{if(!d||!b){const Ae=[],Je=new Set;return[...xr].reverse().forEach(Xe=>{const We=Ye(Xe);Je.has(We)||(Je.add(We),Ae.push(Xe))}),Da(Ae.reverse())}const ke=(M[d]||[]).filter(Ae=>Ae.shift_type===b).map(Ae=>Ae.assigned_name);let we=[...xr].filter(Ae=>Ae!=="ADMIN");we=we.filter(Ae=>!ke.includes(Ae)),ke.forEach(Ae=>{if(Ae.includes("(R)")){const Je=Ye(Ae);we=we.filter(Xe=>Xe!==Je)}else{const Je=`${Ae}(R)`;we=we.filter(Xe=>Xe!==Je)}});const _e=[],Ie=new Set;return we.reverse().forEach(Ae=>{const Je=Ye(Ae);Ie.has(Je)||(Ie.add(Je),_e.push(Ae))}),Da(_e.reverse())})();return c.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",style:{height:window.innerWidth>window.innerHeight?"60vh":"70vh",minHeight:"400px",maxHeight:"80vh"},children:[e?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):re.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Cr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 text-lg font-medium",children:e?"Loading roster entries...":"No roster entries found"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:e?"Please wait while we fetch the data":"No entries available"})]}):c.jsx("div",{className:"h-full overflow-y-auto",style:{height:"100%",WebkitOverflowScrolling:"touch"},children:Object.entries(M).map(([ce,be])=>{const ke=te(be);return c.jsxs("div",{"data-date":ce,children:[c.jsx(_C,{date:ce,onLongPress:()=>{p(ce),f(!0)},isToday:He,realtimeStatus:t,onManualRefresh:()=>ie(ce),isRefreshing:U&&O===ce}),c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:window.innerWidth>window.innerHeight?"repeat(4, 1fr)":"repeat(3, 1fr)",padding:window.innerWidth>window.innerHeight?"8px":"16px"},children:ue.map(we=>{const _e=ke[we];return!_e||_e.length===0?null:c.jsxs("div",{className:"bg-white border border-gray-200 rounded-md overflow-hidden shadow-sm min-w-0 flex-1 relative",children:[c.jsx("div",{className:`text-center font-bold ${G(we)}`,style:{padding:window.innerWidth>window.innerHeight?"4px":"8px",fontSize:window.innerWidth>window.innerHeight?"10px":"12px"},children:c.jsx(mr,{text:we==="Morning Shift (9-4)"?"Shift 9-4":we==="Saturday Regular (12-10)"?"Shift 12-10":we==="Evening Shift (4-10)"?"Shift 4-10":we==="Night Duty"?"Night Duty":we==="Sunday/Public Holiday/Special"?"Special 9-4":we,className:"font-bold"})}),c.jsxs("div",{className:"space-y-1 relative",style:{zIndex:30,minHeight:window.innerWidth>window.innerHeight?"60px":"80px",position:"relative",padding:window.innerWidth>window.innerHeight?"4px":"8px"},children:[ye(ce)&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:c.jsx("div",{className:"font-bold select-none",style:{fontSize:window.innerWidth>window.innerHeight?"clamp(1.5rem, 6vw, 3rem)":"clamp(3rem, 10vw, 6rem)",lineHeight:"1",color:"#fca5a5",opacity:.2,transform:"scale(1.5)"},children:"X"})}),_e.map((Ie,Ae)=>c.jsx("div",{className:"relative",style:{zIndex:30},children:c.jsx(SC,{entry:Ie,onShowDetails:me,onUpdate:ge,allEntriesForShift:_e,isSpecialDate:lt(ce),specialDateInfo:Q(ce)})},Ie.id))]})]},we)})})]},ce)})}),c.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse {
          0%, 100% {
            opacity: 0.8;
            transform: scale(1);
          }
          50% {
            opacity: 1;
            transform: scale(1.1);
          }
        }
        @keyframes scroll-text {
          0% { transform: translateX(0%); }
          25% { transform: translateX(0%); }
          75% { transform: translateX(-100%); }
          100% { transform: translateX(-100%); }
        }
      `}),m&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:window.innerWidth>window.innerHeight?"flex-start":"center",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"8px":"16px",paddingTop:window.innerWidth>window.innerHeight?"4px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{maxWidth:window.innerWidth>window.innerHeight?"90vw":"28rem",maxHeight:window.innerWidth>window.innerHeight?"95vh":"none",margin:window.innerWidth>window.innerHeight?"4px 0":"16px 0"},children:c.jsxs("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px"},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Authentication Required"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex space-x-3 mb-3",children:[0,1,2,3].map(ce=>c.jsx("input",{type:showPassword?"text":"password",value:x[ce]||"",onChange:be=>{const ke=be.target.value.toUpperCase();if(ke.length<=1){const we=x.split("");if(we[ce]=ke,y(we.join("")),ke&&ce<3){const _e=document.querySelector(`input[data-index="${ce+1}"]`);_e&&_e.focus()}}},onKeyDown:be=>{if(be.key==="Backspace"&&!x[ce]&&ce>0){const ke=document.querySelector(`input[data-index="${ce-1}"]`);ke&&ke.focus()}},"data-index":ce,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:ce===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off"},ce))}),c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onTouchStart:()=>setShowPassword(!0),onTouchEnd:()=>setShowPassword(!1),onMouseDown:()=>setShowPassword(!0),onMouseUp:()=>setShowPassword(!1),onMouseLeave:()=>setShowPassword(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:showPassword?c.jsx(EyeOff,{className:"w-5 h-5"}):c.jsx(Eye,{className:"w-5 h-5"})})})]})]}),_&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:_})}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Shift Type"}),c.jsxs("select",{value:b,onChange:ce=>N(ce.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[c.jsx("option",{value:"",children:"Select shift type"}),yg.map(ce=>c.jsx("option",{value:ce,children:ce},ce))]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:Oe,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:De,disabled:x.length<4||!b||!Zs(x),className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200",children:"Continue"})]})]})})}),document.body),d&&b&&x&&!m&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:window.innerWidth>window.innerHeight?"flex-start":"center",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"8px":"16px",paddingTop:window.innerWidth>window.innerHeight?"4px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxWidth:window.innerWidth>window.innerHeight?"90vw":"28rem",maxHeight:window.innerWidth>window.innerHeight?"95vh":"90vh",margin:window.innerWidth>window.innerHeight?"4px 0":"16px 0",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsxs("div",{className:"border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Edit Staff Assignment"}),c.jsxs("p",{className:"text-sm text-gray-600 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[Z(d)," (",new Date(d).toLocaleDateString("en-US",{weekday:"long"}),") - ",b]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:c.jsx("div",{className:"space-y-3",children:Ue.map(ce=>c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:[c.jsx("input",{type:"checkbox",checked:C.includes(ce),onChange:()=>Pe(ce),className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm font-medium text-gray-900 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:ce})]},ce))})}),c.jsx("div",{className:"border-t border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"12px":"24px",userSelect:"none",WebkitUserSelect:"none"},children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:Oe,disabled:P,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Cancel"}),c.jsx("button",{onClick:$e,disabled:P,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 flex items-center justify-center space-x-2 select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:P?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Saving..."})]}):c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Save Changes"})})]})})]})}),document.body),c.jsx(pS,{isOpen:l,entry:o,onClose:()=>{u(!1),a(null)}})]})},kC=({entries:n,loading:e,selectedDate:t})=>{const[r,i]=H.useState("all"),[s,o]=H.useState("all"),[a,l]=H.useState(0);H.useEffect(()=>{const b=N=>{console.log(" Log view received real-time update:",N.detail),l(C=>C+1)};return window.addEventListener("rosterRealtimeUpdate",b),()=>window.removeEventListener("rosterRealtimeUpdate",b)},[]);const u=t?n.filter(b=>{const N=new Date(b.date);return N.getMonth()===t.getMonth()&&N.getFullYear()===t.getFullYear()}):n,d=u.filter(b=>b.change_description&&(b.change_description==="Imported from PDF"||b.change_description.includes("Saturday 4-10 converted to 12-10"))||b.last_edited_by==="ADMIN"?!1:s==="nameChanges"?b.change_description&&b.change_description.includes("Name changed from")&&b.change_description.includes(" to "):b.change_description||b.last_edited_by),m=[...d.filter(b=>r==="all"?!0:b.last_edited_by===r)].sort((b,N)=>{const C=D=>{if(!D)return new Date(0);try{if(D.includes("-")&&D.includes(" ")){const[L,F]=D.split(" "),[T,O,J]=L.split("-"),[X,se,q]=(F||"00:00:00").split(":");return new Date(parseInt(J),parseInt(O)-1,parseInt(T),parseInt(X||"0"),parseInt(se||"0"),parseInt(q||"0"))}const U=new Date(D);return isNaN(U.getTime())?new Date(0):U}catch(U){return console.warn("Failed to parse timestamp:",D,U),new Date(0)}},A=D=>D.last_edited_at?C(D.last_edited_at):D.created_at?C(D.created_at):new Date,P=A(b),j=A(N).getTime()-P.getTime();return j===0?N.id.localeCompare(b.id):j}),x=(()=>{const b=new Set;return u.forEach(N=>{N.last_edited_by&&N.last_edited_by!=="ADMIN"&&N.last_edited_by!=="PDF Import"&&b.add(N.last_edited_by)}),Array.from(b).sort()})(),y=b=>({"Morning Shift (9-4)":"text-red-600","Evening Shift (4-10)":"text-blue-600","Saturday Regular (12-10)":"text-gray-600","Night Duty":"text-green-600","Sunday/Public Holiday/Special":"text-purple-600"})[b]||"text-gray-600",_=b=>{try{const[N,C]=b.split(" "),[A,P,E]=N.split("-"),[j,D,U]=C.split(":"),L=new Date(parseInt(E),parseInt(P)-1,parseInt(A),parseInt(j),parseInt(D),parseInt(U||"0")),F=`${A}-${P}-${E}`,T=`${j}h${D}`;return`${F} at ${T}`}catch{return b}},w=b=>{const N=new Date(b),C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],P=C[N.getDay()],E=N.getDate().toString().padStart(2,"0"),j=A[N.getMonth()],D=N.getFullYear();return`${P} ${E}-${j}-${D}`};return c.jsxs("div",{className:"bg-white rounded-lg",children:[c.jsx("div",{className:"p-2 sm:p-4 border-b border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ns,{className:"w-5 h-5 text-gray-600"}),c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),c.jsxs("select",{value:s,onChange:b=>o(b.target.value),className:"px-2 py-1 sm:px-3 sm:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[c.jsxs("option",{value:"all",children:["All Roster Edits",(()=>{const b=u.filter(N=>{var C;return(N.change_description||N.last_edited_by)&&!(N.change_description==="Imported from PDF"||(C=N.change_description)!=null&&C.includes("Saturday 4-10 converted to 12-10"))&&N.last_edited_by!=="ADMIN"}).length;return b>0?` (${b})`:""})()]}),c.jsxs("option",{value:"nameChanges",children:["Name Changes Only",(()=>{const b=u.filter(N=>{var C;return(C=N.change_description)==null?void 0:C.includes("Name changed from")}).length;return b>0?` (${b})`:""})()]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Wr,{className:"w-5 h-5 text-gray-600"}),c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Staff:"}),c.jsxs("select",{value:r,onChange:b=>i(b.target.value),className:"px-2 py-1 sm:px-3 sm:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm flex-1 sm:flex-none",children:[c.jsxs("option",{value:"all",children:["All Staff",d.length>0?` (${d.length} entries)`:""]}),x.map(b=>c.jsx("option",{value:b,children:b},b))]})]})]})}),c.jsx("div",{className:"overflow-y-auto",children:e?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):m.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(ns,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 text-lg font-medium",children:r==="all"?s==="all"?"No roster edits found":"No name changes found":`No ${s==="all"?"edits":"name changes"} found for ${r}`}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:r==="all"?s==="all"?"No activity to display":'Try selecting "All Roster Edits" to see more activity':"Try selecting a different staff member or filter type"})]}):c.jsx("div",{className:"divide-y divide-gray-100",children:m.map((b,N)=>c.jsx("div",{className:"p-2 sm:p-4 hover:bg-gray-50 transition-colors duration-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"flex-shrink-0 mt-1",children:c.jsx("div",{className:`w-3 h-3 rounded-full ${b.shift_type==="Saturday Regular (12-10)"?"bg-gray-600":y(b.shift_type).replace("text-","bg-")}`})}),c.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[c.jsx("div",{className:"w-full overflow-hidden",children:c.jsx(mr,{className:"w-full",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap",children:[c.jsx(Cr,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),c.jsx("span",{className:"font-medium text-gray-900",children:w(b.date)}),c.jsx("span",{className:`font-medium ${y(b.shift_type)}`,children:mC(b.shift_type)})]})})}),(()=>{var A,P;const C=Cg(b.change_description||"",b.assigned_name);return C.isNameChange?c.jsx("div",{className:"w-full overflow-hidden",children:c.jsx("div",{className:"w-full overflow-hidden",children:c.jsx(mr,{text:"",className:"w-full",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap",children:[c.jsxs("div",{className:"flex items-center space-x-1 bg-red-100 px-2 py-1 rounded-lg border border-red-200 flex-shrink-0",children:[c.jsx(Wr,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-red-700 font-semibold line-through text-xs",children:C.oldName})]}),c.jsx(SN,{className:"w-6 h-6 text-black bg-white rounded-full p-1 border-2 border-gray-300 shadow-md flex-shrink-0"}),c.jsxs("div",{className:"flex items-center space-x-1 bg-green-100 px-2 py-1 rounded-lg border border-green-200 flex-shrink-0",children:[c.jsx(Wr,{className:"w-4 h-4 text-green-600"}),c.jsx("span",{className:"text-green-700 font-semibold text-xs",children:C.newName})]})]})})})}):c.jsx("div",{className:"w-full overflow-hidden",children:c.jsx(mr,{className:"w-full",children:c.jsxs("div",{className:"flex items-center space-x-2 whitespace-nowrap",children:[c.jsx(Wr,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),c.jsx("span",{className:"text-gray-900 font-medium",children:b.assigned_name}),c.jsx("span",{className:"text-gray-500",children:(A=b.change_description)!=null&&A.includes("Added by")?"was added to":(P=b.change_description)!=null&&P.includes("Removed by")?"was removed from":"was assigned to"}),c.jsx("span",{className:`font-medium ${y(b.shift_type)}`,children:b.shift_type})]})})})})(),b.change_description&&(Cg(b.change_description,b.assigned_name).isNameChange?null:c.jsx("div",{className:"w-full overflow-hidden",children:c.jsx(mr,{className:"w-full",children:c.jsxs("div",{className:"text-xs text-gray-700 whitespace-nowrap",children:[c.jsx("span",{className:"font-medium",children:"Note:"})," ",b.change_description]})})})),c.jsx("div",{className:"w-full overflow-hidden",children:b.last_edited_by&&c.jsx(mr,{className:"w-full",children:c.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 whitespace-nowrap",children:[c.jsx(Wr,{className:"w-3 h-3 text-blue-600 flex-shrink-0"}),c.jsxs("span",{className:"text-blue-700 font-medium",children:["Modified by ",b.last_edited_by]}),b.last_edited_at&&c.jsxs(c.Fragment,{children:[c.jsx(O1,{className:"w-3 h-3 text-gray-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700 font-medium",children:_(b.last_edited_at)})]})]})})})]})]})},b.id))})}),!e&&m.length>0&&c.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:c.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Showing ",m.length," ",s==="all"?"roster edit":"name change"," ",m.length===1?"entry":"entries",r!=="all"&&` for ${r}`," (sorted by latest edit first)"]})})]})};class jC{constructor(){Ut(this,"pdfjsLib",null)}async initialize(){if(!this.pdfjsLib)try{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",document.head.appendChild(e),await new Promise((t,r)=>{e.onload=()=>{this.pdfjsLib=window.pdfjsLib,this.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",t(void 0)},e.onerror=r})}catch{throw new Error("Failed to load PDF.js library")}}async loadPDF(e){await this.initialize();const t=await e.arrayBuffer();return await this.pdfjsLib.getDocument({data:t}).promise}async extractTextFromPage(e){const t=e.getViewport({scale:1}),i=(await e.getTextContent()).items.map(s=>({text:s.str.trim(),x:s.transform[4],y:t.height-s.transform[5]})).filter(s=>s.text.length>0);return console.log(` Extracted ${i.length} text items from page`),i}}class AC{parsePageAsBoxes(e){const t=[],r=this.findAllStaffNames(e);for(let i=0;i<r.length;i++){const s=r[i],a=this.findDateAboveStaff(e,s)||null,u=this.findShiftInFirstColumn(e,s)||null;t.push({date:a,shiftType:u,assignedName:s.name})}return t}findAllStaffNames(e){const t=[];for(const r of e){const i=this.findMatchingStaffName(r.text);i?t.push({name:i,x:r.x,y:r.y}):this.isPotentialRemarksText(r.text)}return t}isPotentialRemarksText(e){const t=e.toLowerCase();return["public","holiday","cyclone","testing","working","fine","emergency","special","event","celebration","festival"].some(i=>t.includes(i))||e.includes("*")||/^[A-Za-z\s]{10,}/.test(e)}findDateAboveStaff(e,t){const r=e.filter(i=>i.y<t.y&&Math.abs(i.x-t.x)<50);r.sort((i,s)=>{const o=Math.sqrt(Math.pow(t.y-i.y,2)+Math.pow(t.x-i.x,2)),a=Math.sqrt(Math.pow(t.y-s.y,2)+Math.pow(t.x-s.x,2));return o-a});for(const i of r){const s=this.extractDateFromText(i.text);if(s)return s.date}return null}findShiftInFirstColumn(e,t){const i=e.map(a=>a.x).sort((a,l)=>a-l)[0],s=i+100,o=e.filter(a=>a.x>=i&&a.x<=s&&Math.abs(a.y-t.y)<30);o.sort((a,l)=>{const u=Math.abs(t.y-a.y),d=Math.abs(t.y-l.y);return u-d});for(const a of o){const l=this.identifyShiftTypeFromText(a.text);if(l)return l}return null}extractDateFromText(e){const t=e.trim();console.log(` DATE DEBUG: Analyzing text: "${t}"`);const r=/^(\d{1,2})\s+(\d{1,2})\s+(\d{4})$/,i=t.match(r);if(i){const[,U,L,F]=i,T=`${F}-${L.padStart(2,"0")}-${U.padStart(2,"0")}`,O=new Date(T);if(this.isValidDate(O,parseInt(F),parseInt(L),parseInt(U)))return console.log(` Parsed DD MM YYYY format: "${t}" -> ${T}`),{date:T,dayOfWeek:O.getDay()}}const s=/^(\d{1,2})-(\d{1,2})-(\d{4})$/,o=t.match(s);if(o){const[,U,L,F]=o,T=`${F}-${L.padStart(2,"0")}-${U.padStart(2,"0")}`,O=new Date(T);if(this.isValidDate(O,parseInt(F),parseInt(L),parseInt(U)))return console.log(` Parsed DD-MM-YYYY format: "${t}" -> ${T}`),{date:T,dayOfWeek:O.getDay()}}const a=/^(\d{1,2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{4})$/i,l=t.match(a);if(l){const[,U,L,F]=l,T=this.getMonthNumber(L);if(T!==-1){const O=`${F}-${T.toString().padStart(2,"0")}-${U.padStart(2,"0")}`,J=new Date(O);if(this.isValidDate(J,parseInt(F),T,parseInt(U)))return console.log(` Parsed DD-MMM-YYYY format: "${t}" -> ${O}`),{date:O,dayOfWeek:J.getDay()}}}const u=/^(\d{1,2})\s+(\d{1,2})\s+(\d{2})$/,d=t.match(u);if(d){const[,U,L,F]=d,T=parseInt(F)>50?`19${F}`:`20${F}`,O=`${T}-${L.padStart(2,"0")}-${U.padStart(2,"0")}`,J=new Date(O);if(this.isValidDate(J,parseInt(T),parseInt(L),parseInt(U)))return console.log(` Parsed DD MM YY format: "${t}" -> ${O}`),{date:O,dayOfWeek:J.getDay()}}const p=/^(\d{1,2})-(\d{1,2})-(\d{2})$/,m=t.match(p);if(m){const[,U,L,F]=m,T=parseInt(F)>50?`19${F}`:`20${F}`,O=`${T}-${L.padStart(2,"0")}-${U.padStart(2,"0")}`,J=new Date(O);if(this.isValidDate(J,parseInt(T),parseInt(L),parseInt(U)))return console.log(` Parsed DD-MM-YY format: "${t}" -> ${O}`),{date:O,dayOfWeek:J.getDay()}}const f=/^(\d{1,2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2})$/i,x=t.match(f);if(x){const[,U,L,F]=x,T=this.getMonthNumber(L);if(T!==-1){const O=parseInt(F)>50?`19${F}`:`20${F}`,J=`${O}-${T.toString().padStart(2,"0")}-${U.padStart(2,"0")}`,X=new Date(J);if(this.isValidDate(X,parseInt(O),T,parseInt(U)))return console.log(` Parsed DD-MMM-YY format: "${t}" -> ${J}`),{date:J,dayOfWeek:X.getDay()}}}const y=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,_=t.match(y);if(_){const[,U,L,F]=_,T=`${F}-${L.padStart(2,"0")}-${U.padStart(2,"0")}`,O=new Date(T);if(this.isValidDate(O,parseInt(F),parseInt(L),parseInt(U)))return console.log(` Parsed DD/MM/YYYY format: "${t}" -> ${T}`),{date:T,dayOfWeek:O.getDay()}}const w=/^(\d{1,2})\/(\d{1,2})\/(\d{2})$/,b=t.match(w);if(b){const[,U,L,F]=b,T=parseInt(F)>50?`19${F}`:`20${F}`,O=`${T}-${L.padStart(2,"0")}-${U.padStart(2,"0")}`,J=new Date(O);if(this.isValidDate(J,parseInt(T),parseInt(L),parseInt(U)))return console.log(` Parsed DD/MM/YY format: "${t}" -> ${O}`),{date:O,dayOfWeek:J.getDay()}}const N=/^(\d{1,2})\/(\d{1,2})\/(\d{2})$/,C=t.match(N);if(C){const[,U,L,F]=C,T=parseInt(F)>50?`19${F}`:`20${F}`,O=`${T}-${L.padStart(2,"0")}-${U.padStart(2,"0")}`,J=new Date(O);if(this.isValidDate(J,parseInt(T),parseInt(L),parseInt(U)))return console.log(` Parsed D/M/YY format: "${t}" -> ${O}`),{date:O,dayOfWeek:J.getDay()}}const A=/^(\d{1,2})\s+(\d{1,2})\s+(\d{4})$/;t.match(A);const P=/^(\d{1,2})\s+(\d{1,2})$/,E=t.match(P);if(E&&parseInt(E[1])>=1&&parseInt(E[1])<=31&&parseInt(E[2])>=1&&parseInt(E[2])<=12){const U=E[1].padStart(2,"0"),L=E[2].padStart(2,"0"),F=`2025-${L}-${U}`,T=new Date(F);return this.isValidDate(T,2025,parseInt(L),parseInt(U))?(console.log(` Parsed DD MM fallback format: "${t}" -> ${F}`),{date:F,dayOfWeek:T.getDay()}):this.isValidDate(T,2025,parseInt(L),parseInt(U))?{date:F,dayOfWeek:T.getDay()}:(console.log(` Invalid date detected: "${e}" -> ${F}, clearing date field`),null)}const j=/^(\d{1,2})$/,D=t.match(j);if(D&&parseInt(D[1])>=1&&parseInt(D[1])<=31){const U=D[1].padStart(2,"0"),L=`2025-07-${U}`,F=new Date(L);if(!this.isValidDate(F,2025,7,parseInt(U)))return console.log(` Invalid date detected: "${e}" -> ${L}, clearing date field`),null;if(this.isValidDate(F,2025,7,parseInt(U)))return console.log(` Parsed single day fallback format: "${t}" -> ${L}`),{date:L,dayOfWeek:F.getDay()}}return console.log(` DATE DEBUG: No pattern matched for: "${t}"`),null}getMonthNumber(e){return{jan:1,january:1,feb:2,february:2,mar:3,march:3,apr:4,april:4,may:5,may:5,jun:6,june:6,jul:7,july:7,aug:8,august:8,sep:9,september:9,oct:10,october:10,nov:11,november:11,dec:12,december:12}[e.toLowerCase()]||-1}isValidDate(e,t,r,i){if(isNaN(e.getTime()))return!1;const s=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),l=s===t&&o===r&&a===i;return l||console.log(" Date validation failed:",{expected:{year:t,month:r,day:i},actual:{year:s,month:o,day:a},dateString:e.toISOString()}),l}identifyShiftTypeFromText(e){const t=e.toLowerCase();return t.includes("4-10")||t.includes("16hrs-22hrs")||t.includes("16-22")||t.includes("evening")||t.includes("4pm")||t.includes("16:")?"Evening Shift (4-10)":e.trim()==="N"||t==="night"||t==="n"?"Night Duty":t.includes("9-4")||t.includes("9hrs-16hrs")?"Morning Shift (9-4)":t.includes("12-10")||t.includes("12hrs-22hrs")?"Saturday Regular (12-10)":t.includes("22hrs-9hrs")||t.includes("22-9")?"Night Duty":t.includes("morning")?"Morning Shift (9-4)":t.includes("saturday")?"Saturday Regular (12-10)":t.includes("sunday")||t.includes("special")||t.includes("holiday")?"Sunday/Public Holiday/Special":t.includes("duty")||t.includes("night")?"Night Duty":null}findMatchingStaffName(e){const t=e.trim().toUpperCase();if(t.length<3)return null;const r=[/^\d+$/,/^[A-Z]{1,2}$/,/SHIFT/i,/DUTY/i,/MORNING/i,/EVENING/i,/NIGHT/i,/SATURDAY/i,/SUNDAY/i,/HRS/i,/^AM$/i,/^PM$/i,/DATE/i,/TIME/i];for(const i of r)if(i.test(t))return null;for(const i of xr)if(t===i)return console.log(` EXACT MATCH: "${t}" exactly matches "${i}"`),i;for(const i of xr){const s=i.replace(/\(R\)$/,"").trim();if(t.replace(/\(R\)$/,"").trim()===s&&s.length>=3)if(t.includes("(R)")){const a=xr.find(l=>l===s+"(R)");if(a)return console.log(` BASE NAME MATCH WITH (R): "${t}" matches "${a}"`),a}else{const a=xr.find(l=>l===s&&!l.includes("(R)"));if(a)return console.log(` BASE NAME MATCH WITHOUT (R): "${t}" matches "${a}"`),a}}return console.log(` NO MATCH: "${t}" does not match any staff name (tried both exact and base name matching)`),null}}class CC{parsePageAsList(e){console.log(" LIST PARSER: Starting list-based parsing...");const t=[],r=this.groupTextItemsByRows(e);console.log(` Found ${r.length} rows in the PDF`);for(let i=0;i<r.length;i++){const s=r[i];if(console.log(` Processing row ${i+1} with ${s.length} items`),this.isHeaderRow(s)){console.log(` Skipping header row ${i+1}`);continue}const o=this.extractDataFromRow(s);o?(t.push(o),console.log(` Extracted: ${o.assignedName} | ${o.shiftType} | ${o.date}`)):console.log(` Could not extract data from row ${i+1}`)}return console.log(` LIST PARSER: Extracted ${t.length} entries`),t}groupTextItemsByRows(e){const t=[...e].sort((a,l)=>l.y-a.y),r=[];let i=[],s=null;const o=15;for(const a of t)s===null||Math.abs(a.y-s)<=o?(i.push(a),s=a.y):(i.length>0&&(i.sort((l,u)=>l.x-u.x),r.push(i)),i=[a],s=a.y);return i.length>0&&(i.sort((a,l)=>a.x-l.x),r.push(i)),this.mergeMultilineRemarks(r)}mergeMultilineRemarks(e){for(let t=0;t<e.length;t++){const r=e[t];if(r.length>=7&&t<e.length-1){const i=e[t+1];if(this.isRemarksContinuation(r,i)){console.log(` MULTILINE: Merging row ${t+1} with row ${t+2} for multiline remarks`);const s=i.filter(o=>this.isPotentialRemarksText(o.text)).map(o=>o.text.trim()).join(" ");if(s)if(r.length>6){const a=r.length-1;r[a]={...r[a],text:r[a].text+" "+s}}else r.push({text:s,x:i[0].x,y:i[0].y});t++}}}return e}isHeaderRow(e){const t=e.map(s=>s.text.toLowerCase()).join(" ");return["date","day","shift type","assigned staff","last edited","morning","evening","saturday","night duty","staff"].filter(s=>t.includes(s)).length>=2}extractDataFromRow(e){if(e.length<4)return console.log(` Row too short (${e.length} items), skipping`),null;console.log(" EXTRACTING ROW DATA:",e.map(a=>`"${a.text}"`).join(" | "));let t=null,r=null,i=null;if(e.length>0){const a=this.extractDateFromText(e[0].text);a&&(t=a.date,console.log(` Found date in column 1: ${t}`))}if(e.length>2){const a=this.identifyShiftTypeFromText(e[2].text);a&&(r=a,console.log(` Found shift in column 3: ${r}`))}if(e.length>3){const a=this.findMatchingStaffName(e[3].text);a&&(i=a,console.log(` Found staff in column 4: ${i}`))}let s=null;if(e.length>=7){const a=e.slice(6).map(l=>l.text.trim()).filter(l=>l&&l!==""&&l.toLowerCase()!=="remarks");a.length>0&&(s=a.join(" ").trim(),console.log(` Found multiline remarks: ${s}`))}if(!t){console.log(" Date not found in column 1, searching all columns...");for(let a=0;a<Math.min(3,e.length);a++){const l=this.extractDateFromText(e[a].text);if(l){t=l.date,console.log(` Found date in column ${a+1}: ${t}`);break}}}if(!r){console.log(" Shift not found in column 3, searching all columns...");for(let a=0;a<e.length;a++){const l=this.identifyShiftTypeFromText(e[a].text);if(l){r=l,console.log(` Found shift in column ${a+1}: ${r}`);break}}}if(!i){console.log(" Staff not found in column 4, searching all columns...");for(let a=0;a<e.length;a++){const l=this.findMatchingStaffName(e[a].text);if(l){i=l,console.log(` Found staff in column ${a+1}: ${i}`);break}}}if(!t||!r||!i)return console.log(` Missing required fields: date=${t}, shift=${r}, staff=${i}`),null;console.log(` EXTRACTED ENTRY: ${i} | ${r} | ${t}`);const o={date:t,shiftType:r,assignedName:i};return s?o.changeDescription=`Special Date: ${s}; Imported from PDF`:o.changeDescription="Imported from PDF",o}extractDateFromText(e){const t=e.trim();console.log(` DATE DEBUG: Analyzing text: "${t}"`);const r=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,i=t.match(r);if(i){const[,A,P,E]=i,j=`${E}-${P.padStart(2,"0")}-${A.padStart(2,"0")}`,D=new Date(j);if(this.isValidDate(D,parseInt(E),parseInt(P),parseInt(A)))return console.log(` Parsed DD/MM/YYYY format: "${t}" -> ${j}`),{date:j,dayOfWeek:D.getDay()}}const s=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,o=t.match(s);if(o){const[,A,P,E]=o,j=`${E}-${P.padStart(2,"0")}-${A.padStart(2,"0")}`,D=new Date(j);if(this.isValidDate(D,parseInt(E),parseInt(P),parseInt(A)))return console.log(` Parsed DD/MM/YYYY format: "${t}" -> ${j}`),{date:j,dayOfWeek:D.getDay()}}const a=/^(\d{1,2})\/(\d{1,2})\/(\d{2})$/,l=t.match(a);if(l){const[,A,P,E]=l,j=parseInt(E)>50?`19${E}`:`20${E}`,D=`${j}-${P.padStart(2,"0")}-${A.padStart(2,"0")}`,U=new Date(D);if(this.isValidDate(U,parseInt(j),parseInt(P),parseInt(A)))return console.log(` Parsed DD/MM/YY format: "${t}" -> ${D}`),{date:D,dayOfWeek:U.getDay()}}const u=/^(\d{1,2})-(\d{1,2})-(\d{4})$/,d=t.match(u);if(d){const[,A,P,E]=d,j=`${E}-${P.padStart(2,"0")}-${A.padStart(2,"0")}`,D=new Date(j);if(this.isValidDate(D,parseInt(E),parseInt(P),parseInt(A)))return console.log(` Parsed DD-MM-YYYY format: "${t}" -> ${j}`),{date:j,dayOfWeek:D.getDay()}}const p=/^(\d{1,2})-(\d{1,2})-(\d{2})$/,m=t.match(p);if(m){const[,A,P,E]=m,j=parseInt(E)>50?`19${E}`:`20${E}`,D=`${j}-${P.padStart(2,"0")}-${A.padStart(2,"0")}`,U=new Date(D);if(this.isValidDate(U,parseInt(j),parseInt(P),parseInt(A)))return console.log(` Parsed DD-MM-YY format: "${t}" -> ${D}`),{date:D,dayOfWeek:U.getDay()}}const f=/^(\d{1,2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{4})$/i,x=t.match(f);if(x){const[,A,P,E]=x,j=this.getMonthNumber(P);if(j!==-1){const D=`${E}-${j.toString().padStart(2,"0")}-${A.padStart(2,"0")}`,U=new Date(D);if(this.isValidDate(U,parseInt(E),j,parseInt(A)))return console.log(` Parsed DD-MMM-YYYY format: "${t}" -> ${D}`),{date:D,dayOfWeek:U.getDay()}}}const y=/^(\d{1,2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2})$/i,_=t.match(y);if(_){const[,A,P,E]=_,j=this.getMonthNumber(P);if(j!==-1){const D=parseInt(E)>50?`19${E}`:`20${E}`,U=`${D}-${j.toString().padStart(2,"0")}-${A.padStart(2,"0")}`,L=new Date(U);if(this.isValidDate(L,parseInt(D),j,parseInt(A)))return console.log(` Parsed DD-MMM-YY format: "${t}" -> ${U}`),{date:U,dayOfWeek:L.getDay()}}}const w=/^(\d{1,2})\s+(\d{1,2})\s+(\d{4})$/,b=t.match(w);if(b){const[,A,P,E]=b,j=`${E}-${P.padStart(2,"0")}-${A.padStart(2,"0")}`,D=new Date(j);if(this.isValidDate(D,parseInt(E),parseInt(P),parseInt(A)))return console.log(` Parsed DD MM YYYY format: "${t}" -> ${j}`),{date:j,dayOfWeek:D.getDay()}}const N=/^(\d{1,2})\s+(\d{1,2})\s+(\d{2})$/,C=t.match(N);if(C){const[,A,P,E]=C,j=parseInt(E)>50?`19${E}`:`20${E}`,D=`${j}-${P.padStart(2,"0")}-${A.padStart(2,"0")}`,U=new Date(D);if(this.isValidDate(U,parseInt(j),parseInt(P),parseInt(A)))return console.log(` Parsed DD MM YY format: "${t}" -> ${D}`),{date:D,dayOfWeek:U.getDay()}}return console.log(` DATE DEBUG: No pattern matched for: "${t}"`),null}isRemarksContinuation(e,t){if(t.length>=e.length)return!1;const r=t.some(l=>this.extractDateFromText(l.text)),i=t.some(l=>this.identifyShiftTypeFromText(l.text)),s=t.some(l=>this.findMatchingStaffName(l.text));if(r||i||s)return!1;const o=t.some(l=>this.isPotentialRemarksText(l.text));return e.length>=7&&o}isPotentialRemarksText(e){const t=e.toLowerCase().trim();if(t.length<3)return!1;const r=[/^\d+$/,/^[A-Z]{1,3}$/,/SHIFT/i,/DUTY/i,/MORNING/i,/EVENING/i,/NIGHT/i,/SATURDAY/i,/SUNDAY/i,/DATE/i,/TIME/i,/STAFF/i,/EDITED/i,/LAST/i,/BY/i,/AT/i];for(const l of r)if(l.test(t))return!1;const s=["public","holiday","cyclone","testing","working","fine","emergency","special","event","celebration","festival","is","on","that","everything","and","the","for"].some(l=>t.includes(l)),o=e.includes("*"),a=e.length>=8&&/^[A-Za-z\s*]+$/.test(e);return s||o||a}getMonthNumber(e){return{jan:1,january:1,feb:2,february:2,mar:3,march:3,apr:4,april:4,may:5,may:5,jun:6,june:6,jul:7,july:7,aug:8,august:8,sep:9,september:9,oct:10,october:10,nov:11,november:11,dec:12,december:12}[e.toLowerCase()]||-1}isValidDate(e,t,r,i){if(isNaN(e.getTime()))return!1;const s=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),l=s===t&&o===r&&a===i;return l||console.log(" Date validation failed:",{expected:{year:t,month:r,day:i},actual:{year:s,month:o,day:a}}),l}isHeaderRow(e){const t=e.map(o=>o.text.toLowerCase()).join(" ");console.log(` HEADER CHECK: Row text: "${t}"`);const i=["date","day","shift type","assigned staff","last edited","staff","type"].filter(o=>t.includes(o)).length,s=i>=2;return console.log(` HEADER CHECK: Found ${i} header keywords, isHeader: ${s}`),s}identifyShiftTypeFromText(e){const t=e.toLowerCase();return console.log(` SHIFT DEBUG: Analyzing text: "${e}"`),t.includes("evening")&&t.includes("(4-10)")?"Evening Shift (4-10)":t.includes("morning")&&t.includes("(9-4)")?"Morning Shift (9-4)":t.includes("saturday")&&t.includes("(12-10)")?"Saturday Regular (12-10)":t.includes("evening")&&t.includes("4-10")?"Evening Shift (4-10)":t.includes("morning")&&t.includes("9-4")?"Morning Shift (9-4)":t.includes("saturday")&&t.includes("12-10")?"Saturday Regular (12-10)":t.includes("night duty")||t==="night duty"?"Night Duty":t.includes("sunday")||t.includes("public holiday")||t.includes("special")?"Sunday/Public Holiday/Special":t.includes("4-10")||t.includes("16-22")?"Evening Shift (4-10)":t.includes("9-4")||t.includes("9-16")?"Morning Shift (9-4)":t.includes("12-10")||t.includes("12-22")?"Saturday Regular (12-10)":t==="n"||t==="night"?"Night Duty":(console.log(` SHIFT DEBUG: No pattern matched for: "${e}"`),null)}findMatchingStaffName(e){const t=e.trim().toUpperCase();if(console.log(` STAFF DEBUG: Analyzing text: "${t}"`),t.length<3)return console.log(` STAFF DEBUG: Text too short: "${t}"`),null;const r=[/^\d+$/,/^[A-Z]{1,2}$/,/SHIFT/i,/DUTY/i,/MORNING/i,/EVENING/i,/NIGHT/i,/SATURDAY/i,/SUNDAY/i,/HRS/i,/^AM$/i,/^PM$/i,/DATE/i,/TIME/i,/SYSTEM/i,/EDITED/i,/LAST/i,/BY/i,/AT/i];for(const i of r)if(i.test(t))return console.log(` STAFF DEBUG: Skipping pattern match: "${t}" matches ${i}`),null;for(const i of xr)if(t===i)return console.log(` EXACT MATCH: "${t}" exactly matches "${i}"`),i;for(const i of xr){const s=i.replace(/\(R\)$/,"").trim();if(t.replace(/\(R\)$/,"").trim()===s&&s.length>=3)if(t.includes("(R)")){const a=xr.find(l=>l===s+"(R)");if(a)return console.log(` BASE NAME MATCH WITH (R): "${t}" matches "${a}"`),a}else{const a=xr.find(l=>l===s&&!l.includes("(R)"));if(a)return console.log(` BASE NAME MATCH WITHOUT (R): "${t}" matches "${a}"`),a}}return console.log(` NO MATCH: "${t}" does not match any staff name`),null}}class EC{constructor(){Ut(this,"pdfLoader",new jC);Ut(this,"boxParser",new AC);Ut(this,"listParser",new CC)}async parsePDF(e){const t={entries:[],errors:[],warnings:[]};try{console.log(" Starting smart PDF parsing...");const r=await this.pdfLoader.loadPDF(e);console.log(" PDF loaded successfully, pages:",r.numPages);const i=[];for(let a=1;a<=r.numPages;a++){console.log(` Processing page ${a}...`);const l=await r.getPage(a),u=await this.pdfLoader.extractTextFromPage(l),d=this.boxParser.parsePageAsBoxes(u),p=this.listParser.parsePageAsList(u);console.log(` Page ${a} parsing results:`,{boxEntries:d.length,listEntries:p.length});const m=p.filter(y=>y.date&&y.date!==""&&y.date!==null),f=d.filter(y=>y.date&&y.date!==""&&y.date!==null),x=m.length>f.length?p:d;console.log(` Page ${a}: Using ${m.length>f.length?"list":"box"} parser (${x.length} total entries, ${m.length>f.length?m.length:f.length} valid)`),i.push(...x)}t.entries=i.filter(a=>{const l=a.date&&a.date!==""&&a.date!==null,u=a.shiftType&&a.shiftType!==""&&a.shiftType!==null,d=a.assignedName&&a.assignedName!==""&&a.assignedName!==null;return l||console.log(` FILTERING OUT: Missing date - ${a.assignedName||"unknown"} | ${a.shiftType||"unknown shift"}`),u||console.log(` FILTERING OUT: Missing shift - ${a.assignedName||"unknown"} | ${a.date||"unknown date"}`),d||console.log(` FILTERING OUT: Missing staff - ${a.date||"unknown date"} | ${a.shiftType||"unknown shift"}`),l&&u&&d}).map(a=>({date:a.date,shiftType:a.shiftType,assignedName:a.assignedName,changeDescription:a.changeDescription||"Imported from PDF"}));const s=new Map;t.entries.forEach(a=>{const l=`${a.date}-${a.shiftType}-${a.assignedName}`;s.has(l)?console.log(` DUPLICATE REMOVED: ${a.assignedName} | ${a.shiftType} | ${a.date}`):s.set(l,a)}),t.entries=Array.from(s.values()),console.log(" PARSING ANALYSIS:"),console.log(` Total parsed entries: ${i.length}`),console.log(` Valid entries (after filtering and deduplication): ${t.entries.length}`);const o=t.entries.reduce((a,l)=>(a[l.date]||(a[l.date]=[]),a[l.date].push(l),a),{});console.log(" FIRST 10 ENTRIES (to check date format):"),t.entries.slice(0,10).forEach((a,l)=>{console.log(`${l+1}. ${a.assignedName} | ${a.shiftType} | ${a.date}`)}),console.log(" Box-based PDF parsing completed successfully!")}catch(r){console.error(" PDF parsing error:",r),t.errors.push(`Failed to parse PDF: ${r instanceof Error?r.message:"Unknown error"}`)}return t.entries=this.applySaturdayShiftLogic(t.entries),t}applySaturdayShiftLogic(e){const t=e.reduce((i,s)=>(i[s.date]||(i[s.date]=[]),i[s.date].push(s),i),{}),r=[];return Object.entries(t).forEach(([i,s])=>{new Date(i).getDay()===6?s.some(u=>u.shiftType==="Morning Shift (9-4)")?s.forEach(u=>{r.push(u)}):s.forEach(u=>{u.shiftType==="Evening Shift (4-10)"?r.push({...u,shiftType:"Saturday Regular (12-10)",changeDescription:"Imported from PDF (Saturday 4-10 converted to 12-10)"}):r.push(u)}):s.forEach(l=>{r.push(l)})}),r}}const PC=new EC,LC=({isOpen:n,onClose:e,onImport:t,isAdminAuthenticated:r=!1,adminName:i=null})=>{const[s,o]=H.useState(null),[a,l]=H.useState(!1),[u,d]=H.useState(null),[p,m]=H.useState(!1),[f,x]=H.useState(""),[y,_]=H.useState(""),[w,b]=H.useState(!1),N=H.useRef(null),C=j=>{var U;const D=(U=j.target.files)==null?void 0:U[0];D&&D.type==="application/pdf"?(o(D),d(null),_("")):alert("Please select a valid PDF file")},A=async()=>{if(s){l(!0);try{console.log(" Starting PDF parsing...");const j=await PC.parsePDF(s);d(j),console.log(" PDF parsing completed:",j)}catch(j){console.error(" PDF parsing failed:",j),alert("Failed to parse PDF. Please try again.")}finally{l(!1)}}},P=async()=>{if(!(u!=null&&u.entries)||u.entries.length===0)return;let j;if(r&&i)j=i;else{if(!f)return;const D=mi(f);if(!D||!Zs(f)){_(D?"Admin access required for PDF import":"Invalid authentication code");return}j=D}m(!0);try{await t(u.entries,j),e(),o(null),d(null),x(""),_("")}catch(D){console.error(" Import failed:",D),alert("Failed to import roster data. Please try again.")}finally{m(!1)}},E=()=>{a||p||(o(null),d(null),x(""),_(""),e())};return n?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",style:{display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxWidth:window.innerWidth>window.innerHeight?"98vw":"32rem",maxHeight:window.innerWidth>window.innerHeight?"98vh":"90vh",margin:window.innerWidth>window.innerHeight?"2px 0":"16px 0",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsxs("div",{className:"relative pb-4 border-b border-gray-200 flex-shrink-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px",userSelect:"none",WebkitUserSelect:"none"},children:[!a&&!p&&c.jsx("button",{onClick:E,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200",style:{userSelect:"none",WebkitUserSelect:"none"},children:c.jsx(Er,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(ns,{className:"w-6 h-6 text-blue-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Import Roster from PDF"}),c.jsx("p",{className:"text-sm text-gray-600 text-center",style:{userSelect:"none",WebkitUserSelect:"none"},children:"Upload a PDF file to automatically extract roster data"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px",WebkitOverflowScrolling:"touch",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none"},children:[!s&&c.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[c.jsx(jf,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select PDF File"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Choose a PDF file containing roster data"}),c.jsx("input",{ref:N,type:"file",accept:".pdf",onChange:C,className:"hidden"}),c.jsx("button",{onClick:()=>{var j;return(j=N.current)==null?void 0:j.click()},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:"Choose PDF File"})]}),s&&!u&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(ns,{className:"w-8 h-8 text-blue-600"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),c.jsxs("p",{className:"text-sm text-gray-600",children:[(s.size/1024/1024).toFixed(2)," MB"]})]})]})}),c.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Jn,{className:"w-5 h-5 text-amber-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h5",{className:"font-medium text-amber-800 mb-1",children:"PDF Import Requirements"}),c.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[c.jsx("li",{children:" PDF should contain dates in DD/MM/YYYY format"}),c.jsx("li",{children:" Shift types should be clearly mentioned (Morning, Evening, Night, etc.)"}),c.jsx("li",{children:" Staff names should match the available names in the system"}),c.jsx("li",{children:" Only admin users can import PDF data"})]})]})]})}),c.jsx("button",{onClick:A,disabled:a,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:a?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Parsing PDF..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(ns,{className:"w-4 h-4"}),c.jsx("span",{children:"Parse PDF"})]})})]}),u&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Parsing Results"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.entries.length}),c.jsx("div",{className:"text-sm text-gray-600",children:"Entries Found"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-amber-600",children:u.warnings.length}),c.jsx("div",{className:"text-sm text-gray-600",children:"Warnings"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.errors.length}),c.jsx("div",{className:"text-sm text-gray-600",children:"Errors"})]})]})]}),u.errors.length>0&&c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsxs("h5",{className:"font-medium text-red-800 mb-2 flex items-center",children:[c.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Errors (",u.errors.length,")"]}),c.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:u.errors.map((j,D)=>c.jsxs("li",{children:[" ",j]},D))})]}),u.warnings.length>0&&c.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[c.jsxs("h5",{className:"font-medium text-amber-800 mb-2 flex items-center",children:[c.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Warnings (",u.warnings.length,")"]}),c.jsx("ul",{className:"text-sm text-amber-700 space-y-1",children:u.warnings.map((j,D)=>c.jsxs("li",{children:[" ",j]},D))})]}),u.entries.length>0&&c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsxs("h5",{className:"font-medium text-green-800 mb-3 flex items-center",children:[c.jsx(pc,{className:"w-4 h-4 mr-2"}),"Found Entries (",u.entries.length,")"]}),c.jsxs("div",{className:"max-h-40 overflow-y-auto",children:[u.entries.slice(0,10).map((j,D)=>c.jsxs("div",{className:"text-sm text-green-700 py-1 border-b border-green-200 last:border-b-0",children:[c.jsx("span",{className:"font-medium",children:j.date})," -",c.jsx("span",{className:"mx-1",children:j.shiftType})," -",c.jsx("span",{className:"font-medium",children:j.assignedName})]},D)),u.entries.length>10&&c.jsxs("div",{className:"text-sm text-green-600 py-1 italic",children:["... and ",u.entries.length-10," more entries"]})]})]}),(u==null?void 0:u.entries.length)>0&&!r&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Authentication Code (Required)"}),c.jsxs("div",{className:"flex justify-center space-x-3 mb-3",children:[[0,1,2,3].map(j=>c.jsx("input",{type:w?"text":"password",value:f[j]||"",onChange:D=>{const U=D.target.value.toUpperCase();if(U.length<=1){const L=f.split("");if(L[j]=U,x(L.join("")),U&&j<3){const F=document.querySelector(`input[data-index="${j+1}"]`);F&&F.focus()}}},onKeyDown:D=>{if(D.key==="Backspace"&&!f[j]&&j>0){const U=document.querySelector(`input[data-index="${j-1}"]`);U&&U.focus()}},"data-index":j,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:j===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},j)),c.jsx("button",{type:"button",onTouchStart:()=>b(!0),onTouchEnd:()=>b(!1),onMouseDown:()=>b(!0),onMouseUp:()=>b(!1),onMouseLeave:()=>b(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg ml-2",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:w?c.jsx(kc,{className:"w-5 h-5"}):c.jsx(jc,{className:"w-5 h-5"})})]})]}),y&&c.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:y})})]}),(u==null?void 0:u.entries.length)>0&&r&&c.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-green-700 text-center",children:[" Authenticated as: ",c.jsx("strong",{children:i})]})})]})]}),u&&u.entries.length>0&&c.jsx("div",{className:"flex-shrink-0 pt-0",style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:E,disabled:p,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:P,disabled:p||!r&&(f.length<4||!Zs(f)),className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:p?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(pc,{className:"w-4 h-4"}),c.jsx("span",{children:"Import PDF"})]})})]})})]})}):null};function zt(n){"@babel/helpers - typeof";return zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(n)}var vr=Uint8Array,hi=Uint16Array,dy=Int32Array,fp=new vr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pp=new vr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Eg=new vr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gS=function(n,e){for(var t=new hi(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new dy(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},yS=gS(fp,2),vS=yS.b,Pg=yS.r;vS[28]=258,Pg[258]=28;var xS=gS(pp,0),TC=xS.b,Bv=xS.r,Lg=new hi(32768);for(var nn=0;nn<32768;++nn){var bo=(nn&43690)>>1|(nn&21845)<<1;bo=(bo&52428)>>2|(bo&13107)<<2,bo=(bo&61680)>>4|(bo&3855)<<4,Lg[nn]=((bo&65280)>>8|(bo&255)<<8)>>1}var Ss=function(n,e,t){for(var r=n.length,i=0,s=new hi(e);i<r;++i)n[i]&&++s[n[i]-1];var o=new hi(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new hi(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],d=e-n[i],p=o[n[i]-1]++<<d,m=p|(1<<d)-1;p<=m;++p)a[Lg[p]>>l]=u}else for(a=new hi(r),i=0;i<r;++i)n[i]&&(a[i]=Lg[o[n[i]-1]++]>>15-n[i]);return a},Jo=new vr(288);for(var nn=0;nn<144;++nn)Jo[nn]=8;for(var nn=144;nn<256;++nn)Jo[nn]=9;for(var nn=256;nn<280;++nn)Jo[nn]=7;for(var nn=280;nn<288;++nn)Jo[nn]=8;var fd=new vr(32);for(var nn=0;nn<32;++nn)fd[nn]=5;var DC=Ss(Jo,9,0),MC=Ss(Jo,9,1),IC=Ss(fd,5,0),RC=Ss(fd,5,1),G0=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Yi=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},J0=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},hy=function(n){return(n+7)/8|0},wS=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new vr(n.subarray(e,t))},FC=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ki=function(n,e,t){var r=new Error(e||FC[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Ki),!t)throw r;return r},OC=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new vr(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new vr(i*3));var u=function(Pe){var $e=t.length;if(Pe>$e){var Oe=new vr(Math.max($e*2,Pe));Oe.set(t),t=Oe}},d=e.f||0,p=e.p||0,m=e.b||0,f=e.l,x=e.d,y=e.m,_=e.n,w=i*8;do{if(!f){d=Yi(n,p,1);var b=Yi(n,p+1,3);if(p+=3,b)if(b==1)f=MC,x=RC,y=9,_=5;else if(b==2){var P=Yi(n,p,31)+257,E=Yi(n,p+10,15)+4,j=P+Yi(n,p+5,31)+1;p+=14;for(var D=new vr(j),U=new vr(19),L=0;L<E;++L)U[Eg[L]]=Yi(n,p+L*3,7);p+=E*3;for(var F=G0(U),T=(1<<F)-1,O=Ss(U,F,1),L=0;L<j;){var J=O[Yi(n,p,T)];p+=J&15;var N=J>>4;if(N<16)D[L++]=N;else{var X=0,se=0;for(N==16?(se=3+Yi(n,p,3),p+=2,X=D[L-1]):N==17?(se=3+Yi(n,p,7),p+=3):N==18&&(se=11+Yi(n,p,127),p+=7);se--;)D[L++]=X}}var q=D.subarray(0,P),ee=D.subarray(P);y=G0(q),_=G0(ee),f=Ss(q,y,1),x=Ss(ee,_,1)}else Ki(1);else{var N=hy(p)+4,C=n[N-4]|n[N-3]<<8,A=N+C;if(A>i){l&&Ki(0);break}a&&u(m+C),t.set(n.subarray(N,A),m),e.b=m+=C,e.p=p=A*8,e.f=d;continue}if(p>w){l&&Ki(0);break}}a&&u(m+131072);for(var ie=(1<<y)-1,re=(1<<_)-1,M=p;;M=p){var X=f[J0(n,p)&ie],Y=X>>4;if(p+=X&15,p>w){l&&Ki(0);break}if(X||Ki(2),Y<256)t[m++]=Y;else if(Y==256){M=p,f=null;break}else{var G=Y-254;if(Y>264){var L=Y-257,Z=fp[L];G=Yi(n,p,(1<<Z)-1)+vS[L],p+=Z}var te=x[J0(n,p)&re],ue=te>>4;te||Ki(3),p+=te&15;var ee=TC[ue];if(ue>3){var Z=pp[ue];ee+=J0(n,p)&(1<<Z)-1,p+=Z}if(p>w){l&&Ki(0);break}a&&u(m+131072);var me=m+G;if(m<ee){var ge=s-ee,De=Math.min(ee,me);for(ge+m<0&&Ki(3);m<De;++m)t[m]=r[ge+m]}for(;m<me;++m)t[m]=t[m-ee]}}e.l=f,e.p=M,e.b=m,e.f=d,f&&(d=1,e.m=y,e.d=x,e.n=_)}while(!d);return m!=t.length&&o?wS(t,0,m):t.subarray(0,m)},Ms=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},yu=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},K0=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:SS,l:0};if(i==1){var o=new vr(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(A,P){return A.f-P.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],u=0,d=1,p=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=t[t[u].f<t[p].f?u++:p++],l=t[u!=d&&t[u].f<t[p].f?u++:p++],t[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var m=s[0].s,r=1;r<i;++r)s[r].s>m&&(m=s[r].s);var f=new hi(m+1),x=Tg(t[d-1],f,0);if(x>e){var r=0,y=0,_=x-e,w=1<<_;for(s.sort(function(P,E){return f[E.s]-f[P.s]||P.f-E.f});r<i;++r){var b=s[r].s;if(f[b]>e)y+=w-(1<<x-f[b]),f[b]=e;else break}for(y>>=_;y>0;){var N=s[r].s;f[N]<e?y-=1<<e-f[N]++-1:++r}for(;r>=0&&y;--r){var C=s[r].s;f[C]==e&&(--f[C],++y)}x=e}return{t:new vr(f),l:x}},Tg=function(n,e,t){return n.s==-1?Math.max(Tg(n.l,e,t+1),Tg(n.r,e,t+1)):e[n.s]=t},Uv=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new hi(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:t.subarray(0,r),n:e}},vu=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},bS=function(n,e,t){var r=t.length,i=hy(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},zv=function(n,e,t,r,i,s,o,a,l,u,d){Ms(e,d++,t),++i[256];for(var p=K0(i,15),m=p.t,f=p.l,x=K0(s,15),y=x.t,_=x.l,w=Uv(m),b=w.c,N=w.n,C=Uv(y),A=C.c,P=C.n,E=new hi(19),j=0;j<b.length;++j)++E[b[j]&31];for(var j=0;j<A.length;++j)++E[A[j]&31];for(var D=K0(E,7),U=D.t,L=D.l,F=19;F>4&&!U[Eg[F-1]];--F);var T=u+5<<3,O=vu(i,Jo)+vu(s,fd)+o,J=vu(i,m)+vu(s,y)+o+14+3*F+vu(E,U)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&T<=O&&T<=J)return bS(e,d,n.subarray(l,l+u));var X,se,q,ee;if(Ms(e,d,1+(J<O)),d+=2,J<O){X=Ss(m,f,0),se=m,q=Ss(y,_,0),ee=y;var ie=Ss(U,L,0);Ms(e,d,N-257),Ms(e,d+5,P-1),Ms(e,d+10,F-4),d+=14;for(var j=0;j<F;++j)Ms(e,d+3*j,U[Eg[j]]);d+=3*F;for(var re=[b,A],M=0;M<2;++M)for(var Y=re[M],j=0;j<Y.length;++j){var G=Y[j]&31;Ms(e,d,ie[G]),d+=U[G],G>15&&(Ms(e,d,Y[j]>>5&127),d+=Y[j]>>12)}}else X=DC,se=Jo,q=IC,ee=fd;for(var j=0;j<a;++j){var Z=r[j];if(Z>255){var G=Z>>18&31;yu(e,d,X[G+257]),d+=se[G+257],G>7&&(Ms(e,d,Z>>23&31),d+=fp[G]);var te=Z&31;yu(e,d,q[te]),d+=ee[te],te>3&&(yu(e,d,Z>>5&8191),d+=pp[te])}else yu(e,d,X[Z]),d+=se[Z]}return yu(e,d,X[256]),d+se[256]},$C=new dy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),SS=new vr(0),BC=function(n,e,t,r,i,s){var o=s.z||n.length,a=new vr(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=$C[e-1],m=p>>13,f=p&8191,x=(1<<t)-1,y=s.p||new hi(32768),_=s.h||new hi(x+1),w=Math.ceil(t/3),b=2*w,N=function(He){return(n[He]^n[He+1]<<w^n[He+2]<<b)&x},C=new dy(25e3),A=new hi(288),P=new hi(32),E=0,j=0,D=s.i||0,U=0,L=s.w||0,F=0;D+2<o;++D){var T=N(D),O=D&32767,J=_[T];if(y[O]=J,_[T]=O,L<=D){var X=o-D;if((E>7e3||U>24576)&&(X>423||!u)){d=zv(n,l,0,C,A,P,j,U,F,D-F,d),U=E=j=0,F=D;for(var se=0;se<286;++se)A[se]=0;for(var se=0;se<30;++se)P[se]=0}var q=2,ee=0,ie=f,re=O-J&32767;if(X>2&&T==N(D-re))for(var M=Math.min(m,X)-1,Y=Math.min(32767,D),G=Math.min(258,X);re<=Y&&--ie&&O!=J;){if(n[D+q]==n[D+q-re]){for(var Z=0;Z<G&&n[D+Z]==n[D+Z-re];++Z);if(Z>q){if(q=Z,ee=re,Z>M)break;for(var te=Math.min(re,Z-2),ue=0,se=0;se<te;++se){var me=D-re+se&32767,ge=y[me],De=me-ge&32767;De>ue&&(ue=De,J=me)}}}O=J,J=y[O],re+=O-J&32767}if(ee){C[U++]=268435456|Pg[q]<<18|Bv[ee];var Pe=Pg[q]&31,$e=Bv[ee]&31;j+=fp[Pe]+pp[$e],++A[257+Pe],++P[$e],L=D+q,++E}else C[U++]=n[D],++A[n[D]]}}for(D=Math.max(D,L);D<o;++D)C[U++]=n[D],++A[n[D]];d=zv(n,l,u,C,A,P,j,U,F,D-F,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=_,s.p=y,s.i=D,s.w=L)}else{for(var D=s.w||0;D<o+u;D+=65535){var Oe=D+65535;Oe>=o&&(l[d/8|0]=u,Oe=o),d=bS(l,d+1,n.subarray(D,Oe))}s.i=o}return wS(a,0,r+hy(d)+i)},_S=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},UC=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new vr(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return BC(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},NS=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},zC=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=_S();i.p(e.dictionary),NS(n,2,i.d())}},WC=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Ki(6,"invalid zlib data"),(n[1]>>5&1)==1&&Ki(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Dg(n,e){e||(e={});var t=_S();t.p(n);var r=UC(n,e,e.dictionary?6:2,4);return zC(r,e),NS(r,r.length-4,t.d()),r}function HC(n,e){return OC(n.subarray(WC(n),-4),{i:2},e,e)}var qC=typeof TextDecoder<"u"&&new TextDecoder,YC=0;try{qC.decode(SS,{stream:!0}),YC=1}catch{}var ut=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function X0(){ut.console&&typeof ut.console.log=="function"&&ut.console.log.apply(ut.console,arguments)}var Vt={log:X0,warn:function(n){ut.console&&(typeof ut.console.warn=="function"?ut.console.warn.apply(ut.console,arguments):X0.call(null,arguments))},error:function(n){ut.console&&(typeof ut.console.error=="function"?ut.console.error.apply(ut.console,arguments):X0(n))}};function Q0(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){wa(r.response,e,t)},r.onerror=function(){Vt.error("could not download file")},r.send()}function Wv(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Th(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Bu,Mg,wa=ut.saveAs||((typeof window>"u"?"undefined":zt(window))!=="object"||window!==ut?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=ut.URL||ut.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?Wv(i.href)?Q0(n,e,t):Th(i,i.target="_blank"):Th(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Th(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Wv(n))Q0(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Th(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:zt(s)!=="object"&&(Vt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Q0(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(ut.HTMLElement)||ut.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":zt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(n)}else{var l=ut.URL||ut.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function kS(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Z0(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=cr(t,r,i,s,e[0],7,-680876936),s=cr(s,t,r,i,e[1],12,-389564586),i=cr(i,s,t,r,e[2],17,606105819),r=cr(r,i,s,t,e[3],22,-1044525330),t=cr(t,r,i,s,e[4],7,-176418897),s=cr(s,t,r,i,e[5],12,1200080426),i=cr(i,s,t,r,e[6],17,-1473231341),r=cr(r,i,s,t,e[7],22,-45705983),t=cr(t,r,i,s,e[8],7,1770035416),s=cr(s,t,r,i,e[9],12,-1958414417),i=cr(i,s,t,r,e[10],17,-42063),r=cr(r,i,s,t,e[11],22,-1990404162),t=cr(t,r,i,s,e[12],7,1804603682),s=cr(s,t,r,i,e[13],12,-40341101),i=cr(i,s,t,r,e[14],17,-1502002290),t=ur(t,r=cr(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ur(s,t,r,i,e[6],9,-1069501632),i=ur(i,s,t,r,e[11],14,643717713),r=ur(r,i,s,t,e[0],20,-373897302),t=ur(t,r,i,s,e[5],5,-701558691),s=ur(s,t,r,i,e[10],9,38016083),i=ur(i,s,t,r,e[15],14,-660478335),r=ur(r,i,s,t,e[4],20,-405537848),t=ur(t,r,i,s,e[9],5,568446438),s=ur(s,t,r,i,e[14],9,-1019803690),i=ur(i,s,t,r,e[3],14,-187363961),r=ur(r,i,s,t,e[8],20,1163531501),t=ur(t,r,i,s,e[13],5,-1444681467),s=ur(s,t,r,i,e[2],9,-51403784),i=ur(i,s,t,r,e[7],14,1735328473),t=dr(t,r=ur(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=dr(s,t,r,i,e[8],11,-2022574463),i=dr(i,s,t,r,e[11],16,1839030562),r=dr(r,i,s,t,e[14],23,-35309556),t=dr(t,r,i,s,e[1],4,-1530992060),s=dr(s,t,r,i,e[4],11,1272893353),i=dr(i,s,t,r,e[7],16,-155497632),r=dr(r,i,s,t,e[10],23,-1094730640),t=dr(t,r,i,s,e[13],4,681279174),s=dr(s,t,r,i,e[0],11,-358537222),i=dr(i,s,t,r,e[3],16,-722521979),r=dr(r,i,s,t,e[6],23,76029189),t=dr(t,r,i,s,e[9],4,-640364487),s=dr(s,t,r,i,e[12],11,-421815835),i=dr(i,s,t,r,e[15],16,530742520),t=hr(t,r=dr(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=hr(s,t,r,i,e[7],10,1126891415),i=hr(i,s,t,r,e[14],15,-1416354905),r=hr(r,i,s,t,e[5],21,-57434055),t=hr(t,r,i,s,e[12],6,1700485571),s=hr(s,t,r,i,e[3],10,-1894986606),i=hr(i,s,t,r,e[10],15,-1051523),r=hr(r,i,s,t,e[1],21,-2054922799),t=hr(t,r,i,s,e[8],6,1873313359),s=hr(s,t,r,i,e[15],10,-30611744),i=hr(i,s,t,r,e[6],15,-1560198380),r=hr(r,i,s,t,e[13],21,1309151649),t=hr(t,r,i,s,e[4],6,-145523070),s=hr(s,t,r,i,e[11],10,-1120210379),i=hr(i,s,t,r,e[2],15,718787259),r=hr(r,i,s,t,e[9],21,-343485551),n[0]=Mo(t,n[0]),n[1]=Mo(r,n[1]),n[2]=Mo(i,n[2]),n[3]=Mo(s,n[3])}function mp(n,e,t,r,i,s){return e=Mo(Mo(e,n),Mo(r,s)),Mo(e<<i|e>>>32-i,t)}function cr(n,e,t,r,i,s,o){return mp(e&t|~e&r,n,e,i,s,o)}function ur(n,e,t,r,i,s,o){return mp(e&r|t&~r,n,e,i,s,o)}function dr(n,e,t,r,i,s,o){return mp(e^t^r,n,e,i,s,o)}function hr(n,e,t,r,i,s,o){return mp(t^(e|~r),n,e,i,s,o)}function jS(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Z0(r,VC(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Z0(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Z0(r,i),r}function VC(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Bu=ut.atob.bind(ut),Mg=ut.btoa.bind(ut);var Hv="0123456789abcdef".split("");function GC(n){for(var e="",t=0;t<4;t++)e+=Hv[n>>8*t+4&15]+Hv[n>>8*t&15];return e}function JC(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Ig(n){return jS(n).map(JC).join("")}var KC=function(n){for(var e=0;e<n.length;e++)n[e]=GC(n[e]);return n.join("")}(jS("hello"))!="5d41402abc4b2a76b9719d911017c592";function Mo(n,e){if(KC){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Rg(n,e){var t,r,i,s;if(n!==t){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var d=a[l];u=(u+d+o.charCodeAt(l))%256,a[l]=a[u],a[u]=d}t=n,r=a}else a=r;var p=e.length,m=0,f=0,x="";for(l=0;l<p;l++)f=(f+(d=a[m=(m+1)%256]))%256,a[m]=a[f],a[f]=d,o=a[(a[m]+a[f])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var qv={print:4,modify:8,copy:16,"annot-forms":32};function El(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(qv.perm!==void 0)throw new Error("Invalid permission: "+a);i+=qv[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Ig(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Rg(this.encryptionKey,this.padding)}function Pl(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function Yv(n){if(zt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){ut.console&&Vt.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ff(n){if(!(this instanceof Ff))return new Ff(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function AS(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Sa(n,e,t,r,i){if(!(this instanceof Sa))return new Sa(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,AS.call(this,r,i)}function Yl(n,e,t,r,i){if(!(this instanceof Yl))return new Yl(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,AS.call(this,r,i)}function it(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",d=null;zt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=Yv;var x="1.3",y=f.__private__.getPdfVersion=function(){return x};f.__private__.setPdfVersion=function(v){x=v};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return _};var w=f.__private__.getPageFormat=function(v){return _[v]};i=i||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},N=b.COMPAT;function C(){this.saveGraphicsState(),Q(new st(Le,0,0,-Le,0,oo()*Le).toString()+" cm"),this.setFontSize(this.getFontSize()/Le),u="n",N=b.ADVANCED}function A(){this.restoreGraphicsState(),u="S",N=b.COMPAT}var P=f.__private__.combineFontStyleAndFontWeight=function(v,R){if(v=="bold"&&R=="normal"||v=="bold"&&R==400||v=="normal"&&R=="italic"||v=="bold"&&R=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return R&&(v=R==400||R==="normal"?v==="italic"?"italic":"normal":R!=700&&R!=="bold"||v!=="normal"?(R==700?"bold":R)+""+v:"bold"),v};f.advancedAPI=function(v){var R=N===b.COMPAT;return R&&C.call(this),typeof v!="function"||(v(this),R&&A.call(this)),this},f.compatAPI=function(v){var R=N===b.ADVANCED;return R&&A.call(this),typeof v!="function"||(v(this),R&&C.call(this)),this},f.isAdvancedAPI=function(){return N===b.ADVANCED};var E,j=function(v){if(N!==b.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=f.roundToPrecision=f.__private__.roundToPrecision=function(v,R){var K=e||R;if(isNaN(v)||isNaN(K))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(K).replace(/0+$/,"")};E=f.hpf=f.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return D(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return D(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return D(v,16)};var U=f.f2=f.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return D(v,2)},L=f.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return D(v,3)},F=f.scale=f.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return N===b.COMPAT?v*Le:N===b.ADVANCED?v:void 0},T=function(v){return N===b.COMPAT?oo()-v:N===b.ADVANCED?v:void 0},O=function(v){return F(T(v))};f.__private__.setPrecision=f.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var J,X="00000000000000000000000000000000",se=f.__private__.getFileId=function(){return X},q=f.__private__.setFileId=function(v){return X=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(sr=new El(d.userPermissions,d.userPassword,d.ownerPassword,X)),X};f.setFileId=function(v){return q(v),this},f.getFileId=function(){return se()};var ee=f.__private__.convertDateToPDFDate=function(v){var R=v.getTimezoneOffset(),K=R<0?"+":"-",ne=Math.floor(Math.abs(R/60)),pe=Math.abs(R%60),Ne=[K,G(ne),"'",G(pe),"'"].join("");return["D:",v.getFullYear(),G(v.getMonth()+1),G(v.getDate()),G(v.getHours()),G(v.getMinutes()),G(v.getSeconds()),Ne].join("")},ie=f.__private__.convertPDFDateToDate=function(v){var R=parseInt(v.substr(2,4),10),K=parseInt(v.substr(6,2),10)-1,ne=parseInt(v.substr(8,2),10),pe=parseInt(v.substr(10,2),10),Ne=parseInt(v.substr(12,2),10),Re=parseInt(v.substr(14,2),10);return new Date(R,K,ne,pe,Ne,Re,0)},re=f.__private__.setCreationDate=function(v){var R;if(v===void 0&&(v=new Date),v instanceof Date)R=ee(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");R=v}return J=R},M=f.__private__.getCreationDate=function(v){var R=J;return v==="jsDate"&&(R=ie(J)),R};f.setCreationDate=function(v){return re(v),this},f.getCreationDate=function(v){return M(v)};var Y,G=f.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},Z=f.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},te=0,ue=[],me=[],ge=0,De=[],Pe=[],$e=!1,Oe=me,He=function(){te=0,ge=0,me=[],ue=[],De=[],fe=fn(),et=fn()};f.__private__.setCustomOutputDestination=function(v){$e=!0,Oe=v};var ye=function(v){$e||(Oe=v)};f.__private__.resetCustomOutputDestination=function(){$e=!1,Oe=me};var Q=f.__private__.out=function(v){return v=v.toString(),ge+=v.length+1,Oe.push(v),Oe},lt=f.__private__.write=function(v){return Q(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Ye=f.__private__.getArrayBuffer=function(v){for(var R=v.length,K=new ArrayBuffer(R),ne=new Uint8Array(K);R--;)ne[R]=v.charCodeAt(R);return K},Me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Me};var Ue=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(v){return Ue=N===b.ADVANCED?v/Le:v,this};var ce,be=f.__private__.getFontSize=f.getFontSize=function(){return N===b.COMPAT?Ue:Ue*Le},ke=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(v){return ke=v,this},f.__private__.getR2L=f.getR2L=function(){return ke};var we,_e=f.__private__.setZoomMode=function(v){var R=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))ce=v;else if(isNaN(v)){if(R.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');ce=v}else ce=parseInt(v,10)};f.__private__.getZoomMode=function(){return ce};var Ie,Ae=f.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');we=v};f.__private__.getPageMode=function(){return we};var Je=f.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Ie=v};f.__private__.getLayoutMode=function(){return Ie},f.__private__.setDisplayMode=f.setDisplayMode=function(v,R,K){return _e(v),Je(R),Ae(K),this};var Xe={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(v){if(Object.keys(Xe).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xe[v]},f.__private__.getDocumentProperties=function(){return Xe},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(v){for(var R in Xe)Xe.hasOwnProperty(R)&&v[R]&&(Xe[R]=v[R]);return this},f.__private__.setDocumentProperty=function(v,R){if(Object.keys(Xe).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xe[v]=R};var We,Le,kt,pt,wn,_t={},Lt={},rr=[],ze={},At={},he={},Fe={},Ge=null,rt=0,Ke=[],dt=new Yv(f),It=n.hotfixes||[],Fn={},ti={},bi=[],st=function v(R,K,ne,pe,Ne,Re){if(!(this instanceof v))return new v(R,K,ne,pe,Ne,Re);isNaN(R)&&(R=1),isNaN(K)&&(K=0),isNaN(ne)&&(ne=0),isNaN(pe)&&(pe=1),isNaN(Ne)&&(Ne=0),isNaN(Re)&&(Re=0),this._matrix=[R,K,ne,pe,Ne,Re]};Object.defineProperty(st.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(st.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(st.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(st.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(st.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(st.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(st.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(st.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(st.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(st.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(st.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(st.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(st.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(st.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(st.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(st.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),st.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(v)},st.prototype.multiply=function(v){var R=v.sx*this.sx+v.shy*this.shx,K=v.sx*this.shy+v.shy*this.sy,ne=v.shx*this.sx+v.sy*this.shx,pe=v.shx*this.shy+v.sy*this.sy,Ne=v.tx*this.sx+v.ty*this.shx+this.tx,Re=v.tx*this.shy+v.ty*this.sy+this.ty;return new st(R,K,ne,pe,Ne,Re)},st.prototype.decompose=function(){var v=this.sx,R=this.shy,K=this.shx,ne=this.sy,pe=this.tx,Ne=this.ty,Re=Math.sqrt(v*v+R*R),Qe=(v/=Re)*K+(R/=Re)*ne;K-=v*Qe,ne-=R*Qe;var at=Math.sqrt(K*K+ne*ne);return Qe/=at,v*(ne/=at)<R*(K/=at)&&(v=-v,R=-R,Qe=-Qe,Re=-Re),{scale:new st(Re,0,0,at,0,0),translate:new st(1,0,0,1,pe,Ne),rotate:new st(v,R,-R,v,0,0),skew:new st(1,0,Qe,1,0,0)}},st.prototype.toString=function(v){return this.join(" ")},st.prototype.inversed=function(){var v=this.sx,R=this.shy,K=this.shx,ne=this.sy,pe=this.tx,Ne=this.ty,Re=1/(v*ne-R*K),Qe=ne*Re,at=-R*Re,xt=-K*Re,gt=v*Re;return new st(Qe,at,xt,gt,-Qe*pe-xt*Ne,-at*pe-gt*Ne)},st.prototype.applyToPoint=function(v){var R=v.x*this.sx+v.y*this.shx+this.tx,K=v.x*this.shy+v.y*this.sy+this.ty;return new nl(R,K)},st.prototype.applyToRectangle=function(v){var R=this.applyToPoint(v),K=this.applyToPoint(new nl(v.x+v.w,v.y+v.h));return new Uc(R.x,R.y,K.x-R.x,K.y-R.y)},st.prototype.clone=function(){var v=this.sx,R=this.shy,K=this.shx,ne=this.sy,pe=this.tx,Ne=this.ty;return new st(v,R,K,ne,pe,Ne)},f.Matrix=st;var Tr=f.matrixMult=function(v,R){return R.multiply(v)},Dr=new st(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Dr;var bn=function(v,R){if(!At[v]){var K=(R instanceof Sa?"Sh":"P")+(Object.keys(ze).length+1).toString(10);R.id=K,At[v]=K,ze[K]=R,dt.publish("addPattern",R)}};f.ShadingPattern=Sa,f.TilingPattern=Yl,f.addShadingPattern=function(v,R){return j("addShadingPattern()"),bn(v,R),this},f.beginTilingPattern=function(v){j("beginTilingPattern()"),$d(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},f.endTilingPattern=function(v,R){j("endTilingPattern()"),R.stream=Pe[Y].join(`
`),bn(v,R),dt.publish("endTilingPattern",R),bi.pop().restore()};var Sn=f.__private__.newObject=function(){var v=fn();return Mr(v,!0),v},fn=f.__private__.newObjectDeferred=function(){return te++,ue[te]=function(){return ge},te},Mr=function(v,R){return R=typeof R=="boolean"&&R,ue[v]=ge,R&&Q(v+" 0 obj"),v},no=f.__private__.newAdditionalObject=function(){var v={objId:fn(),content:""};return De.push(v),v},fe=fn(),et=fn(),Nt=f.__private__.decodeColorString=function(v){var R=v.split(" ");if(R.length!==2||R[1]!=="g"&&R[1]!=="G")R.length===5&&(R[4]==="k"||R[4]==="K")&&(R=[(1-R[0])*(1-R[3]),(1-R[1])*(1-R[3]),(1-R[2])*(1-R[3]),"r"]);else{var K=parseFloat(R[0]);R=[K,K,K,"r"]}for(var ne="#",pe=0;pe<3;pe++)ne+=("0"+Math.floor(255*parseFloat(R[pe])).toString(16)).slice(-2);return ne},ht=f.__private__.encodeColorString=function(v){var R;typeof v=="string"&&(v={ch1:v});var K=v.ch1,ne=v.ch2,pe=v.ch3,Ne=v.ch4,Re=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof K=="string"&&K.charAt(0)!=="#"){var Qe=new kS(K);if(Qe.ok)K=Qe.toHex();else if(!/^\d*\.?\d*$/.test(K))throw new Error('Invalid color "'+K+'" passed to jsPDF.encodeColorString.')}if(typeof K=="string"&&/^#[0-9A-Fa-f]{3}$/.test(K)&&(K="#"+K[1]+K[1]+K[2]+K[2]+K[3]+K[3]),typeof K=="string"&&/^#[0-9A-Fa-f]{6}$/.test(K)){var at=parseInt(K.substr(1),16);K=at>>16&255,ne=at>>8&255,pe=255&at}if(ne===void 0||Ne===void 0&&K===ne&&ne===pe)if(typeof K=="string")R=K+" "+Re[0];else switch(v.precision){case 2:R=U(K/255)+" "+Re[0];break;case 3:default:R=L(K/255)+" "+Re[0]}else if(Ne===void 0||zt(Ne)==="object"){if(Ne&&!isNaN(Ne.a)&&Ne.a===0)return R=["1.","1.","1.",Re[1]].join(" ");if(typeof K=="string")R=[K,ne,pe,Re[1]].join(" ");else switch(v.precision){case 2:R=[U(K/255),U(ne/255),U(pe/255),Re[1]].join(" ");break;default:case 3:R=[L(K/255),L(ne/255),L(pe/255),Re[1]].join(" ")}}else if(typeof K=="string")R=[K,ne,pe,Ne,Re[2]].join(" ");else switch(v.precision){case 2:R=[U(K),U(ne),U(pe),U(Ne),Re[2]].join(" ");break;case 3:default:R=[L(K),L(ne),L(pe),L(Ne),Re[2]].join(" ")}return R},ot=f.__private__.getFilters=function(){return o},vt=f.__private__.putStream=function(v){var R=(v=v||{}).data||"",K=v.filters||ot(),ne=v.alreadyAppliedFilters||[],pe=v.addLength1||!1,Ne=R.length,Re=v.objectId,Qe=function(or){return or};if(d!==null&&Re===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Qe=sr.encryptor(Re,0));var at={};K===!0&&(K=["FlateEncode"]);var xt=v.additionalKeyValues||[],gt=(at=it.API.processDataByFilters!==void 0?it.API.processDataByFilters(R,K):{data:R,reverseChain:[]}).reverseChain+(Array.isArray(ne)?ne.join(" "):ne.toString());if(at.data.length!==0&&(xt.push({key:"Length",value:at.data.length}),pe===!0&&xt.push({key:"Length1",value:Ne})),gt.length!=0)if(gt.split("/").length-1==1)xt.push({key:"Filter",value:gt});else{xt.push({key:"Filter",value:"["+gt+"]"});for(var Dt=0;Dt<xt.length;Dt+=1)if(xt[Dt].key==="DecodeParms"){for(var an=[],pn=0;pn<at.reverseChain.split("/").length-1;pn+=1)an.push("null");an.push(xt[Dt].value),xt[Dt].value="["+an.join(" ")+"]"}}Q("<<");for(var Ln=0;Ln<xt.length;Ln++)Q("/"+xt[Ln].key+" "+xt[Ln].value);Q(">>"),at.data.length!==0&&(Q("stream"),Q(Qe(at.data)),Q("endstream"))},wt=f.__private__.putPage=function(v){var R=v.number,K=v.data,ne=v.objId,pe=v.contentsObjId;Mr(ne,!0),Q("<</Type /Page"),Q("/Parent "+v.rootDictionaryObjId+" 0 R"),Q("/Resources "+v.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(E(v.mediaBox.bottomLeftX))+" "+parseFloat(E(v.mediaBox.bottomLeftY))+" "+E(v.mediaBox.topRightX)+" "+E(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&Q("/CropBox ["+E(v.cropBox.bottomLeftX)+" "+E(v.cropBox.bottomLeftY)+" "+E(v.cropBox.topRightX)+" "+E(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&Q("/BleedBox ["+E(v.bleedBox.bottomLeftX)+" "+E(v.bleedBox.bottomLeftY)+" "+E(v.bleedBox.topRightX)+" "+E(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&Q("/TrimBox ["+E(v.trimBox.bottomLeftX)+" "+E(v.trimBox.bottomLeftY)+" "+E(v.trimBox.topRightX)+" "+E(v.trimBox.topRightY)+"]"),v.artBox!==null&&Q("/ArtBox ["+E(v.artBox.bottomLeftX)+" "+E(v.artBox.bottomLeftY)+" "+E(v.artBox.topRightX)+" "+E(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&Q("/UserUnit "+v.userUnit),dt.publish("putPage",{objId:ne,pageContext:Ke[R],pageNumber:R,page:K}),Q("/Contents "+pe+" 0 R"),Q(">>"),Q("endobj");var Ne=K.join(`
`);return N===b.ADVANCED&&(Ne+=`
Q`),Mr(pe,!0),vt({data:Ne,filters:ot(),objectId:pe}),Q("endobj"),ne},jt=f.__private__.putPages=function(){var v,R,K=[];for(v=1;v<=rt;v++)Ke[v].objId=fn(),Ke[v].contentsObjId=fn();for(v=1;v<=rt;v++)K.push(wt({number:v,data:Pe[v],objId:Ke[v].objId,contentsObjId:Ke[v].contentsObjId,mediaBox:Ke[v].mediaBox,cropBox:Ke[v].cropBox,bleedBox:Ke[v].bleedBox,trimBox:Ke[v].trimBox,artBox:Ke[v].artBox,userUnit:Ke[v].userUnit,rootDictionaryObjId:fe,resourceDictionaryObjId:et}));Mr(fe,!0),Q("<</Type /Pages");var ne="/Kids [";for(R=0;R<rt;R++)ne+=K[R]+" 0 R ";Q(ne+"]"),Q("/Count "+rt),Q(">>"),Q("endobj"),dt.publish("postPutPages")},en=function(v){dt.publish("putFont",{font:v,out:Q,newObject:Sn,putStream:vt}),v.isAlreadyPutted!==!0&&(v.objectNumber=Sn(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Pl(v.postScriptName)),Q("/Subtype /Type1"),typeof v.encoding=="string"&&Q("/Encoding /"+v.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},ir=function(){for(var v in _t)_t.hasOwnProperty(v)&&(p===!1||p===!0&&m.hasOwnProperty(v))&&en(_t[v])},ni=function(v){v.objectNumber=Sn();var R=[];R.push({key:"Type",value:"/XObject"}),R.push({key:"Subtype",value:"/Form"}),R.push({key:"BBox",value:"["+[E(v.x),E(v.y),E(v.x+v.width),E(v.y+v.height)].join(" ")+"]"}),R.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var K=v.pages[1].join(`
`);vt({data:K,additionalKeyValues:R,objectId:v.objectNumber}),Q("endobj")},os=function(){for(var v in Fn)Fn.hasOwnProperty(v)&&ni(Fn[v])},Va=function(v,R){var K,ne=[],pe=1/(R-1);for(K=0;K<1;K+=pe)ne.push(K);if(ne.push(1),v[0].offset!=0){var Ne={offset:0,color:v[0].color};v.unshift(Ne)}if(v[v.length-1].offset!=1){var Re={offset:1,color:v[v.length-1].color};v.push(Re)}for(var Qe="",at=0,xt=0;xt<ne.length;xt++){for(K=ne[xt];K>v[at+1].offset;)at++;var gt=v[at].offset,Dt=(K-gt)/(v[at+1].offset-gt),an=v[at].color,pn=v[at+1].color;Qe+=Z(Math.round((1-Dt)*an[0]+Dt*pn[0]).toString(16))+Z(Math.round((1-Dt)*an[1]+Dt*pn[1]).toString(16))+Z(Math.round((1-Dt)*an[2]+Dt*pn[2]).toString(16))}return Qe.trim()},Pc=function(v,R){R||(R=21);var K=Sn(),ne=Va(v.colors,R),pe=[];pe.push({key:"FunctionType",value:"0"}),pe.push({key:"Domain",value:"[0.0 1.0]"}),pe.push({key:"Size",value:"["+R+"]"}),pe.push({key:"BitsPerSample",value:"8"}),pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vt({data:ne,additionalKeyValues:pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:K}),Q("endobj"),v.objectNumber=Sn(),Q("<< /ShadingType "+v.type),Q("/ColorSpace /DeviceRGB");var Ne="/Coords ["+E(parseFloat(v.coords[0]))+" "+E(parseFloat(v.coords[1]))+" ";v.type===2?Ne+=E(parseFloat(v.coords[2]))+" "+E(parseFloat(v.coords[3])):Ne+=E(parseFloat(v.coords[2]))+" "+E(parseFloat(v.coords[3]))+" "+E(parseFloat(v.coords[4]))+" "+E(parseFloat(v.coords[5])),Q(Ne+="]"),v.matrix&&Q("/Matrix ["+v.matrix.toString()+"]"),Q("/Function "+K+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},ro=function(v,R){var K=fn(),ne=Sn();R.push({resourcesOid:K,objectOid:ne}),v.objectNumber=ne;var pe=[];pe.push({key:"Type",value:"/Pattern"}),pe.push({key:"PatternType",value:"1"}),pe.push({key:"PaintType",value:"1"}),pe.push({key:"TilingType",value:"1"}),pe.push({key:"BBox",value:"["+v.boundingBox.map(E).join(" ")+"]"}),pe.push({key:"XStep",value:E(v.xStep)}),pe.push({key:"YStep",value:E(v.yStep)}),pe.push({key:"Resources",value:K+" 0 R"}),v.matrix&&pe.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),vt({data:v.stream,additionalKeyValues:pe,objectId:v.objectNumber}),Q("endobj")},Ga=function(v){var R;for(R in ze)ze.hasOwnProperty(R)&&(ze[R]instanceof Sa?Pc(ze[R]):ze[R]instanceof Yl&&ro(ze[R],v))},Sd=function(v){for(var R in v.objectNumber=Sn(),Q("<<"),v)switch(R){case"opacity":Q("/ca "+U(v[R]));break;case"stroke-opacity":Q("/CA "+U(v[R]))}Q(">>"),Q("endobj")},bp=function(){var v;for(v in he)he.hasOwnProperty(v)&&Sd(he[v])},Lc=function(){for(var v in Q("/XObject <<"),Fn)Fn.hasOwnProperty(v)&&Fn[v].objectNumber>=0&&Q("/"+v+" "+Fn[v].objectNumber+" 0 R");dt.publish("putXobjectDict"),Q(">>")},Sp=function(){sr.oid=Sn(),Q("<<"),Q("/Filter /Standard"),Q("/V "+sr.v),Q("/R "+sr.r),Q("/U <"+sr.toHexString(sr.U)+">"),Q("/O <"+sr.toHexString(sr.O)+">"),Q("/P "+sr.P),Q(">>"),Q("endobj")},_d=function(){for(var v in Q("/Font <<"),_t)_t.hasOwnProperty(v)&&(p===!1||p===!0&&m.hasOwnProperty(v))&&Q("/"+v+" "+_t[v].objectNumber+" 0 R");Q(">>")},_p=function(){if(Object.keys(ze).length>0){for(var v in Q("/Shading <<"),ze)ze.hasOwnProperty(v)&&ze[v]instanceof Sa&&ze[v].objectNumber>=0&&Q("/"+v+" "+ze[v].objectNumber+" 0 R");dt.publish("putShadingPatternDict"),Q(">>")}},Ja=function(v){if(Object.keys(ze).length>0){for(var R in Q("/Pattern <<"),ze)ze.hasOwnProperty(R)&&ze[R]instanceof f.TilingPattern&&ze[R].objectNumber>=0&&ze[R].objectNumber<v&&Q("/"+R+" "+ze[R].objectNumber+" 0 R");dt.publish("putTilingPatternDict"),Q(">>")}},Np=function(){if(Object.keys(he).length>0){var v;for(v in Q("/ExtGState <<"),he)he.hasOwnProperty(v)&&he[v].objectNumber>=0&&Q("/"+v+" "+he[v].objectNumber+" 0 R");dt.publish("putGStateDict"),Q(">>")}},_n=function(v){Mr(v.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),_d(),_p(),Ja(v.objectOid),Np(),Lc(),Q(">>"),Q("endobj")},Nd=function(){var v=[];ir(),bp(),os(),Ga(v),dt.publish("putResources"),v.forEach(_n),_n({resourcesOid:et,objectOid:Number.MAX_SAFE_INTEGER}),dt.publish("postPutResources")},kd=function(){dt.publish("putAdditionalObjects");for(var v=0;v<De.length;v++){var R=De[v];Mr(R.objId,!0),Q(R.content),Q("endobj")}dt.publish("postPutAdditionalObjects")},jd=function(v){Lt[v.fontName]=Lt[v.fontName]||{},Lt[v.fontName][v.fontStyle]=v.id},Tc=function(v,R,K,ne,pe){var Ne={id:"F"+(Object.keys(_t).length+1).toString(10),postScriptName:v,fontName:R,fontStyle:K,encoding:ne,isStandardFont:pe||!1,metadata:{}};return dt.publish("addFont",{font:Ne,instance:this}),_t[Ne.id]=Ne,jd(Ne),Ne.id},kp=function(v){for(var R=0,K=Me.length;R<K;R++){var ne=Tc.call(this,v[R][0],v[R][1],v[R][2],Me[R][3],!0);p===!1&&(m[ne]=!0);var pe=v[R][0].split("-");jd({id:ne,fontName:pe[0],fontStyle:pe[1]||""})}dt.publish("addFonts",{fonts:_t,dictionary:Lt})},Bi=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(ne){var R=ne.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var K="Error in function "+R.split(`
`)[0].split("<")[0]+": "+ne.message;if(!ut.console)throw new Error(K);ut.console.error(K,ne),ut.alert&&alert(K)}},v.foo.bar=v,v.foo},Ka=function(v,R){var K,ne,pe,Ne,Re,Qe,at,xt,gt;if(pe=(R=R||{}).sourceEncoding||"Unicode",Re=R.outputEncoding,(R.autoencode||Re)&&_t[We].metadata&&_t[We].metadata[pe]&&_t[We].metadata[pe].encoding&&(Ne=_t[We].metadata[pe].encoding,!Re&&_t[We].encoding&&(Re=_t[We].encoding),!Re&&Ne.codePages&&(Re=Ne.codePages[0]),typeof Re=="string"&&(Re=Ne[Re]),Re)){for(at=!1,Qe=[],K=0,ne=v.length;K<ne;K++)(xt=Re[v.charCodeAt(K)])?Qe.push(String.fromCharCode(xt)):Qe.push(v[K]),Qe[K].charCodeAt(0)>>8&&(at=!0);v=Qe.join("")}for(K=v.length;at===void 0&&K!==0;)v.charCodeAt(K-1)>>8&&(at=!0),K--;if(!at)return v;for(Qe=R.noBOM?[]:[254,255],K=0,ne=v.length;K<ne;K++){if((gt=(xt=v.charCodeAt(K))>>8)>>8)throw new Error("Character at position "+K+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(gt),Qe.push(xt-(gt<<8))}return String.fromCharCode.apply(void 0,Qe)},Ir=f.__private__.pdfEscape=f.pdfEscape=function(v,R){return Ka(v,R).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dc=f.__private__.beginPage=function(v){Pe[++rt]=[],Ke[rt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Cd(rt),ye(Pe[Y])},Ad=function(v,R){var K,ne,pe;switch(t=R||t,typeof v=="string"&&(K=w(v.toLowerCase()),Array.isArray(K)&&(ne=K[0],pe=K[1])),Array.isArray(v)&&(ne=v[0]*Le,pe=v[1]*Le),isNaN(ne)&&(ne=i[0],pe=i[1]),(ne>14400||pe>14400)&&(Vt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ne=Math.min(14400,ne),pe=Math.min(14400,pe)),i=[ne,pe],t.substr(0,1)){case"l":pe>ne&&(i=[pe,ne]);break;case"p":ne>pe&&(i=[pe,ne])}Dc(i),Md(Fc),Q(Ui),$c!==0&&Q($c+" J"),Bc!==0&&Q(Bc+" j"),dt.publish("addPage",{pageNumber:rt})},jp=function(v){v>0&&v<=rt&&(Pe.splice(v,1),Ke.splice(v,1),rt--,Y>rt&&(Y=rt),this.setPage(Y))},Cd=function(v){v>0&&v<=rt&&(Y=v)},Ap=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Pe.length-1},Ed=function(v,R,K){var ne,pe=void 0;return K=K||{},v=v!==void 0?v:_t[We].fontName,R=R!==void 0?R:_t[We].fontStyle,ne=v.toLowerCase(),Lt[ne]!==void 0&&Lt[ne][R]!==void 0?pe=Lt[ne][R]:Lt[v]!==void 0&&Lt[v][R]!==void 0?pe=Lt[v][R]:K.disableWarning===!1&&Vt.warn("Unable to look up font label for font '"+v+"', '"+R+"'. Refer to getFontList() for available fonts."),pe||K.noFallback||(pe=Lt.times[R])==null&&(pe=Lt.times.normal),pe},Cp=f.__private__.putInfo=function(){var v=Sn(),R=function(ne){return ne};for(var K in d!==null&&(R=sr.encryptor(v,0)),Q("<<"),Q("/Producer ("+Ir(R("jsPDF "+it.version))+")"),Xe)Xe.hasOwnProperty(K)&&Xe[K]&&Q("/"+K.substr(0,1).toUpperCase()+K.substr(1)+" ("+Ir(R(Xe[K]))+")");Q("/CreationDate ("+Ir(R(J))+")"),Q(">>"),Q("endobj")},Mc=f.__private__.putCatalog=function(v){var R=(v=v||{}).rootDictionaryObjId||fe;switch(Sn(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+R+" 0 R"),ce||(ce="fullwidth"),ce){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var K=""+ce;K.substr(K.length-1)==="%"&&(ce=parseInt(ce)/100),typeof ce=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+U(ce)+"]")}switch(Ie||(Ie="continuous"),Ie){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}we&&Q("/PageMode /"+we),dt.publish("putCatalog"),Q(">>"),Q("endobj")},Ep=f.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(te+1)),Q("/Root "+te+" 0 R"),Q("/Info "+(te-1)+" 0 R"),d!==null&&Q("/Encrypt "+sr.oid+" 0 R"),Q("/ID [ <"+X+"> <"+X+"> ]"),Q(">>")},Pp=f.__private__.putHeader=function(){Q("%PDF-"+x),Q("%")},Lp=f.__private__.putXRef=function(){var v="0000000000";Q("xref"),Q("0 "+(te+1)),Q("0000000000 65535 f ");for(var R=1;R<=te;R++)typeof ue[R]=="function"?Q((v+ue[R]()).slice(-10)+" 00000 n "):ue[R]!==void 0?Q((v+ue[R]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},ks=f.__private__.buildDocument=function(){He(),ye(me),dt.publish("buildDocument"),Pp(),jt(),kd(),Nd(),d!==null&&Sp(),Cp(),Mc();var v=ge;return Lp(),Ep(),Q("startxref"),Q(""+v),Q("%%EOF"),ye(Pe[Y]),me.join(`
`)},Xa=f.__private__.getBlob=function(v){return new Blob([Ye(v)],{type:"application/pdf"})},Qa=f.output=f.__private__.output=Bi(function(v,R){switch(typeof(R=R||{})=="string"?R={filename:R}:R.filename=R.filename||"generated.pdf",v){case void 0:return ks();case"save":f.save(R.filename);break;case"arraybuffer":return Ye(ks());case"blob":return Xa(ks());case"bloburi":case"bloburl":if(ut.URL!==void 0&&typeof ut.URL.createObjectURL=="function")return ut.URL&&ut.URL.createObjectURL(Xa(ks()))||void 0;Vt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var K="",ne=ks();try{K=Mg(ne)}catch{K=Mg(unescape(encodeURIComponent(ne)))}return"data:application/pdf;filename="+R.filename+";base64,"+K;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ut)==="[object Window]"){var pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';R.pdfObjectUrl&&(pe=R.pdfObjectUrl,Ne="");var Re='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pe+'"'+Ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(R)+");<\/script></body></html>",Qe=ut.open();return Qe!==null&&Qe.document.write(Re),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ut)==="[object Window]"){var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(R.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+R.filename+'" width="500px" height="400px" /></body></html>',xt=ut.open();if(xt!==null){xt.document.write(at);var gt=this;xt.document.documentElement.querySelector("#pdfViewer").onload=function(){xt.document.title=R.filename,xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(gt.output("bloburl"))}}return xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ut)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",R)+'"></iframe></body></html>',an=ut.open();if(an!==null&&(an.document.write(Dt),an.document.title=R.filename),an||typeof safari>"u")return an;break;case"datauri":case"dataurl":return ut.document.location.href=this.output("datauristring",R);default:return null}}),Pd=function(v){return Array.isArray(It)===!0&&It.indexOf(v)>-1};switch(r){case"pt":Le=1;break;case"mm":Le=72/25.4;break;case"cm":Le=72/2.54;break;case"in":Le=72;break;case"px":Le=Pd("px_scaling")==1?.75:96/72;break;case"pc":case"em":Le=12;break;case"ex":Le=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Le=r}var sr=null;re(),q();var Tp=function(v){return d!==null?sr.encryptor(v,0):function(R){return R}},Ld=f.__private__.getPageInfo=f.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ke[v].objId,pageNumber:v,pageContext:Ke[v]}},mt=f.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var R in Ke)if(Ke[R].objId===v)break;return Ld(R)},Dp=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ke[Y].objId,pageNumber:Y,pageContext:Ke[Y]}};f.addPage=function(){return Ad.apply(this,arguments),this},f.setPage=function(){return Cd.apply(this,arguments),ye.call(this,Pe[Y]),this},f.insertPage=function(v){return this.addPage(),this.movePage(Y,v),this},f.movePage=function(v,R){var K,ne;if(v>R){K=Pe[v],ne=Ke[v];for(var pe=v;pe>R;pe--)Pe[pe]=Pe[pe-1],Ke[pe]=Ke[pe-1];Pe[R]=K,Ke[R]=ne,this.setPage(R)}else if(v<R){K=Pe[v],ne=Ke[v];for(var Ne=v;Ne<R;Ne++)Pe[Ne]=Pe[Ne+1],Ke[Ne]=Ke[Ne+1];Pe[R]=K,Ke[R]=ne,this.setPage(R)}return this},f.deletePage=function(){return jp.apply(this,arguments),this},f.__private__.text=f.text=function(v,R,K,ne,pe){var Ne,Re,Qe,at,xt,gt,Dt,an,pn,Ln=(ne=ne||{}).scope||this;if(typeof v=="number"&&typeof R=="number"&&(typeof K=="string"||Array.isArray(K))){var or=K;K=R,R=v,v=or}if(arguments[3]instanceof st?(j("The transform parameter of text() with a Matrix value"),pn=pe):(Qe=arguments[4],at=arguments[5],zt(Dt=arguments[3])==="object"&&Dt!==null||(typeof Qe=="string"&&(at=Qe,Qe=null),typeof Dt=="string"&&(at=Dt,Dt=null),typeof Dt=="number"&&(Qe=Dt,Dt=null),ne={flags:Dt,angle:Qe,align:at})),isNaN(R)||isNaN(K)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Ln;var zn="",zi=!1,ri=typeof ne.lineHeightFactor=="number"?ne.lineHeightFactor:ra,cs=Ln.internal.scaleFactor;function Bd(Kt){return Kt=Kt.split("	").join(Array(ne.TabLen||9).join(" ")),Ir(Kt,Dt)}function qc(Kt){for(var Xt,kn=Kt.concat(),On=[],Ps=kn.length;Ps--;)typeof(Xt=kn.shift())=="string"?On.push(Xt):Array.isArray(Kt)&&(Xt.length===1||Xt[1]===void 0&&Xt[2]===void 0)?On.push(Xt[0]):On.push([Xt[0],Xt[1],Xt[2]]);return On}function Yc(Kt,Xt){var kn;if(typeof Kt=="string")kn=Xt(Kt)[0];else if(Array.isArray(Kt)){for(var On,Ps,eu=Kt.concat(),fl=[],qd=eu.length;qd--;)typeof(On=eu.shift())=="string"?fl.push(Xt(On)[0]):Array.isArray(On)&&typeof On[0]=="string"&&(Ps=Xt(On[0],On[1],On[2]),fl.push([Ps[0],Ps[1],Ps[2]]));kn=fl}return kn}var il=!1,Vc=!0;if(typeof v=="string")il=!0;else if(Array.isArray(v)){var Gc=v.concat();Re=[];for(var sl,Xn=Gc.length;Xn--;)(typeof(sl=Gc.shift())!="string"||Array.isArray(sl)&&typeof sl[0]!="string")&&(Vc=!1);il=Vc}if(il===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var ol=Ue/Ln.internal.scaleFactor,al=ol*(ri-1);switch(ne.baseline){case"bottom":K-=al;break;case"top":K+=ol-al;break;case"hanging":K+=ol-2*al;break;case"middle":K+=ol/2-al}if((gt=ne.maxWidth||0)>0&&(typeof v=="string"?v=Ln.splitTextToSize(v,gt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Kt,Xt){return Kt.concat(Ln.splitTextToSize(Xt,gt))},[]))),Ne={text:v,x:R,y:K,options:ne,mutex:{pdfEscape:Ir,activeFontKey:We,fonts:_t,activeFontSize:Ue}},dt.publish("preProcessText",Ne),v=Ne.text,Qe=(ne=Ne.options).angle,!(pn instanceof st)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,ne.rotationDirection===0&&(Qe=-Qe),N===b.ADVANCED&&(Qe=-Qe);var ll=Math.cos(Qe),Jc=Math.sin(Qe);pn=new st(ll,Jc,-Jc,ll,0,0)}else Qe&&Qe instanceof st&&(pn=Qe);N!==b.ADVANCED||pn||(pn=Dr),(xt=ne.charSpace||tl)!==void 0&&(zn+=E(F(xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(an=ne.horizontalScale)!==void 0&&(zn+=E(100*an)+` Tz
`),ne.lang;var Rr=-1,Wp=ne.renderingMode!==void 0?ne.renderingMode:ne.stroke,Kc=Ln.internal.getCurrentPageInfo().pageContext;switch(Wp){case 0:case!1:case"fill":Rr=0;break;case 1:case!0:case"stroke":Rr=1;break;case 2:case"fillThenStroke":Rr=2;break;case 3:case"invisible":Rr=3;break;case 4:case"fillAndAddForClipping":Rr=4;break;case 5:case"strokeAndAddPathForClipping":Rr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rr=6;break;case 7:case"addToPathForClipping":Rr=7}var Ud=Kc.usedRenderingMode!==void 0?Kc.usedRenderingMode:-1;Rr!==-1?zn+=Rr+` Tr
`:Ud!==-1&&(zn+=`0 Tr
`),Rr!==-1&&(Kc.usedRenderingMode=Rr),at=ne.align||"left";var Si,cl=Ue*ri,zd=Ln.internal.pageSize.getWidth(),Wd=_t[We];xt=ne.charSpace||tl,gt=ne.maxWidth||0,Dt=Object.assign({autoencode:!0,noBOM:!0},ne.flags);var ao=[],oa=function(Kt){return Ln.getStringUnitWidth(Kt,{font:Wd,charSpace:xt,fontSize:Ue,doKerning:!1})*Ue/cs};if(Object.prototype.toString.call(v)==="[object Array]"){var Fr;Re=qc(v),at!=="left"&&(Si=Re.map(oa));var Sr,lo=0;if(at==="right"){R-=Si[0],v=[],Xn=Re.length;for(var As=0;As<Xn;As++)As===0?(Sr=ls(R),Fr=js(K)):(Sr=F(lo-Si[As]),Fr=-cl),v.push([Re[As],Sr,Fr]),lo=Si[As]}else if(at==="center"){R-=Si[0]/2,v=[],Xn=Re.length;for(var Cs=0;Cs<Xn;Cs++)Cs===0?(Sr=ls(R),Fr=js(K)):(Sr=F((lo-Si[Cs])/2),Fr=-cl),v.push([Re[Cs],Sr,Fr]),lo=Si[Cs]}else if(at==="left"){v=[],Xn=Re.length;for(var ul=0;ul<Xn;ul++)v.push(Re[ul])}else if(at==="justify"&&Wd.encoding==="Identity-H"){v=[],Xn=Re.length,gt=gt!==0?gt:zd;for(var Es=0,Nn=0;Nn<Xn;Nn++)if(Fr=Nn===0?js(K):-cl,Sr=Nn===0?ls(R):Es,Nn<Xn-1){var Xc=F((gt-Si[Nn])/(Re[Nn].split(" ").length-1)),_r=Re[Nn].split(" ");v.push([_r[0]+" ",Sr,Fr]),Es=0;for(var _i=1;_i<_r.length;_i++){var dl=(oa(_r[_i-1]+" "+_r[_i])-oa(_r[_i]))*cs+Xc;_i==_r.length-1?v.push([_r[_i],dl,0]):v.push([_r[_i]+" ",dl,0]),Es-=dl}}else v.push([Re[Nn],Sr,Fr]);v.push(["",Es,0])}else{if(at!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Xn=Re.length,gt=gt!==0?gt:zd,Nn=0;Nn<Xn;Nn++)Fr=Nn===0?js(K):-cl,Sr=Nn===0?ls(R):0,Nn<Xn-1?ao.push(E(F((gt-Si[Nn])/(Re[Nn].split(" ").length-1)))):ao.push(0),v.push([Re[Nn],Sr,Fr])}}var Hd=typeof ne.R2L=="boolean"?ne.R2L:ke;Hd===!0&&(v=Yc(v,function(Kt,Xt,kn){return[Kt.split("").reverse().join(""),Xt,kn]})),Ne={text:v,x:R,y:K,options:ne,mutex:{pdfEscape:Ir,activeFontKey:We,fonts:_t,activeFontSize:Ue}},dt.publish("postProcessText",Ne),v=Ne.text,zi=Ne.mutex.isHex||!1;var Qc=_t[We].encoding;Qc!=="WinAnsiEncoding"&&Qc!=="StandardEncoding"||(v=Yc(v,function(Kt,Xt,kn){return[Bd(Kt),Xt,kn]})),Re=qc(v),v=[];for(var aa,la,co,ca=0,hl=1,ua=Array.isArray(Re[0])?hl:ca,uo="",Zc=function(Kt,Xt,kn){var On="";return kn instanceof st?(kn=typeof ne.angle=="number"?Tr(kn,new st(1,0,0,1,Kt,Xt)):Tr(new st(1,0,0,1,Kt,Xt),kn),N===b.ADVANCED&&(kn=Tr(new st(1,0,0,-1,0,0),kn)),On=kn.join(" ")+` Tm
`):On=E(Kt)+" "+E(Xt)+` Td
`,On},Ni=0;Ni<Re.length;Ni++){switch(uo="",ua){case hl:co=(zi?"<":"(")+Re[Ni][0]+(zi?">":")"),aa=parseFloat(Re[Ni][1]),la=parseFloat(Re[Ni][2]);break;case ca:co=(zi?"<":"(")+Re[Ni]+(zi?">":")"),aa=ls(R),la=js(K)}ao!==void 0&&ao[Ni]!==void 0&&(uo=ao[Ni]+` Tw
`),Ni===0?v.push(uo+Zc(aa,la,pn)+co):ua===ca?v.push(uo+co):ua===hl&&v.push(uo+Zc(aa,la,pn)+co)}v=ua===ca?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var ki=`BT
/`;return ki+=We+" "+Ue+` Tf
`,ki+=E(Ue*ri)+` TL
`,ki+=ia+`
`,ki+=zn,ki+=v,Q(ki+="ET"),m[We]=!0,Ln};var Mp=f.__private__.clip=f.clip=function(v){return Q(v==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Mp("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Q("n"),this};var as=f.__private__.isValidStyle=function(v){var R=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(R=!0),R};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(v){return as(v)&&(u=v),this};var Td=f.__private__.getStyle=f.getStyle=function(v){var R=u;switch(v){case"D":case"S":R="S";break;case"F":R="f";break;case"FD":case"DF":R="B";break;case"f":case"f*":case"B":case"B*":R=v}return R},Dd=f.close=function(){return Q("h"),this};f.stroke=function(){return Q("S"),this},f.fill=function(v){return Za("f",v),this},f.fillEvenOdd=function(v){return Za("f*",v),this},f.fillStroke=function(v){return Za("B",v),this},f.fillStrokeEvenOdd=function(v){return Za("B*",v),this};var Za=function(v,R){zt(R)==="object"?Rp(R,v):Q(v)},Ic=function(v){v===null||N===b.ADVANCED&&v===void 0||(v=Td(v),Q(v))};function Ip(v,R,K,ne,pe){var Ne=new Yl(R||this.boundingBox,K||this.xStep,ne||this.yStep,this.gState,pe||this.matrix);Ne.stream=this.stream;var Re=v+"$$"+this.cloneIndex+++"$$";return bn(Re,Ne),Ne}var Rp=function(v,R){var K=At[v.key],ne=ze[K];if(ne instanceof Sa)Q("q"),Q(Fp(R)),ne.gState&&f.setGState(ne.gState),Q(v.matrix.toString()+" cm"),Q("/"+K+" sh"),Q("Q");else if(ne instanceof Yl){var pe=new st(1,0,0,-1,0,oo());v.matrix&&(pe=pe.multiply(v.matrix||Dr),K=Ip.call(ne,v.key,v.boundingBox,v.xStep,v.yStep,pe).id),Q("q"),Q("/Pattern cs"),Q("/"+K+" scn"),ne.gState&&f.setGState(ne.gState),Q(R),Q("Q")}},Fp=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Rc=f.moveTo=function(v,R){return Q(E(F(v))+" "+E(O(R))+" m"),this},na=f.lineTo=function(v,R){return Q(E(F(v))+" "+E(O(R))+" l"),this},io=f.curveTo=function(v,R,K,ne,pe,Ne){return Q([E(F(v)),E(O(R)),E(F(K)),E(O(ne)),E(F(pe)),E(O(Ne)),"c"].join(" ")),this};f.__private__.line=f.line=function(v,R,K,ne,pe){if(isNaN(v)||isNaN(R)||isNaN(K)||isNaN(ne)||!as(pe))throw new Error("Invalid arguments passed to jsPDF.line");return N===b.COMPAT?this.lines([[K-v,ne-R]],v,R,[1,1],pe||"S"):this.lines([[K-v,ne-R]],v,R,[1,1]).stroke()},f.__private__.lines=f.lines=function(v,R,K,ne,pe,Ne){var Re,Qe,at,xt,gt,Dt,an,pn,Ln,or,zn,zi;if(typeof v=="number"&&(zi=K,K=R,R=v,v=zi),ne=ne||[1,1],Ne=Ne||!1,isNaN(R)||isNaN(K)||!Array.isArray(v)||!Array.isArray(ne)||!as(pe)||typeof Ne!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Rc(R,K),Re=ne[0],Qe=ne[1],xt=v.length,or=R,zn=K,at=0;at<xt;at++)(gt=v[at]).length===2?(or=gt[0]*Re+or,zn=gt[1]*Qe+zn,na(or,zn)):(Dt=gt[0]*Re+or,an=gt[1]*Qe+zn,pn=gt[2]*Re+or,Ln=gt[3]*Qe+zn,or=gt[4]*Re+or,zn=gt[5]*Qe+zn,io(Dt,an,pn,Ln,or,zn));return Ne&&Dd(),Ic(pe),this},f.path=function(v){for(var R=0;R<v.length;R++){var K=v[R],ne=K.c;switch(K.op){case"m":Rc(ne[0],ne[1]);break;case"l":na(ne[0],ne[1]);break;case"c":io.apply(this,ne);break;case"h":Dd()}}return this},f.__private__.rect=f.rect=function(v,R,K,ne,pe){if(isNaN(v)||isNaN(R)||isNaN(K)||isNaN(ne)||!as(pe))throw new Error("Invalid arguments passed to jsPDF.rect");return N===b.COMPAT&&(ne=-ne),Q([E(F(v)),E(O(R)),E(F(K)),E(F(ne)),"re"].join(" ")),Ic(pe),this},f.__private__.triangle=f.triangle=function(v,R,K,ne,pe,Ne,Re){if(isNaN(v)||isNaN(R)||isNaN(K)||isNaN(ne)||isNaN(pe)||isNaN(Ne)||!as(Re))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[K-v,ne-R],[pe-K,Ne-ne],[v-pe,R-Ne]],v,R,[1,1],Re,!0),this},f.__private__.roundedRect=f.roundedRect=function(v,R,K,ne,pe,Ne,Re){if(isNaN(v)||isNaN(R)||isNaN(K)||isNaN(ne)||isNaN(pe)||isNaN(Ne)||!as(Re))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return pe=Math.min(pe,.5*K),Ne=Math.min(Ne,.5*ne),this.lines([[K-2*pe,0],[pe*Qe,0,pe,Ne-Ne*Qe,pe,Ne],[0,ne-2*Ne],[0,Ne*Qe,-pe*Qe,Ne,-pe,Ne],[2*pe-K,0],[-pe*Qe,0,-pe,-Ne*Qe,-pe,-Ne],[0,2*Ne-ne],[0,-Ne*Qe,pe*Qe,-Ne,pe,-Ne]],v+pe,R,[1,1],Re,!0),this},f.__private__.ellipse=f.ellipse=function(v,R,K,ne,pe){if(isNaN(v)||isNaN(R)||isNaN(K)||isNaN(ne)||!as(pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ne=4/3*(Math.SQRT2-1)*K,Re=4/3*(Math.SQRT2-1)*ne;return Rc(v+K,R),io(v+K,R-Re,v+Ne,R-ne,v,R-ne),io(v-Ne,R-ne,v-K,R-Re,v-K,R),io(v-K,R+Re,v-Ne,R+ne,v,R+ne),io(v+Ne,R+ne,v+K,R+Re,v+K,R),Ic(pe),this},f.__private__.circle=f.circle=function(v,R,K,ne){if(isNaN(v)||isNaN(R)||isNaN(K)||!as(ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,R,K,K,ne)},f.setFont=function(v,R,K){return K&&(R=P(R,K)),We=Ed(v,R,{disableWarning:!1}),this};var Op=f.__private__.getFont=f.getFont=function(){return _t[Ed.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var v,R,K={};for(v in Lt)if(Lt.hasOwnProperty(v))for(R in K[v]=[],Lt[v])Lt[v].hasOwnProperty(R)&&K[v].push(R);return K},f.addFont=function(v,R,K,ne,pe){var Ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ne.indexOf(arguments[3])!==-1?pe=arguments[3]:arguments[3]&&Ne.indexOf(arguments[3])==-1&&(K=P(K,ne)),pe=pe||"Identity-H",Tc.call(this,v,R,K,pe)};var ra,Fc=n.lineWidth||.200025,el=f.__private__.getLineWidth=f.getLineWidth=function(){return Fc},Md=f.__private__.setLineWidth=f.setLineWidth=function(v){return Fc=v,Q(E(F(v))+" w"),this};f.__private__.setLineDash=it.API.setLineDash=it.API.setLineDashPattern=function(v,R){if(v=v||[],R=R||0,isNaN(R)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(K){return E(F(K))}).join(" "),R=E(F(R)),Q("["+v+"] "+R+" d"),this};var Id=f.__private__.getLineHeight=f.getLineHeight=function(){return Ue*ra};f.__private__.getLineHeight=f.getLineHeight=function(){return Ue*ra};var Rd=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(ra=v),this},Fd=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return ra};Rd(n.lineHeight);var ls=f.__private__.getHorizontalCoordinate=function(v){return F(v)},js=f.__private__.getVerticalCoordinate=function(v){return N===b.ADVANCED?v:Ke[Y].mediaBox.topRightY-Ke[Y].mediaBox.bottomLeftY-F(v)},$p=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(v){return E(ls(v))},so=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(v){return E(js(v))},Ui=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Nt(Ui)},f.__private__.setStrokeColor=f.setDrawColor=function(v,R,K,ne){return Ui=ht({ch1:v,ch2:R,ch3:K,ch4:ne,pdfColorType:"draw",precision:2}),Q(Ui),this};var Oc=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Nt(Oc)},f.__private__.setFillColor=f.setFillColor=function(v,R,K,ne){return Oc=ht({ch1:v,ch2:R,ch3:K,ch4:ne,pdfColorType:"fill",precision:2}),Q(Oc),this};var ia=n.textColor||"0 g",Bp=f.__private__.getTextColor=f.getTextColor=function(){return Nt(ia)};f.__private__.setTextColor=f.setTextColor=function(v,R,K,ne){return ia=ht({ch1:v,ch2:R,ch3:K,ch4:ne,pdfColorType:"text",precision:3}),this};var tl=n.charSpace,Up=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(tl||0)};f.__private__.setCharSpace=f.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return tl=v,this};var $c=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(v){var R=f.CapJoinStyles[v];if(R===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $c=R,Q(R+" J"),this};var Bc=0;f.__private__.setLineJoin=f.setLineJoin=function(v){var R=f.CapJoinStyles[v];if(R===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bc=R,Q(R+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(E(F(v))+" M"),this},f.GState=Ff,f.setGState=function(v){(v=typeof v=="string"?he[Fe[v]]:Od(null,v)).equals(Ge)||(Q("/"+v.id+" gs"),Ge=v)};var Od=function(v,R){if(!v||!Fe[v]){var K=!1;for(var ne in he)if(he.hasOwnProperty(ne)&&he[ne].equals(R)){K=!0;break}if(K)R=he[ne];else{var pe="GS"+(Object.keys(he).length+1).toString(10);he[pe]=R,R.id=pe}return v&&(Fe[v]=R.id),dt.publish("addGState",R),R}};f.addGState=function(v,R){return Od(v,R),this},f.saveGraphicsState=function(){return Q("q"),rr.push({key:We,size:Ue,color:ia}),this},f.restoreGraphicsState=function(){Q("Q");var v=rr.pop();return We=v.key,Ue=v.size,ia=v.color,Ge=null,this},f.setCurrentTransformationMatrix=function(v){return Q(v.toString()+" cm"),this},f.comment=function(v){return Q("#"+v),this};var nl=function(v,R){var K=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return K},set:function(Ne){isNaN(Ne)||(K=parseFloat(Ne))}});var ne=R||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ne},set:function(Ne){isNaN(Ne)||(ne=parseFloat(Ne))}});var pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pe},set:function(Ne){pe=Ne.toString()}}),this},Uc=function(v,R,K,ne){nl.call(this,v,R),this.type="rect";var pe=K||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pe},set:function(Re){isNaN(Re)||(pe=parseFloat(Re))}});var Ne=ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ne},set:function(Re){isNaN(Re)||(Ne=parseFloat(Re))}}),this},zc=function(){this.page=rt,this.currentPage=Y,this.pages=Pe.slice(0),this.pagesContext=Ke.slice(0),this.x=kt,this.y=pt,this.matrix=wn,this.width=sa(Y),this.height=oo(Y),this.outputDestination=Oe,this.id="",this.objectNumber=-1};zc.prototype.restore=function(){rt=this.page,Y=this.currentPage,Ke=this.pagesContext,Pe=this.pages,kt=this.x,pt=this.y,wn=this.matrix,Wc(Y,this.width),Hc(Y,this.height),Oe=this.outputDestination};var $d=function(v,R,K,ne,pe){bi.push(new zc),rt=Y=0,Pe=[],kt=v,pt=R,wn=pe,Dc([K,ne])},zp=function(v){if(ti[v])bi.pop().restore();else{var R=new zc,K="Xo"+(Object.keys(Fn).length+1).toString(10);R.id=K,ti[v]=K,Fn[K]=R,dt.publish("addFormObject",R),bi.pop().restore()}};for(var rl in f.beginFormObject=function(v,R,K,ne,pe){return $d(v,R,K,ne,pe),this},f.endFormObject=function(v){return zp(v),this},f.doFormObject=function(v,R){var K=Fn[ti[v]];return Q("q"),Q(R.toString()+" cm"),Q("/"+K.id+" Do"),Q("Q"),this},f.getFormObject=function(v){var R=Fn[ti[v]];return{x:R.x,y:R.y,width:R.width,height:R.height,matrix:R.matrix}},f.save=function(v,R){return v=v||"generated.pdf",(R=R||{}).returnPromise=R.returnPromise||!1,R.returnPromise===!1?(wa(Xa(ks()),v),typeof wa.unload=="function"&&ut.setTimeout&&setTimeout(wa.unload,911),this):new Promise(function(K,ne){try{var pe=wa(Xa(ks()),v);typeof wa.unload=="function"&&ut.setTimeout&&setTimeout(wa.unload,911),K(pe)}catch(Ne){ne(Ne.message)}})},it.API)it.API.hasOwnProperty(rl)&&(rl==="events"&&it.API.events.length?function(v,R){var K,ne,pe;for(pe=R.length-1;pe!==-1;pe--)K=R[pe][0],ne=R[pe][1],v.subscribe.apply(v,[K].concat(typeof ne=="function"?[ne]:ne))}(dt,it.API.events):f[rl]=it.API[rl]);var sa=f.getPageWidth=function(v){return(Ke[v=v||Y].mediaBox.topRightX-Ke[v].mediaBox.bottomLeftX)/Le},Wc=f.setPageWidth=function(v,R){Ke[v].mediaBox.topRightX=R*Le+Ke[v].mediaBox.bottomLeftX},oo=f.getPageHeight=function(v){return(Ke[v=v||Y].mediaBox.topRightY-Ke[v].mediaBox.bottomLeftY)/Le},Hc=f.setPageHeight=function(v,R){Ke[v].mediaBox.topRightY=R*Le+Ke[v].mediaBox.bottomLeftY};return f.internal={pdfEscape:Ir,getStyle:Td,getFont:Op,getFontSize:be,getCharSpace:Up,getTextColor:Bp,getLineHeight:Id,getLineHeightFactor:Fd,getLineWidth:el,write:lt,getHorizontalCoordinate:ls,getVerticalCoordinate:js,getCoordinateString:$p,getVerticalCoordinateString:so,collections:{},newObject:Sn,newAdditionalObject:no,newObjectDeferred:fn,newObjectDeferredBegin:Mr,getFilters:ot,putStream:vt,events:dt,scaleFactor:Le,pageSize:{getWidth:function(){return sa(Y)},setWidth:function(v){Wc(Y,v)},getHeight:function(){return oo(Y)},setHeight:function(v){Hc(Y,v)}},encryptionOptions:d,encryption:sr,getEncryptor:Tp,output:Qa,getNumberOfPages:Ap,pages:Pe,out:Q,f2:U,f3:L,getPageInfo:Ld,getPageInfoByObjId:mt,getCurrentPageInfo:Dp,getPDFVersion:y,Point:nl,Rectangle:Uc,Matrix:st,hasHotfix:Pd},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return sa(Y)},set:function(v){Wc(Y,v)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return oo(Y)},set:function(v){Hc(Y,v)},enumerable:!0,configurable:!0}),kp.call(f,Me),We="F1",Ad(i,t),dt.publish("initialized"),f}El.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},El.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},El.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},El.prototype.processOwnerPassword=function(n,e){return Rg(Ig(e).substr(0,5),n)},El.prototype.encryptor=function(n,e){var t=Ig(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Rg(t,r)}},Ff.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||zt(n)!==zt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},it.API={events:[]},it.version="3.0.1";var gn=it.API,fy=1,Ya=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},kl=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},yt=function(n){return n.toFixed(2)},So=function(n){return n.toFixed(5)};gn.__acroform__={};var ei=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Vv=function(n){return n*fy},hs=function(n){var e=new ES,t=nt.internal.getHeight(n)||0,r=nt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(yt(r)),Number(yt(t))],e},XC=gn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},QC=gn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},ZC=gn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Cn=gn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ZC(n,e-1)},En=gn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return XC(n,e-1)},Pn=gn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return QC(n,e-1)},e8=gn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=t(i+o)||0,l.upperRight_Y=r(s)||0,[Number(yt(l.lowerLeft_X)),Number(yt(l.lowerLeft_Y)),Number(yt(l.upperRight_X)),Number(yt(l.upperRight_Y))]},t8=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Fg(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+yt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=hs(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Fg=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(L){return L.split(`
`)}):i.map(function(L){return[L]});var s=t,o=nt.internal.getHeight(n)||0;o=o<0?-o:o;var a=nt.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(L,F,T){if(L+1<i.length){var O=F+" "+i[L+1][0];return Dh(O,n,T).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,p=Dh("3",n,s).height,m=n.multiline?o-s:(o-p)/2,f=m+=2,x=0,y=0,_=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Dh(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var w="",b=0,N=0;N<i.length;N++)if(i.hasOwnProperty(N)){var C=!1;if(i[N].length!==1&&_!==i[N].length-1){if((p+2)*(b+2)+2>o)continue e;w+=i[N][_],C=!0,y=N,N--}else{w=(w+=i[N][_]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var A=parseInt(N),P=l(A,w,s),E=N>=i.length-1;if(P&&!E){w+=" ",_=0;continue}if(P||E){if(E)y=A;else if(n.multiline&&(p+2)*(b+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(b+2)+2>o)continue e;y=A}}for(var j="",D=x;D<=y;D++){var U=i[D];if(n.multiline){if(D===y){j+=U[_]+" ",_=(_+1)%U.length;continue}if(D===x){j+=U[U.length-1]+" ";continue}}j+=U[0]+" "}switch(j=j.substr(j.length-1)==" "?j.substr(0,j.length-1):j,d=Dh(j,n,s).width,n.textAlign){case"right":u=a-d-2;break;case"center":u=(a-d)/2;break;case"left":default:u=2}e+=yt(u)+" "+yt(f)+` Td
`,e+="("+Ya(j)+`) Tj
`,e+=-yt(u)+` 0 Td
`,f=-(s+2),d=0,x=C?y:y+1,b++,w=""}break}return r.text=e,r.fontSize=s,r},Dh=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},n8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},r8=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},i8=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),zt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},s8=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(is.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(n8)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fy=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new PS,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&r8(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=e8(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=nt.createDefaultAppearanceStream(a),zt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=t8(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var f=a.appearanceStreamContent[m];if(p+="/"+m+" ",p+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var x=f[o];typeof x=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=f)=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&i8(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},CS=gn.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),zt(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Ya(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},em=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Ya(r(n))+")"},vs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};vs.prototype.toString=function(){return this.objId+" 0 R"},vs.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},vs.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:CS(i,this.objId,this.scope)}):i instanceof vs?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var ES=function(){vs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ei(ES,vs);var PS=function(){vs.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ya(t(n))+")"}},set:function(t){n=t}})};ei(PS,vs);var is=function n(){vs.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Cn(e,3)},set:function(w){w?this.F=En(e,3):this.F=Pn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Of)return;s="FieldObject"+n.FieldNum++}var w=function(b){return b};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Ya(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/fy:u},set:function(w){u=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Of||this instanceof Ma))return em(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=w}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Vn?m:em(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof Vn?w:w.substr(0,1)==="("?kl(w.substr(1,w.length-2)):kl(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vn?kl(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof Vn?"/"+w:w}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Vn?f:em(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=this instanceof Vn?w:w.substr(0,1)==="("?kl(w.substr(1,w.length-2)):kl(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vn?kl(f.substr(1,f.length-1)):f},set:function(w){w=w.toString(),f=this instanceof Vn?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(w){w=!!w,y=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(w){x=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,1)},set:function(w){w?this.Ff=En(this.Ff,1):this.Ff=Pn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,2)},set:function(w){w?this.Ff=En(this.Ff,2):this.Ff=Pn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,3)},set:function(w){w?this.Ff=En(this.Ff,3):this.Ff=Pn(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');_=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(_){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:_=2;break;case"center":case 1:_=1;break;case"left":case 0:default:_=0}}})};ei(is,vs);var nc=function(){is.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return CS(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,18)},set:function(t){t?this.Ff=En(this.Ff,18):this.Ff=Pn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=En(this.Ff,19):this.Ff=Pn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,20)},set:function(t){t?(this.Ff=En(this.Ff,20),e.sort()):this.Ff=Pn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,22)},set:function(t){t?this.Ff=En(this.Ff,22):this.Ff=Pn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,23)},set:function(t){t?this.Ff=En(this.Ff,23):this.Ff=Pn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,27)},set:function(t){t?this.Ff=En(this.Ff,27):this.Ff=Pn(this.Ff,27)}}),this.hasAppearanceStream=!1};ei(nc,is);var rc=function(){nc.call(this),this.fontName="helvetica",this.combo=!1};ei(rc,nc);var ic=function(){rc.call(this),this.combo=!0};ei(ic,rc);var Xh=function(){ic.call(this),this.edit=!0};ei(Xh,ic);var Vn=function(){is.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,15)},set:function(t){t?this.Ff=En(this.Ff,15):this.Ff=Pn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,16)},set:function(t){t?this.Ff=En(this.Ff,16):this.Ff=Pn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,17)},set:function(t){t?this.Ff=En(this.Ff,17):this.Ff=Pn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,26)},set:function(t){t?this.Ff=En(this.Ff,26):this.Ff=Pn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ya(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){zt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ei(Vn,is);var Qh=function(){Vn.call(this),this.pushButton=!0};ei(Qh,Vn);var sc=function(){Vn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ei(sc,Vn);var Of=function(){var n,e;is.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Ya(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){zt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=nt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ei(Of,is),sc.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},sc.prototype.createOption=function(n){var e=new Of;return e.Parent=this,e.optionName=n,this.Kids.push(e),o8.call(this.scope,e),e};var Zh=function(){Vn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=nt.CheckBox.createAppearanceStream()};ei(Zh,Vn);var Ma=function(){is.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,13)},set:function(e){e?this.Ff=En(this.Ff,13):this.Ff=Pn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,21)},set:function(e){e?this.Ff=En(this.Ff,21):this.Ff=Pn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,23)},set:function(e){e?this.Ff=En(this.Ff,23):this.Ff=Pn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,24)},set:function(e){e?this.Ff=En(this.Ff,24):this.Ff=Pn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,25)},set:function(e){e?this.Ff=En(this.Ff,25):this.Ff=Pn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,26)},set:function(e){e?this.Ff=En(this.Ff,26):this.Ff=Pn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ei(Ma,is);var ef=function(){Ma.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Cn(this.Ff,14)},set:function(n){n?this.Ff=En(this.Ff,14):this.Ff=Pn(this.Ff,14)}}),this.password=!0};ei(ef,Ma);var nt={CheckBox:{createAppearanceStream:function(){return{N:{On:nt.CheckBox.YesNormal},D:{On:nt.CheckBox.YesPushDown,Off:nt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=Fg(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+yt(nt.internal.getWidth(n))+" "+yt(nt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+yt(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=hs(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=nt.internal.getHeight(n),o=nt.internal.getWidth(n),a=Fg(n,n.caption);return i.push("1 g"),i.push("0 0 "+yt(o)+" "+yt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+yt(o-1)+" "+yt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+yt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+yt(nt.internal.getWidth(n))+" "+yt(nt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:nt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=nt.RadioButton.Circle.YesNormal,e.D[n]=nt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=hs(n);e.scope=n.scope;var t=[],r=nt.internal.getWidth(n)<=nt.internal.getHeight(n)?nt.internal.getWidth(n)/4:nt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=nt.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+So(nt.internal.getWidth(n)/2)+" "+So(nt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=[],r=nt.internal.getWidth(n)<=nt.internal.getHeight(n)?nt.internal.getWidth(n)/4:nt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*nt.internal.Bezier_C).toFixed(5)),o=Number((r*nt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+So(nt.internal.getWidth(n)/2)+" "+So(nt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+So(nt.internal.getWidth(n)/2)+" "+So(nt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=[],r=nt.internal.getWidth(n)<=nt.internal.getHeight(n)?nt.internal.getWidth(n)/4:nt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*nt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+So(nt.internal.getWidth(n)/2)+" "+So(nt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:nt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=nt.RadioButton.Cross.YesNormal,e.D[n]=nt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=hs(n);e.scope=n.scope;var t=[],r=nt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+yt(nt.internal.getWidth(n)-2)+" "+yt(nt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(yt(r.x1.x)+" "+yt(r.x1.y)+" m"),t.push(yt(r.x2.x)+" "+yt(r.x2.y)+" l"),t.push(yt(r.x4.x)+" "+yt(r.x4.y)+" m"),t.push(yt(r.x3.x)+" "+yt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=nt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+yt(nt.internal.getWidth(n))+" "+yt(nt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+yt(nt.internal.getWidth(n)-2)+" "+yt(nt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(yt(t.x1.x)+" "+yt(t.x1.y)+" m"),r.push(yt(t.x2.x)+" "+yt(t.x2.y)+" l"),r.push(yt(t.x4.x)+" "+yt(t.x4.y)+" m"),r.push(yt(t.x3.x)+" "+yt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+yt(nt.internal.getWidth(n))+" "+yt(nt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};nt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=nt.internal.getWidth(n),t=nt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},nt.internal.getWidth=function(n){var e=0;return zt(n)==="object"&&(e=Vv(n.Rect[2])),e},nt.internal.getHeight=function(n){var e=0;return zt(n)==="object"&&(e=Vv(n.Rect[3])),e};var o8=gn.addField=function(n){if(s8(this,n),!(n instanceof is))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};gn.AcroFormChoiceField=nc,gn.AcroFormListBox=rc,gn.AcroFormComboBox=ic,gn.AcroFormEditBox=Xh,gn.AcroFormButton=Vn,gn.AcroFormPushButton=Qh,gn.AcroFormRadioButton=sc,gn.AcroFormCheckBox=Zh,gn.AcroFormTextField=Ma,gn.AcroFormPasswordField=ef,gn.AcroFormAppearance=nt,gn.AcroForm={ChoiceField:nc,ListBox:rc,ComboBox:ic,EditBox:Xh,Button:Vn,PushButton:Qh,RadioButton:sc,CheckBox:Zh,TextField:Ma,PasswordField:ef,Appearance:nt},it.AcroForm={ChoiceField:nc,ListBox:rc,ComboBox:ic,EditBox:Xh,Button:Vn,PushButton:Qh,RadioButton:sc,CheckBox:Zh,TextField:Ma,PasswordField:ef,Appearance:nt};it.AcroForm;function LS(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(L,F){var T,O,J,X,se,q=e;if((F=F||e)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(P(L))for(se in t)for(J=t[se],T=0;T<J.length;T+=1){for(X=!0,O=0;O<J[T].length;O+=1)if(J[T][O]!==void 0&&J[T][O]!==L[O]){X=!1;break}if(X===!0){q=se;break}}else for(se in t)for(J=t[se],T=0;T<J.length;T+=1){for(X=!0,O=0;O<J[T].length;O+=1)if(J[T][O]!==void 0&&J[T][O]!==L.charCodeAt(O)){X=!1;break}if(X===!0){q=se;break}}return q===e&&F!==e&&(q=F),q},i=function L(F){for(var T=this.internal.write,O=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:F.width}),X.push({key:"Height",value:F.height}),F.colorSpace===_.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===_.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var se="",q=0,ee=F.transparency.length;q<ee;q++)se+=F.transparency[q]+" "+F.transparency[q]+" ";X.push({key:"Mask",value:"["+se+"]"})}F.sMask!==void 0&&X.push({key:"SMask",value:F.objectId+1+" 0 R"});var ie=F.filter!==void 0?["/"+F.filter]:void 0;if(O({data:F.data,additionalKeyValues:X,alreadyAppliedFilters:ie,objectId:F.objectId}),T("endobj"),"sMask"in F&&F.sMask!==void 0){var re="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,M={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:re,data:F.sMask};"filter"in F&&(M.filter=F.filter),L.call(this,M)}if(F.colorSpace===_.INDEXED){var Y=this.internal.newObject();O({data:j(new Uint8Array(F.palette)),objectId:Y}),T("endobj")}},s=function(){var L=this.internal.collections.addImage_images;for(var F in L)i.call(this,L[F])},o=function(){var L,F=this.internal.collections.addImage_images,T=this.internal.write;for(var O in F)T("/I"+(L=F[O]).index,L.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var L=this.internal.collections.addImage_images;return a.call(this),L},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(L){return typeof n["process"+L.toUpperCase()]=="function"},p=function(L){return zt(L)==="object"&&L.nodeType===1},m=function(L,F){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var T=""+L.getAttribute("src");if(T.indexOf("data:image/")===0)return Bu(unescape(T).split("base64,").pop());var O=n.loadFile(T,!0);if(O!==void 0)return O}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var J;switch(F){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;case"JPEG":case"JPG":default:J="image/jpeg"}return Bu(L.toDataURL(J,1).split("base64,").pop())}},f=function(L){var F=this.internal.collections.addImage_images;if(F){for(var T in F)if(L===F[T].alias)return F[T]}},x=function(L,F,T){return L||F||(L=-96,F=-96),L<0&&(L=-1*T.width*72/L/this.internal.scaleFactor),F<0&&(F=-1*T.height*72/F/this.internal.scaleFactor),L===0&&(L=F*T.width/T.height),F===0&&(F=L*T.height/T.width),[L,F]},y=function(L,F,T,O,J,X){var se=x.call(this,T,O,J),q=this.internal.getCoordinateString,ee=this.internal.getVerticalCoordinateString,ie=l.call(this);if(T=se[0],O=se[1],ie[J.index]=J,X){X*=Math.PI/180;var re=Math.cos(X),M=Math.sin(X),Y=function(Z){return Z.toFixed(4)},G=[Y(re),Y(M),Y(-1*M),Y(re),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,q(L),ee(F+O),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([q(T),"0","0",q(O),"0","0","cm"].join(" "))):this.internal.write([q(T),"0","0",q(O),q(L),ee(F+O),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},_=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=n.__addimage__.sHashCode=function(L){var F,T,O=0;if(typeof L=="string")for(T=L.length,F=0;F<T;F++)O=(O<<5)-O+L.charCodeAt(F),O|=0;else if(P(L))for(T=L.byteLength/2,F=0;F<T;F++)O=(O<<5)-O+L[F],O|=0;return O},N=n.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var F=!0;return L.length===0&&(F=!1),L.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(F=!1),F},C=n.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var F=L.indexOf(",");return F<0?null:L.substring(0,F).trim().endsWith("base64")?L.substring(F+1):null},A=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(L){return A()&&L instanceof ArrayBuffer};var P=n.__addimage__.isArrayBufferView=function(L){return A()&&typeof Uint32Array<"u"&&(L instanceof Int8Array||L instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array)},E=n.__addimage__.binaryStringToUint8Array=function(L){for(var F=L.length,T=new Uint8Array(F),O=0;O<F;O++)T[O]=L.charCodeAt(O);return T},j=n.__addimage__.arrayBufferToBinaryString=function(L){for(var F="",T=P(L)?L:new Uint8Array(L),O=0;O<T.length;O+=8192)F+=String.fromCharCode.apply(null,T.subarray(O,O+8192));return F};n.addImage=function(){var L,F,T,O,J,X,se,q,ee;if(typeof arguments[1]=="number"?(F=e,T=arguments[1],O=arguments[2],J=arguments[3],X=arguments[4],se=arguments[5],q=arguments[6],ee=arguments[7]):(F=arguments[1],T=arguments[2],O=arguments[3],J=arguments[4],X=arguments[5],se=arguments[6],q=arguments[7],ee=arguments[8]),zt(L=arguments[0])==="object"&&!p(L)&&"imageData"in L){var ie=L;L=ie.imageData,F=ie.format||F||e,T=ie.x||T||0,O=ie.y||O||0,J=ie.w||ie.width||J,X=ie.h||ie.height||X,se=ie.alias||se,q=ie.compression||q,ee=ie.rotation||ie.angle||ee}var re=this.internal.getFilters();if(q===void 0&&re.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(T)||isNaN(O))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var M=D.call(this,L,F,se,q);return y.call(this,T,O,J,X,M,ee),this};var D=function(L,F,T,O){var J,X,se;if(typeof L=="string"&&r(L)===e){L=unescape(L);var q=U(L,!1);(q!==""||(q=n.loadFile(L,!0))!==void 0)&&(L=q)}if(p(L)&&(L=m(L,F)),F=r(L,F),!d(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((se=T)==null||se.length===0)&&(T=function(ee){return typeof ee=="string"||P(ee)?b(ee):P(ee.data)?b(ee.data):null}(L)),(J=f.call(this,T))||(A()&&(L instanceof Uint8Array||F==="RGBA"||(X=L,L=E(L))),J=this["process"+F.toUpperCase()](L,u.call(this),T,function(ee){return ee&&typeof ee=="string"&&(ee=ee.toUpperCase()),ee in n.image_compression?ee:w.NONE}(O),X)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},U=n.__addimage__.convertBase64ToBinaryString=function(L,F){F=typeof F!="boolean"||F;var T,O="";if(typeof L=="string"){var J;T=(J=C(L))!==null&&J!==void 0?J:L;try{O=Bu(T)}catch(X){if(F)throw N(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return O};n.getImageProperties=function(L){var F,T,O="";if(p(L)&&(L=m(L)),typeof L=="string"&&r(L)===e&&((O=U(L,!1))===""&&(O=n.loadFile(L)||""),L=O),T=r(L),!d(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(!A()||L instanceof Uint8Array||(L=E(L)),!(F=this["process"+T.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=T,F}})(it.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};it.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,d=!1,p=0;p<u.length&&!d;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var f=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(y.objId),b=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(w(r.contents))+")",s+=" /Popup "+_.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(w(b))+") >>",y.content=s;var N=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+N,r.open&&(s+=" /Open true"),s+=" >>",_.content=s,this.internal.write(y.objId,"0 R",_.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var C=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var A=this.annotations._nameMap[r.options.name];r.options.pageNumber=A.page,r.options.top=A.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var P=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+i),h:u(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(t,a).length;o=Math.ceil(u*d)}else a=l,o=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(it.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},a=n.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&i.indexOf(y.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(y){var _=0,w=t,b="",N=0;for(_=0;_<y.length;_+=1)w[y.charCodeAt(_)]!==void 0?(N++,typeof(w=w[y.charCodeAt(_)])=="number"&&(b+=String.fromCharCode(w),w=t,N=0),_===y.length-1&&(w=t,b+=y.charAt(_-(N-1)),_-=N-1,N=0)):(w=t,b+=y.charAt(_-N),_-=N,N=0);return b};n.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(y,_,w){return o(y)?s(y)===!1?-1:!u(y)||!o(_)&&!o(w)||!o(w)&&a(_)||a(y)&&!o(_)||a(y)&&l(_)||a(y)&&a(_)?0:d(y)&&o(_)&&!a(_)&&o(w)&&u(w)?3:a(y)||!o(w)?1:2:-1},f=function(y){var _=0,w=0,b=0,N="",C="",A="",P=(y=y||"").split("\\s+"),E=[];for(_=0;_<P.length;_+=1){for(E.push(""),w=0;w<P[_].length;w+=1)N=P[_][w],C=P[_][w-1],A=P[_][w+1],o(N)?(b=m(N,C,A),E[_]+=b!==-1?String.fromCharCode(e[N.charCodeAt(0)][b]):N):E[_]+=N;E[_]=p(E[_])}return E.join(" ")},x=n.__arabicParser__.processArabic=n.processArabic=function(){var y,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(_)){var b=0;for(w=[],b=0;b<_.length;b+=1)Array.isArray(_[b])?w.push([f(_[b][0]),_[b][1],_[b][2]]):w.push([f(_[b])]);y=w}else y=f(_);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};n.events.push(["preProcessText",x])}(it.API),it.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(it.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(y){x=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,f=0,x=0,y=0,_=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=u.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,C){return N.concat(_.splitTextToSize(C,w))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)f<(y=this.getStringUnitWidth(l[b],{font:p})*d)&&(f=y);return f!==0&&(x=l.length),{w:f/=m,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,f&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,d,p,m){if(r.call(this),!d)throw new Error("No data for PDF table.");var f,x,y,_,w=[],b=[],N=[],C={},A={},P=[],E=[],j=(m=m||{}).autoSize||!1,D=m.printHeaders!==!1,U=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,L=m.margins||Object.assign({width:this.getPageWidth()},e),F=typeof m.padding=="number"?m.padding:3,T=m.headerBackgroundColor||"#c8c8c8",O=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=O,this.setFontSize(U),p==null)b=w=Object.keys(d[0]),N=w.map(function(){return"left"});else if(Array.isArray(p)&&zt(p[0])==="object")for(w=p.map(function(ie){return ie.name}),b=p.map(function(ie){return ie.prompt||ie.name||""}),N=p.map(function(ie){return ie.align||"left"}),f=0;f<p.length;f+=1)A[p[f].name]=p[f].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(b=w=p,N=w.map(function(){return"left"}));if(j||Array.isArray(p)&&typeof p[0]=="string")for(f=0;f<w.length;f+=1){for(C[_=w[f]]=d.map(function(ie){return ie[_]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(b[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=C[_],this.setFont(void 0,"normal"),y=0;y<x.length;y+=1)P.push(this.getTextDimensions(x[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[_]=Math.max.apply(null,P)+F+F,P=[]}if(D){var J={};for(f=0;f<w.length;f+=1)J[w[f]]={},J[w[f]].text=b[f],J[w[f]].align=N[f];var X=a.call(this,J,A);E=w.map(function(ie){return new s(l,u,A[ie],X,J[ie].text,void 0,J[ie].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var se=p.reduce(function(ie,re){return ie[re.name]=re.align,ie},{});for(f=0;f<d.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:d[f]},this);var q=a.call(this,d[f],A);for(y=0;y<w.length;y+=1){var ee=d[f][w[y]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:y,data:ee},this),o.call(this,new s(l,u,A[w[y]],q,ee,f+2,se[w[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(f){var x=l[f];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*p/m+d+d},this).reduce(function(f,x){return Math.max(f,x)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}}(it.API);var TS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},DS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Og=LS(DS),MS=[100,200,300,400,500,600,700,800,900],a8=LS(MS);function $g(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return TS[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof Og[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function Gv(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var l8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Jv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Kv(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function c8(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},l8,t.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=$g(e[a])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+Kv(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var d=Og[l],p=d<=Og.normal?-1:1,m=Gv(u,DS,d,p);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var d=TS[l],p=0;p<d.length;++p)if(u[d[p]])return u[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=a8[l],p=Gv(u,MS,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Kv(s)+"'.");return o}function Xv(n){return n.trimLeft()}function u8(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function d8(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Mh,Qv,Zv,tm=["times"];(function(n){var e,t,r,i,s,o,a,l,u,d=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var p=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=M;Object.defineProperty(this,"pdf",{get:function(){return Y}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(ye){G=!!ye}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(ye){Z=!!ye}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(ye){isNaN(ye)||(te=ye)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(ye){isNaN(ye)||(ue=ye)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ye){var Q;typeof ye=="number"?Q=[ye,ye,ye,ye]:((Q=new Array(4))[0]=ye[0],Q[1]=ye.length>=2?ye[1]:Q[0],Q[2]=ye.length>=3?ye[2]:Q[0],Q[3]=ye.length>=4?ye[3]:Q[1]),u.margin=Q}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(ye){me=ye}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(ye){ge=ye}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(ye){De=ye}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ye){ye instanceof d&&(u=ye)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ye){u.path=ye}});var Pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pe},set:function(ye){Pe=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var Q;Q=m(ye),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var Q=m(ye);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var $e=null;function Oe(ye,Q){if($e===null){var lt=function(Ye){var Me=[];return Object.keys(Ye).forEach(function(Ue){Ye[Ue].forEach(function(ce){var be=null;switch(ce){case"bold":be={family:Ue,weight:"bold"};break;case"italic":be={family:Ue,style:"italic"};break;case"bolditalic":be={family:Ue,weight:"bold",style:"italic"};break;case"":case"normal":be={family:Ue}}be!==null&&(be.ref={name:Ue,style:ce},Me.push(be))})}),Me}(ye.getFontList());$e=function(Ye){for(var Me={},Ue=0;Ue<Ye.length;++Ue){var ce=$g(Ye[Ue]),be=ce.family,ke=ce.stretch,we=ce.style,_e=ce.weight;Me[be]=Me[be]||{},Me[be][ke]=Me[be][ke]||{},Me[be][ke][we]=Me[be][ke][we]||{},Me[be][ke][we][_e]=ce}return Me}(lt.concat(Q))}return $e}var He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(ye){$e=null,He=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var Q;if(this.ctx.font=ye,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var lt=Q[1];Q[2];var Ye=Q[3],Me=Q[4];Q[5];var Ue=Q[6],ce=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Me)[2];Me=Math.floor(ce==="px"?parseFloat(Me)*this.pdf.internal.scaleFactor:ce==="em"?parseFloat(Me)*this.pdf.getFontSize():parseFloat(Me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Me);var be=function(Xe){var We,Le,kt=[],pt=Xe.trim();if(pt==="")return tm;if(pt in Jv)return[Jv[pt]];for(;pt!=="";){switch(Le=null,We=(pt=Xv(pt)).charAt(0)){case'"':case"'":Le=u8(pt.substring(1),We);break;default:Le=d8(pt)}if(Le===null||(kt.push(Le[0]),(pt=Xv(Le[1]))!==""&&pt.charAt(0)!==","))return tm;pt=pt.replace(/^,/,"")}return kt}(Ue);if(this.fontFaces){var ke=c8(Oe(this.pdf,this.fontFaces),be.map(function(Xe){return{family:Xe,stretch:"normal",weight:Ye,style:lt}}));this.pdf.setFont(ke.ref.name,ke.ref.style)}else{var we="";(Ye==="bold"||parseInt(Ye,10)>=700||lt==="bold")&&(we="bold"),lt==="italic"&&(we+="italic"),we.length===0&&(we="normal");for(var _e="",Ie={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ae=0;Ae<be.length;Ae++){if(this.pdf.internal.getFont(be[Ae],we,{noFallback:!0,disableWarning:!0})!==void 0){_e=be[Ae];break}if(we==="bolditalic"&&this.pdf.internal.getFont(be[Ae],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_e=be[Ae],we="bold";else if(this.pdf.internal.getFont(be[Ae],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_e=be[Ae],we="normal";break}}if(_e===""){for(var Je=0;Je<be.length;Je++)if(Ie[be[Je]]){_e=Ie[be[Je]];break}}_e=_e===""?"Times":_e,this.pdf.setFont(_e,we)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};p.prototype.setLineDash=function(M){this.lineDash=M},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){C.call(this,"fill",!1)},p.prototype.stroke=function(){C.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(M,Y){if(isNaN(M)||isNaN(Y))throw Vt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(M,Y));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(M,Y)},p.prototype.closePath=function(){var M=new o(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&zt(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){M=new o(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},p.prototype.lineTo=function(M,Y){if(isNaN(M)||isNaN(Y))throw Vt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(M,Y));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},p.prototype.quadraticCurveTo=function(M,Y,G,Z){if(isNaN(G)||isNaN(Z)||isNaN(M)||isNaN(Y))throw Vt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(G,Z)),ue=this.ctx.transform.applyToPoint(new o(M,Y));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},p.prototype.bezierCurveTo=function(M,Y,G,Z,te,ue){if(isNaN(te)||isNaN(ue)||isNaN(M)||isNaN(Y)||isNaN(G)||isNaN(Z))throw Vt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new o(te,ue)),ge=this.ctx.transform.applyToPoint(new o(M,Y)),De=this.ctx.transform.applyToPoint(new o(G,Z));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:De.x,y2:De.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},p.prototype.arc=function(M,Y,G,Z,te,ue){if(isNaN(M)||isNaN(Y)||isNaN(G)||isNaN(Z)||isNaN(te))throw Vt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new o(M,Y));M=me.x,Y=me.y;var ge=this.ctx.transform.applyToPoint(new o(0,G)),De=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(ge.x-De.x,2)+Math.pow(ge.y-De.y,2))}Math.abs(te-Z)>=2*Math.PI&&(Z=0,te=2*Math.PI),this.path.push({type:"arc",x:M,y:Y,radius:G,startAngle:Z,endAngle:te,counterclockwise:ue})},p.prototype.arcTo=function(M,Y,G,Z,te){throw new Error("arcTo not implemented.")},p.prototype.rect=function(M,Y,G,Z){if(isNaN(M)||isNaN(Y)||isNaN(G)||isNaN(Z))throw Vt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,Y),this.lineTo(M+G,Y),this.lineTo(M+G,Y+Z),this.lineTo(M,Y+Z),this.lineTo(M,Y),this.lineTo(M+G,Y),this.lineTo(M,Y)},p.prototype.fillRect=function(M,Y,G,Z){if(isNaN(M)||isNaN(Y)||isNaN(G)||isNaN(Z))throw Vt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,Y,G,Z),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},p.prototype.strokeRect=function(M,Y,G,Z){if(isNaN(M)||isNaN(Y)||isNaN(G)||isNaN(Z))throw Vt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(M,Y,G,Z),this.stroke())},p.prototype.clearRect=function(M,Y,G,Z){if(isNaN(M)||isNaN(Y)||isNaN(G)||isNaN(Z))throw Vt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,Y,G,Z))},p.prototype.save=function(M){M=typeof M!="boolean"||M;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},p.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(M){var Y,G,Z,te;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))Y=0,G=0,Z=0,te=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ue!==null)Y=parseInt(ue[1]),G=parseInt(ue[2]),Z=parseInt(ue[3]),te=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)Y=parseInt(ue[1]),G=parseInt(ue[2]),Z=parseInt(ue[3]),te=parseFloat(ue[4]);else{if(te=1,typeof M=="string"&&M.charAt(0)!=="#"){var me=new kS(M);M=me.ok?me.toHex():"#000000"}M.length===4?(Y=M.substring(1,2),Y+=Y,G=M.substring(2,3),G+=G,Z=M.substring(3,4),Z+=Z):(Y=M.substring(1,3),G=M.substring(3,5),Z=M.substring(5,7)),Y=parseInt(Y,16),G=parseInt(G,16),Z=parseInt(Z,16)}}return{r:Y,g:G,b:Z,a:te,style:M}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(M,Y,G,Z){if(isNaN(Y)||isNaN(G)||typeof M!="string")throw Vt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!f.call(this)){var te=q(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;F.call(this,{text:M,x:Y,y:G,scale:ue,angle:te,align:this.textAlign,maxWidth:Z})}},p.prototype.strokeText=function(M,Y,G,Z){if(isNaN(Y)||isNaN(G)||typeof M!="string")throw Vt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){Z=isNaN(Z)?void 0:Z;var te=q(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;F.call(this,{text:M,x:Y,y:G,scale:ue,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:Z})}},p.prototype.measureText=function(M){if(typeof M!="string")throw Vt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,G=this.pdf.internal.scaleFactor,Z=Y.internal.getFontSize(),te=Y.getStringUnitWidth(M)*Z/Y.internal.scaleFactor,ue=function(me){var ge=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this};return new ue({width:te*=Math.round(96*G/72*1e4)/1e4})},p.prototype.scale=function(M,Y){if(isNaN(M)||isNaN(Y))throw Vt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new l(M,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},p.prototype.rotate=function(M){if(isNaN(M))throw Vt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.translate=function(M,Y){if(isNaN(M)||isNaN(Y))throw Vt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new l(1,0,0,1,M,Y);this.ctx.transform=this.ctx.transform.multiply(G)},p.prototype.transform=function(M,Y,G,Z,te,ue){if(isNaN(M)||isNaN(Y)||isNaN(G)||isNaN(Z)||isNaN(te)||isNaN(ue))throw Vt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new l(M,Y,G,Z,te,ue);this.ctx.transform=this.ctx.transform.multiply(me)},p.prototype.setTransform=function(M,Y,G,Z,te,ue){M=isNaN(M)?1:M,Y=isNaN(Y)?0:Y,G=isNaN(G)?0:G,Z=isNaN(Z)?1:Z,te=isNaN(te)?0:te,ue=isNaN(ue)?0:ue,this.ctx.transform=new l(M,Y,G,Z,te,ue)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(M,Y,G,Z,te,ue,me,ge,De){var Pe=this.pdf.getImageProperties(M),$e=1,Oe=1,He=1,ye=1;Z!==void 0&&ge!==void 0&&(He=ge/Z,ye=De/te,$e=Pe.width/Z*ge/Z,Oe=Pe.height/te*De/te),ue===void 0&&(ue=Y,me=G,Y=0,G=0),Z!==void 0&&ge===void 0&&(ge=Z,De=te),Z===void 0&&ge===void 0&&(ge=Pe.width,De=Pe.height);for(var Q,lt=this.ctx.transform.decompose(),Ye=q(lt.rotate.shx),Me=new l,Ue=(Me=(Me=(Me=Me.multiply(lt.translate)).multiply(lt.skew)).multiply(lt.scale)).applyToRectangle(new a(ue-Y*He,me-G*ye,Z*$e,te*Oe)),ce=_.call(this,Ue),be=[],ke=0;ke<ce.length;ke+=1)be.indexOf(ce[ke])===-1&&be.push(ce[ke]);if(N(be),this.autoPaging)for(var we=be[0],_e=be[be.length-1],Ie=we;Ie<_e+1;Ie++){this.pdf.setPage(Ie);var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Je=Ie===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Le=Ie===1?0:Xe+(Ie-2)*We;if(this.ctx.clip_path.length!==0){var kt=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Q,this.posX+this.margin[3],-Le+Je+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=kt}var pt=JSON.parse(JSON.stringify(Ue));pt=b([pt],this.posX+this.margin[3],-Le+Je+this.ctx.prevPageLastElemOffset)[0];var wn=(Ie>we||Ie<_e)&&y.call(this);wn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,We,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,Ye),wn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Ue.x,Ue.y,Ue.w,Ue.h,null,null,Ye)};var _=function(M,Y,G){var Z=[];Y=Y||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Z.push(Math.floor((M.y+te)/G)+1);break;case"arc":Z.push(Math.floor((M.y+te-M.radius)/G)+1),Z.push(Math.floor((M.y+te+M.radius)/G)+1);break;case"qct":var ue=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Z.push(Math.floor((ue.y+te)/G)+1),Z.push(Math.floor((ue.y+ue.h+te)/G)+1);break;case"bct":var me=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Z.push(Math.floor((me.y+te)/G)+1),Z.push(Math.floor((me.y+me.h+te)/G)+1);break;case"rect":Z.push(Math.floor((M.y+te)/G)+1),Z.push(Math.floor((M.y+M.h+te)/G)+1)}for(var ge=0;ge<Z.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<Z[ge];)w.call(this);return Z},w=function(){var M=this.fillStyle,Y=this.strokeStyle,G=this.font,Z=this.lineCap,te=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=Y,this.font=G,this.lineCap=Z,this.lineWidth=te,this.lineJoin=ue},b=function(M,Y,G){for(var Z=0;Z<M.length;Z++)switch(M[Z].type){case"bct":M[Z].x2+=Y,M[Z].y2+=G;case"qct":M[Z].x1+=Y,M[Z].y1+=G;case"mt":case"lt":case"arc":default:M[Z].x+=Y,M[Z].y+=G}return M},N=function(M){return M.sort(function(Y,G){return Y-G})},C=function(M,Y){for(var G,Z,te=this.fillStyle,ue=this.strokeStyle,me=this.lineCap,ge=this.lineWidth,De=Math.abs(ge*this.ctx.transform.scaleX),Pe=this.lineJoin,$e=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),He=[],ye=0;ye<Oe.length;ye++)if(Oe[ye].x!==void 0)for(var Q=_.call(this,Oe[ye]),lt=0;lt<Q.length;lt+=1)He.indexOf(Q[lt])===-1&&He.push(Q[lt]);for(var Ye=0;Ye<He.length;Ye++)for(;this.pdf.internal.getNumberOfPages()<He[Ye];)w.call(this);if(N(He),this.autoPaging)for(var Me=He[0],Ue=He[He.length-1],ce=Me;ce<Ue+1;ce++){this.pdf.setPage(ce),this.fillStyle=te,this.strokeStyle=ue,this.lineCap=me,this.lineWidth=De,this.lineJoin=Pe;var be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ke=ce===1?this.posY+this.margin[0]:this.margin[0],we=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=ce===1?0:we+(ce-2)*_e;if(this.ctx.clip_path.length!==0){var Ae=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(G,this.posX+this.margin[3],-Ie+ke+this.ctx.prevPageLastElemOffset),A.call(this,M,!0),this.path=Ae}if(Z=JSON.parse(JSON.stringify($e)),this.path=b(Z,this.posX+this.margin[3],-Ie+ke+this.ctx.prevPageLastElemOffset),Y===!1||ce===0){var Je=(ce>Me||ce<Ue)&&y.call(this);Je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],be,_e,null).clip().discardPath()),A.call(this,M,Y),Je&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=De,A.call(this,M,Y),this.lineWidth=ge;this.path=$e},A=function(M,Y){if((M!=="stroke"||Y||!x.call(this))&&(M==="stroke"||Y||!f.call(this))){for(var G,Z,te=[],ue=this.path,me=0;me<ue.length;me++){var ge=ue[me];switch(ge.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:ge,deltas:[],abs:[]});break;case"lt":var De=te.length;if(ue[me-1]&&!isNaN(ue[me-1].x)&&(G=[ge.x-ue[me-1].x,ge.y-ue[me-1].y],De>0)){for(;De>=0;De--)if(te[De-1].close!==!0&&te[De-1].begin!==!0){te[De-1].deltas.push(G),te[De-1].abs.push(ge);break}}break;case"bct":G=[ge.x1-ue[me-1].x,ge.y1-ue[me-1].y,ge.x2-ue[me-1].x,ge.y2-ue[me-1].y,ge.x-ue[me-1].x,ge.y-ue[me-1].y],te[te.length-1].deltas.push(G);break;case"qct":var Pe=ue[me-1].x+2/3*(ge.x1-ue[me-1].x),$e=ue[me-1].y+2/3*(ge.y1-ue[me-1].y),Oe=ge.x+2/3*(ge.x1-ge.x),He=ge.y+2/3*(ge.y1-ge.y),ye=ge.x,Q=ge.y;G=[Pe-ue[me-1].x,$e-ue[me-1].y,Oe-ue[me-1].x,He-ue[me-1].y,ye-ue[me-1].x,Q-ue[me-1].y],te[te.length-1].deltas.push(G);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(ge)}}Z=Y?null:M==="stroke"?"stroke":"fill";for(var lt=!1,Ye=0;Ye<te.length;Ye++)if(te[Ye].arc)for(var Me=te[Ye].abs,Ue=0;Ue<Me.length;Ue++){var ce=Me[Ue];ce.type==="arc"?j.call(this,ce.x,ce.y,ce.radius,ce.startAngle,ce.endAngle,ce.counterclockwise,void 0,Y,!lt):T.call(this,ce.x,ce.y),lt=!0}else if(te[Ye].close===!0)this.pdf.internal.out("h"),lt=!1;else if(te[Ye].begin!==!0){var be=te[Ye].start.x,ke=te[Ye].start.y;O.call(this,te[Ye].deltas,be,ke),lt=!0}Z&&D.call(this,Z),Y&&U.call(this)}},P=function(M){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-G;case"top":return M+Y-G;case"hanging":return M+Y-2*G;case"middle":return M+Y/2-G;case"ideographic":return M;case"alphabetic":default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(Y,G){this.colorStops.push([Y,G])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(M,Y,G,Z,te,ue,me,ge,De){for(var Pe=X.call(this,G,Z,te,ue),$e=0;$e<Pe.length;$e++){var Oe=Pe[$e];$e===0&&(De?L.call(this,Oe.x1+M,Oe.y1+Y):T.call(this,Oe.x1+M,Oe.y1+Y)),J.call(this,M,Y,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}ge?U.call(this):D.call(this,me)},D=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(M,Y){this.pdf.internal.out(t(M)+" "+r(Y)+" m")},F=function(M){var Y;switch(M.align){case"right":case"end":Y="right";break;case"center":Y="center";break;case"left":case"start":default:Y="left"}var G=this.pdf.getTextDimensions(M.text),Z=P.call(this,M.y),te=E.call(this,Z)-G.h,ue=this.ctx.transform.applyToPoint(new o(M.x,Z)),me=this.ctx.transform.decompose(),ge=new l;ge=(ge=(ge=ge.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var De,Pe,$e,Oe=this.ctx.transform.applyToRectangle(new a(M.x,Z,G.w,G.h)),He=ge.applyToRectangle(new a(M.x,te,G.w,G.h)),ye=_.call(this,He),Q=[],lt=0;lt<ye.length;lt+=1)Q.indexOf(ye[lt])===-1&&Q.push(ye[lt]);if(N(Q),this.autoPaging)for(var Ye=Q[0],Me=Q[Q.length-1],Ue=Ye;Ue<Me+1;Ue++){this.pdf.setPage(Ue);var ce=Ue===1?this.posY+this.margin[0]:this.margin[0],be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ke=this.pdf.internal.pageSize.height-this.margin[2],we=ke-this.margin[0],_e=this.pdf.internal.pageSize.width-this.margin[1],Ie=_e-this.margin[3],Ae=Ue===1?0:be+(Ue-2)*we;if(this.ctx.clip_path.length!==0){var Je=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(De,this.posX+this.margin[3],-1*Ae+ce),A.call(this,"fill",!0),this.path=Je}var Xe=b([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-Ae+ce+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*M.scale),$e=this.lineWidth,this.lineWidth=$e*M.scale);var We=this.autoPaging!=="text";if(We||Xe.y+Xe.h<=ke){if(We||Xe.y>=ce&&Xe.x<=_e){var Le=We?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||_e-Xe.x)[0],kt=b([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-Ae+ce+this.ctx.prevPageLastElemOffset)[0],pt=We&&(Ue>Ye||Ue<Me)&&y.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,we,null).clip().discardPath()),this.pdf.text(Le,kt.x,kt.y,{angle:M.angle,align:Y,renderingMode:M.renderingMode}),pt&&this.pdf.restoreGraphicsState()}}else Xe.y<ke&&(this.ctx.prevPageLastElemOffset+=ke-Xe.y);M.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=$e)}else M.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*M.scale),$e=this.lineWidth,this.lineWidth=$e*M.scale),this.pdf.text(M.text,ue.x+this.posX,ue.y+this.posY,{angle:M.angle,align:Y,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=$e)},T=function(M,Y,G,Z){G=G||0,Z=Z||0,this.pdf.internal.out(t(M+G)+" "+r(Y+Z)+" l")},O=function(M,Y,G){return this.pdf.lines(M,Y,G,null,null)},J=function(M,Y,G,Z,te,ue,me,ge){this.pdf.internal.out([e(i(G+M)),e(s(Z+Y)),e(i(te+M)),e(s(ue+Y)),e(i(me+M)),e(s(ge+Y)),"c"].join(" "))},X=function(M,Y,G,Z){for(var te=2*Math.PI,ue=Math.PI/2;Y>G;)Y-=te;var me=Math.abs(G-Y);me<te&&Z&&(me=te-me);for(var ge=[],De=Z?-1:1,Pe=Y;me>1e-5;){var $e=Pe+De*Math.min(me,ue);ge.push(se.call(this,M,Pe,$e)),me-=Math.abs($e-Pe),Pe=$e}return ge},se=function(M,Y,G){var Z=(G-Y)/2,te=M*Math.cos(Z),ue=M*Math.sin(Z),me=te,ge=-ue,De=me*me+ge*ge,Pe=De+me*te+ge*ue,$e=4/3*(Math.sqrt(2*De*Pe)-Pe)/(me*ue-ge*te),Oe=me-$e*ge,He=ge+$e*me,ye=Oe,Q=-He,lt=Z+Y,Ye=Math.cos(lt),Me=Math.sin(lt);return{x1:M*Math.cos(Y),y1:M*Math.sin(Y),x2:Oe*Ye-He*Me,y2:Oe*Me+He*Ye,x3:ye*Ye-Q*Me,y3:ye*Me+Q*Ye,x4:M*Math.cos(G),y4:M*Math.sin(G)}},q=function(M){return 180*M/Math.PI},ee=function(M,Y,G,Z,te,ue){var me=M+.5*(G-M),ge=Y+.5*(Z-Y),De=te+.5*(G-te),Pe=ue+.5*(Z-ue),$e=Math.min(M,te,me,De),Oe=Math.max(M,te,me,De),He=Math.min(Y,ue,ge,Pe),ye=Math.max(Y,ue,ge,Pe);return new a($e,He,Oe-$e,ye-He)},ie=function(M,Y,G,Z,te,ue,me,ge){var De,Pe,$e,Oe,He,ye,Q,lt,Ye,Me,Ue,ce,be,ke,we=G-M,_e=Z-Y,Ie=te-G,Ae=ue-Z,Je=me-te,Xe=ge-ue;for(Pe=0;Pe<41;Pe++)Ye=(Q=($e=M+(De=Pe/40)*we)+De*((He=G+De*Ie)-$e))+De*(He+De*(te+De*Je-He)-Q),Me=(lt=(Oe=Y+De*_e)+De*((ye=Z+De*Ae)-Oe))+De*(ye+De*(ue+De*Xe-ye)-lt),Pe==0?(Ue=Ye,ce=Me,be=Ye,ke=Me):(Ue=Math.min(Ue,Ye),ce=Math.min(ce,Me),be=Math.max(be,Ye),ke=Math.max(ke,Me));return new a(Math.round(Ue),Math.round(ce),Math.round(be-Ue),Math.round(ke-ce))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,Y,G=(M=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:Y}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(it.API),function(n){var e=function(s){var o,a,l,u,d,p,m,f,x,y;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(y=d%85))/85)-(x=d%85))/85)-(f=d%85))/85)-(m=d%85))/85)%85,a.push(p+33,m+33,f+33,x+33,y+33)):a.push(122);return function(_,w){for(var b=w;b>0;b--)_.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var o,a,l,u,d,p=String,m="length",f=255,x="charCodeAt",y="slice",_="replace";for(s[y](-2),s=s[y](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),l=[],u=0,d=(s+=o="uuuuu"[y](s[m]%5||5))[m];d>u;u+=5)a=52200625*(s[x](u)-33)+614125*(s[x](u+1)-33)+7225*(s[x](u+2)-33)+85*(s[x](u+3)-33)+(s[x](u+4)-33),l.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(w,b){for(var N=b;N>0;N--)w.pop()}(l,o[m]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Dg(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(it.API),function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,d){var p=new XMLHttpRequest,m=0,f=function(x){var y=x.length,_=[],w=String.fromCharCode;for(m=0;m<y;m+=1)_.push(w(255&x.charCodeAt(m)));return _.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?d(f(this.responseText)):d(void 0)}),p.send(null),u&&p.status===200)return f(p.responseText)}(i,s,o)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(it.API),function(n){function e(){return(ut.html2canvas?Promise.resolve(ut.html2canvas):Qr(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(ut.DOMPurify?Promise.resolve(ut.DOMPurify):Qr(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=zt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,d){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||p.appendChild(l(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var f=u[m],x=f.src.find(function(y){return y.format==="truetype"});x&&l.addFont(x.url,f.ref.name,f.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||it.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,u),p}).then(u,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,it.getPageSize=function(o,a,l){if(zt(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var f,x=0,y=0;if(m.hasOwnProperty(p))x=m[p][1]/d,y=m[p][0]/d;else try{x=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",y>x&&(f=y,y=x,x=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>y&&(f=y,y=x,x=f)}return{width:y,height:x,unit:a,k:d,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map($g):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(it.API),it.API.addJS=function(n){return Zv=n,this.internal.events.subscribe("postPutResources",function(){Mh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Mh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Qv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Zv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Mh!==void 0&&Qv!==void 0&&this.internal.out("/Names <</JavaScript "+Mh+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var p=t.internal.newObject();d.push(p);var m=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<d.length;s++)t.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(it.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(p){for(var m,f=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,y={width:0,height:0,numcomponents:1},_=4;_<x;_+=2){if(_+=f,e.indexOf(p.charCodeAt(_+1))!==-1){m=256*p.charCodeAt(_+5)+p.charCodeAt(_+6),y={width:256*p.charCodeAt(_+7)+p.charCodeAt(_+8),height:m,numcomponents:p.charCodeAt(_+9)};break}f=256*p.charCodeAt(_+2)+p.charCodeAt(_+3)}return y}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}}(it.API);var jl,Ih,ex,tx,nx,h8=function(){var n,e,t;function r(s){var o,a,l,u,d,p,m,f,x,y,_,w,b,N;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var C,A;for(A=[],C=0;C<4;++C)A.push(String.fromCharCode(this.data[this.pos++]));return A}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*d/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(b=0;0<=y?b<y:b>y;0<=y?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(_=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,_.slice(0,m)),this.text[f]=String.fromCharCode.apply(String,_.slice(m+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,m,f,x){var y,_,w,b,N,C,A,P,E,j,D,U,L,F,T,O,J,X,se,q,ee,ie=Math.ceil((u.width-p)/f),re=Math.ceil((u.height-m)/x),M=u.width==ie&&u.height==re;for(F=o*ie,U=M?a:new Uint8Array(F*re),C=s.length,L=0,_=0;L<re&&l<C;){switch(s[l++]){case 0:for(b=J=0;J<F;b=J+=1)U[_++]=s[l++];break;case 1:for(b=X=0;X<F;b=X+=1)y=s[l++],N=b<o?0:U[_-o],U[_++]=(y+N)%256;break;case 2:for(b=se=0;se<F;b=se+=1)y=s[l++],w=(b-b%o)/o,T=L&&U[(L-1)*F+w*o+b%o],U[_++]=(T+y)%256;break;case 3:for(b=q=0;q<F;b=q+=1)y=s[l++],w=(b-b%o)/o,N=b<o?0:U[_-o],T=L&&U[(L-1)*F+w*o+b%o],U[_++]=(y+Math.floor((N+T)/2))%256;break;case 4:for(b=ee=0;ee<F;b=ee+=1)y=s[l++],w=(b-b%o)/o,N=b<o?0:U[_-o],L===0?T=O=0:(T=U[(L-1)*F+w*o+b%o],O=w&&U[(L-1)*F+(w-1)*o+b%o]),A=N+T-O,P=Math.abs(A-N),j=Math.abs(A-T),D=Math.abs(A-O),E=P<=j&&P<=D?N:j<=D?T:O,U[_++]=(y+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!M){var Y=((m+L*x)*u.width+p)*o,G=L*F;for(b=0;b<ie;b+=1){for(var Z=0;Z<o;Z+=1)a[Y++]=U[G++];Y+=(f-1)*o}}L++}}return s=HC(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,d,p,m,f;for(a=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=p=0,m=a.length;p<m;o=p+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(f=d[s++])!=null?f:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,d,p,m,f,x,y,_,w;if(l=this.colors,y=null,a=this.hasAlphaChannel,this.palette.length&&(y=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,a=!0),x=(u=s.data||s).length,p=y||o,d=m=0,l===1)for(;d<x;)f=y?4*o[d/4]:m,_=p[f++],u[d++]=_,u[d++]=_,u[d++]=_,u[d++]=a?p[f++]:255,m=f;else for(;d<x;)f=y?4*o[d/4]:m,u[d++]=p[f++],u[d++]=p[f++],u[d++]=p[f++],u[d++]=a?p[f++]:255,m=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(ut)==="[object Window]"){try{e=ut.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,d,p,m,f;if(this.animation){for(f=[],a=d=0,p=(m=this.animation.frames).length;d<p;a=++d)o=m[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,f.push(o.image=n(l));return f}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,d,p,m=this;return a=0,p=this.animation,u=p.numFrames,l=p.frames,d=p.numPlays,(o=function(){var f,x;if(f=a++%u,x=l[f],m.renderFrame(s,f),u>1&&a/u<d)return m.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function f8(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,d=[],p=0,m=null,f=0,x=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,x=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=n[e++];p=n[e++]|n[e++]<<8,m=n[e++],!(1&y)&&(m=null),f=y>>2&7,e++;break;case 254:for(;;){if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var _=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,N=n[e++]|n[e++]<<8,C=n[e++],A=C>>6&1,P=1<<(7&C)+1,E=a,j=l,D=!1;C>>7&&(D=!0,E=e,j=P,e+=3*P);var U=e;for(e++;;){var L;if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}d.push({x:_,y:w,width:b,height:N,has_local_palette:D,palette_offset:E,palette_size:j,data_offset:U,data_length:e-U,transparent_index:m,interlaced:!!A,delay:p,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(F){if(F<0||F>=d.length)throw new Error("Frame index out of range.");return d[F]},this.decodeAndBlitFrameBGRA=function(F,T){var O=this.frameInfo(F),J=O.width*O.height,X=new Uint8Array(J);rx(n,O.data_offset,X,J);var se=O.palette_offset,q=O.transparent_index;q===null&&(q=256);var ee=O.width,ie=t-ee,re=ee,M=4*(O.y*t+O.x),Y=4*((O.y+O.height)*t+O.x),G=M,Z=4*ie;O.interlaced===!0&&(Z+=4*t*7);for(var te=8,ue=0,me=X.length;ue<me;++ue){var ge=X[ue];if(re===0&&(re=ee,(G+=Z)>=Y&&(Z=4*ie+4*t*(te-1),G=M+(ee+ie)*(te<<1),te>>=1)),ge===q)G+=4;else{var De=n[se+3*ge],Pe=n[se+3*ge+1],$e=n[se+3*ge+2];T[G++]=$e,T[G++]=Pe,T[G++]=De,T[G++]=255}--re}},this.decodeAndBlitFrameRGBA=function(F,T){var O=this.frameInfo(F),J=O.width*O.height,X=new Uint8Array(J);rx(n,O.data_offset,X,J);var se=O.palette_offset,q=O.transparent_index;q===null&&(q=256);var ee=O.width,ie=t-ee,re=ee,M=4*(O.y*t+O.x),Y=4*((O.y+O.height)*t+O.x),G=M,Z=4*ie;O.interlaced===!0&&(Z+=4*t*7);for(var te=8,ue=0,me=X.length;ue<me;++ue){var ge=X[ue];if(re===0&&(re=ee,(G+=Z)>=Y&&(Z=4*ie+4*t*(te-1),G=M+(ee+ie)*(te<<1),te>>=1)),ge===q)G+=4;else{var De=n[se+3*ge],Pe=n[se+3*ge+1],$e=n[se+3*ge+2];T[G++]=De,T[G++]=Pe,T[G++]=$e,T[G++]=255}--re}}}function rx(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,d=0,p=0,m=0,f=n[e++],x=new Int32Array(4096),y=null;;){for(;d<16&&f!==0;)p|=n[e++]<<d,d+=8,f===1?f=n[e++]:--f;if(d<l)break;var _=p&u;if(p>>=l,d-=l,_!==s){if(_===o)break;for(var w=_<a?_:y,b=0,N=w;N>s;)N=x[N]>>8,++b;var C=N;if(m+b+(w!==_?1:0)>r)return void Vt.log("Warning, gif stream longer than expected.");t[m++]=C;var A=m+=b;for(w!==_&&(t[m++]=C),N=w;b--;)N=x[N],t[--A]=255&N,N>>=8;y!==null&&a<4096&&(x[a++]=y<<8|C,a>=u+1&&l<12&&(++l,u=u<<1|1)),y=_}else a=o+1,u=(1<<(l=i+1))-1,y=null}return m!==r&&Vt.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function nm(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),p=new Array(65535),m=new Array(65535),f=new Array(64),x=new Array(64),y=[],_=0,w=7,b=new Array(64),N=new Array(64),C=new Array(64),A=new Array(256),P=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(M,Y){for(var G=0,Z=0,te=new Array,ue=1;ue<=16;ue++){for(var me=1;me<=M[ue];me++)te[Y[Z]]=[],te[Y[Z]][0]=G,te[Y[Z]][1]=ue,Z++,G++;G*=2}return te}function se(M){for(var Y=M[0],G=M[1]-1;G>=0;)Y&1<<G&&(_|=1<<w),G--,--w<0&&(_==255?(q(255),q(0)):q(_),w=7,_=0)}function q(M){y.push(M)}function ee(M){q(M>>8&255),q(255&M)}function ie(M,Y,G,Z,te){for(var ue,me=te[0],ge=te[240],De=function(Me,Ue){var ce,be,ke,we,_e,Ie,Ae,Je,Xe,We,Le=0;for(Xe=0;Xe<8;++Xe){ce=Me[Le],be=Me[Le+1],ke=Me[Le+2],we=Me[Le+3],_e=Me[Le+4],Ie=Me[Le+5],Ae=Me[Le+6];var kt=ce+(Je=Me[Le+7]),pt=ce-Je,wn=be+Ae,_t=be-Ae,Lt=ke+Ie,rr=ke-Ie,ze=we+_e,At=we-_e,he=kt+ze,Fe=kt-ze,Ge=wn+Lt,rt=wn-Lt;Me[Le]=he+Ge,Me[Le+4]=he-Ge;var Ke=.707106781*(rt+Fe);Me[Le+2]=Fe+Ke,Me[Le+6]=Fe-Ke;var dt=.382683433*((he=At+rr)-(rt=_t+pt)),It=.5411961*he+dt,Fn=1.306562965*rt+dt,ti=.707106781*(Ge=rr+_t),bi=pt+ti,st=pt-ti;Me[Le+5]=st+It,Me[Le+3]=st-It,Me[Le+1]=bi+Fn,Me[Le+7]=bi-Fn,Le+=8}for(Le=0,Xe=0;Xe<8;++Xe){ce=Me[Le],be=Me[Le+8],ke=Me[Le+16],we=Me[Le+24],_e=Me[Le+32],Ie=Me[Le+40],Ae=Me[Le+48];var Tr=ce+(Je=Me[Le+56]),Dr=ce-Je,bn=be+Ae,Sn=be-Ae,fn=ke+Ie,Mr=ke-Ie,no=we+_e,fe=we-_e,et=Tr+no,Nt=Tr-no,ht=bn+fn,ot=bn-fn;Me[Le]=et+ht,Me[Le+32]=et-ht;var vt=.707106781*(ot+Nt);Me[Le+16]=Nt+vt,Me[Le+48]=Nt-vt;var wt=.382683433*((et=fe+Mr)-(ot=Sn+Dr)),jt=.5411961*et+wt,en=1.306562965*ot+wt,ir=.707106781*(ht=Mr+Sn),ni=Dr+ir,os=Dr-ir;Me[Le+40]=os+jt,Me[Le+24]=os-jt,Me[Le+8]=ni+en,Me[Le+56]=ni-en,Le++}for(Xe=0;Xe<64;++Xe)We=Me[Xe]*Ue[Xe],f[Xe]=We>0?We+.5|0:We-.5|0;return f}(M,Y),Pe=0;Pe<64;++Pe)x[E[Pe]]=De[Pe];var $e=x[0]-G;G=x[0],$e==0?se(Z[0]):(se(Z[m[ue=32767+$e]]),se(p[ue]));for(var Oe=63;Oe>0&&x[Oe]==0;)Oe--;if(Oe==0)return se(me),G;for(var He,ye=1;ye<=Oe;){for(var Q=ye;x[ye]==0&&ye<=Oe;)++ye;var lt=ye-Q;if(lt>=16){He=lt>>4;for(var Ye=1;Ye<=He;++Ye)se(ge);lt&=15}ue=32767+x[ye],se(te[(lt<<4)+m[ue]]),se(p[ue]),ye++}return Oe!=63&&se(me),G}function re(M){M=Math.min(Math.max(M,1),100),s!=M&&(function(Y){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var te=o((G[Z]*Y+50)/100);te=Math.min(Math.max(te,1),255),a[E[Z]]=te}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var ge=o((ue[me]*Y+50)/100);ge=Math.min(Math.max(ge,1),255),l[E[me]]=ge}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pe=0,$e=0;$e<8;$e++)for(var Oe=0;Oe<8;Oe++)u[Pe]=1/(a[E[Pe]]*De[$e]*De[Oe]*8),d[Pe]=1/(l[E[Pe]]*De[$e]*De[Oe]*8),Pe++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,Y){Y&&re(Y),y=new Array,_=0,w=7,ee(65496),ee(65504),ee(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),ee(1),ee(1),q(0),q(0),function(){ee(65499),ee(132),q(0);for(var be=0;be<64;be++)q(a[be]);q(1);for(var ke=0;ke<64;ke++)q(l[ke])}(),function(be,ke){ee(65472),ee(17),q(8),ee(ke),ee(be),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(M.width,M.height),function(){ee(65476),ee(418),q(0);for(var be=0;be<16;be++)q(j[be+1]);for(var ke=0;ke<=11;ke++)q(D[ke]);q(16);for(var we=0;we<16;we++)q(U[we+1]);for(var _e=0;_e<=161;_e++)q(L[_e]);q(1);for(var Ie=0;Ie<16;Ie++)q(F[Ie+1]);for(var Ae=0;Ae<=11;Ae++)q(T[Ae]);q(17);for(var Je=0;Je<16;Je++)q(O[Je+1]);for(var Xe=0;Xe<=161;Xe++)q(J[Xe])}(),ee(65498),ee(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var G=0,Z=0,te=0;_=0,w=7,this.encode.displayName="_encode_";for(var ue,me,ge,De,Pe,$e,Oe,He,ye,Q=M.data,lt=M.width,Ye=M.height,Me=4*lt,Ue=0;Ue<Ye;){for(ue=0;ue<Me;){for(Pe=Me*Ue+ue,Oe=-1,He=0,ye=0;ye<64;ye++)$e=Pe+(He=ye>>3)*Me+(Oe=4*(7&ye)),Ue+He>=Ye&&($e-=Me*(Ue+1+He-Ye)),ue+Oe>=Me&&($e-=ue+Oe-Me+4),me=Q[$e++],ge=Q[$e++],De=Q[$e++],b[ye]=(P[me]+P[ge+256>>0]+P[De+512>>0]>>16)-128,N[ye]=(P[me+768>>0]+P[ge+1024>>0]+P[De+1280>>0]>>16)-128,C[ye]=(P[me+1280>>0]+P[ge+1536>>0]+P[De+1792>>0]>>16)-128;G=ie(b,u,G,e,r),Z=ie(N,d,Z,t,i),te=ie(C,d,te,t,i),ue+=32}Ue+=8}if(w>=0){var ce=[];ce[1]=w+1,ce[0]=(1<<w+1)-1,se(ce)}return ee(65497),new Uint8Array(y)},n=n||50,function(){for(var M=String.fromCharCode,Y=0;Y<256;Y++)A[Y]=M(Y)}(),e=X(j,D),t=X(F,T),r=X(U,L),i=X(O,J),function(){for(var M=1,Y=2,G=1;G<=15;G++){for(var Z=M;Z<Y;Z++)m[32767+Z]=G,p[32767+Z]=[],p[32767+Z][1]=G,p[32767+Z][0]=Z;for(var te=-(Y-1);te<=-M;te++)m[32767+te]=G,p[32767+te]=[],p[32767+te][1]=G,p[32767+te][0]=Y-1+te;M<<=1,Y<<=1}}(),function(){for(var M=0;M<256;M++)P[M]=19595*M,P[M+256>>0]=38470*M,P[M+512>>0]=7471*M+32768,P[M+768>>0]=-11059*M,P[M+1024>>0]=-21709*M,P[M+1280>>0]=32768*M+8421375,P[M+1536>>0]=-27439*M,P[M+1792>>0]=-5329*M}(),re(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Vi(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ix(n){function e(j){if(!j)throw Error("assert :P")}function t(j,D,U){for(var L=0;4>L;L++)if(j[D+L]!=U.charCodeAt(L))return!0;return!1}function r(j,D,U,L,F){for(var T=0;T<F;T++)j[D+T]=U[L+T]}function i(j,D,U,L){for(var F=0;F<L;F++)j[D+F]=U}function s(j){return new Int32Array(j)}function o(j,D){for(var U=[],L=0;L<j;L++)U.push(new D);return U}function a(j,D){var U=[];return function L(F,T,O){for(var J=O[T],X=0;X<J&&(F.push(O.length>T+1?[]:new D),!(O.length<T+1));X++)L(F[X],T+1,O)}(U,0,j),U}var l=function(){var j=this;function D(h,g){for(var S=1<<g-1>>>0;h&S;)S>>>=1;return S?(h&S-1)+S:h}function U(h,g,S,k,I){e(!(k%S));do h[g+(k-=S)]=I;while(0<k)}function L(h,g,S,k,I){if(e(2328>=I),512>=I)var $=s(512);else if(($=s(I))==null)return 0;return function(B,z,W,V,oe,ve){var xe,de,Ee=z,Se=1<<W,ae=s(16),le=s(16);for(e(oe!=0),e(V!=null),e(B!=null),e(0<W),de=0;de<oe;++de){if(15<V[de])return 0;++ae[V[de]]}if(ae[0]==oe)return 0;for(le[1]=0,xe=1;15>xe;++xe){if(ae[xe]>1<<xe)return 0;le[xe+1]=le[xe]+ae[xe]}for(de=0;de<oe;++de)xe=V[de],0<V[de]&&(ve[le[xe]++]=de);if(le[15]==1)return(V=new F).g=0,V.value=ve[0],U(B,Ee,1,Se,V),Se;var je,Te=-1,Ce=Se-1,Ze=0,qe=1,ct=1,Ve=1<<W;for(de=0,xe=1,oe=2;xe<=W;++xe,oe<<=1){if(qe+=ct<<=1,0>(ct-=ae[xe]))return 0;for(;0<ae[xe];--ae[xe])(V=new F).g=xe,V.value=ve[de++],U(B,Ee+Ze,oe,Ve,V),Ze=D(Ze,xe)}for(xe=W+1,oe=2;15>=xe;++xe,oe<<=1){if(qe+=ct<<=1,0>(ct-=ae[xe]))return 0;for(;0<ae[xe];--ae[xe]){if(V=new F,(Ze&Ce)!=Te){for(Ee+=Ve,je=1<<(Te=xe)-W;15>Te&&!(0>=(je-=ae[Te]));)++Te,je<<=1;Se+=Ve=1<<(je=Te-W),B[z+(Te=Ze&Ce)].g=je+W,B[z+Te].value=Ee-z-Te}V.g=xe-W,V.value=ve[de++],U(B,Ee+(Ze>>W),oe,Ve,V),Ze=D(Ze,xe)}}return qe!=2*le[15]-1?0:Se}(h,g,S,k,I,$)}function F(){this.value=this.g=0}function T(){this.value=this.g=0}function O(){this.G=o(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Xn,T)}function J(h,g,S,k){e(h!=null),e(g!=null),e(2147483648>k),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=g,h.pa=S,h.Jd=g,h.Yc=S+k,h.Zc=4<=k?S+k-4+1:S,ue(h)}function X(h,g){for(var S=0;0<g--;)S|=ge(h,128)<<g;return S}function se(h,g){var S=X(h,g);return me(h)?-S:S}function q(h,g,S,k){var I,$=0;for(e(h!=null),e(g!=null),e(4294967288>k),h.Sb=k,h.Ra=0,h.u=0,h.h=0,4<k&&(k=4),I=0;I<k;++I)$+=g[S+I]<<8*I;h.Ra=$,h.bb=k,h.oa=g,h.pa=S}function ee(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<ll-8>>>0,++h.bb,h.u-=8;G(h)&&(h.h=1,h.u=0)}function ie(h,g){if(e(0<=g),!h.h&&g<=al){var S=Y(h)&ol[g];return h.u+=g,ee(h),S}return h.h=1,h.u=0}function re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(h){return h.Ra>>>(h.u&ll-1)>>>0}function G(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>ll}function Z(h,g){h.u=g,h.h=G(h)}function te(h){h.u>=Jc&&(e(h.u>=Jc),ee(h))}function ue(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function me(h){return X(h,1)}function ge(h,g){var S=h.Ca;0>h.b&&ue(h);var k=h.b,I=S*g>>>8,$=(h.I>>>k>I)+0;for($?(S-=I,h.I-=I+1<<k>>>0):S=I+1,k=S,I=0;256<=k;)I+=8,k>>=8;return k=7^I+Rr[k],h.b-=k,h.Ca=(S<<k)-1,$}function De(h,g,S){h[g+0]=S>>24&255,h[g+1]=S>>16&255,h[g+2]=S>>8&255,h[g+3]=S>>0&255}function Pe(h,g){return h[g+0]<<0|h[g+1]<<8}function $e(h,g){return Pe(h,g)|h[g+2]<<16}function Oe(h,g){return Pe(h,g)|Pe(h,g+2)<<16}function He(h,g){var S=1<<g;return e(h!=null),e(0<g),h.X=s(S),h.X==null?0:(h.Mb=32-g,h.Xa=g,1)}function ye(h,g){e(h!=null),e(g!=null),e(h.Xa==g.Xa),r(g.X,0,h.X,0,1<<g.Xa)}function Q(){this.X=[],this.Xa=this.Mb=0}function lt(h,g,S,k){e(S!=null),e(k!=null);var I=S[0],$=k[0];return I==0&&(I=(h*$+g/2)/g),$==0&&($=(g*I+h/2)/h),0>=I||0>=$?0:(S[0]=I,k[0]=$,1)}function Ye(h,g){return h+(1<<g)-1>>>g}function Me(h,g){return((4278255360&h)+(4278255360&g)>>>0&4278255360)+((16711935&h)+(16711935&g)>>>0&16711935)>>>0}function Ue(h,g){j[g]=function(S,k,I,$,B,z,W){var V;for(V=0;V<B;++V){var oe=j[h](z[W+V-1],I,$+V);z[W+V]=Me(S[k+V],oe)}}}function ce(){this.ud=this.hd=this.jd=0}function be(h,g){return((4278124286&(h^g))>>>1)+(h&g)>>>0}function ke(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function we(h,g){return ke(h+(h-g+.5>>1))}function _e(h,g,S){return Math.abs(g-S)-Math.abs(h-S)}function Ie(h,g,S,k,I,$,B){for(k=$[B-1],S=0;S<I;++S)$[B+S]=k=Me(h[g+S],k)}function Ae(h,g,S,k,I){var $;for($=0;$<S;++$){var B=h[g+$],z=B>>8&255,W=16711935&(W=(W=16711935&B)+((z<<16)+z));k[I+$]=(4278255360&B)+W>>>0}}function Je(h,g){g.jd=h>>0&255,g.hd=h>>8&255,g.ud=h>>16&255}function Xe(h,g,S,k,I,$){var B;for(B=0;B<k;++B){var z=g[S+B],W=z>>>8,V=z,oe=255&(oe=(oe=z>>>16)+((h.jd<<24>>24)*(W<<24>>24)>>>5));V=255&(V=(V=V+((h.hd<<24>>24)*(W<<24>>24)>>>5))+((h.ud<<24>>24)*(oe<<24>>24)>>>5)),I[$+B]=(4278255360&z)+(oe<<16)+V}}function We(h,g,S,k,I){j[g]=function($,B,z,W,V,oe,ve,xe,de){for(W=ve;W<xe;++W)for(ve=0;ve<de;++ve)V[oe++]=I(z[k($[B++])])},j[h]=function($,B,z,W,V,oe,ve){var xe=8>>$.b,de=$.Ea,Ee=$.K[0],Se=$.w;if(8>xe)for($=(1<<$.b)-1,Se=(1<<xe)-1;B<z;++B){var ae,le=0;for(ae=0;ae<de;++ae)ae&$||(le=k(W[V++])),oe[ve++]=I(Ee[le&Se]),le>>=xe}else j["VP8LMapColor"+S](W,V,Ee,Se,oe,ve,B,z,de)}}function Le(h,g,S,k,I){for(S=g+S;g<S;){var $=h[g++];k[I++]=$>>16&255,k[I++]=$>>8&255,k[I++]=$>>0&255}}function kt(h,g,S,k,I){for(S=g+S;g<S;){var $=h[g++];k[I++]=$>>16&255,k[I++]=$>>8&255,k[I++]=$>>0&255,k[I++]=$>>24&255}}function pt(h,g,S,k,I){for(S=g+S;g<S;){var $=(B=h[g++])>>16&240|B>>12&15,B=B>>0&240|B>>28&15;k[I++]=$,k[I++]=B}}function wn(h,g,S,k,I){for(S=g+S;g<S;){var $=(B=h[g++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;k[I++]=$,k[I++]=B}}function _t(h,g,S,k,I){for(S=g+S;g<S;){var $=h[g++];k[I++]=$>>0&255,k[I++]=$>>8&255,k[I++]=$>>16&255}}function Lt(h,g,S,k,I,$){if($==0)for(S=g+S;g<S;)De(k,(($=h[g++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),I+=32;else r(k,I,h,g,S)}function rr(h,g){j[g][0]=j[h+"0"],j[g][1]=j[h+"1"],j[g][2]=j[h+"2"],j[g][3]=j[h+"3"],j[g][4]=j[h+"4"],j[g][5]=j[h+"5"],j[g][6]=j[h+"6"],j[g][7]=j[h+"7"],j[g][8]=j[h+"8"],j[g][9]=j[h+"9"],j[g][10]=j[h+"10"],j[g][11]=j[h+"11"],j[g][12]=j[h+"12"],j[g][13]=j[h+"13"],j[g][14]=j[h+"0"],j[g][15]=j[h+"0"]}function ze(h){return h==Yp||h==Vp||h==Xd||h==Gp}function At(){this.eb=[],this.size=this.A=this.fb=0}function he(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Fe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new At,this.f.kb=new he,this.sd=null}function Ge(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ke(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function dt(h,g){var S=h.T,k=g.ba.f.RGBA,I=k.eb,$=k.fb+h.ka*k.A,B=Ai[g.ba.S],z=h.y,W=h.O,V=h.f,oe=h.N,ve=h.ea,xe=h.W,de=g.cc,Ee=g.dc,Se=g.Mc,ae=g.Nc,le=h.ka,je=h.ka+h.T,Te=h.U,Ce=Te+1>>1;for(le==0?B(z,W,null,null,V,oe,ve,xe,V,oe,ve,xe,I,$,null,null,Te):(B(g.ec,g.fc,z,W,de,Ee,Se,ae,V,oe,ve,xe,I,$-k.A,I,$,Te),++S);le+2<je;le+=2)de=V,Ee=oe,Se=ve,ae=xe,oe+=h.Rc,xe+=h.Rc,$+=2*k.A,B(z,(W+=2*h.fa)-h.fa,z,W,de,Ee,Se,ae,V,oe,ve,xe,I,$-k.A,I,$,Te);return W+=h.fa,h.j+je<h.o?(r(g.ec,g.fc,z,W,Te),r(g.cc,g.dc,V,oe,Ce),r(g.Mc,g.Nc,ve,xe,Ce),S--):1&je||B(z,W,null,null,V,oe,ve,xe,V,oe,ve,xe,I,$+k.A,null,null,Te),S}function It(h,g,S){var k=h.F,I=[h.J];if(k!=null){var $=h.U,B=g.ba.S,z=B==Kd||B==Xd;g=g.ba.f.RGBA;var W=[0],V=h.ka;W[0]=h.T,h.Kb&&(V==0?--W[0]:(--V,I[0]-=h.width),h.j+h.ka+h.T==h.o&&(W[0]=h.o-h.j-V));var oe=g.eb;V=g.fb+V*g.A,h=Xt(k,I[0],h.width,$,W,oe,V+(z?0:3),g.A),e(S==W),h&&ze(B)&&ki(oe,V,z,$,W,g.A)}return 0}function Fn(h){var g=h.ma,S=g.ba.S,k=11>S,I=S==Gd||S==Jd||S==Kd||S==qp||S==12||ze(S);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Vc(g.Oa,h,I?11:12))return 0;if(I&&ze(S)&&Re(),h.da)alert("todo:use_scaling");else{if(k){if(g.Ib=Ke,h.Kb){if(S=h.U+1>>1,g.memory=s(h.U+2*S),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+h.U,g.Mc=g.cc,g.Nc=g.dc+S,g.Ib=dt,Re()}}else alert("todo:EmitYUV");I&&(g.Jb=It,k&&pe())}if(k&&!_y){for(h=0;256>h;++h)S_[h]=89858*(h-128)+Zd>>Qd,k_[h]=-22014*(h-128)+Zd,N_[h]=-45773*(h-128),__[h]=113618*(h-128)+Zd>>Qd;for(h=nu;h<Xp;++h)g=76283*(h-16)+Zd>>Qd,j_[h-nu]=ri(g,255),A_[h-nu]=ri(g+8>>4,15);_y=1}return 1}function ti(h){var g=h.ma,S=h.U,k=h.T;return e(!(1&h.ka)),0>=S||0>=k?0:(S=g.Ib(h,g),g.Jb!=null&&g.Jb(h,g,S),g.Dc+=S,1)}function bi(h){h.ma.memory=null}function st(h,g,S,k){return ie(h,8)!=47?0:(g[0]=ie(h,14)+1,S[0]=ie(h,14)+1,k[0]=ie(h,1),ie(h,3)!=0?0:!h.h)}function Tr(h,g){if(4>h)return h+1;var S=h-2>>1;return(2+(1&h)<<S)+ie(g,S)+1}function Dr(h,g){return 120<g?g-120:1<=(S=((S=l_[g-1])>>4)*h+(8-(15&S)))?S:1;var S}function bn(h,g,S){var k=Y(S),I=h[g+=255&k].g-8;return 0<I&&(Z(S,S.u+8),k=Y(S),g+=h[g].value,g+=k&(1<<I)-1),Z(S,S.u+h[g].g),h[g].value}function Sn(h,g,S){return S.g+=h.g,S.value+=h.value<<g>>>0,e(8>=S.g),h.g}function fn(h,g,S){var k=h.xc;return e((g=k==0?0:h.vc[h.md*(S>>k)+(g>>k)])<h.Wb),h.Ya[g]}function Mr(h,g,S,k){var I=h.ab,$=h.c*g,B=h.C;g=B+g;var z=S,W=k;for(k=h.Ta,S=h.Ua;0<I--;){var V=h.gc[I],oe=B,ve=g,xe=z,de=W,Ee=(W=k,z=S,V.Ea);switch(e(oe<ve),e(ve<=V.nc),V.hc){case 2:Ud(xe,de,(ve-oe)*Ee,W,z);break;case 0:var Se=oe,ae=ve,le=W,je=z,Te=(Ve=V).Ea;Se==0&&(Wp(xe,de,null,null,1,le,je),Ie(xe,de+1,0,0,Te-1,le,je+1),de+=Te,je+=Te,++Se);for(var Ce=1<<Ve.b,Ze=Ce-1,qe=Ye(Te,Ve.b),ct=Ve.K,Ve=Ve.w+(Se>>Ve.b)*qe;Se<ae;){var Ot=ct,$t=Ve,Rt=1;for(Kc(xe,de,le,je-Te,1,le,je);Rt<Te;){var Pt=(Rt&~Ze)+Ce;Pt>Te&&(Pt=Te),(0,ao[Ot[$t++]>>8&15])(xe,de+ +Rt,le,je+Rt-Te,Pt-Rt,le,je+Rt),Rt=Pt}de+=Te,je+=Te,++Se&Ze||(Ve+=qe)}ve!=V.nc&&r(W,z-Ee,W,z+(ve-oe-1)*Ee,Ee);break;case 1:for(Ee=xe,ae=de,Te=(xe=V.Ea)-(je=xe&~(le=(de=1<<V.b)-1)),Se=Ye(xe,V.b),Ce=V.K,V=V.w+(oe>>V.b)*Se;oe<ve;){for(Ze=Ce,qe=V,ct=new ce,Ve=ae+je,Ot=ae+xe;ae<Ve;)Je(Ze[qe++],ct),oa(ct,Ee,ae,de,W,z),ae+=de,z+=de;ae<Ot&&(Je(Ze[qe++],ct),oa(ct,Ee,ae,Te,W,z),ae+=Te,z+=Te),++oe&le||(V+=Se)}break;case 3:if(xe==W&&de==z&&0<V.b){for(ae=W,xe=Ee=z+(ve-oe)*Ee-(je=(ve-oe)*Ye(V.Ea,V.b)),de=W,le=z,Se=[],je=(Te=je)-1;0<=je;--je)Se[je]=de[le+je];for(je=Te-1;0<=je;--je)ae[xe+je]=Se[je];Si(V,oe,ve,W,Ee,W,z)}else Si(V,oe,ve,xe,de,W,z)}z=k,W=S}W!=S&&r(k,S,z,W,$)}function no(h,g){var S=h.V,k=h.Ba+h.c*h.C,I=g-h.C;if(e(g<=h.l.o),e(16>=I),0<I){var $=h.l,B=h.Ta,z=h.Ua,W=$.width;if(Mr(h,I,S,k),I=z=[z],e((S=h.C)<(k=g)),e($.v<$.va),k>$.o&&(k=$.o),S<$.j){var V=$.j-S;S=$.j,I[0]+=V*W}if(S>=k?S=0:(I[0]+=4*$.v,$.ka=S-$.j,$.U=$.va-$.v,$.T=k-S,S=1),S){if(z=z[0],11>(S=h.ca).S){var oe=S.f.RGBA,ve=(k=S.S,I=$.U,$=$.T,V=oe.eb,oe.A),xe=$;for(oe=oe.fb+h.Ma*oe.A;0<xe--;){var de=B,Ee=z,Se=I,ae=V,le=oe;switch(k){case Vd:Fr(de,Ee,Se,ae,le);break;case Gd:Sr(de,Ee,Se,ae,le);break;case Yp:Sr(de,Ee,Se,ae,le),ki(ae,le,0,Se,1,0);break;case py:Cs(de,Ee,Se,ae,le);break;case Jd:Lt(de,Ee,Se,ae,le,1);break;case Vp:Lt(de,Ee,Se,ae,le,1),ki(ae,le,0,Se,1,0);break;case Kd:Lt(de,Ee,Se,ae,le,0);break;case Xd:Lt(de,Ee,Se,ae,le,0),ki(ae,le,1,Se,1,0);break;case qp:lo(de,Ee,Se,ae,le);break;case Gp:lo(de,Ee,Se,ae,le),Kt(ae,le,Se,1,0);break;case my:As(de,Ee,Se,ae,le);break;default:e(0)}z+=W,oe+=ve}h.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=S.height)}}h.C=g,e(h.C<=h.i)}function fe(h){var g;if(0<h.ua)return 0;for(g=0;g<h.Wb;++g){var S=h.Ya[g].G,k=h.Ya[g].H;if(0<S[1][k[1]+0].g||0<S[2][k[2]+0].g||0<S[3][k[3]+0].g)return 0}return 1}function et(h,g,S,k,I,$){if(h.Z!=0){var B=h.qd,z=h.rd;for(e(fo[h.Z]!=null);g<S;++g)fo[h.Z](B,z,k,I,k,I,$),B=k,z=I,I+=$;h.qd=B,h.rd=z}}function Nt(h,g){var S=h.l.ma,k=S.Z==0||S.Z==1?h.l.j:h.C;if(k=h.C<k?k:h.C,e(g<=h.l.o),g>k){var I=h.l.width,$=S.ca,B=S.tb+I*k,z=h.V,W=h.Ba+h.c*k,V=h.gc;e(h.ab==1),e(V[0].hc==3),zd(V[0],k,g,z,W,$,B),et(S,k,g,$,B,I)}h.C=h.Ma=g}function ht(h,g,S,k,I,$,B){var z=h.$/k,W=h.$%k,V=h.m,oe=h.s,ve=S+h.$,xe=ve;I=S+k*I;var de=S+k*$,Ee=280+oe.ua,Se=h.Pb?z:16777216,ae=0<oe.ua?oe.Wa:null,le=oe.wc,je=ve<de?fn(oe,W,z):null;e(h.C<$),e(de<=I);var Te=!1;e:for(;;){for(;Te||ve<de;){var Ce=0;if(z>=Se){var Ze=ve-S;e((Se=h).Pb),Se.wd=Se.m,Se.xd=Ze,0<Se.s.ua&&ye(Se.s.Wa,Se.s.vb),Se=z+u_}if(W&le||(je=fn(oe,W,z)),e(je!=null),je.Qb&&(g[ve]=je.qb,Te=!0),!Te)if(te(V),je.jc){Ce=V,Ze=g;var qe=ve,ct=je.pd[Y(Ce)&Xn-1];e(je.jc),256>ct.g?(Z(Ce,Ce.u+ct.g),Ze[qe]=ct.value,Ce=0):(Z(Ce,Ce.u+ct.g-256),e(256<=ct.value),Ce=ct.value),Ce==0&&(Te=!0)}else Ce=bn(je.G[0],je.H[0],V);if(V.h)break;if(Te||256>Ce){if(!Te)if(je.nd)g[ve]=(je.qb|Ce<<8)>>>0;else{if(te(V),Te=bn(je.G[1],je.H[1],V),te(V),Ze=bn(je.G[2],je.H[2],V),qe=bn(je.G[3],je.H[3],V),V.h)break;g[ve]=(qe<<24|Te<<16|Ce<<8|Ze)>>>0}if(Te=!1,++ve,++W>=k&&(W=0,++z,B!=null&&z<=$&&!(z%16)&&B(h,z),ae!=null))for(;xe<ve;)Ce=g[xe++],ae.X[(506832829*Ce&4294967295)>>>ae.Mb]=Ce}else if(280>Ce){if(Ce=Tr(Ce-256,V),Ze=bn(je.G[4],je.H[4],V),te(V),Ze=Dr(k,Ze=Tr(Ze,V)),V.h)break;if(ve-S<Ze||I-ve<Ce)break e;for(qe=0;qe<Ce;++qe)g[ve+qe]=g[ve+qe-Ze];for(ve+=Ce,W+=Ce;W>=k;)W-=k,++z,B!=null&&z<=$&&!(z%16)&&B(h,z);if(e(ve<=I),W&le&&(je=fn(oe,W,z)),ae!=null)for(;xe<ve;)Ce=g[xe++],ae.X[(506832829*Ce&4294967295)>>>ae.Mb]=Ce}else{if(!(Ce<Ee))break e;for(Te=Ce-280,e(ae!=null);xe<ve;)Ce=g[xe++],ae.X[(506832829*Ce&4294967295)>>>ae.Mb]=Ce;Ce=ve,e(!(Te>>>(Ze=ae).Xa)),g[Ce]=Ze.X[Te],Te=!0}Te||e(V.h==G(V))}if(h.Pb&&V.h&&ve<I)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&ye(h.s.vb,h.s.Wa);else{if(V.h)break e;B!=null&&B(h,z>$?$:z),h.a=0,h.$=ve-S}return 1}return h.a=3,0}function ot(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var g=h.Wa;g!=null&&(g.X=null),h.vb=null,e(h!=null)}function vt(){var h=new zp;return h==null?null:(h.a=0,h.xb=vy,rr("Predictor","VP8LPredictors"),rr("Predictor","VP8LPredictors_C"),rr("PredictorAdd","VP8LPredictorsAdd"),rr("PredictorAdd","VP8LPredictorsAdd_C"),Ud=Ae,oa=Xe,Fr=Le,Sr=kt,lo=pt,As=wn,Cs=_t,j.VP8LMapColor32b=cl,j.VP8LMapColor8b=Wd,h)}function wt(h,g,S,k,I){var $=1,B=[h],z=[g],W=k.m,V=k.s,oe=null,ve=0;e:for(;;){if(S)for(;$&&ie(W,1);){var xe=B,de=z,Ee=k,Se=1,ae=Ee.m,le=Ee.gc[Ee.ab],je=ie(ae,2);if(Ee.Oc&1<<je)$=0;else{switch(Ee.Oc|=1<<je,le.hc=je,le.Ea=xe[0],le.nc=de[0],le.K=[null],++Ee.ab,e(4>=Ee.ab),je){case 0:case 1:le.b=ie(ae,3)+2,Se=wt(Ye(le.Ea,le.b),Ye(le.nc,le.b),0,Ee,le.K),le.K=le.K[0];break;case 3:var Te,Ce=ie(ae,8)+1,Ze=16<Ce?0:4<Ce?1:2<Ce?2:3;if(xe[0]=Ye(le.Ea,Ze),le.b=Ze,Te=Se=wt(Ce,1,0,Ee,le.K)){var qe,ct=Ce,Ve=le,Ot=1<<(8>>Ve.b),$t=s(Ot);if($t==null)Te=0;else{var Rt=Ve.K[0],Pt=Ve.w;for($t[0]=Ve.K[0][0],qe=1;qe<1*ct;++qe)$t[qe]=Me(Rt[Pt+qe],$t[qe-1]);for(;qe<4*Ot;++qe)$t[qe]=0;Ve.K[0]=null,Ve.K[0]=$t,Te=1}}Se=Te;break;case 2:break;default:e(0)}$=Se}}if(B=B[0],z=z[0],$&&ie(W,1)&&!($=1<=(ve=ie(W,4))&&11>=ve)){k.a=3;break e}var qt;if(qt=$)t:{var Ht,bt,Tn,Or=k,Dn=B,$r=z,Bt=ve,si=S,oi=Or.m,Wn=Or.s,Qn=[null],Nr=1,Ci=0,us=c_[Bt];n:for(;;){if(si&&ie(oi,1)){var Hn=ie(oi,3)+2,Ts=Ye(Dn,Hn),da=Ye($r,Hn),pl=Ts*da;if(!wt(Ts,da,0,Or,Qn))break n;for(Qn=Qn[0],Wn.xc=Hn,Ht=0;Ht<pl;++Ht){var po=Qn[Ht]>>8&65535;Qn[Ht]=po,po>=Nr&&(Nr=po+1)}}if(oi.h)break n;for(bt=0;5>bt;++bt){var mn=gy[bt];!bt&&0<Bt&&(mn+=1<<Bt),Ci<mn&&(Ci=mn)}var Qp=o(Nr*us,F),jy=Nr,Ay=o(jy,O);if(Ay==null)var th=null;else e(65536>=jy),th=Ay;var ru=s(Ci);if(th==null||ru==null||Qp==null){Or.a=1;break n}var nh=Qp;for(Ht=Tn=0;Ht<Nr;++Ht){var Hi=th[Ht],ml=Hi.G,gl=Hi.H,Cy=0,rh=1,Ey=0;for(bt=0;5>bt;++bt){mn=gy[bt],ml[bt]=nh,gl[bt]=Tn,!bt&&0<Bt&&(mn+=1<<Bt);i:{var ih,Zp=mn,sh=Or,iu=ru,P_=nh,L_=Tn,e0=0,mo=sh.m,T_=ie(mo,1);if(i(iu,0,0,Zp),T_){var D_=ie(mo,1)+1,M_=ie(mo,1),Py=ie(mo,M_==0?1:8);iu[Py]=1,D_==2&&(iu[Py=ie(mo,8)]=1);var oh=1}else{var Ly=s(19),Ty=ie(mo,4)+4;if(19<Ty){sh.a=3;var ah=0;break i}for(ih=0;ih<Ty;++ih)Ly[a_[ih]]=ie(mo,3);var t0=void 0,su=void 0,Dy=sh,I_=Ly,lh=Zp,My=iu,n0=0,go=Dy.m,Iy=8,Ry=o(128,F);r:for(;L(Ry,0,7,I_,19);){if(ie(go,1)){var R_=2+2*ie(go,3);if((t0=2+ie(go,R_))>lh)break r}else t0=lh;for(su=0;su<lh&&t0--;){te(go);var Fy=Ry[0+(127&Y(go))];Z(go,go.u+Fy.g);var yl=Fy.value;if(16>yl)My[su++]=yl,yl!=0&&(Iy=yl);else{var F_=yl==16,Oy=yl-16,O_=s_[Oy],$y=ie(go,i_[Oy])+O_;if(su+$y>lh)break r;for(var $_=F_?Iy:0;0<$y--;)My[su++]=$_}}n0=1;break r}n0||(Dy.a=3),oh=n0}(oh=oh&&!mo.h)&&(e0=L(P_,L_,8,iu,Zp)),oh&&e0!=0?ah=e0:(sh.a=3,ah=0)}if(ah==0)break n;if(rh&&o_[bt]==1&&(rh=nh[Tn].g==0),Cy+=nh[Tn].g,Tn+=ah,3>=bt){var ou,r0=ru[0];for(ou=1;ou<mn;++ou)ru[ou]>r0&&(r0=ru[ou]);Ey+=r0}}if(Hi.nd=rh,Hi.Qb=0,rh&&(Hi.qb=(ml[3][gl[3]+0].value<<24|ml[1][gl[1]+0].value<<16|ml[2][gl[2]+0].value)>>>0,Cy==0&&256>ml[0][gl[0]+0].value&&(Hi.Qb=1,Hi.qb+=ml[0][gl[0]+0].value<<8)),Hi.jc=!Hi.Qb&&6>Ey,Hi.jc){var ch,Ds=Hi;for(ch=0;ch<Xn;++ch){var yo=ch,vo=Ds.pd[yo],uh=Ds.G[0][Ds.H[0]+yo];256<=uh.value?(vo.g=uh.g+256,vo.value=uh.value):(vo.g=0,vo.value=0,yo>>=Sn(uh,8,vo),yo>>=Sn(Ds.G[1][Ds.H[1]+yo],16,vo),yo>>=Sn(Ds.G[2][Ds.H[2]+yo],0,vo),Sn(Ds.G[3][Ds.H[3]+yo],24,vo))}}}Wn.vc=Qn,Wn.Wb=Nr,Wn.Ya=th,Wn.yc=Qp,qt=1;break t}qt=0}if(!($=qt)){k.a=3;break e}if(0<ve){if(V.ua=1<<ve,!He(V.Wa,ve)){k.a=1,$=0;break e}}else V.ua=0;var i0=k,By=B,B_=z,s0=i0.s,o0=s0.xc;if(i0.c=By,i0.i=B_,s0.md=Ye(By,o0),s0.wc=o0==0?-1:(1<<o0)-1,S){k.xb=y_;break e}if((oe=s(B*z))==null){k.a=1,$=0;break e}$=($=ht(k,oe,0,B,z,z,null))&&!W.h;break e}return $?(I!=null?I[0]=oe:(e(oe==null),e(S)),k.$=0,S||ot(V)):ot(V),$}function jt(h,g){var S=h.c*h.i,k=S+g+16*g;return e(h.c<=g),h.V=s(k),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+S+g,1)}function en(h,g){var S=h.C,k=g-S,I=h.V,$=h.Ba+h.c*S;for(e(g<=h.l.o);0<k;){var B=16<k?16:k,z=h.l.ma,W=h.l.width,V=W*B,oe=z.ca,ve=z.tb+W*S,xe=h.Ta,de=h.Ua;Mr(h,B,I,$),kn(xe,de,oe,ve,V),et(z,S,S+B,oe,ve,W),k-=B,I+=B*h.c,S+=B}e(S==g),h.C=h.Ma=g}function ir(){this.ub=this.yd=this.td=this.Rb=0}function ni(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function os(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Va(){this.Yb=function(){var h=[];return function g(S,k,I){for(var $=I[k],B=0;B<$&&(S.push(I.length>k+1?[]:0),!(I.length<k+1));B++)g(S[B],k+1,I)}(h,0,[3,11]),h}()}function Pc(){this.jb=s(3),this.Wc=a([4,8],Va),this.Xc=a([4,17],Va)}function ro(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ga(){this.ld=this.La=this.dd=this.tc=0}function Sd(){this.Na=this.la=0}function bp(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Lc(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Sp(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ga),this.Y=0,this.ya=Array(new Lc),this.aa=0,this.l=new Ja}function _d(){this.y=s(16),this.f=s(8),this.ea=s(8)}function _p(){this.cb=this.a=0,this.sc="",this.m=new re,this.Od=new ir,this.Kc=new ni,this.ed=new ro,this.Qa=new os,this.Ic=this.$c=this.Aa=0,this.D=new Sp,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,re),this.ia=0,this.pb=o(4,bp),this.Pa=new Pc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new _d),this.Hd=0,this.rb=Array(new Sd),this.sb=0,this.wa=Array(new Ga),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Lc),this.L=this.aa=0,this.gd=a([4,2],Ga),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ja(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Np(){var h=new _p;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,tu||(tu=jd)),h}function _n(h,g,S){return h.a==0&&(h.a=g,h.sc=S,h.cb=0),0}function Nd(h,g,S){return 3<=S&&h[g+0]==157&&h[g+1]==1&&h[g+2]==42}function kd(h,g){if(h==null)return 0;if(h.a=0,h.sc="OK",g==null)return _n(h,2,"null VP8Io passed to VP8GetHeaders()");var S=g.data,k=g.w,I=g.ha;if(4>I)return _n(h,7,"Truncated header.");var $=S[k+0]|S[k+1]<<8|S[k+2]<<16,B=h.Od;if(B.Rb=!(1&$),B.td=$>>1&7,B.yd=$>>4&1,B.ub=$>>5,3<B.td)return _n(h,3,"Incorrect keyframe parameters.");if(!B.yd)return _n(h,4,"Frame not displayable.");k+=3,I-=3;var z=h.Kc;if(B.Rb){if(7>I)return _n(h,7,"cannot parse picture header");if(!Nd(S,k,I))return _n(h,3,"Bad code word");z.c=16383&(S[k+4]<<8|S[k+3]),z.Td=S[k+4]>>6,z.i=16383&(S[k+6]<<8|S[k+5]),z.Ud=S[k+6]>>6,k+=7,I-=7,h.za=z.c+15>>4,h.Ub=z.i+15>>4,g.width=z.c,g.height=z.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i(($=h.Pa).jb,0,255,$.jb.length),e(($=h.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,i($.Zb,0,0,$.Zb.length),i($.Lb,0,0,$.Lb)}if(B.ub>I)return _n(h,7,"bad partition length");J($=h.m,S,k,B.ub),k+=B.ub,I-=B.ub,B.Rb&&(z.Ld=me($),z.Kd=me($)),z=h.Qa;var W,V=h.Pa;if(e($!=null),e(z!=null),z.Cb=me($),z.Cb){if(z.Bb=me($),me($)){for(z.Fb=me($),W=0;4>W;++W)z.Zb[W]=me($)?se($,7):0;for(W=0;4>W;++W)z.Lb[W]=me($)?se($,6):0}if(z.Bb)for(W=0;3>W;++W)V.jb[W]=me($)?X($,8):255}else z.Bb=0;if($.Ka)return _n(h,3,"cannot parse segment header");if((z=h.ed).zd=me($),z.Tb=X($,6),z.wb=X($,3),z.Pc=me($),z.Pc&&me($)){for(V=0;4>V;++V)me($)&&(z.vd[V]=se($,6));for(V=0;4>V;++V)me($)&&(z.od[V]=se($,6))}if(h.L=z.Tb==0?0:z.zd?1:2,$.Ka)return _n(h,3,"cannot parse filter header");var oe=I;if(I=W=k,k=W+oe,z=oe,h.Xb=(1<<X(h.m,2))-1,oe<3*(V=h.Xb))S=7;else{for(W+=3*V,z-=3*V,oe=0;oe<V;++oe){var ve=S[I+0]|S[I+1]<<8|S[I+2]<<16;ve>z&&(ve=z),J(h.Jc[+oe],S,W,ve),W+=ve,z-=ve,I+=3}J(h.Jc[+V],S,W,z),S=W<k?0:5}if(S!=0)return _n(h,S,"cannot parse partitions");for(S=X(W=h.m,7),I=me(W)?se(W,4):0,k=me(W)?se(W,4):0,z=me(W)?se(W,4):0,V=me(W)?se(W,4):0,W=me(W)?se(W,4):0,oe=h.Qa,ve=0;4>ve;++ve){if(oe.Cb){var xe=oe.Zb[ve];oe.Fb||(xe+=S)}else{if(0<ve){h.pb[ve]=h.pb[0];continue}xe=S}var de=h.pb[ve];de.Sc[0]=Jp[ri(xe+I,127)],de.Sc[1]=Kp[ri(xe+0,127)],de.Eb[0]=2*Jp[ri(xe+k,127)],de.Eb[1]=101581*Kp[ri(xe+z,127)]>>16,8>de.Eb[1]&&(de.Eb[1]=8),de.Qc[0]=Jp[ri(xe+V,117)],de.Qc[1]=Kp[ri(xe+W,127)],de.lc=xe+W}if(!B.Rb)return _n(h,4,"Not a key frame.");for(me($),B=h.Pa,S=0;4>S;++S){for(I=0;8>I;++I)for(k=0;3>k;++k)for(z=0;11>z;++z)V=ge($,m_[S][I][k][z])?X($,8):f_[S][I][k][z],B.Wc[S][I].Yb[k][z]=V;for(I=0;17>I;++I)B.Xc[S][I]=B.Wc[S][g_[I]]}return h.kc=me($),h.kc&&(h.Bd=X($,8)),h.cb=1}function jd(h,g,S,k,I,$,B){var z=g[I].Yb[S];for(S=0;16>I;++I){if(!ge(h,z[S+0]))return I;for(;!ge(h,z[S+1]);)if(z=g[++I].Yb[0],S=0,I==16)return 16;var W=g[I+1].Yb;if(ge(h,z[S+2])){var V=h,oe=0;if(ge(V,(xe=z)[(ve=S)+3]))if(ge(V,xe[ve+6])){for(z=0,ve=2*(oe=ge(V,xe[ve+8]))+(xe=ge(V,xe[ve+9+oe])),oe=0,xe=d_[ve];xe[z];++z)oe+=oe+ge(V,xe[z]);oe+=3+(8<<ve)}else ge(V,xe[ve+7])?(oe=7+2*ge(V,165),oe+=ge(V,145)):oe=5+ge(V,159);else oe=ge(V,xe[ve+4])?3+ge(V,xe[ve+5]):2;z=W[2]}else oe=1,z=W[1];W=B+h_[I],0>(V=h).b&&ue(V);var ve,xe=V.b,de=(ve=V.Ca>>1)-(V.I>>xe)>>31;--V.b,V.Ca+=de,V.Ca|=1,V.I-=(ve+1&de)<<xe,$[W]=((oe^de)-de)*k[(0<I)+0]}return 16}function Tc(h){var g=h.rb[h.sb-1];g.la=0,g.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function kp(h,g){if(h==null)return 0;if(g==null)return _n(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!kd(h,g))return 0;if(e(h.cb),g.ac==null||g.ac(g)){g.ob&&(h.L=0);var S=eh[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=g.v-S>>4,h.zb=g.j-S>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=g.o+15+S>>4,h.Hb=g.va+15+S>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var k=h.ed;for(S=0;4>S;++S){var I;if(h.Qa.Cb){var $=h.Qa.Lb[S];h.Qa.Fb||($+=k.Tb)}else $=k.Tb;for(I=0;1>=I;++I){var B=h.gd[S][I],z=$;if(k.Pc&&(z+=k.vd[0],I&&(z+=k.od[0])),0<(z=0>z?0:63<z?63:z)){var W=z;0<k.wb&&(W=4<k.wb?W>>2:W>>1)>9-k.wb&&(W=9-k.wb),1>W&&(W=1),B.dd=W,B.tc=2*z+W,B.ld=40<=z?2:15<=z?1:0}else B.tc=0;B.La=I}}}S=0}else _n(h,6,"Frame setup failed"),S=h.a;if(S=S==0){if(S){h.$c=0,0<h.Aa||(h.Ic=E_);e:{S=h.Ic,k=4*(W=h.za);var V=32*W,oe=W+1,ve=0<h.L?W*(0<h.Aa?2:1):0,xe=(h.Aa==2?2:1)*W;if((B=k+832+(I=3*(16*S+eh[h.L])/2*V)+($=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=B)S=0;else{if(B>h.Vb){if(h.Vb=0,h.Ec=s(B),h.Fc=0,h.Ec==null){S=_n(h,1,"no memory during frame initialization.");break e}h.Vb=B}B=h.Ec,z=h.Fc,h.Ac=B,h.Bc=z,z+=k,h.Gd=o(V,_d),h.Hd=0,h.rb=o(oe+1,Sd),h.sb=1,h.wa=ve?o(ve,Ga):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=W),e(!0),h.oc=B,h.pc=z,z+=832,h.ya=o(xe,Lc),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=W),h.R=16*W,h.B=8*W,W=(V=eh[h.L])*h.R,V=V/2*h.B,h.sa=B,h.ta=z+W,h.qa=h.sa,h.ra=h.ta+16*S*h.R+V,h.Ha=h.qa,h.Ia=h.ra+8*S*h.B+V,h.$c=0,z+=I,h.mb=$?B:null,h.nb=$?z:null,e(z+$<=h.Fc+h.Vb),Tc(h),i(h.Ac,h.Bc,0,k),S=1}}if(S){if(g.ka=0,g.y=h.sa,g.O=h.ta,g.f=h.qa,g.N=h.ra,g.ea=h.Ha,g.Vd=h.Ia,g.fa=h.R,g.Rc=h.B,g.F=null,g.J=0,!qd){for(S=-255;255>=S;++S)On[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)Ps[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)eu[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)fl[255+S]=0>S?0:255<S?255:S;qd=1}ul=Cp,Es=jp,Xc=Cd,_r=Ap,_i=Ed,Nn=Ad,dl=Oc,Hd=ia,Qc=Up,aa=$c,la=Bp,co=tl,ca=Bc,hl=Od,ua=Fd,uo=ls,Zc=js,Ni=$p,Wi[0]=as,Wi[1]=Ep,Wi[2]=Dp,Wi[3]=Mp,Wi[4]=Td,Wi[5]=Za,Wi[6]=Dd,Wi[7]=Ic,Wi[8]=Rp,Wi[9]=Ip,ho[0]=Pd,ho[1]=Lp,ho[2]=ks,ho[3]=Xa,ho[4]=sr,ho[5]=Tp,ho[6]=Ld,Ls[0]=io,Ls[1]=Pp,Ls[2]=Fp,Ls[3]=Rc,Ls[4]=ra,Ls[5]=Op,Ls[6]=Fc,S=1}else S=0}S&&(S=function(de,Ee){for(de.M=0;de.M<de.Va;++de.M){var Se,ae=de.Jc[de.M&de.Xb],le=de.m,je=de;for(Se=0;Se<je.za;++Se){var Te=le,Ce=je,Ze=Ce.Ac,qe=Ce.Bc+4*Se,ct=Ce.zc,Ve=Ce.ya[Ce.aa+Se];if(Ce.Qa.Bb?Ve.$b=ge(Te,Ce.Pa.jb[0])?2+ge(Te,Ce.Pa.jb[2]):ge(Te,Ce.Pa.jb[1]):Ve.$b=0,Ce.kc&&(Ve.Ad=ge(Te,Ce.Bd)),Ve.Za=!ge(Te,145)+0,Ve.Za){var Ot=Ve.Ob,$t=0;for(Ce=0;4>Ce;++Ce){var Rt,Pt=ct[0+Ce];for(Rt=0;4>Rt;++Rt){Pt=p_[Ze[qe+Rt]][Pt];for(var qt=yy[ge(Te,Pt[0])];0<qt;)qt=yy[2*qt+ge(Te,Pt[qt])];Pt=-qt,Ze[qe+Rt]=Pt}r(Ot,$t,Ze,qe,4),$t+=4,ct[0+Ce]=Pt}}else Pt=ge(Te,156)?ge(Te,128)?1:3:ge(Te,163)?2:0,Ve.Ob[0]=Pt,i(Ze,qe,Pt,4),i(ct,0,Pt,4);Ve.Dd=ge(Te,142)?ge(Te,114)?ge(Te,183)?1:3:2:0}if(je.m.Ka)return _n(de,7,"Premature end-of-partition0 encountered.");for(;de.ja<de.za;++de.ja){if(je=ae,Te=(le=de).rb[le.sb-1],Ze=le.rb[le.sb+le.ja],Se=le.ya[le.aa+le.ja],qe=le.kc?Se.Ad:0)Te.la=Ze.la=0,Se.Za||(Te.Na=Ze.Na=0),Se.Hc=0,Se.Gc=0,Se.ia=0;else{var Ht,bt;if(Te=Ze,Ze=je,qe=le.Pa.Xc,ct=le.ya[le.aa+le.ja],Ve=le.pb[ct.$b],Ce=ct.ad,Ot=0,$t=le.rb[le.sb-1],Pt=Rt=0,i(Ce,Ot,0,384),ct.Za)var Tn=0,Or=qe[3];else{qt=s(16);var Dn=Te.Na+$t.Na;if(Dn=tu(Ze,qe[1],Dn,Ve.Eb,0,qt,0),Te.Na=$t.Na=(0<Dn)+0,1<Dn)ul(qt,0,Ce,Ot);else{var $r=qt[0]+3>>3;for(qt=0;256>qt;qt+=16)Ce[Ot+qt]=$r}Tn=1,Or=qe[0]}var Bt=15&Te.la,si=15&$t.la;for(qt=0;4>qt;++qt){var oi=1&si;for($r=bt=0;4>$r;++$r)Bt=Bt>>1|(oi=(Dn=tu(Ze,Or,Dn=oi+(1&Bt),Ve.Sc,Tn,Ce,Ot))>Tn)<<7,bt=bt<<2|(3<Dn?3:1<Dn?2:Ce[Ot+0]!=0),Ot+=16;Bt>>=4,si=si>>1|oi<<7,Rt=(Rt<<8|bt)>>>0}for(Or=Bt,Tn=si>>4,Ht=0;4>Ht;Ht+=2){for(bt=0,Bt=Te.la>>4+Ht,si=$t.la>>4+Ht,qt=0;2>qt;++qt){for(oi=1&si,$r=0;2>$r;++$r)Dn=oi+(1&Bt),Bt=Bt>>1|(oi=0<(Dn=tu(Ze,qe[2],Dn,Ve.Qc,0,Ce,Ot)))<<3,bt=bt<<2|(3<Dn?3:1<Dn?2:Ce[Ot+0]!=0),Ot+=16;Bt>>=2,si=si>>1|oi<<5}Pt|=bt<<4*Ht,Or|=Bt<<4<<Ht,Tn|=(240&si)<<Ht}Te.la=Or,$t.la=Tn,ct.Hc=Rt,ct.Gc=Pt,ct.ia=43690&Pt?0:Ve.ia,qe=!(Rt|Pt)}if(0<le.L&&(le.wa[le.Y+le.ja]=le.gd[Se.$b][Se.Za],le.wa[le.Y+le.ja].La|=!qe),je.Ka)return _n(de,7,"Premature end-of-file encountered.")}if(Tc(de),le=Ee,je=1,Se=(ae=de).D,Te=0<ae.L&&ae.M>=ae.zb&&ae.M<=ae.Va,ae.Aa==0)e:{if(Se.M=ae.M,Se.uc=Te,Yc(ae,Se),je=1,Se=(bt=ae.D).Nb,Te=(Pt=eh[ae.L])*ae.R,Ze=Pt/2*ae.B,qt=16*Se*ae.R,$r=8*Se*ae.B,qe=ae.sa,ct=ae.ta-Te+qt,Ve=ae.qa,Ce=ae.ra-Ze+$r,Ot=ae.Ha,$t=ae.Ia-Ze+$r,si=(Bt=bt.M)==0,Rt=Bt>=ae.Va-1,ae.Aa==2&&Yc(ae,bt),bt.uc)for(oi=(Dn=ae).D.M,e(Dn.D.uc),bt=Dn.yb;bt<Dn.Hb;++bt){Tn=bt,Or=oi;var Wn=(Qn=(mn=Dn).D).Nb;Ht=mn.R;var Qn=Qn.wa[Qn.Y+Tn],Nr=mn.sa,Ci=mn.ta+16*Wn*Ht+16*Tn,us=Qn.dd,Hn=Qn.tc;if(Hn!=0)if(e(3<=Hn),mn.L==1)0<Tn&&uo(Nr,Ci,Ht,Hn+4),Qn.La&&Ni(Nr,Ci,Ht,Hn),0<Or&&ua(Nr,Ci,Ht,Hn+4),Qn.La&&Zc(Nr,Ci,Ht,Hn);else{var Ts=mn.B,da=mn.qa,pl=mn.ra+8*Wn*Ts+8*Tn,po=mn.Ha,mn=mn.Ia+8*Wn*Ts+8*Tn;Wn=Qn.ld,0<Tn&&(Hd(Nr,Ci,Ht,Hn+4,us,Wn),aa(da,pl,po,mn,Ts,Hn+4,us,Wn)),Qn.La&&(co(Nr,Ci,Ht,Hn,us,Wn),hl(da,pl,po,mn,Ts,Hn,us,Wn)),0<Or&&(dl(Nr,Ci,Ht,Hn+4,us,Wn),Qc(da,pl,po,mn,Ts,Hn+4,us,Wn)),Qn.La&&(la(Nr,Ci,Ht,Hn,us,Wn),ca(da,pl,po,mn,Ts,Hn,us,Wn))}}if(ae.ia&&alert("todo:DitherRow"),le.put!=null){if(bt=16*Bt,Bt=16*(Bt+1),si?(le.y=ae.sa,le.O=ae.ta+qt,le.f=ae.qa,le.N=ae.ra+$r,le.ea=ae.Ha,le.W=ae.Ia+$r):(bt-=Pt,le.y=qe,le.O=ct,le.f=Ve,le.N=Ce,le.ea=Ot,le.W=$t),Rt||(Bt-=Pt),Bt>le.o&&(Bt=le.o),le.F=null,le.J=null,ae.Fa!=null&&0<ae.Fa.length&&bt<Bt&&(le.J=Hc(ae,le,bt,Bt-bt),le.F=ae.mb,le.F==null&&le.F.length==0)){je=_n(ae,3,"Could not decode alpha data.");break e}bt<le.j&&(Pt=le.j-bt,bt=le.j,e(!(1&Pt)),le.O+=ae.R*Pt,le.N+=ae.B*(Pt>>1),le.W+=ae.B*(Pt>>1),le.F!=null&&(le.J+=le.width*Pt)),bt<Bt&&(le.O+=le.v,le.N+=le.v>>1,le.W+=le.v>>1,le.F!=null&&(le.J+=le.v),le.ka=bt-le.j,le.U=le.va-le.v,le.T=Bt-bt,je=le.put(le))}Se+1!=ae.Ic||Rt||(r(ae.sa,ae.ta-Te,qe,ct+16*ae.R,Te),r(ae.qa,ae.ra-Ze,Ve,Ce+8*ae.B,Ze),r(ae.Ha,ae.Ia-Ze,Ot,$t+8*ae.B,Ze))}if(!je)return _n(de,6,"Output aborted.")}return 1}(h,g)),g.bc!=null&&g.bc(g),S&=1}return S?(h.cb=0,S):0}function Bi(h,g,S,k,I){I=h[g+S+32*k]+(I>>3),h[g+S+32*k]=-256&I?0>I?0:255:I}function Ka(h,g,S,k,I,$){Bi(h,g,0,S,k+I),Bi(h,g,1,S,k+$),Bi(h,g,2,S,k-$),Bi(h,g,3,S,k-I)}function Ir(h){return(20091*h>>16)+h}function Dc(h,g,S,k){var I,$=0,B=s(16);for(I=0;4>I;++I){var z=h[g+0]+h[g+8],W=h[g+0]-h[g+8],V=(35468*h[g+4]>>16)-Ir(h[g+12]),oe=Ir(h[g+4])+(35468*h[g+12]>>16);B[$+0]=z+oe,B[$+1]=W+V,B[$+2]=W-V,B[$+3]=z-oe,$+=4,g++}for(I=$=0;4>I;++I)z=(h=B[$+0]+4)+B[$+8],W=h-B[$+8],V=(35468*B[$+4]>>16)-Ir(B[$+12]),Bi(S,k,0,0,z+(oe=Ir(B[$+4])+(35468*B[$+12]>>16))),Bi(S,k,1,0,W+V),Bi(S,k,2,0,W-V),Bi(S,k,3,0,z-oe),$++,k+=32}function Ad(h,g,S,k){var I=h[g+0]+4,$=35468*h[g+4]>>16,B=Ir(h[g+4]),z=35468*h[g+1]>>16;Ka(S,k,0,I+B,h=Ir(h[g+1]),z),Ka(S,k,1,I+$,h,z),Ka(S,k,2,I-$,h,z),Ka(S,k,3,I-B,h,z)}function jp(h,g,S,k,I){Dc(h,g,S,k),I&&Dc(h,g+16,S,k+4)}function Cd(h,g,S,k){Es(h,g+0,S,k,1),Es(h,g+32,S,k+128,1)}function Ap(h,g,S,k){var I;for(h=h[g+0]+4,I=0;4>I;++I)for(g=0;4>g;++g)Bi(S,k,g,I,h)}function Ed(h,g,S,k){h[g+0]&&_r(h,g+0,S,k),h[g+16]&&_r(h,g+16,S,k+4),h[g+32]&&_r(h,g+32,S,k+128),h[g+48]&&_r(h,g+48,S,k+128+4)}function Cp(h,g,S,k){var I,$=s(16);for(I=0;4>I;++I){var B=h[g+0+I]+h[g+12+I],z=h[g+4+I]+h[g+8+I],W=h[g+4+I]-h[g+8+I],V=h[g+0+I]-h[g+12+I];$[0+I]=B+z,$[8+I]=B-z,$[4+I]=V+W,$[12+I]=V-W}for(I=0;4>I;++I)B=(h=$[0+4*I]+3)+$[3+4*I],z=$[1+4*I]+$[2+4*I],W=$[1+4*I]-$[2+4*I],V=h-$[3+4*I],S[k+0]=B+z>>3,S[k+16]=V+W>>3,S[k+32]=B-z>>3,S[k+48]=V-W>>3,k+=64}function Mc(h,g,S){var k,I=g-32,$=ii,B=255-h[I-1];for(k=0;k<S;++k){var z,W=$,V=B+h[g-1];for(z=0;z<S;++z)h[g+z]=W[V+h[I+z]];g+=32}}function Ep(h,g){Mc(h,g,4)}function Pp(h,g){Mc(h,g,8)}function Lp(h,g){Mc(h,g,16)}function ks(h,g){var S;for(S=0;16>S;++S)r(h,g+32*S,h,g-32,16)}function Xa(h,g){var S;for(S=16;0<S;--S)i(h,g,h[g-1],16),g+=32}function Qa(h,g,S){var k;for(k=0;16>k;++k)i(g,S+32*k,h,16)}function Pd(h,g){var S,k=16;for(S=0;16>S;++S)k+=h[g-1+32*S]+h[g+S-32];Qa(k>>5,h,g)}function sr(h,g){var S,k=8;for(S=0;16>S;++S)k+=h[g-1+32*S];Qa(k>>4,h,g)}function Tp(h,g){var S,k=8;for(S=0;16>S;++S)k+=h[g+S-32];Qa(k>>4,h,g)}function Ld(h,g){Qa(128,h,g)}function mt(h,g,S){return h+2*g+S+2>>2}function Dp(h,g){var S,k=g-32;for(k=new Uint8Array([mt(h[k-1],h[k+0],h[k+1]),mt(h[k+0],h[k+1],h[k+2]),mt(h[k+1],h[k+2],h[k+3]),mt(h[k+2],h[k+3],h[k+4])]),S=0;4>S;++S)r(h,g+32*S,k,0,k.length)}function Mp(h,g){var S=h[g-1],k=h[g-1+32],I=h[g-1+64],$=h[g-1+96];De(h,g+0,16843009*mt(h[g-1-32],S,k)),De(h,g+32,16843009*mt(S,k,I)),De(h,g+64,16843009*mt(k,I,$)),De(h,g+96,16843009*mt(I,$,$))}function as(h,g){var S,k=4;for(S=0;4>S;++S)k+=h[g+S-32]+h[g-1+32*S];for(k>>=3,S=0;4>S;++S)i(h,g+32*S,k,4)}function Td(h,g){var S=h[g-1+0],k=h[g-1+32],I=h[g-1+64],$=h[g-1-32],B=h[g+0-32],z=h[g+1-32],W=h[g+2-32],V=h[g+3-32];h[g+0+96]=mt(k,I,h[g-1+96]),h[g+1+96]=h[g+0+64]=mt(S,k,I),h[g+2+96]=h[g+1+64]=h[g+0+32]=mt($,S,k),h[g+3+96]=h[g+2+64]=h[g+1+32]=h[g+0+0]=mt(B,$,S),h[g+3+64]=h[g+2+32]=h[g+1+0]=mt(z,B,$),h[g+3+32]=h[g+2+0]=mt(W,z,B),h[g+3+0]=mt(V,W,z)}function Dd(h,g){var S=h[g+1-32],k=h[g+2-32],I=h[g+3-32],$=h[g+4-32],B=h[g+5-32],z=h[g+6-32],W=h[g+7-32];h[g+0+0]=mt(h[g+0-32],S,k),h[g+1+0]=h[g+0+32]=mt(S,k,I),h[g+2+0]=h[g+1+32]=h[g+0+64]=mt(k,I,$),h[g+3+0]=h[g+2+32]=h[g+1+64]=h[g+0+96]=mt(I,$,B),h[g+3+32]=h[g+2+64]=h[g+1+96]=mt($,B,z),h[g+3+64]=h[g+2+96]=mt(B,z,W),h[g+3+96]=mt(z,W,W)}function Za(h,g){var S=h[g-1+0],k=h[g-1+32],I=h[g-1+64],$=h[g-1-32],B=h[g+0-32],z=h[g+1-32],W=h[g+2-32],V=h[g+3-32];h[g+0+0]=h[g+1+64]=$+B+1>>1,h[g+1+0]=h[g+2+64]=B+z+1>>1,h[g+2+0]=h[g+3+64]=z+W+1>>1,h[g+3+0]=W+V+1>>1,h[g+0+96]=mt(I,k,S),h[g+0+64]=mt(k,S,$),h[g+0+32]=h[g+1+96]=mt(S,$,B),h[g+1+32]=h[g+2+96]=mt($,B,z),h[g+2+32]=h[g+3+96]=mt(B,z,W),h[g+3+32]=mt(z,W,V)}function Ic(h,g){var S=h[g+0-32],k=h[g+1-32],I=h[g+2-32],$=h[g+3-32],B=h[g+4-32],z=h[g+5-32],W=h[g+6-32],V=h[g+7-32];h[g+0+0]=S+k+1>>1,h[g+1+0]=h[g+0+64]=k+I+1>>1,h[g+2+0]=h[g+1+64]=I+$+1>>1,h[g+3+0]=h[g+2+64]=$+B+1>>1,h[g+0+32]=mt(S,k,I),h[g+1+32]=h[g+0+96]=mt(k,I,$),h[g+2+32]=h[g+1+96]=mt(I,$,B),h[g+3+32]=h[g+2+96]=mt($,B,z),h[g+3+64]=mt(B,z,W),h[g+3+96]=mt(z,W,V)}function Ip(h,g){var S=h[g-1+0],k=h[g-1+32],I=h[g-1+64],$=h[g-1+96];h[g+0+0]=S+k+1>>1,h[g+2+0]=h[g+0+32]=k+I+1>>1,h[g+2+32]=h[g+0+64]=I+$+1>>1,h[g+1+0]=mt(S,k,I),h[g+3+0]=h[g+1+32]=mt(k,I,$),h[g+3+32]=h[g+1+64]=mt(I,$,$),h[g+3+64]=h[g+2+64]=h[g+0+96]=h[g+1+96]=h[g+2+96]=h[g+3+96]=$}function Rp(h,g){var S=h[g-1+0],k=h[g-1+32],I=h[g-1+64],$=h[g-1+96],B=h[g-1-32],z=h[g+0-32],W=h[g+1-32],V=h[g+2-32];h[g+0+0]=h[g+2+32]=S+B+1>>1,h[g+0+32]=h[g+2+64]=k+S+1>>1,h[g+0+64]=h[g+2+96]=I+k+1>>1,h[g+0+96]=$+I+1>>1,h[g+3+0]=mt(z,W,V),h[g+2+0]=mt(B,z,W),h[g+1+0]=h[g+3+32]=mt(S,B,z),h[g+1+32]=h[g+3+64]=mt(k,S,B),h[g+1+64]=h[g+3+96]=mt(I,k,S),h[g+1+96]=mt($,I,k)}function Fp(h,g){var S;for(S=0;8>S;++S)r(h,g+32*S,h,g-32,8)}function Rc(h,g){var S;for(S=0;8>S;++S)i(h,g,h[g-1],8),g+=32}function na(h,g,S){var k;for(k=0;8>k;++k)i(g,S+32*k,h,8)}function io(h,g){var S,k=8;for(S=0;8>S;++S)k+=h[g+S-32]+h[g-1+32*S];na(k>>4,h,g)}function Op(h,g){var S,k=4;for(S=0;8>S;++S)k+=h[g+S-32];na(k>>3,h,g)}function ra(h,g){var S,k=4;for(S=0;8>S;++S)k+=h[g-1+32*S];na(k>>3,h,g)}function Fc(h,g){na(128,h,g)}function el(h,g,S){var k=h[g-S],I=h[g+0],$=3*(I-k)+Hp[1020+h[g-2*S]-h[g+S]],B=Yd[112+($+4>>3)];h[g-S]=ii[255+k+Yd[112+($+3>>3)]],h[g+0]=ii[255+I-B]}function Md(h,g,S,k){var I=h[g+0],$=h[g+S];return ji[255+h[g-2*S]-h[g-S]]>k||ji[255+$-I]>k}function Id(h,g,S,k){return 4*ji[255+h[g-S]-h[g+0]]+ji[255+h[g-2*S]-h[g+S]]<=k}function Rd(h,g,S,k,I){var $=h[g-3*S],B=h[g-2*S],z=h[g-S],W=h[g+0],V=h[g+S],oe=h[g+2*S],ve=h[g+3*S];return 4*ji[255+z-W]+ji[255+B-V]>k?0:ji[255+h[g-4*S]-$]<=I&&ji[255+$-B]<=I&&ji[255+B-z]<=I&&ji[255+ve-oe]<=I&&ji[255+oe-V]<=I&&ji[255+V-W]<=I}function Fd(h,g,S,k){var I=2*k+1;for(k=0;16>k;++k)Id(h,g+k,S,I)&&el(h,g+k,S)}function ls(h,g,S,k){var I=2*k+1;for(k=0;16>k;++k)Id(h,g+k*S,1,I)&&el(h,g+k*S,1)}function js(h,g,S,k){var I;for(I=3;0<I;--I)Fd(h,g+=4*S,S,k)}function $p(h,g,S,k){var I;for(I=3;0<I;--I)ls(h,g+=4,S,k)}function so(h,g,S,k,I,$,B,z){for($=2*$+1;0<I--;){if(Rd(h,g,S,$,B))if(Md(h,g,S,z))el(h,g,S);else{var W=h,V=g,oe=S,ve=W[V-2*oe],xe=W[V-oe],de=W[V+0],Ee=W[V+oe],Se=W[V+2*oe],ae=27*(je=Hp[1020+3*(de-xe)+Hp[1020+ve-Ee]])+63>>7,le=18*je+63>>7,je=9*je+63>>7;W[V-3*oe]=ii[255+W[V-3*oe]+je],W[V-2*oe]=ii[255+ve+le],W[V-oe]=ii[255+xe+ae],W[V+0]=ii[255+de-ae],W[V+oe]=ii[255+Ee-le],W[V+2*oe]=ii[255+Se-je]}g+=k}}function Ui(h,g,S,k,I,$,B,z){for($=2*$+1;0<I--;){if(Rd(h,g,S,$,B))if(Md(h,g,S,z))el(h,g,S);else{var W=h,V=g,oe=S,ve=W[V-oe],xe=W[V+0],de=W[V+oe],Ee=Yd[112+((Se=3*(xe-ve))+4>>3)],Se=Yd[112+(Se+3>>3)],ae=Ee+1>>1;W[V-2*oe]=ii[255+W[V-2*oe]+ae],W[V-oe]=ii[255+ve+Se],W[V+0]=ii[255+xe-Ee],W[V+oe]=ii[255+de-ae]}g+=k}}function Oc(h,g,S,k,I,$){so(h,g,S,1,16,k,I,$)}function ia(h,g,S,k,I,$){so(h,g,1,S,16,k,I,$)}function Bp(h,g,S,k,I,$){var B;for(B=3;0<B;--B)Ui(h,g+=4*S,S,1,16,k,I,$)}function tl(h,g,S,k,I,$){var B;for(B=3;0<B;--B)Ui(h,g+=4,1,S,16,k,I,$)}function Up(h,g,S,k,I,$,B,z){so(h,g,I,1,8,$,B,z),so(S,k,I,1,8,$,B,z)}function $c(h,g,S,k,I,$,B,z){so(h,g,1,I,8,$,B,z),so(S,k,1,I,8,$,B,z)}function Bc(h,g,S,k,I,$,B,z){Ui(h,g+4*I,I,1,8,$,B,z),Ui(S,k+4*I,I,1,8,$,B,z)}function Od(h,g,S,k,I,$,B,z){Ui(h,g+4,1,I,8,$,B,z),Ui(S,k+4,1,I,8,$,B,z)}function nl(){this.ba=new Fe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Uc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function zc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function $d(){this.ua=0,this.Wa=new Q,this.vb=new Q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new O,this.yc=new F}function zp(){this.xb=this.a=0,this.l=new Ja,this.ca=new Fe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new $d,this.ab=0,this.gc=o(4,zc),this.Oc=0}function rl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ja,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function sa(h,g,S,k,I,$,B){for(h=h==null?0:h[g+0],g=0;g<B;++g)I[$+g]=h+S[k+g]&255,h=I[$+g]}function Wc(h,g,S,k,I,$,B){var z;if(h==null)sa(null,null,S,k,I,$,B);else for(z=0;z<B;++z)I[$+z]=h[g+z]+S[k+z]&255}function oo(h,g,S,k,I,$,B){if(h==null)sa(null,null,S,k,I,$,B);else{var z,W=h[g+0],V=W,oe=W;for(z=0;z<B;++z)V=oe+(W=h[g+z])-V,oe=S[k+z]+(-256&V?0>V?0:255:V)&255,V=W,I[$+z]=oe}}function Hc(h,g,S,k){var I=g.width,$=g.o;if(e(h!=null&&g!=null),0>S||0>=k||S+k>$)return null;if(!h.Cc){if(h.ga==null){var B;if(h.ga=new rl,(B=h.ga==null)||(B=g.width*g.o,e(h.Gb.length==0),h.Gb=s(B),h.Uc=0,h.Gb==null?B=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,B=1),B=!B),!B){B=h.ga;var z=h.Fa,W=h.P,V=h.qc,oe=h.mb,ve=h.nb,xe=W+1,de=V-1,Ee=B.l;if(e(z!=null&&oe!=null&&g!=null),fo[0]=null,fo[1]=sa,fo[2]=Wc,fo[3]=oo,B.ca=oe,B.tb=ve,B.c=g.width,B.i=g.height,e(0<B.c&&0<B.i),1>=V)g=0;else if(B.$a=z[W+0]>>0&3,B.Z=z[W+0]>>2&3,B.Lc=z[W+0]>>4&3,W=z[W+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||W)g=0;else if(Ee.put=ti,Ee.ac=Fn,Ee.bc=bi,Ee.ma=B,Ee.width=g.width,Ee.height=g.height,Ee.Da=g.Da,Ee.v=g.v,Ee.va=g.va,Ee.j=g.j,Ee.o=g.o,B.$a)e:{e(B.$a==1),g=vt();t:for(;;){if(g==null){g=0;break e}if(e(B!=null),B.mc=g,g.c=B.c,g.i=B.i,g.l=B.l,g.l.ma=B,g.l.width=B.c,g.l.height=B.i,g.a=0,q(g.m,z,xe,de),!wt(B.c,B.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&fe(g.s)?(B.ic=1,z=g.c*g.i,g.Ta=null,g.Ua=0,g.V=s(z),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(B.ic=0,g=jt(g,B.c)),!g))break t;g=1;break e}B.mc=null,g=0}else g=de>=B.c*B.i;B=!g}if(B)return null;h.ga.Lc!=1?h.Ga=0:k=$-S}e(h.ga!=null),e(S+k<=$);e:{if(g=(z=h.ga).c,$=z.l.o,z.$a==0){if(xe=h.rc,de=h.Vc,Ee=h.Fa,W=h.P+1+S*g,V=h.mb,oe=h.nb+S*g,e(W<=h.P+h.qc),z.Z!=0)for(e(fo[z.Z]!=null),B=0;B<k;++B)fo[z.Z](xe,de,Ee,W,V,oe,g),xe=V,de=oe,oe+=g,W+=g;else for(B=0;B<k;++B)r(V,oe,Ee,W,g),xe=V,de=oe,oe+=g,W+=g;h.rc=xe,h.Vc=de}else{if(e(z.mc!=null),g=S+k,e((B=z.mc)!=null),e(g<=B.i),B.C>=g)g=1;else if(z.ic||pe(),z.ic){z=B.V,xe=B.Ba,de=B.c;var Se=B.i,ae=(Ee=1,W=B.$/de,V=B.$%de,oe=B.m,ve=B.s,B.$),le=de*Se,je=de*g,Te=ve.wc,Ce=ae<je?fn(ve,V,W):null;e(ae<=le),e(g<=Se),e(fe(ve));t:for(;;){for(;!oe.h&&ae<je;){if(V&Te||(Ce=fn(ve,V,W)),e(Ce!=null),te(oe),256>(Se=bn(Ce.G[0],Ce.H[0],oe)))z[xe+ae]=Se,++ae,++V>=de&&(V=0,++W<=g&&!(W%16)&&Nt(B,W));else{if(!(280>Se)){Ee=0;break t}Se=Tr(Se-256,oe);var Ze,qe=bn(Ce.G[4],Ce.H[4],oe);if(te(oe),!(ae>=(qe=Dr(de,qe=Tr(qe,oe)))&&le-ae>=Se)){Ee=0;break t}for(Ze=0;Ze<Se;++Ze)z[xe+ae+Ze]=z[xe+ae+Ze-qe];for(ae+=Se,V+=Se;V>=de;)V-=de,++W<=g&&!(W%16)&&Nt(B,W);ae<je&&V&Te&&(Ce=fn(ve,V,W))}e(oe.h==G(oe))}Nt(B,W>g?g:W);break t}!Ee||oe.h&&ae<le?(Ee=0,B.a=oe.h?5:3):B.$=ae,g=Ee}else g=ht(B,B.V,B.Ba,B.c,B.i,g,en);if(!g){k=0;break e}}S+k>=$&&(h.Cc=1),k=1}if(!k)return null;if(h.Cc&&((k=h.ga)!=null&&(k.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+S*I}function v(h,g,S,k,I,$){for(;0<I--;){var B,z=h,W=g+(S?1:0),V=h,oe=g+(S?0:3);for(B=0;B<k;++B){var ve=V[oe+4*B];ve!=255&&(ve*=32897,z[W+4*B+0]=z[W+4*B+0]*ve>>23,z[W+4*B+1]=z[W+4*B+1]*ve>>23,z[W+4*B+2]=z[W+4*B+2]*ve>>23)}g+=$}}function R(h,g,S,k,I){for(;0<k--;){var $;for($=0;$<S;++$){var B=h[g+2*$+0],z=15&(V=h[g+2*$+1]),W=4369*z,V=(240&V|V>>4)*W>>16;h[g+2*$+0]=(240&B|B>>4)*W>>16&240|(15&B|B<<4)*W>>16>>4&15,h[g+2*$+1]=240&V|z}g+=I}}function K(h,g,S,k,I,$,B,z){var W,V,oe=255;for(V=0;V<I;++V){for(W=0;W<k;++W){var ve=h[g+W];$[B+4*W]=ve,oe&=ve}g+=S,B+=z}return oe!=255}function ne(h,g,S,k,I){var $;for($=0;$<I;++$)S[k+$]=h[g+$]>>8}function pe(){ki=v,Kt=R,Xt=K,kn=ne}function Ne(h,g,S){j[h]=function(k,I,$,B,z,W,V,oe,ve,xe,de,Ee,Se,ae,le,je,Te){var Ce,Ze=Te-1>>1,qe=z[W+0]|V[oe+0]<<16,ct=ve[xe+0]|de[Ee+0]<<16;e(k!=null);var Ve=3*qe+ct+131074>>2;for(g(k[I+0],255&Ve,Ve>>16,Se,ae),$!=null&&(Ve=3*ct+qe+131074>>2,g($[B+0],255&Ve,Ve>>16,le,je)),Ce=1;Ce<=Ze;++Ce){var Ot=z[W+Ce]|V[oe+Ce]<<16,$t=ve[xe+Ce]|de[Ee+Ce]<<16,Rt=qe+Ot+ct+$t+524296,Pt=Rt+2*(Ot+ct)>>3;Ve=Pt+qe>>1,qe=(Rt=Rt+2*(qe+$t)>>3)+Ot>>1,g(k[I+2*Ce-1],255&Ve,Ve>>16,Se,ae+(2*Ce-1)*S),g(k[I+2*Ce-0],255&qe,qe>>16,Se,ae+(2*Ce-0)*S),$!=null&&(Ve=Rt+ct>>1,qe=Pt+$t>>1,g($[B+2*Ce-1],255&Ve,Ve>>16,le,je+(2*Ce-1)*S),g($[B+2*Ce+0],255&qe,qe>>16,le,je+(2*Ce+0)*S)),qe=Ot,ct=$t}1&Te||(Ve=3*qe+ct+131074>>2,g(k[I+Te-1],255&Ve,Ve>>16,Se,ae+(Te-1)*S),$!=null&&(Ve=3*ct+qe+131074>>2,g($[B+Te-1],255&Ve,Ve>>16,le,je+(Te-1)*S)))}}function Re(){Ai[Vd]=v_,Ai[Gd]=xy,Ai[py]=x_,Ai[Jd]=wy,Ai[Kd]=by,Ai[qp]=Sy,Ai[my]=w_,Ai[Yp]=xy,Ai[Vp]=wy,Ai[Xd]=by,Ai[Gp]=Sy}function Qe(h){return h&-16384?0>h?0:255:h>>b_}function at(h,g){return Qe((19077*h>>8)+(26149*g>>8)-14234)}function xt(h,g,S){return Qe((19077*h>>8)-(6419*g>>8)-(13320*S>>8)+8708)}function gt(h,g){return Qe((19077*h>>8)+(33050*g>>8)-17685)}function Dt(h,g,S,k,I){k[I+0]=at(h,S),k[I+1]=xt(h,g,S),k[I+2]=gt(h,g)}function an(h,g,S,k,I){k[I+0]=gt(h,g),k[I+1]=xt(h,g,S),k[I+2]=at(h,S)}function pn(h,g,S,k,I){var $=xt(h,g,S);g=$<<3&224|gt(h,g)>>3,k[I+0]=248&at(h,S)|$>>5,k[I+1]=g}function Ln(h,g,S,k,I){var $=240&gt(h,g)|15;k[I+0]=240&at(h,S)|xt(h,g,S)>>4,k[I+1]=$}function or(h,g,S,k,I){k[I+0]=255,Dt(h,g,S,k,I+1)}function zn(h,g,S,k,I){an(h,g,S,k,I),k[I+3]=255}function zi(h,g,S,k,I){Dt(h,g,S,k,I),k[I+3]=255}function ri(h,g){return 0>h?0:h>g?g:h}function cs(h,g,S){j[h]=function(k,I,$,B,z,W,V,oe,ve){for(var xe=oe+(-2&ve)*S;oe!=xe;)g(k[I+0],$[B+0],z[W+0],V,oe),g(k[I+1],$[B+0],z[W+0],V,oe+S),I+=2,++B,++W,oe+=2*S;1&ve&&g(k[I+0],$[B+0],z[W+0],V,oe)}}function Bd(h,g,S){return S==0?h==0?g==0?6:5:g==0?4:0:S}function qc(h,g,S,k,I){switch(h>>>30){case 3:Es(g,S,k,I,0);break;case 2:Nn(g,S,k,I);break;case 1:_r(g,S,k,I)}}function Yc(h,g){var S,k,I=g.M,$=g.Nb,B=h.oc,z=h.pc+40,W=h.oc,V=h.pc+584,oe=h.oc,ve=h.pc+600;for(S=0;16>S;++S)B[z+32*S-1]=129;for(S=0;8>S;++S)W[V+32*S-1]=129,oe[ve+32*S-1]=129;for(0<I?B[z-1-32]=W[V-1-32]=oe[ve-1-32]=129:(i(B,z-32-1,127,21),i(W,V-32-1,127,9),i(oe,ve-32-1,127,9)),k=0;k<h.za;++k){var xe=g.ya[g.aa+k];if(0<k){for(S=-1;16>S;++S)r(B,z+32*S-4,B,z+32*S+12,4);for(S=-1;8>S;++S)r(W,V+32*S-4,W,V+32*S+4,4),r(oe,ve+32*S-4,oe,ve+32*S+4,4)}var de=h.Gd,Ee=h.Hd+k,Se=xe.ad,ae=xe.Hc;if(0<I&&(r(B,z-32,de[Ee].y,0,16),r(W,V-32,de[Ee].f,0,8),r(oe,ve-32,de[Ee].ea,0,8)),xe.Za){var le=B,je=z-32+16;for(0<I&&(k>=h.za-1?i(le,je,de[Ee].y[15],4):r(le,je,de[Ee+1].y,0,4)),S=0;4>S;S++)le[je+128+S]=le[je+256+S]=le[je+384+S]=le[je+0+S];for(S=0;16>S;++S,ae<<=2)le=B,je=z+Ny[S],Wi[xe.Ob[S]](le,je),qc(ae,Se,16*+S,le,je)}else if(le=Bd(k,I,xe.Ob[0]),ho[le](B,z),ae!=0)for(S=0;16>S;++S,ae<<=2)qc(ae,Se,16*+S,B,z+Ny[S]);for(S=xe.Gc,le=Bd(k,I,xe.Dd),Ls[le](W,V),Ls[le](oe,ve),ae=Se,le=W,je=V,255&(xe=S>>0)&&(170&xe?Xc(ae,256,le,je):_i(ae,256,le,je)),xe=oe,ae=ve,255&(S>>=8)&&(170&S?Xc(Se,320,xe,ae):_i(Se,320,xe,ae)),I<h.Ub-1&&(r(de[Ee].y,0,B,z+480,16),r(de[Ee].f,0,W,V+224,8),r(de[Ee].ea,0,oe,ve+224,8)),S=8*$*h.B,de=h.sa,Ee=h.ta+16*k+16*$*h.R,Se=h.qa,xe=h.ra+8*k+S,ae=h.Ha,le=h.Ia+8*k+S,S=0;16>S;++S)r(de,Ee+S*h.R,B,z+32*S,16);for(S=0;8>S;++S)r(Se,xe+S*h.B,W,V+32*S,8),r(ae,le+S*h.B,oe,ve+32*S,8)}}function il(h,g,S,k,I,$,B,z,W){var V=[0],oe=[0],ve=0,xe=W!=null?W.kd:0,de=W??new Uc;if(h==null||12>S)return 7;de.data=h,de.w=g,de.ha=S,g=[g],S=[S],de.gb=[de.gb];e:{var Ee=g,Se=S,ae=de.gb;if(e(h!=null),e(Se!=null),e(ae!=null),ae[0]=0,12<=Se[0]&&!t(h,Ee[0],"RIFF")){if(t(h,Ee[0]+8,"WEBP")){ae=3;break e}var le=Oe(h,Ee[0]+4);if(12>le||4294967286<le){ae=3;break e}if(xe&&le>Se[0]-8){ae=7;break e}ae[0]=le,Ee[0]+=12,Se[0]-=12}ae=0}if(ae!=0)return ae;for(le=0<de.gb[0],S=S[0];;){e:{var je=h;Se=g,ae=S;var Te=V,Ce=oe,Ze=Ee=[0];if((Ve=ve=[ve])[0]=0,8>ae[0])ae=7;else{if(!t(je,Se[0],"VP8X")){if(Oe(je,Se[0]+4)!=10){ae=3;break e}if(18>ae[0]){ae=7;break e}var qe=Oe(je,Se[0]+8),ct=1+$e(je,Se[0]+12);if(2147483648<=ct*(je=1+$e(je,Se[0]+15))){ae=3;break e}Ze!=null&&(Ze[0]=qe),Te!=null&&(Te[0]=ct),Ce!=null&&(Ce[0]=je),Se[0]+=18,ae[0]-=18,Ve[0]=1}ae=0}}if(ve=ve[0],Ee=Ee[0],ae!=0)return ae;if(Se=!!(2&Ee),!le&&ve)return 3;if($!=null&&($[0]=!!(16&Ee)),B!=null&&(B[0]=Se),z!=null&&(z[0]=0),B=V[0],Ee=oe[0],ve&&Se&&W==null){ae=0;break}if(4>S){ae=7;break}if(le&&ve||!le&&!ve&&!t(h,g[0],"ALPH")){S=[S],de.na=[de.na],de.P=[de.P],de.Sa=[de.Sa];e:{qe=h,ae=g,le=S;var Ve=de.gb;Te=de.na,Ce=de.P,Ze=de.Sa,ct=22,e(qe!=null),e(le!=null),je=ae[0];var Ot=le[0];for(e(Te!=null),e(Ze!=null),Te[0]=null,Ce[0]=null,Ze[0]=0;;){if(ae[0]=je,le[0]=Ot,8>Ot){ae=7;break e}var $t=Oe(qe,je+4);if(4294967286<$t){ae=3;break e}var Rt=8+$t+1&-2;if(ct+=Rt,0<Ve&&ct>Ve){ae=3;break e}if(!t(qe,je,"VP8 ")||!t(qe,je,"VP8L")){ae=0;break e}if(Ot[0]<Rt){ae=7;break e}t(qe,je,"ALPH")||(Te[0]=qe,Ce[0]=je+8,Ze[0]=$t),je+=Rt,Ot-=Rt}}if(S=S[0],de.na=de.na[0],de.P=de.P[0],de.Sa=de.Sa[0],ae!=0)break}S=[S],de.Ja=[de.Ja],de.xa=[de.xa];e:if(Ve=h,ae=g,le=S,Te=de.gb[0],Ce=de.Ja,Ze=de.xa,qe=ae[0],je=!t(Ve,qe,"VP8 "),ct=!t(Ve,qe,"VP8L"),e(Ve!=null),e(le!=null),e(Ce!=null),e(Ze!=null),8>le[0])ae=7;else{if(je||ct){if(Ve=Oe(Ve,qe+4),12<=Te&&Ve>Te-12){ae=3;break e}if(xe&&Ve>le[0]-8){ae=7;break e}Ce[0]=Ve,ae[0]+=8,le[0]-=8,Ze[0]=ct}else Ze[0]=5<=le[0]&&Ve[qe+0]==47&&!(Ve[qe+4]>>5),Ce[0]=le[0];ae=0}if(S=S[0],de.Ja=de.Ja[0],de.xa=de.xa[0],g=g[0],ae!=0)break;if(4294967286<de.Ja)return 3;if(z==null||Se||(z[0]=de.xa?2:1),B=[B],Ee=[Ee],de.xa){if(5>S){ae=7;break}z=B,xe=Ee,Se=$,h==null||5>S?h=0:5<=S&&h[g+0]==47&&!(h[g+4]>>5)?(le=[0],Ve=[0],Te=[0],q(Ce=new M,h,g,S),st(Ce,le,Ve,Te)?(z!=null&&(z[0]=le[0]),xe!=null&&(xe[0]=Ve[0]),Se!=null&&(Se[0]=Te[0]),h=1):h=0):h=0}else{if(10>S){ae=7;break}z=Ee,h==null||10>S||!Nd(h,g+3,S-3)?h=0:(xe=h[g+0]|h[g+1]<<8|h[g+2]<<16,Se=16383&(h[g+7]<<8|h[g+6]),h=16383&(h[g+9]<<8|h[g+8]),1&xe||3<(xe>>1&7)||!(xe>>4&1)||xe>>5>=de.Ja||!Se||!h?h=0:(B&&(B[0]=Se),z&&(z[0]=h),h=1))}if(!h||(B=B[0],Ee=Ee[0],ve&&(V[0]!=B||oe[0]!=Ee)))return 3;W!=null&&(W[0]=de,W.offset=g-W.w,e(4294967286>g-W.w),e(W.offset==W.ha-S));break}return ae==0||ae==7&&ve&&W==null?($!=null&&($[0]|=de.na!=null&&0<de.na.length),k!=null&&(k[0]=B),I!=null&&(I[0]=Ee),0):ae}function Vc(h,g,S){var k=g.width,I=g.height,$=0,B=0,z=k,W=I;if(g.Da=h!=null&&0<h.Da,g.Da&&(z=h.cd,W=h.bd,$=h.v,B=h.j,11>S||($&=-2,B&=-2),0>$||0>B||0>=z||0>=W||$+z>k||B+W>I))return 0;if(g.v=$,g.j=B,g.va=$+z,g.o=B+W,g.U=z,g.T=W,g.da=h!=null&&0<h.da,g.da){if(!lt(z,W,S=[h.ib],$=[h.hb]))return 0;g.ib=S[0],g.hb=$[0]}return g.ob=h!=null&&h.ob,g.Kb=h==null||!h.Sd,g.da&&(g.ob=g.ib<3*k/4&&g.hb<3*I/4,g.Kb=0),1}function Gc(h){if(h==null)return 2;if(11>h.S){var g=h.f.RGBA;g.fb+=(h.height-1)*g.A,g.A=-g.A}else g=h.f.kb,h=h.height,g.O+=(h-1)*g.fa,g.fa=-g.fa,g.N+=(h-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(h-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(h-1)*g.lb,g.lb=-g.lb);return 0}function sl(h,g,S,k){if(k==null||0>=h||0>=g)return 2;if(S!=null){if(S.Da){var I=S.cd,$=S.bd,B=-2&S.v,z=-2&S.j;if(0>B||0>z||0>=I||0>=$||B+I>h||z+$>g)return 2;h=I,g=$}if(S.da){if(!lt(h,g,I=[S.ib],$=[S.hb]))return 2;h=I[0],g=$[0]}}k.width=h,k.height=g;e:{var W=k.width,V=k.height;if(h=k.S,0>=W||0>=V||!(h>=Vd&&13>h))h=2;else{if(0>=k.Rd&&k.sd==null){B=$=I=g=0;var oe=(z=W*ky[h])*V;if(11>h||($=(V+1)/2*(g=(W+1)/2),h==12&&(B=(I=W)*V)),(V=s(oe+2*$+B))==null){h=1;break e}k.sd=V,11>h?((W=k.f.RGBA).eb=V,W.fb=0,W.A=z,W.size=oe):((W=k.f.kb).y=V,W.O=0,W.fa=z,W.Fd=oe,W.f=V,W.N=0+oe,W.Ab=g,W.Cd=$,W.ea=V,W.W=0+oe+$,W.Db=g,W.Ed=$,h==12&&(W.F=V,W.J=0+oe+2*$),W.Tc=B,W.lb=I)}if(g=1,I=k.S,$=k.width,B=k.height,I>=Vd&&13>I)if(11>I)h=k.f.RGBA,g&=(z=Math.abs(h.A))*(B-1)+$<=h.size,g&=z>=$*ky[I],g&=h.eb!=null;else{h=k.f.kb,z=($+1)/2,oe=(B+1)/2,W=Math.abs(h.fa),V=Math.abs(h.Ab);var ve=Math.abs(h.Db),xe=Math.abs(h.lb),de=xe*(B-1)+$;g&=W*(B-1)+$<=h.Fd,g&=V*(oe-1)+z<=h.Cd,g=(g&=ve*(oe-1)+z<=h.Ed)&W>=$&V>=z&ve>=z,g&=h.y!=null,g&=h.f!=null,g&=h.ea!=null,I==12&&(g&=xe>=$,g&=de<=h.Tc,g&=h.F!=null)}else g=0;h=g?0:2}}return h!=0||S!=null&&S.fd&&(h=Gc(k)),h}var Xn=64,ol=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],al=24,ll=32,Jc=8,Rr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ue("Predictor0","PredictorAdd0"),j.Predictor0=function(){return 4278190080},j.Predictor1=function(h){return h},j.Predictor2=function(h,g,S){return g[S+0]},j.Predictor3=function(h,g,S){return g[S+1]},j.Predictor4=function(h,g,S){return g[S-1]},j.Predictor5=function(h,g,S){return be(be(h,g[S+1]),g[S+0])},j.Predictor6=function(h,g,S){return be(h,g[S-1])},j.Predictor7=function(h,g,S){return be(h,g[S+0])},j.Predictor8=function(h,g,S){return be(g[S-1],g[S+0])},j.Predictor9=function(h,g,S){return be(g[S+0],g[S+1])},j.Predictor10=function(h,g,S){return be(be(h,g[S-1]),be(g[S+0],g[S+1]))},j.Predictor11=function(h,g,S){var k=g[S+0];return 0>=_e(k>>24&255,h>>24&255,(g=g[S-1])>>24&255)+_e(k>>16&255,h>>16&255,g>>16&255)+_e(k>>8&255,h>>8&255,g>>8&255)+_e(255&k,255&h,255&g)?k:h},j.Predictor12=function(h,g,S){var k=g[S+0];return(ke((h>>24&255)+(k>>24&255)-((g=g[S-1])>>24&255))<<24|ke((h>>16&255)+(k>>16&255)-(g>>16&255))<<16|ke((h>>8&255)+(k>>8&255)-(g>>8&255))<<8|ke((255&h)+(255&k)-(255&g)))>>>0},j.Predictor13=function(h,g,S){var k=g[S-1];return(we((h=be(h,g[S+0]))>>24&255,k>>24&255)<<24|we(h>>16&255,k>>16&255)<<16|we(h>>8&255,k>>8&255)<<8|we(h>>0&255,k>>0&255))>>>0};var Wp=j.PredictorAdd0;j.PredictorAdd1=Ie,Ue("Predictor2","PredictorAdd2"),Ue("Predictor3","PredictorAdd3"),Ue("Predictor4","PredictorAdd4"),Ue("Predictor5","PredictorAdd5"),Ue("Predictor6","PredictorAdd6"),Ue("Predictor7","PredictorAdd7"),Ue("Predictor8","PredictorAdd8"),Ue("Predictor9","PredictorAdd9"),Ue("Predictor10","PredictorAdd10"),Ue("Predictor11","PredictorAdd11"),Ue("Predictor12","PredictorAdd12"),Ue("Predictor13","PredictorAdd13");var Kc=j.PredictorAdd2;We("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),We("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Ud,Si=j.ColorIndexInverseTransform,cl=j.MapARGB,zd=j.VP8LColorIndexInverseTransformAlpha,Wd=j.MapAlpha,ao=j.VP8LPredictorsAdd=[];ao.length=16,(j.VP8LPredictors=[]).length=16,(j.VP8LPredictorsAdd_C=[]).length=16,(j.VP8LPredictors_C=[]).length=16;var oa,Fr,Sr,lo,As,Cs,ul,Es,Nn,Xc,_r,_i,dl,Hd,Qc,aa,la,co,ca,hl,ua,uo,Zc,Ni,ki,Kt,Xt,kn,On=s(511),Ps=s(2041),eu=s(225),fl=s(767),qd=0,Hp=Ps,Yd=eu,ii=fl,ji=On,Vd=0,Gd=1,py=2,Jd=3,Kd=4,qp=5,my=6,Yp=7,Vp=8,Xd=9,Gp=10,i_=[2,3,7],s_=[3,3,11],gy=[280,256,256,256,40],o_=[0,1,1,1,0],a_=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],l_=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],c_=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],u_=8,Jp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Kp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tu=null,d_=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],h_=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],yy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],f_=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],p_=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],m_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],g_=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ho=[],Wi=[],Ls=[],y_=1,vy=2,fo=[],Ai=[];Ne("UpsampleRgbLinePair",Dt,3),Ne("UpsampleBgrLinePair",an,3),Ne("UpsampleRgbaLinePair",zi,4),Ne("UpsampleBgraLinePair",zn,4),Ne("UpsampleArgbLinePair",or,4),Ne("UpsampleRgba4444LinePair",Ln,2),Ne("UpsampleRgb565LinePair",pn,2);var v_=j.UpsampleRgbLinePair,x_=j.UpsampleBgrLinePair,xy=j.UpsampleRgbaLinePair,wy=j.UpsampleBgraLinePair,by=j.UpsampleArgbLinePair,Sy=j.UpsampleRgba4444LinePair,w_=j.UpsampleRgb565LinePair,Qd=16,Zd=1<<Qd-1,nu=-227,Xp=482,b_=6,_y=0,S_=s(256),__=s(256),N_=s(256),k_=s(256),j_=s(Xp-nu),A_=s(Xp-nu);cs("YuvToRgbRow",Dt,3),cs("YuvToBgrRow",an,3),cs("YuvToRgbaRow",zi,4),cs("YuvToBgraRow",zn,4),cs("YuvToArgbRow",or,4),cs("YuvToRgba4444Row",Ln,2),cs("YuvToRgb565Row",pn,2);var Ny=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],eh=[0,2,8],C_=[8,7,6,4,4,2,2,2,1,1,1,1],E_=1;this.WebPDecodeRGBA=function(h,g,S,k,I){var $=Gd,B=new nl,z=new Fe;B.ba=z,z.S=$,z.width=[z.width],z.height=[z.height];var W=z.width,V=z.height,oe=new Ge;if(oe==null||h==null)var ve=2;else e(oe!=null),ve=il(h,g,S,oe.width,oe.height,oe.Pd,oe.Qd,oe.format,null);if(ve!=0?W=0:(W!=null&&(W[0]=oe.width[0]),V!=null&&(V[0]=oe.height[0]),W=1),W){z.width=z.width[0],z.height=z.height[0],k!=null&&(k[0]=z.width),I!=null&&(I[0]=z.height);e:{if(k=new Ja,(I=new Uc).data=h,I.w=g,I.ha=S,I.kd=1,g=[0],e(I!=null),((h=il(I.data,I.w,I.ha,null,null,null,g,null,I))==0||h==7)&&g[0]&&(h=4),(g=h)==0){if(e(B!=null),k.data=I.data,k.w=I.w+I.offset,k.ha=I.ha-I.offset,k.put=ti,k.ac=Fn,k.bc=bi,k.ma=B,I.xa){if((h=vt())==null){B=1;break e}if(function(xe,de){var Ee=[0],Se=[0],ae=[0];t:for(;;){if(xe==null)return 0;if(de==null)return xe.a=2,0;if(xe.l=de,xe.a=0,q(xe.m,de.data,de.w,de.ha),!st(xe.m,Ee,Se,ae)){xe.a=3;break t}if(xe.xb=vy,de.width=Ee[0],de.height=Se[0],!wt(Ee[0],Se[0],1,xe,null))break t;return 1}return e(xe.a!=0),0}(h,k)){if(k=(g=sl(k.width,k.height,B.Oa,B.ba))==0){t:{k=h;n:for(;;){if(k==null){k=0;break t}if(e(k.s.yc!=null),e(k.s.Ya!=null),e(0<k.s.Wb),e((S=k.l)!=null),e((I=S.ma)!=null),k.xb!=0){if(k.ca=I.ba,k.tb=I.tb,e(k.ca!=null),!Vc(I.Oa,S,Jd)){k.a=2;break n}if(!jt(k,S.width)||S.da)break n;if((S.da||ze(k.ca.S))&&pe(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&pe()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!He(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!ht(k,k.V,k.Ba,k.c,k.i,S.o,no))break n;I.Dc=k.Ma,k=1;break t}e(k.a!=0),k=0}k=!k}k&&(g=h.a)}else g=h.a}else{if((h=new Np)==null){B=1;break e}if(h.Fa=I.na,h.P=I.P,h.qc=I.Sa,kd(h,k)){if((g=sl(k.width,k.height,B.Oa,B.ba))==0){if(h.Aa=0,S=B.Oa,e((I=h)!=null),S!=null){if(0<(W=0>(W=S.Md)?0:100<W?255:255*W/100)){for(V=oe=0;4>V;++V)12>(ve=I.pb[V]).lc&&(ve.ia=W*C_[0>ve.lc?0:ve.lc]>>3),oe|=ve.ia;oe&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=S.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}kp(h,k)||(g=h.a)}}else g=h.a}g==0&&B.Oa!=null&&B.Oa.fd&&(g=Gc(B.ba))}B=g}$=B!=0?null:11>$?z.f.RGBA.eb:z.f.kb.y}else $=null;return $};var ky=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(j,D){for(var U="",L=0;L<4;L++)U+=String.fromCharCode(j[D++]);return U}function d(j,D){return(j[D+0]<<0|j[D+1]<<8|j[D+2]<<16)>>>0}function p(j,D){return(j[D+0]<<0|j[D+1]<<8|j[D+2]<<16|j[D+3]<<24)>>>0}new l;var m=[0],f=[0],x=[],y=new l,_=n,w=function(j,D){var U={},L=0,F=!1,T=0,O=0;if(U.frames=[],!function(Y,G,Z,te){for(var ue=0;ue<te;ue++)if(Y[G+ue]!=Z.charCodeAt(ue))return!0;return!1}(j,D,"RIFF",4)){for(p(j,D+=4),D+=8;D<j.length;){var J=u(j,D),X=p(j,D+=4);D+=4;var se=X+(1&X);switch(J){case"VP8 ":case"VP8L":U.frames[L]===void 0&&(U.frames[L]={}),(ie=U.frames[L]).src_off=F?O:D-8,ie.src_size=T+X+8,L++,F&&(F=!1,T=0,O=0);break;case"VP8X":(ie=U.header={}).feature_flags=j[D];var q=D+4;ie.canvas_width=1+d(j,q),q+=3,ie.canvas_height=1+d(j,q),q+=3;break;case"ALPH":F=!0,T=se+8,O=D-8;break;case"ANIM":(ie=U.header).bgcolor=p(j,D),q=D+4,ie.loop_count=(re=j)[(M=q)+0]<<0|re[M+1]<<8,q+=2;break;case"ANMF":var ee,ie;(ie=U.frames[L]={}).offset_x=2*d(j,D),D+=3,ie.offset_y=2*d(j,D),D+=3,ie.width=1+d(j,D),D+=3,ie.height=1+d(j,D),D+=3,ie.duration=d(j,D),D+=3,ee=j[D++],ie.dispose=1&ee,ie.blend=ee>>1&1}J!="ANMF"&&(D+=se)}var re,M;return U}}(_,0);w.response=_,w.rgbaoutput=!0,w.dataurl=!1;var b=w.header?w.header:null,N=w.frames?w.frames:null;if(b){b.loop_counter=b.loop_count,m=[b.canvas_height],f=[b.canvas_width];for(var C=0;C<N.length&&N[C].blend!=0;C++);}var A=N[0],P=y.WebPDecodeRGBA(_,A.src_off,A.src_size,f,m);A.rgba=P,A.imgwidth=f[0],A.imgheight=m[0];for(var E=0;E<f[0]*m[0]*4;E++)x[E]=P[E];return this.width=f,this.height=m,this.data=x,this}(function(n){var e=function(){return typeof Dg=="function"},t=function(m,f,x,y){var _=4,w=o;switch(y){case n.image_compression.FAST:_=1,w=s;break;case n.image_compression.MEDIUM:_=6,w=a;break;case n.image_compression.SLOW:_=9,w=l}m=r(m,f,x,w);var b=Dg(m,{level:_});return n.__addimage__.arrayBufferToBinaryString(b)},r=function(m,f,x,y){for(var _,w,b,N=m.length/f,C=new Uint8Array(m.length+N),A=d(),P=0;P<N;P+=1){if(b=P*f,_=m.subarray(b,b+f),y)C.set(y(_,x,w),b+P);else{for(var E,j=A.length,D=[];E<j;E+=1)D[E]=A[E](_,x,w);var U=p(D.concat());C.set(D[U],b+P)}w=_}return C},i=function(m){var f=Array.apply([],m);return f.unshift(0),f},s=function(m,f){var x,y=[],_=m.length;y[0]=1;for(var w=0;w<_;w+=1)x=m[w-f]||0,y[w+1]=m[w]-x+256&255;return y},o=function(m,f,x){var y,_=[],w=m.length;_[0]=2;for(var b=0;b<w;b+=1)y=x&&x[b]||0,_[b+1]=m[b]-y+256&255;return _},a=function(m,f,x){var y,_,w=[],b=m.length;w[0]=3;for(var N=0;N<b;N+=1)y=m[N-f]||0,_=x&&x[N]||0,w[N+1]=m[N]+256-(y+_>>>1)&255;return w},l=function(m,f,x){var y,_,w,b,N=[],C=m.length;N[0]=4;for(var A=0;A<C;A+=1)y=m[A-f]||0,_=x&&x[A]||0,w=x&&x[A-f]||0,b=u(y,_,w),N[A+1]=m[A]-b+256&255;return N},u=function(m,f,x){if(m===f&&f===x)return m;var y=Math.abs(f-x),_=Math.abs(m-x),w=Math.abs(m+f-x-x);return y<=_&&y<=w?m:_<=w?f:x},d=function(){return[i,s,o,a,l]},p=function(m){var f=m.map(function(x){return x.reduce(function(y,_){return y+Math.abs(_)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(m,f,x,y){var _,w,b,N,C,A,P,E,j,D,U,L,F,T,O,J=this.decode.FLATE_DECODE,X="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(b=new h8(m)).imgData,w=b.bits,_=b.colorSpace,C=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){j=(E=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,U=new Uint8Array(j*b.colors),D=new Uint8Array(j);var se,q=b.pixelBitlength-b.bits;for(T=0,O=0;T<j;T++){for(F=E[T],se=0;se<q;)U[O++]=F>>>se&255,se+=b.bits;D[T]=F>>>se&255}}if(b.bits===16){j=(E=new Uint32Array(b.decodePixels().buffer)).length,U=new Uint8Array(j*(32/b.pixelBitlength)*b.colors),D=new Uint8Array(j*(32/b.pixelBitlength)),L=b.colors>1,T=0,O=0;for(var ee=0;T<j;)F=E[T++],U[O++]=F>>>0&255,L&&(U[O++]=F>>>16&255,F=E[T++],U[O++]=F>>>0&255),D[ee++]=F>>>16&255;w=8}y!==n.image_compression.NONE&&e()?(m=t(U,b.width*b.colors,b.colors,y),P=t(D,b.width,1,y)):(m=U,P=D,J=void 0)}if(b.colorType===3&&(_=this.color_spaces.INDEXED,A=b.palette,b.transparency.indexed)){var ie=b.transparency.indexed,re=0;for(T=0,j=ie.length;T<j;++T)re+=ie[T];if((re/=255)===j-1&&ie.indexOf(0)!==-1)N=[ie.indexOf(0)];else if(re!==j){for(E=b.decodePixels(),D=new Uint8Array(E.length),T=0,j=E.length;T<j;T++)D[T]=ie[E[T]];P=t(D,b.width,1)}}var M=function(Y){var G;switch(Y){case n.image_compression.FAST:G=11;break;case n.image_compression.MEDIUM:G=13;break;case n.image_compression.SLOW:G=14;break;default:G=12}return G}(y);return J===this.decode.FLATE_DECODE&&(X="/Predictor "+M+" "),X+="/Colors "+C+" /BitsPerComponent "+w+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:x,data:m,index:f,filter:J,decodeParameters:X,transparency:N,palette:A,sMask:P,predictor:M,width:b.width,height:b.height,bitsPerComponent:w,colorSpace:_}}}})(it.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new f8(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},d=new nm(100).encode(u,100);return n.processJPEG.call(this,d,t,r,i)},n.processGIF87A=n.processGIF89A}(it.API),Vi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Vi.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Vt.log("bit decode error:"+t)}},Vi.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Vi.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Vi.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Vi.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=u}this.pos+=n}},Vi.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,u=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=n}},Vi.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Vi.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Vi.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Vi(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new nm(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(it.API),ix.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new ix(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new nm(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(it.API),it.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var d=r[u],p=r[u+1],m=r[u+2],f=r[u+3];s[a++]=d,s[a++]=p,s[a++]=m,o[l++]=f}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},it.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},jl=it.API,Ih=jl.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,p=e.doKerning!==!1,m=0,f=n.length,x=0,y=a[0]||l,_=[];for(t=0;t<f;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?_.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(m=p&&zt(u[r])==="object"&&!isNaN(parseInt(u[r][x],10))?u[r][x]/d:0,_.push((a[r]||y)/l+m)),x=r;return _},ex=jl.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return jl.processArabic&&(n=jl.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Ih.apply(this,arguments).reduce(function(s,o){return s+o},0)},tx=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},nx=function(n,e,t){t||(t={});var r,i,s,o,a,l,u,d=[],p=[d],m=t.textIndent||0,f=0,x=0,y=n.split(" "),_=Ih.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?y[0].length+2:t.lineIndent||0){var w=Array(l).join(" "),b=[];y.map(function(C){(C=C.split(/\s*\n/)).length>1?b=b.concat(C.map(function(A,P){return(P&&A.length?`
`:"")+A})):b.push(C[0])}),y=b,l=ex.apply(this,[w,t])}for(s=0,o=y.length;s<o;s++){var N=0;if(r=y[s],l&&r[0]==`
`&&(r=r.substr(1),N=1),m+f+(x=(i=Ih.apply(this,[r,t])).reduce(function(C,A){return C+A},0))>e||N){if(x>e){for(a=tx.apply(this,[r,i,e-(m+f),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(C,A){return C+A},0)}else d=[r];p.push(d),m=x+l,f=_}else d.push(r),m+=f+x,f=_}return u=l?function(C,A){return(A?w:"")+C.join(" ")}:function(C){return C.join(" ")},p.map(u)},jl.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(nx.apply(this,[r[a],o,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var m,f,x,y,_=["{"];for(var w in p){if(m=p[w],isNaN(parseInt(w,10))?f="'"+w+"'":(w=parseInt(w,10),f=(f=s(w).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof m=="number")m<0?(x=s(m).slice(3),y="-"):(x=s(m).slice(2),y=""),x=y+x.slice(0,-1)+r[x.slice(-1)];else{if(zt(m)!=="object")throw new Error("Don't know what to do with value type "+zt(m)+".");x=o(m)}_.push(f+x)}return _.push("}"),_.join("")},a=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,f,x,y,_={},w=1,b=_,N=[],C="",A="",P=p.length-1,E=1;E<P;E+=1)(y=p[E])=="'"?m?(x=m.join(""),m=void 0):m=[]:m?m.push(y):y=="{"?(N.push([b,x]),b={},x=void 0):y=="}"?((f=N.pop())[0][f[1]]=b,x=void 0,b=f[0]):y=="-"?w=-1:x===void 0?t.hasOwnProperty(y)?(C+=t[y],x=parseInt(C,16)*w,w=1,C=""):C+=y:t.hasOwnProperty(y)?(A+=t[y],b[x]=parseInt(A,16)*w,w=1,x=void 0,A=""):A+=y;return _},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var m=p.font,f=d.Unicode[m.postScriptName];f&&(m.metadata.Unicode={},m.metadata.Unicode.widths=f.widths,m.metadata.Unicode.kerning=f.kerning);var x=u.Unicode[m.postScriptName];x&&(m.metadata.Unicode.encoding=x,m.encoding=x.codePages[0])}])}(it.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Bu(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(it),function(n){function e(){return(ut.canvg?Promise.resolve(ut.canvg):Qr(()=>import("./index.es-D6MNu_YH.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}it.API.addSvgAsImage=function(t,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw Vt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Vt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(x){return x.fromString(p,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(m)}).then(function(){f.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),it.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},it.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,d=0,p=0;function m(x,y){var _,w=!1;for(_=0;_<x.length;_+=1)x[_]===y&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=a.length;for(p=0;p<f;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(zt(n)==="object"){for(i in n)if(s=n[i],m(a,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&m(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,y=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?y.push("/"+x+" /"+t[x].value):y.push("/"+x+" "+t[x].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(it.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],p=0,m=s.length;p<m;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(u[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,u,d,p,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,m=(a=Object.keys(s).sort(function(f,x){return f-x})).length;p<m;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,d=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",x=0;x<m.length;x++)f+=String.fromCharCode(m[x]);var y=u();d({data:f,addLength1:!0,objectId:y}),l("endobj");var _=u();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var w=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Pl(a.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var b=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Pl(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+n.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+_+" 0 R"),l("/BaseFont /"+Pl(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,d=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,m="",f=0;f<p.length;f++)m+=String.fromCharCode(p[f]);var x=u();d({data:m,addLength1:!0,objectId:x}),l("endobj");var y=u();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var _=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Pl(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Pl(a.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,d=s.options||{},p=s.mutex||{},m=p.pdfEscape,f=p.activeFontKey,x=p.fonts,y=f,_="",w=0,b="",N=x[y].encoding;if(x[y].encoding!=="Identity-H")return{text:a,x:l,y:u,options:d,mutex:p};for(b=a,y=f,Array.isArray(a)&&(b=a[0]),w=0;w<b.length;w+=1)x[y].metadata.hasOwnProperty("cmap")&&(o=x[y].metadata.cmap.unicode.codeMap[b[w].charCodeAt(0)]),o||b[w].charCodeAt(0)<256&&x[y].metadata.hasOwnProperty("Unicode")?_+=b[w]:_+="";var C="";return parseInt(y.slice(1))<14||N==="WinAnsiEncoding"?C=m(_,y).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(C=t(_,x[y])),p.isHex=!0,{text:C,x:l,y:u,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(it),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(it.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,d,p=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,N=0;this.__bidiEngine__={};var C=function(L){var F=L.charCodeAt(),T=F>>8,O=y[T];return O!==void 0?p[256*O+(255&F)]:T===252||T===253?"AL":w.test(T)?"L":T===8?"R":"N"},A=function(L){for(var F,T=0;T<L.length;T++){if((F=C(L.charAt(T)))==="L")return!1;if(F==="R")return!0}return!1},P=function(L,F,T,O){var J,X,se,q,ee=F[O];switch(ee){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(ee="AN");break;case"AL":b=!0,ee="R";break;case"WS":ee="N";break;case"CS":O<1||O+1>=F.length||(J=T[O-1])!=="EN"&&J!=="AN"||(X=F[O+1])!=="EN"&&X!=="AN"?ee="N":b&&(X="AN"),ee=X===J?X:"N";break;case"ES":ee=(J=O>0?T[O-1]:"B")==="EN"&&O+1<F.length&&F[O+1]==="EN"?"EN":"N";break;case"ET":if(O>0&&T[O-1]==="EN"){ee="EN";break}if(b){ee="N";break}for(se=O+1,q=F.length;se<q&&F[se]==="ET";)se++;ee=se<q&&F[se]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(q=F.length,se=O+1;se<q&&F[se]==="NSM";)se++;if(se<q){var ie=L[O],re=ie>=1425&&ie<=2303||ie===64286;if(J=F[se],re&&(J==="R"||J==="AL")){ee="R";break}}}ee=O<1||(J=F[O-1])==="B"?"N":T[O-1];break;case"B":b=!1,i=!0,ee=N;break;case"S":s=!0,ee="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":ee="N"}return ee},E=function(L,F,T){var O=L.split("");return T&&j(O,T,{hiLevel:N}),O.reverse(),F&&F.reverse(),O.join("")},j=function(L,F,T){var O,J,X,se,q,ee=-1,ie=L.length,re=0,M=[],Y=N?f:m,G=[];for(b=!1,i=!1,s=!1,J=0;J<ie;J++)G[J]=C(L[J]);for(X=0;X<ie;X++){if(q=re,M[X]=P(L,G,M,X),O=240&(re=Y[q][x[M[X]]]),re&=15,F[X]=se=Y[re][5],O>0)if(O===16){for(J=ee;J<X;J++)F[J]=1;ee=-1}else ee=-1;if(Y[re][6])ee===-1&&(ee=X);else if(ee>-1){for(J=ee;J<X;J++)F[J]=se;ee=-1}G[X]==="B"&&(F[X]=0),T.hiLevel|=se}s&&function(Z,te,ue){for(var me=0;me<ue;me++)if(Z[me]==="S"){te[me]=N;for(var ge=me-1;ge>=0&&Z[ge]==="WS";ge--)te[ge]=N}}(G,F,ie)},D=function(L,F,T,O,J){if(!(J.hiLevel<L)){if(L===1&&N===1&&!i)return F.reverse(),void(T&&T.reverse());for(var X,se,q,ee,ie=F.length,re=0;re<ie;){if(O[re]>=L){for(q=re+1;q<ie&&O[q]>=L;)q++;for(ee=re,se=q-1;ee<se;ee++,se--)X=F[ee],F[ee]=F[se],F[se]=X,T&&(X=T[ee],T[ee]=T[se],T[se]=X);re=q}re++}}},U=function(L,F,T){var O=L.split(""),J={hiLevel:N};return T||(T=[]),j(O,T,J),function(X,se,q){if(q.hiLevel!==0&&d)for(var ee,ie=0;ie<X.length;ie++)se[ie]===1&&(ee=_.indexOf(X[ie]))>=0&&(X[ie]=_[ee+1])}(O,T,J),D(2,O,F,T,J),D(1,O,F,T,J),O.join("")};return this.__bidiEngine__.doBidiReorder=function(L,F,T){if(function(J,X){if(X)for(var se=0;se<J.length;se++)X[se]=se;a===void 0&&(a=A(J)),u===void 0&&(u=A(J))}(L,F),o||!l||u)if(o&&l&&a^u)N=a?1:0,L=E(L,F,T);else if(!o&&l&&u)N=a?1:0,L=U(L,F,T),L=E(L,F);else if(!o||a||l||u){if(o&&!l&&a^u)L=E(L,F),a?(N=0,L=U(L,F,T)):(N=1,L=U(L,F,T),L=E(L,F));else if(o&&a&&!l&&u)N=1,L=U(L,F,T),L=E(L,F);else if(!o&&!l&&a^u){var O=d;a?(N=1,L=U(L,F,T),N=0,d=!1,L=U(L,F,T),d=O):(N=0,L=U(L,F,T),L=E(L,F),N=1,d=!1,L=U(L,F,T),d=O,L=E(L,F))}}else N=0,L=U(L,F,T);else N=a?1:0,L=U(L,F,T);return L},this.__bidiEngine__.setOptions=function(L){L&&(o=L.isInputVisual,l=L.isOutputVisual,a=L.isInputRtl,u=L.isOutputRtl,d=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(it),it.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Ko(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new C8(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new p8(this.contents),this.head=new g8(this),this.name=new b8(this),this.cmap=new IS(this),this.toUnicode={},this.hhea=new y8(this),this.maxp=new S8(this),this.hmtx=new _8(this),this.post=new x8(this),this.os2=new v8(this),this.loca=new A8(this),this.glyf=new N8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var ss,Ko=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),p8=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,o,a,l,u,d,p,m,f,x,y;for(y in f=Object.keys(t).length,l=Math.log(2),p=16*Math.floor(Math.log(f)/l),o=Math.floor(p/l),d=16*f-p,(i=new Ko).writeInt(this.scalarType),i.writeShort(f),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*f,u=i.pos+s,a=null,x=[],t)for(m=t[y],i.writeString(y),i.writeInt(n(m)),i.writeInt(u),i.writeInt(m.length),x=x.concat(m),y==="head"&&(a=u),u+=m.length;u%4;)x.push(0),u++;return i.write(x),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=RS.call(t);t.length%4;)t.push(0);for(s=new Ko(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),m8={}.hasOwnProperty,Ns=function(n,e){for(var t in e)m8.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};ss=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var g8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ns(e,ss),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Ko).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),sx=function(){function n(e,t){var r,i,s,o,a,l,u,d,p,m,f,x,y,_,w,b,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),m=f/2,e.pos+=6,s=function(){var C,A;for(A=[],l=C=0;0<=m?C<m:C>m;l=0<=m?++C:--C)A.push(e.readUInt16());return A}(),e.pos+=2,y=function(){var C,A;for(A=[],l=C=0;0<=m?C<m:C>m;l=0<=m?++C:--C)A.push(e.readUInt16());return A}(),u=function(){var C,A;for(A=[],l=C=0;0<=m?C<m:C>m;l=0<=m?++C:--C)A.push(e.readUInt16());return A}(),d=function(){var C,A;for(A=[],l=C=0;0<=m?C<m:C>m;l=0<=m?++C:--C)A.push(e.readUInt16());return A}(),i=(this.length-e.pos+this.offset)/2,a=function(){var C,A;for(A=[],l=C=0;0<=i?C<i:C>i;l=0<=i?++C:--C)A.push(e.readUInt16());return A}(),l=w=0,N=s.length;w<N;l=++w)for(_=s[l],r=b=x=y[l];x<=_?b<=_:b>=_;r=x<=_?++b:--b)d[l]===0?o=r+u[l]:(o=a[d[l]/2+(r-x)-(m-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,s,o,a,l,u,d,p,m,f,x,y,_,w,b,N,C,A,P,E,j,D,U,L,F,T,O,J,X,se,q,ee,ie,re,M,Y,G,Z,te,ue,me,ge,De,Pe,$e;switch(O=new Ko,o=Object.keys(e).sort(function(Oe,He){return Oe-He}),t){case"macroman":for(y=0,_=function(){var Oe=[];for(x=0;x<256;++x)Oe.push(0);return Oe}(),b={0:0},s={},J=0,ee=o.length;J<ee;J++)b[ge=e[i=o[J]]]==null&&(b[ge]=++y),s[i]={old:e[i],new:b[e[i]]},_[i]=b[e[i]];return O.writeUInt16(1),O.writeUInt16(0),O.writeUInt32(12),O.writeUInt16(0),O.writeUInt16(262),O.writeUInt16(0),O.write(_),{charMap:s,subtable:O.data,maxGlyphID:y+1};case"unicode":for(F=[],p=[],N=0,b={},r={},w=u=null,X=0,ie=o.length;X<ie;X++)b[A=e[i=o[X]]]==null&&(b[A]=++N),r[i]={old:A,new:b[A]},a=b[A]-i,w!=null&&a===u||(w&&p.push(w),F.push(i),u=a),w=i;for(w&&p.push(w),p.push(65535),F.push(65535),U=2*(D=F.length),j=2*Math.pow(Math.log(D)/Math.LN2,2),m=Math.log(j/2)/Math.LN2,E=2*D-j,l=[],P=[],f=[],x=se=0,re=F.length;se<re;x=++se){if(L=F[x],d=p[x],L===65535){l.push(0),P.push(0);break}if(L-(T=r[L].new)>=32768)for(l.push(0),P.push(2*(f.length+D-x)),i=q=L;L<=d?q<=d:q>=d;i=L<=d?++q:--q)f.push(r[i].new);else l.push(T-L),P.push(0)}for(O.writeUInt16(3),O.writeUInt16(1),O.writeUInt32(12),O.writeUInt16(4),O.writeUInt16(16+8*D+2*f.length),O.writeUInt16(0),O.writeUInt16(U),O.writeUInt16(j),O.writeUInt16(m),O.writeUInt16(E),ue=0,M=p.length;ue<M;ue++)i=p[ue],O.writeUInt16(i);for(O.writeUInt16(0),me=0,Y=F.length;me<Y;me++)i=F[me],O.writeUInt16(i);for(De=0,G=l.length;De<G;De++)a=l[De],O.writeUInt16(a);for(Pe=0,Z=P.length;Pe<Z;Pe++)C=P[Pe],O.writeUInt16(C);for($e=0,te=f.length;$e<te;$e++)y=f[$e],O.writeUInt16(y);return{charMap:r,subtable:O.data,maxGlyphID:N+1}}},n}(),IS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ns(e,ss),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new sx(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=sx.encode(t,r),(s=new Ko).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),y8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ns(e,ss),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),v8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ns(e,ss),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),x8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ns(e,ss),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(t.readUInt32());return u}).call(this)}},e}(),w8=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},b8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ns(e,ss),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,o,a,l,u,d,p,m,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},o=p=0,m=i.length;p<m;o=++p)s=i[o],t.pos=s.offset,d=t.readString(s.length),a=new w8(d,s),u[f=s.nameID]==null&&(u[f]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),S8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ns(e,ss),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),_8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ns(e,ss),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,o,a,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(t.readInt16());return p}(),this.widths=(function(){var d,p,m,f;for(f=[],d=0,p=(m=this.metrics).length;d<p;d++)o=m[d],f.push(o.advance);return f}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),RS=[].slice,N8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ns(e,ss),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,o,a,l,u,d,p,m;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(l=new Ko(r.read(s))).readShort(),d=l.readShort(),m=l.readShort(),u=l.readShort(),p=l.readShort(),this.cache[t]=a===-1?new j8(l,d,m,u,p):new k8(l,a,d,m,u,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=t[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),k8=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),j8=function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Ko(RS.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),A8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ns(e,ss),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),C8=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,o,a,l,u,d,p,m,f,x,y,_,w;for(i in r=IS.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},w=r.charMap)f[(l=w[i]).old]=l.new;for(x in m=r.maxGlyphID,o)x in f||(f[x]=m++);return d=function(b){var N,C;for(N in C={},b)C[b[N]]=N;return C}(f),p=Object.keys(d).sort(function(b,N){return b-N}),y=function(){var b,N,C;for(C=[],b=0,N=p.length;b<N;b++)a=p[b],C.push(d[a]);return C}(),s=this.font.glyf.encode(o,y,f),u=this.font.loca.encode(s.offsets,y),_={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},n}();it.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var a,l,u;for(u=[],a=0,l=t.length;a<l;a++)r=t[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e}();function FS(n,e,t,r,i){r=r||{};var s=1.15,o=i.internal.scaleFactor,a=i.internal.getFontSize()/o,l=i.getLineHeightFactor?i.getLineHeightFactor():s,u=a*l,d=/\r\n|\r|\n/g,p="",m=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(p=typeof n=="string"?n.split(d):n,m=p.length||1),t+=a*(2-s),r.valign==="middle"?t-=m/2*u:r.valign==="bottom"&&(t-=m*u),r.halign==="center"||r.halign==="right"){var f=a;if(r.halign==="center"&&(f*=.5),p&&m>=1){for(var x=0;x<p.length;x++)i.text(p[x],e-i.getStringUnitWidth(p[x])*f,t),t+=u;return i}e-=i.getStringUnitWidth(n)*f}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var ox={},oc=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:ox=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,s;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),a=o.fontStyle,l=o.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),a=u[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var d=n.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=n.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=n.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,s){return this.jsPDFDocument.rect(e,t,r,i,s)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return ox||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),Bg=function(n,e){return Bg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Bg(n,e)};function OS(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Bg(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $S=function(n){OS(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function E8(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function P8(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function $f(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(s){return t.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function BS(n,e,t,r){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:s});var o=US(i,!1);o&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,o)}function US(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function gp(n,e){var t,r,i,s;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(s=n.bottom)!==null&&s!==void 0?s:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function zS(n,e){var t=gp(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function L8(n,e,t,r,i){var s={},o=1.3333333333333333,a=rm(e,function(N){return i.getComputedStyle(N).backgroundColor});a!=null&&(s.fillColor=a);var l=rm(e,function(N){return i.getComputedStyle(N).color});l!=null&&(s.textColor=l);var u=D8(r,t);u&&(s.cellPadding=u);var d="borderTopColor",p=o*t,m=r.borderTopWidth;if(r.borderBottomWidth===m&&r.borderRightWidth===m&&r.borderLeftWidth===m){var f=(parseFloat(m)||0)/p;f&&(s.lineWidth=f)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/p,right:(parseFloat(r.borderRightWidth)||0)/p,bottom:(parseFloat(r.borderBottomWidth)||0)/p,left:(parseFloat(r.borderLeftWidth)||0)/p},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var x=rm(e,function(N){return i.getComputedStyle(N)[d]});x!=null&&(s.lineColor=x);var y=["left","right","center","justify"];y.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),y=["middle","bottom","top"],y.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var _=parseInt(r.fontSize||"");isNaN(_)||(s.fontSize=_/o);var w=T8(r);w&&(s.fontStyle=w);var b=(r.fontFamily||"").toLowerCase();return n.indexOf(b)!==-1&&(s.font=b),s}function T8(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function rm(n,e){var t=WS(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function WS(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:WS(n.parentElement,e):t}function D8(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,s=t.map(function(a){return parseInt(a||"0")/r}),o=gp(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function HS(n,e,t,r,i){var s,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=t.document.querySelector(e):a=e;var l=Object.keys(n.getFontList()),u=n.scaleFactor(),d=[],p=[],m=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:d,body:p,foot:m};for(var f=0;f<a.rows.length;f++){var x=a.rows[f],y=(o=(s=x==null?void 0:x.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),_=M8(l,u,t,x,r,i);_&&(y==="thead"?d.push(_):y==="tfoot"?m.push(_):p.push(_))}return{head:d,body:p,foot:m}}function M8(n,e,t,r,i,s){for(var o=new $S(r),a=0;a<r.cells.length;a++){var l=r.cells[a],u=t.getComputedStyle(l);if(i||u.display!=="none"){var d=void 0;s&&(d=L8(n,l,e,u,t)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:I8(l)})}}var p=t.getComputedStyle(r);if(o.length>0&&(i||p.display!=="none"))return o}function I8(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function R8(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var s=i[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Hs(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(n),o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s}function qS(n,e){var t=new oc(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();R8(i,r,e);var s=Hs({},i,r,e),o;typeof window<"u"&&(o=window);var a=F8(i,r,e),l=O8(i,r,e),u=$8(t,s),d=U8(t,s,o);return{id:e.tableId,content:d,hooks:l,styles:a,settings:u}}function F8(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=n[l],d=e[l],p=t[l];r.columnStyles=Hs({},u,d,p)}else{var m=[n,e,t],f=m.map(function(x){return x[l]||{}});r[l]=Hs({},f[0],f[1],f[2])}},s=0,o=Object.keys(r);s<o.length;s++){var a=o[s];i(a)}return r}function O8(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=r;s<o.length;s++){var a=o[s];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function $8(n,e){var t,r,i,s,o,a,l,u,d,p,m,f,x=gp(e.margin,40/n.scaleFactor()),y=(t=B8(n,e.startY))!==null&&t!==void 0?t:x.top,_;e.showFoot===!0?_="everyPage":e.showFoot===!1?_="never":_=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var w;e.showHead===!0?w="everyPage":e.showHead===!1?w="never":w=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var b=(s=e.useCss)!==null&&s!==void 0?s:!1,N=e.theme||(b?"plain":"striped"),C=!!e.horizontalPageBreak,A=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:b,theme:N,startY:y,margin:x,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:w,showFoot:_,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:C,horizontalPageBreakRepeat:A,horizontalPageBreakBehaviour:(f=e.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function B8(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),s=!1;if(t&&t.startPageNumber){var o=t.startPageNumber+t.pageNumber-1;s=o===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function U8(n,e,t){var r=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(t){var a=HS(n,e.html,t,o,e.useCss)||{};r=a.head||r,i=a.body||r,s=a.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||z8(r,i,s);return{columns:l,head:r,body:i,foot:s}}function z8(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,a;Array.isArray(r)?a=r[parseInt(s)]:a=r[s],typeof a=="object"&&!Array.isArray(a)&&(o=(a==null?void 0:a.colSpan)||1);for(var l=0;l<o;l++){var u=void 0;Array.isArray(r)?u=i.length:u=s+(l>0?"_".concat(l):"");var d={dataKey:u};i.push(d)}}),i}var Ug=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),W8=function(n){OS(e,n);function e(t,r,i,s,o,a){var l=n.call(this,t,r,a)||this;return l.cell=i,l.row=s,l.column=o,l.section=s.section,l}return e}(Ug),H8=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,s,o){for(var a=0,l=t;a<l.length;a++){var u=l[a],d=new W8(e,this,r,i,s,o),p=u(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],p)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var s=i[r];s(new Ug(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var s=i[r];s(new Ug(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),YS=function(){function n(e,t,r,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof $S&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=s}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var s;return Math.max(r,((s=t.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,s){var o=r.cells[s.index];if(!o)return 0;var a=t.getLineHeight(o.styles.fontSize),l=o.padding("vertical"),u=l+a;return u>i?u:i},0)},n}(),VS=function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",a=/\r\n|\r|\n/g;this.text=o.split(a)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,s=r*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=gp(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),q8=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var s=i[r],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(t=Math.max(t,o.styles.cellWidth))}return t},n}();function Y8(n,e){V8(n,e);var t=[],r=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,t.push(s)),r+=s.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=zg(t,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=zg(t,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),J8(e),K8(e,n),G8(e)}function V8(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=zS(n,e);e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(n,d,u,s,l,null);var p=u.padding("horizontal");u.contentWidth=$f(u.text,u.styles,n)+p;var m=$f(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,n);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var f=10/t;u.minWidth=u.styles.minCellWidth||f,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},p=d.cellWidth||d.minCellWidth;p&&typeof p=="number"&&(l.minWidth=p,l.wrappedWidth=p)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function zg(n,e,t){for(var r=e,i=n.reduce(function(f,x){return f+x.wrappedWidth},0),s=0;s<n.length;s++){var o=n[s],a=o.wrappedWidth/i,l=r*a,u=o.width+l,d=t(o),p=u<d?d:u;e-=p-o.width,o.width=p}if(e=Math.round(e*1e10)/1e10,e){var m=n.filter(function(f){return e<0?f.width>t(f):!0});m.length&&(e=zg(m,e,t))}return e}function G8(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var s=r[i],o=0,a=n.columns;o<a.length;o++){var l=a[o],u=e[l.index];if(t>1)t--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,t=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var p=r.length-i,m=d.rowSpan>p?p:d.rowSpan;e[l.index]={cell:d,left:m,row:s}}}}}function J8(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,s=0,o=0,a=0;a<n.columns.length;a++){var l=n.columns[a];if(o-=1,o>1&&n.columns[a+1])s+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+s}else{var u=r.cells[l.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){i=u,s+=l.width;continue}u.width=l.width+s}}}function K8(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var s=i[r],o=0,a=n.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=ax(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=ax(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var p=u.styles.overflow(u.text,d);typeof p=="string"?u.text=[p]:u.text=p}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&t.count*t.height<m*u.rowSpan?t={height:m,count:u.rowSpan}:t&&t.count>0&&t.height>m&&(m=t.height),m>s.height&&(s.height=m)}}t.count--}}function ax(n,e,t,r,i){return n.map(function(s){return X8(s,e,t,r,i)})}function X8(n,e,t,r,i){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=$f(n,t,r))return n;for(;e<$f(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function GS(n,e){var t=new oc(n),r=Q8(e,t.scaleFactor()),i=new H8(e,r);return Y8(t,i),t.applyStyles(t.userStyles),i}function Q8(n,e){var t=n.content,r=eE(t.columns);if(t.head.length===0){var i=lx(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=lx(r,"foot");i&&t.foot.push(i)}var s=n.settings.theme,o=n.styles;return{columns:r,head:im("head",t.head,r,o,s,e),body:im("body",t.body,r,o,s,e),foot:im("foot",t.foot,r,o,s,e)}}function im(n,e,t,r,i,s){var o={},a=e.map(function(l,u){for(var d=0,p={},m=0,f=0,x=0,y=t;x<y.length;x++){var _=y[x];if(o[_.index]==null||o[_.index].left===0)if(f===0){var w=void 0;Array.isArray(l)?w=l[_.index-m-d]:w=l[_.dataKey];var b={};typeof w=="object"&&!Array.isArray(w)&&(b=(w==null?void 0:w.styles)||{});var N=tE(n,_,u,i,r,s,b),C=new VS(w,N,n);p[_.dataKey]=C,p[_.index]=C,f=C.colSpan-1,o[_.index]={left:C.rowSpan-1,times:f}}else f--,m++;else o[_.index].left--,f=o[_.index].times,d++}return new YS(l,u,n,p)});return a}function lx(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=Z8(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function Z8(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function eE(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new q8(i,e,t)})}function tE(n,e,t,r,i,s,o){var a=P8(r),l;n==="head"?l=i.headStyles:n==="body"?l=i.bodyStyles:n==="foot"&&(l=i.footStyles);var u=Hs({},a.table,a[n],i.styles,l),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=n==="body"?d:{},m=n==="body"&&t%2===0?Hs({},a.alternateRow,i.alternateRowStyles):{},f=E8(s),x=Hs({},f,u,m,p);return Hs(x,o)}function nE(n,e,t){var r;t===void 0&&(t={});var i=zS(n,e),s=new Map,o=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var f=e.columns.find(function(x){return x.dataKey===m||x.index===m});f&&!s.has(f.index)&&(s.set(f.index,!0),o.push(f.index),a.push(e.columns[f.index]),i-=f.wrappedWidth)});for(var u=!0,d=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(s.has(d)){d++;continue}var p=e.columns[d].wrappedWidth;if(u||i>=p)u=!1,o.push(d),a.push(e.columns[d]),i-=p;else break;d++}return{colIndexes:o,columns:a,lastIndex:d-1}}function rE(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=nE(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function JS(n,e){var t=e.settings,r=t.startY,i=t.margin,s={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+o;if(t.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(m,f){return m+f.height},0);a+=u}var d=new oc(n);(t.pageBreak==="always"||t.startY!=null&&a>d.pageSize().height)&&(XS(d),s.y=i.top),e.callWillDrawPageHooks(d,s);var p=Hs({},s);e.startPageNumber=d.pageNumber(),t.horizontalPageBreak?iE(d,e,p,s):(d.applyStyles(d.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(m){return eo(d,e,m,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,f){var x=f===e.body.length-1;Bf(d,e,m,x,p,s,e.columns)}),d.applyStyles(d.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(m){return eo(d,e,m,s,e.columns)})),BS(d,e,p,s),e.callEndPageHooks(d,s),e.finalY=s.y,n.lastAutoTable=e,d.applyStyles(d.userStyles)}function iE(n,e,t,r){var i=rE(n,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,d){n.applyStyles(n.userStyles),d>0?Uu(n,e,t,r,u.columns,!0):cx(n,e,r,u.columns),sE(n,e,t,r,u.columns),sm(n,e,r,u.columns)});else for(var o=-1,a=i[0],l=function(){var u=o;if(a){n.applyStyles(n.userStyles);var d=a.columns;o>=0?Uu(n,e,t,r,d,!0):cx(n,e,r,d),u=ux(n,e,o+1,r,d),sm(n,e,r,d)}var p=u-o;i.slice(1).forEach(function(m){n.applyStyles(n.userStyles),Uu(n,e,t,r,m.columns,!0),ux(n,e,o+1,r,m.columns,p),sm(n,e,r,m.columns)}),o=u};o<e.body.length-1;)l()}function cx(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return eo(n,e,s,t,r)})}function sE(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(s,o){var a=o===e.body.length-1;Bf(n,e,s,a,t,r,i)})}function ux(n,e,t,r,i,s){n.applyStyles(n.userStyles),s=s??e.body.length;var o=Math.min(t+s,e.body.length),a=-1;return e.body.slice(t,o).forEach(function(l,u){var d=t+u===e.body.length-1,p=KS(n,e,d,r);l.canEntireRowFit(p,i)&&(eo(n,e,l,r,i),a=t+u)}),a}function sm(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return eo(n,e,s,t,r)})}function oE(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),s=Math.floor((e-i)/r);return Math.max(0,s)}function aE(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var s=0,o=0,a=t.columns;o<a.length;o++){var l=a[o],u=n.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new VS(u.raw,u.styles,u.section);d=Hs(d,u),d.text=[];var p=oE(u,e,r);u.text.length>p&&(d.text=u.text.splice(p,u.text.length));var m=r.scaleFactor(),f=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,f),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>n.height&&(n.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,f),d.contentHeight>s&&(s=d.contentHeight),i[l.index]=d}}var x=new YS(n.raw,-1,n.section,i,!0);x.height=s;for(var y=0,_=t.columns;y<_.length;y++){var l=_[y],d=x.cells[l.index];d&&(d.height=x.height);var u=n.cells[l.index];u&&(u.height=n.height)}return x}function lE(n,e,t,r){var i=n.pageSize().height,s=r.settings.margin,o=s.top+s.bottom,a=i-o;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,n),u=l<t;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(r.columns),p=e.getMaxCellHeight(r.columns)>a;return p?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function Bf(n,e,t,r,i,s,o){var a=KS(n,e,r,s);if(t.canEntireRowFit(a,o))eo(n,e,t,s,o);else if(lE(n,t,a,e)){var l=aE(t,a,e,n);eo(n,e,t,s,o),Uu(n,e,i,s,o),Bf(n,e,l,r,i,s,o)}else Uu(n,e,i,s,o),Bf(n,e,t,r,i,s,o)}function eo(n,e,t,r,i){r.x=e.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var a=o[s],l=t.cells[a.index];if(!l){r.x+=a.width;continue}n.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(n,e.hooks.willDrawCell,l,t,a,r);if(u===!1){r.x+=a.width;continue}cE(n,l,r);var d=l.getTextPos();FS(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,l,t,a,r),r.x+=a.width}r.y+=t.height}function cE(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=US(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),uE(n,e,t,r.lineWidth))}function uE(n,e,t,r){var i,s,o,a;r.top&&(i=t.x,s=t.y,o=t.x+e.width,a=t.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,s,o,a)),r.bottom&&(i=t.x,s=t.y+e.height,o=t.x+e.width,a=t.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,s,o,a)),r.left&&(i=t.x,s=t.y,o=t.x,a=t.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.left,i,s,o,a)),r.right&&(i=t.x+e.width,s=t.y,o=t.x+e.width,a=t.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.right,i,s,o,a));function l(u,d,p,m,f){n.getDocument().setLineWidth(u),n.getDocument().line(d,p,m,f,"S")}}function KS(n,e,t,r){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function Uu(n,e,t,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(a){return eo(n,e,a,r,i)}),e.callEndPageHooks(n,r);var o=e.settings.margin;BS(n,e,t,r),XS(n),e.pageNumber++,r.x=o.left,r.y=o.top,t.y=o.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return eo(n,e,a,r,i)}),n.applyStyles(n.userStyles))}function XS(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function dE(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=qS(this,r),s=GS(this,i);return JS(this,s),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){FS(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return oc.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){oc.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new oc(this),s=HS(i,e,window,t,!1),o=s.head,a=s.body,l=((r=o[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:a,data:a}}}var om;function yp(n,e){var t=qS(n,e),r=GS(n,t);JS(n,r)}try{if(typeof window<"u"&&window){var dx=window,hx=dx.jsPDF||((om=dx.jspdf)===null||om===void 0?void 0:om.jsPDF);hx&&dE(hx)}}catch(n){console.error("Could not apply autoTable plugin",n)}class hE{async exportToPDF(e){const{entries:t,month:r,year:i,title:s="Roster Schedule"}=e;console.log(" Starting PDF export with options:",e);const o=new it({orientation:"landscape",unit:"mm",format:"a4"}),l=`${["January","February","March","April","May","June","July","August","September","October","November","December"][r]} ${i}`,u=`${s} - ${l}`;o.setFontSize(16),o.setFont("helvetica","bold"),o.text(u,o.internal.pageSize.getWidth()/2,20,{align:"center"}),o.setFontSize(10),o.setFont("helvetica","normal");const d=new Date().toLocaleString();o.text(`Generated on: ${d}`,o.internal.pageSize.getWidth()/2,30,{align:"center"});const p=t.filter(x=>{const y=new Date(x.date);return y.getMonth()===r&&y.getFullYear()===i});if(console.log(` Filtered ${p.length} entries for ${l}`),p.length===0)o.setFontSize(14),o.text("No roster entries found for this month",o.internal.pageSize.getWidth()/2,60,{align:"center"});else{const x=this.prepareTableData(p);yp(o,{startY:40,head:[["Date","Day","Shift Type","Assigned Staff","Last Edited By","Last Edited At","Remarks"]],body:x,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center",fontStyle:"bold"},headStyles:{fillColor:[79,70,229],textColor:255,fontStyle:"bold",fontSize:9},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:25},1:{cellWidth:20},2:{cellWidth:45},3:{cellWidth:40},4:{cellWidth:35},5:{cellWidth:40},6:{cellWidth:50}},margin:{left:10,right:10},tableWidth:"auto",theme:"striped"})}const m=o.getNumberOfPages();for(let x=1;x<=m;x++)o.setPage(x),o.setFontSize(8),o.text(`Page ${x} of ${m}`,o.internal.pageSize.getWidth()/2,o.internal.pageSize.getHeight()-10,{align:"center"});const f=`Roster_${l.replace(" ","_")}_${new Date().toISOString().split("T")[0]}.pdf`;o.save(f),console.log(" PDF export completed:",f)}prepareTableData(e){return[...e].sort((r,i)=>{const s=new Date(r.date).getTime()-new Date(i.date).getTime();if(s!==0)return s;const o=["Morning Shift (9-4)","Saturday Regular (12-10)","Evening Shift (4-10)","Night Duty","Sunday/Public Holiday/Special"],a=o.indexOf(r.shift_type),l=o.indexOf(i.shift_type);return a-l}).map(r=>[this.formatDate(r.date),this.getDayName(r.date),this.formatShiftType(r.shift_type),r.assigned_name,r.last_edited_by||"System",this.formatTimestamp(r.last_edited_at),this.extractRemarks(r)])}formatDate(e){const t=new Date(e),r=t.getDate().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getFullYear();return`${r}/${i}/${s}`}getDayName(e){const t=new Date(e);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]}formatShiftType(e){return{"Morning Shift (9-4)":"Morning (9-4)","Evening Shift (4-10)":"Evening (4-10)","Saturday Regular (12-10)":"Saturday (12-10)","Night Duty":"Night Duty","Sunday/Public Holiday/Special":"Special (9-4)"}[e]||e}formatTimestamp(e){if(!e)return"N/A";try{if(e.includes("-")&&e.includes(" ")){const[l,u]=e.split(" "),[d,p,m]=l.split("-"),[f,x,y]=(u||"00:00:00").split(":"),_=new Date(parseInt(m),parseInt(p)-1,parseInt(d),parseInt(f||"0"),parseInt(x||"0"),parseInt(y||"0"));if(isNaN(_.getTime()))return"";const w=`${d}/${p}/${m}`,b=`${f}:${x}`;return`${w} ${b}`}const t=new Date(e);if(isNaN(t.getTime()))return"";const r=t.getDate().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getFullYear(),o=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0");return`${r}/${i}/${s} ${o}:${a}`}catch(t){return console.warn("Failed to parse timestamp:",e,t),""}}extractRemarks(e){if(e.change_description&&e.change_description.includes("Special Date:")){const t=e.change_description.match(/Special Date:\s*([^;]+)/);if(t&&t[1].trim())return t[1].trim()}return""}}const fE=new hE;class QS{formatNumber(e){return e===0?"":e%1===0?e.toString():e.toFixed(2).replace(/\.?0+$/,"")}formatCurrency(e){return e===0?"":`Rs ${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}async generateBill(e){const{staffName:t,month:r,year:i,numberOfCopies:s=1}=e;for(let o=1;o<=s;o++)await this.generateSingleBill(e,o,s)}async generateSingleBill(e,t,r){const{staffName:i,month:s,year:o}=e,a=new it({orientation:"portrait",unit:"mm",format:"a4"});await this.generateBillContent(a,e,t,r);let u=`${i}_${["January","February","March","April","May","June","July","August","September","October","November","December"][s]}_${o}_Bill`;r>1&&(u+=`_Copy${t}`),u+=".pdf",a.save(u),console.log(` Individual bill generated (${t}/${r}):`,u)}async generateBillContent(e,t,r,i){const s=t.staffName,{month:o,year:a,entries:l,basicSalary:u,hourlyRate:d,shiftCombinations:p}=t,m=s.replace(/\(R\)$/,"").trim(),f=Ha(m);if(!f)throw console.warn(` Staff member ${s} not found in current staff list. Skipping bill generation.`),new Error(`Staff member ${s} has been removed from the staff list and cannot be included in reports.`);const x=Rb(m),y=x>0?x*12/52/40:d;console.log(" Starting individual bill generation for:",s);const _=["January","February","March","April","May","June","July","August","September","October","November","December"],w=this.filterEntriesForStaff(l,s,o,a);console.log(` Filtered ${w.length} entries for ${s} in ${_[o]} ${a}`),console.log(` DEBUG: All entries for ${s}:`),w.forEach((j,D)=>{console.log(`  ${D+1}. Date: ${j.date}, Shift: ${j.shift_type}, Change: "${j.change_description}"`)}),console.log(" DEBUG: Checking for special dates in the month...");const b=l.filter(j=>{const D=new Date(j.date);return D.getMonth()===o&&D.getFullYear()===a}),N=new Map;b.forEach(j=>{if(j.change_description&&j.change_description.includes("Special Date:")){const D=j.change_description.match(/Special Date:\s*([^;]+)/);D&&D[1].trim()&&(N.set(j.date,D[1].trim()),console.log(` Found special date: ${j.date} - "${D[1].trim()}"`))}}),console.log(` Total special dates found in month: ${N.size}`),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("X-RAY DEPARTMENT - JAWAHARLAL NEHRU HOSPITAL",e.internal.pageSize.getWidth()/2,15,{align:"center"}),e.setFontSize(12);let C=`INDIVIDUAL WORK SUMMARY - ${_[o]} ${a}`;r&&i&&i>1&&(C+=` (Copy ${r}/${i})`),e.text(C,e.internal.pageSize.getWidth()/2,25,{align:"center"}),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Name:",20,35),e.text("Month/Year:",20,42),e.text("Employee ID:",20,49),e.setFont("helvetica","normal"),e.text(`${(f==null?void 0:f.firstName)||""} ${(f==null?void 0:f.surname)||m}`,50,35),e.text(`${_[o]} ${a}`,50,42),e.text((f==null?void 0:f.employeeId)||"",50,49),e.setFont("helvetica","bold"),e.text("Title:",120,35),e.text("Salary:",120,42),e.text("Hourly Rate:",120,49),e.setFont("helvetica","normal"),e.text((f==null?void 0:f.title)||"MIT",150,35),e.text(`Rs ${(x||0).toLocaleString()}`,150,42),e.text(`Rs ${y.toFixed(2)}`,150,49);const A=this.prepareAllDaysTableData(w,s,o,a,y,p,N);yp(e,{startY:55,head:[["Date",`Morning
(9-4)`,`Saturday
(12-10)`,`Evening
(4-10)`,`Night
Duty`,"Hours","Remarks"]],body:A.rows,styles:{fontSize:8,cellPadding:1,overflow:"linebreak",halign:"center",valign:"middle",fontStyle:"bold"},headStyles:{fillColor:[220,220,220],textColor:[0,0,0],fontStyle:"bold",fontSize:9,halign:"center",valign:"middle",cellPadding:2},columnStyles:{0:{cellWidth:25,halign:"center"},1:{cellWidth:20,halign:"center"},2:{cellWidth:20,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:20,halign:"center"},5:{cellWidth:15,halign:"center"},6:{cellWidth:35,halign:"center"}},margin:{left:20,right:20},pageBreak:"auto",rowPageBreak:"avoid",theme:"grid",tableLineWidth:.2,tableLineColor:[0,0,0],tableWidth:"wrap"});const P=e.lastAutoTable.finalY+10;this.addSummarySection(e,A.totalDays,A.totalHours,A.nightDutyCount,y,P),this.addSignatureSections(e,A.totalDays,A.totalHours,A.nightDutyCount,y,P),e.setFont("helvetica","normal"),e.setFontSize(8);const E=e.internal.pageSize.getHeight();e.text("X-ray ANWH System",e.internal.pageSize.getWidth()-15,E-15,{align:"right"}),e.text(`Generated on: ${new Date().toLocaleString()}`,e.internal.pageSize.getWidth()-15,E-10,{align:"right"})}addSummarySection(e,t,r,i,s,o){e.setFontSize(10),e.setFont("helvetica","bold"),e.text("SUMMARY:",15,o),e.setFont("helvetica","normal"),e.setFontSize(10);const a=r*s;e.text(`Total Working Hours: ${this.formatNumber(r)}`,15,o+9),e.text(`Subtotal (Hours): ${this.formatCurrency(a)}`,15,o+15);const u=i*6*.25*s;i>0&&e.text(`Total Night Allowance: (${i}  6  0.25  ${s.toFixed(2)}) = ${this.formatCurrency(u)}`,15,o+21,{align:"left"});const d=a+u;e.setFont("helvetica","bold"),e.setFontSize(10),e.text(`TOTAL AMOUNT: ${this.formatCurrency(d)}`,15,o-5+(i>0?34:28))}addSignatureSections(e,t,r,i,s,o){const a=e.lastAutoTable.finalY+5+(i>0?34:28)+10;e.setFont("helvetica","normal"),e.setFontSize(8),e.text("Date: _________________________________________",15,a),e.text("Signature:_______________________________________",15,a+10);const l=120;e.setFontSize(10),e.text("Certified correct as per attendance.",l,a-25),e.text("Name :- ______________________________________",l,a-17),e.text("Grade: Principal Medical Imaging Technologist.",l,a-11),e.text("Signature:- ___________________________________",l,a-3)}filterEntriesForStaff(e,t,r,i){return e.filter(s=>{const o=s.assigned_name.replace(/\(R\)$/,"").trim().toUpperCase(),a=t.replace(/\(R\)$/,"").trim().toUpperCase();if(o!==a)return!1;const l=new Date(s.date);return l.getMonth()===r&&l.getFullYear()===i})}prepareAllDaysTableData(e,t,r,i,s,o,a){const l=e.reduce((x,y)=>{const _=y.date;return x[_]||(x[_]=[]),x[_].push(y),x},{}),u=new Date(i,r+1,0).getDate(),d=[];let p=0,m=0,f=0;for(let x=1;x<=u;x++){const y=`${i}-${(r+1).toString().padStart(2,"0")}-${x.toString().padStart(2,"0")}`,_=l[y]||[],w=this.formatDayDate(y);if(_.length>0){f++;const b=[];let N=0,C=a.get(y)||"";_.forEach(U=>{b.push(U.shift_type),U.shift_type==="Night Duty"&&m++;const L=this.getShiftHours(U.shift_type,o);N+=L});const A=C.includes("*")?C.split("*")[0].trim():C;console.log(` Remarks for ${t} on ${y}: "${A}" (original: "${C}")`),p+=N;const P=b.includes("Morning Shift (9-4)")?"X":"",E=b.includes("Saturday Regular (12-10)")?"X":"",j=b.includes("Evening Shift (4-10)")?"X":"",D=b.includes("Night Duty")?"X":"";d.push([w,P,E,j,D,this.formatNumber(N),A])}else d.push([w,"","","","","",""])}return{rows:d,totalDays:f,totalHours:p,nightDutyCount:m}}getShiftHours(e,t){const i={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[e];if(!i)return console.warn(`Unknown shift type: ${e}`),0;if(e==="Night Duty")return 11;const s=t.find(o=>o.id===i);return s?s.hours:(console.warn(`No combination found for shift ID: ${i}`),0)}formatDayDate(e){const t=new Date(e),r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=r[t.getDay()],o=t.getDate().toString().padStart(2,"0"),a=i[t.getMonth()],l=t.getFullYear().toString().slice(-2);return`${s} ${o}-${a}-${l}`}}const vp=new QS,pE=Object.freeze(Object.defineProperty({__proto__:null,IndividualBillGenerator:QS,individualBillGenerator:vp},Symbol.toStringTag,{value:"Module"}));class ZS{formatNumber(e){return e===0?"":e%1===0?e.toString():e.toFixed(2).replace(/\.?0+$/,"")}formatCurrency(e){return e===0?"":`Rs ${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}formatSalary(e){return e===0?"":`Rs ${e.toLocaleString("en-US")}`}async generateAnnexure(e){const{month:t,year:r,numberOfCopies:i=1}=e;for(let s=1;s<=i;s++)await this.generateSingleAnnexure(e,s,i)}async generateSingleAnnexure(e,t,r){const{month:i,year:s}=e,o=new it({orientation:"portrait",unit:"mm",format:"a4"});await this.generateAnnexureContent(o,e,t,r);let l=`Annexure_${["January","February","March","April","May","June","July","August","September","October","November","December"][i]}_${s}`;r>1&&(l+=`_Copy${t}`),l+=".pdf",o.save(l),console.log(` Annexure generated (${t}/${r}):`,l)}async generateAnnexureContent(e,t,r,i){const{month:s,year:o,entries:a,hourlyRate:l,shiftCombinations:u}=t;console.log(" Generating annexure for all staff");const d=["January","February","March","April","May","June","July","August","September","October","November","December"];e.setFontSize(14),e.setFont("helvetica","bold"),e.text("X-RAY DEPARTMENT - JAWAHARLAL NEHRU HOSPITAL",e.internal.pageSize.getWidth()/2,15,{align:"center"}),e.setFontSize(12);let p=`ANNEXURE - ${d[s]} ${o}`;r&&i&&i>1&&(p+=` (Copy ${r}/${i})`),e.text(p,e.internal.pageSize.getWidth()/2,25,{align:"center"});const m=this.calculateStaffSummaries(a,s,o,l,u),f=m.map((N,C)=>[(C+1).toString(),N.fullName,N.employeeId,this.formatSalary(N.salary),this.formatNumber(N.totalHours),this.formatNumber(N.nightDutyHours),this.formatCurrency(N.grandTotal)]);yp(e,{startY:35,head:[["S.No",`NAME
(Full Name)`,`ID
NUMBER`,"SALARY",`NO OF HRS
PAYABLE
(Hrs)`,`NIGHT
ALLOWANCE
(Hrs)`,"AMOUNT"]],body:f,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center",valign:"middle",fontStyle:"bold"},headStyles:{fillColor:[220,220,220],textColor:[0,0,0],fontStyle:"bold",fontSize:8,halign:"center",valign:"middle",cellPadding:2,minCellHeight:8},margin:{left:5,right:5},theme:"grid",tableWidth:"auto",tableLineWidth:.3,tableLineColor:[0,0,0],columnStyles:{},didParseCell:function(N){if(N.section==="body"){const C=N.cell.text.join(" ");C.length>20||C.length>10,N.cell.styles.fontSize=9}}}),m.reduce((N,C)=>N+C.totalDays,0),m.reduce((N,C)=>N+C.totalHours,0),m.reduce((N,C)=>N+C.salary,0),m.reduce((N,C)=>N+C.nightDutyHours,0),m.reduce((N,C)=>N+C.totalAmount,0),m.reduce((N,C)=>N+C.nightAllowance,0),m.reduce((N,C)=>N+C.grandTotal,0);const x=e.lastAutoTable.finalY+10;e.setFont("helvetica","normal"),e.setFontSize(10),e.text("Certified correct as per annexture:-_________________________",80,x+100),e.text("(Principal Medical Imaging Technologist):",95,x+115),e.setFont("helvetica","normal"),e.setFontSize(8);const y=new Date,_=y.getDate().toString().padStart(2,"0"),w=(y.getMonth()+1).toString().padStart(2,"0"),b=y.getFullYear();e.text(`Generated on: ${_}/${w}/${b}`,15,e.internal.pageSize.getHeight()-15),e.text("X-ray ANWH System",e.internal.pageSize.getWidth()-15,e.internal.pageSize.getHeight()-15,{align:"right"})}calculateStaffSummaries(e,t,r,i,s){const o=[],a={};return e.forEach(l=>{const u=new Date(l.date);if(u.getMonth()===t&&u.getFullYear()===r){const d=l.assigned_name.replace(/\(R\)$/,"").trim().toUpperCase();a[d]||(a[d]=[]),a[d].push(l)}}),Object.entries(a).forEach(([l,u])=>{let d=0,p=0,m=0;u.forEach(A=>{A.shift_type==="Night Duty"&&p++;const E={"Morning Shift (9-4)":"9-4","Evening Shift (4-10)":"4-10","Saturday Regular (12-10)":"12-10","Night Duty":"N","Sunday/Public Holiday/Special":"9-4"}[A.shift_type];if(E){const j=s.find(D=>D.id===E);if(j){const D=A.shift_type==="Night Duty"?11:j.hours;d+=D}}}),m=p*6*.25;const x=l.replace(/\(R\)$/,"").trim(),y=Ha(x),_=Rb(x),w=_>0?_*12/52/40:i,b=y?`${y.surname||x} ${y.firstName||""}`.trim():x,N=(y==null?void 0:y.employeeId)||"",C=_||0;console.log(` Staff Summary Debug for ${l}:`,{totalHours:d,nightDutyCount:p,staffEntriesLength:u.length,willBeIncluded:d>0||p>0,staffExistsInAuth:!!y}),(d>0||p>0)&&y?o.push({staffName:x,fullName:b,employeeId:N,salary:C,totalDays:u.length,totalHours:d,totalAmount:d*w,nightDutyCount:p,nightDutyHours:m,nightAllowance:m*w,grandTotal:d*w+m*w}):u.length>0&&console.log(y?` Staff ${l} has ${u.length} entries but 0 hours/night duties:`:` Staff ${l} has ${u.length} entries but doesn't exist in current staff list:`,u)}),o.sort((l,u)=>l.staffName.localeCompare(u.staffName))}}const xp=new ZS,mE=Object.freeze(Object.defineProperty({__proto__:null,AnnexureGenerator:ZS,annexureGenerator:xp},Symbol.toStringTag,{value:"Module"}));class e_{async generateRosterList(e){const{month:t,year:r,numberOfCopies:i=1}=e;for(let s=1;s<=i;s++)await this.generateSingleRosterList(e,s,i)}async generateSingleRosterList(e,t,r){const{month:i,year:s}=e,o=new it({orientation:"portrait",unit:"mm",format:"a4"});await this.generateRosterListContent(o,e,t,r);let l=`Roster_List_${["January","February","March","April","May","June","July","August","September","October","November","December"][i]}_${s}`;r>1&&(l+=`_Copy${t}`),l+=".pdf",o.save(l),console.log(` Roster list generated (${t}/${r}):`,l)}async generateRosterListContent(e,t,r,i){const{month:s,year:o,entries:a}=t;console.log(" Generating roster list");const l=["January","February","March","April","May","June","July","August","September","October","November","December"];e.setFontSize(16),e.setFont("helvetica","bold");let u=`X-Ray Roster for month of ${l[s]} ${o}`;r&&i&&i>1&&(u+=` (Copy ${r}/${i})`),e.text(u,e.internal.pageSize.getWidth()/2,20,{align:"center"});const d=a.filter(p=>{const m=new Date(p.date);return m.getMonth()===s&&m.getFullYear()===o});if(console.log(` Filtered ${d.length} entries for ${l[s]} ${o}`),d.length===0)e.setFontSize(14),e.text("No roster entries found for this month",e.internal.pageSize.getWidth()/2,40,{align:"center"});else{const p=this.createColoredTableData(d);yp(e,{startY:35,head:[["Date","Shift","Staff Names","Remarks"]],body:p,willDrawCell:m=>{m.column.index===2&&m.section==="body"&&(m.cell.text=[])},didDrawCell:m=>{if(m.column.index===2&&m.section==="body"&&m.row.index>=0&&m.row.index<p.length){const f=p[m.row.index],x=this.getStaffNamesForRow(f[0],f[1],a);if(x&&x.length>0){let y=m.cell.x+2;const _=3,w=m.cell.width-6;let b=1,N=0;x.forEach((P,E)=>{const j=E===0?P.name:`, ${P.name}`,D=e.getTextWidth(j);N+D>w&&E>0?(b++,N=e.getTextWidth(P.name)):N+=D});const C=b*_;let A=m.cell.y+m.cell.height/2-C/2+2;e.setFontSize(8),e.setFont("helvetica","normal"),x.forEach((P,E)=>{const j=this.hexToRgb(P.color);e.setTextColor(j[0],j[1],j[2]);const D=y===m.cell.x+2,U=E===0||D?P.name:`, ${P.name}`,L=e.getTextWidth(U),F=e.getTextWidth(","),T=E<x.length-1,O=L+(T?F:0);if(y+O>m.cell.x+m.cell.width-6&&E>0){e.text(",",y,A),y=m.cell.x+2,A+=_;const J=P.name,X=e.getTextWidth(J);e.text(J,y,A),y+=X}else e.text(U,y,A),y+=L}),e.setTextColor(0,0,0)}}},styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"left",valign:"middle",lineWidth:.25,lineColor:[0,0,0],fontStyle:"bold"},headStyles:{fillColor:[220,220,220],textColor:[0,0,0],fontStyle:"bold",fontSize:9,halign:"center",valign:"middle",lineWidth:.25,lineColor:[0,0,0]},bodyStyles:{lineWidth:.25,lineColor:[0,0,0],fontStyle:"bold"},columnStyles:{0:{cellWidth:35,halign:"left",valign:"middle"},1:{cellWidth:45,halign:"left",valign:"middle"},2:{cellWidth:80,halign:"left",valign:"middle"},3:{halign:"center",valign:"middle"}},tableLineWidth:.25,tableLineColor:[0,0,0]})}e.setFont("helvetica","normal"),e.setFontSize(8),e.text(`Generated on: ${new Date().toLocaleString()}`,10,e.internal.pageSize.getHeight()-15),e.text(`Total Entries: ${d.length}`,e.internal.pageSize.getWidth()-10,e.internal.pageSize.getHeight()-15,{align:"right"})}prepareRosterTableData(e){const t={};e.forEach(s=>{const o=s.date,a=s.shift_type;t[o]||(t[o]={}),t[o][a]||(t[o][a]=[]),t[o][a].push(s)});const r=[];return Object.keys(t).sort().forEach(s=>{const o=t[s];["Morning Shift (9-4)","Saturday Regular (12-10)","Evening Shift (4-10)","Night Duty","Sunday/Public Holiday/Special"].forEach(l=>{const u=o[l];if(!u||u.length===0)return;const d=this.formatStaffNamesWithColors(u),p=this.extractRemarks(u),m=this.formatShiftTypeForList(l);r.push([this.formatDateForList(s),m,d,p])})}),r}formatStaffNamesWithColors(e){return e.map(t=>{const r=t.assigned_name,i=this.getTextColor(t);return{text:r,color:this.hexToRgb(i)}})}getTextColor(e){if(e.text_color)return e.text_color;const t=()=>{if(!e.change_description)return!1;const i=e.change_description.match(/\(Original PDF: ([^)]+)\)/);if(i){let s=i[1].trim();return s.includes("(R")&&!s.includes("(R)")&&(s=s.replace("(R","(R)")),e.assigned_name===s}return!1},r=e.change_description&&e.change_description.includes("Name changed from")&&e.last_edited_by;return t()?"#059669":r?"#dc2626":"#000000"}hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]}getStaffNamesForRow(e,t,r){return r.filter(s=>{const o=this.formatDateForList(s.date),a=this.formatShiftTypeForList(s.shift_type);return o===e&&a===t}).map(s=>({name:s.assigned_name,color:this.getTextColor(s)}))}createColoredTableData(e){const t={};e.forEach(s=>{const o=s.date,a=s.shift_type;t[o]||(t[o]={}),t[o][a]||(t[o][a]=[]),t[o][a].push(s)});const r=[];return Object.keys(t).sort().forEach(s=>{const o=t[s];["Morning Shift (9-4)","Saturday Regular (12-10)","Evening Shift (4-10)","Night Duty","Sunday/Public Holiday/Special"].forEach(l=>{const u=o[l];if(!u||u.length===0)return;const d=this.extractRemarks(u),p=this.formatShiftTypeForList(l),m=u.map(x=>({name:x.assigned_name,color:this.getTextColor(x)})),f=[this.formatDateForList(s),p,m.map(x=>x.name).join(", "),d];r.push(f)})}),r}extractRemarks(e){for(const t of e)if(t.change_description&&t.change_description.includes("Special Date:")){const r=t.change_description.match(/Special Date:\s*([^;]+)/);if(r&&r[1].trim()){const i=r[1].trim();return i.includes("*")?i.split("*")[0].trim():i}}return""}formatDateForList(e){const t=new Date(e),r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=r[t.getDay()],o=t.getDate().toString().padStart(2,"0"),a=i[t.getMonth()],l=t.getFullYear();return`${s} ${o}-${a}-${l}`}formatShiftTypeForList(e){return{"Morning Shift (9-4)":"Morning Shift (9-4)","Evening Shift (4-10)":"Evening Shift (4-10)","Saturday Regular (12-10)":"Saturday Regular (12-10)","Night Duty":"Night Duty","Sunday/Public Holiday/Special":"Sunday/Public Holiday/Special"}[e]||e}}const wp=new e_,gE=Object.freeze(Object.defineProperty({__proto__:null,RosterListGenerator:e_,rosterListGenerator:wp},Symbol.toStringTag,{value:"Module"}));class yE{async generateAllReports(e){const{month:t,year:r,entries:i,basicSalary:s,hourlyRate:o,shiftCombinations:a,numberOfCopies:l=1}=e;console.log(" Starting monthly report generation...");const u=["January","February","March","April","May","June","July","August","September","October","November","December"],d=i.filter(y=>{const _=new Date(y.date);return _.getMonth()===t&&_.getFullYear()===r});if(d.length===0)throw new Error(`No roster entries found for ${u[t]} ${r}`);const p=this.getUniqueStaffMembers(d);console.log(` Found ${p.length} staff members with entries in ${u[t]} ${r}`);let m=0;for(const y of p)try{await vp.generateBill({staffName:y,month:t,year:r,entries:d,basicSalary:s,hourlyRate:o,shiftCombinations:a,numberOfCopies:l}),m++,await new Promise(_=>setTimeout(_,100))}catch(_){console.error(` Failed to generate bill for ${y}:`,_)}let f=!1;try{await xp.generateAnnexure({month:t,year:r,entries:d,hourlyRate:o,shiftCombinations:a,numberOfCopies:l}),f=!0,await new Promise(y=>setTimeout(y,100))}catch(y){console.error(" Failed to generate annexure:",y)}let x=!1;try{await wp.generateRosterList({month:t,year:r,entries:d,numberOfCopies:l}),x=!0}catch(y){console.error(" Failed to generate roster list:",y)}return console.log(" Monthly report generation completed:",{individualBills:m,annexureGenerated:f,rosterListGenerated:x}),{individualBills:m,annexureGenerated:f,rosterListGenerated:x}}getUniqueStaffMembers(e){const t=new Set;return e.forEach(s=>{const o=s.assigned_name.replace(/\(R\)$/,"").trim();t.add(o)}),Array.from(t).filter(s=>!!Ha(s)).sort((s,o)=>s.localeCompare(o))}}const vE=new yE,xE=({isOpen:n,onClose:e,entries:t,basicSalary:r,hourlyRate:i,shiftCombinations:s})=>{const[o,a]=H.useState(new Date().getMonth()),[l,u]=H.useState(new Date().getFullYear()),[d,p]=H.useState(!1),[m,f]=H.useState("all"),[x,y]=H.useState(""),[_,w]=H.useState(null),[b,N]=H.useState(null),[C,A]=H.useState(!1),[P,E]=H.useState(1);H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]),H.useEffect(()=>{n&&(p(!1),w(null),N(null),f("all"),y(""),E(1))},[n]),H.useEffect(()=>{const T=O=>{O.key==="Escape"&&n&&!d&&e()};if(n)return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[n,d,e]);const j=async()=>{p(!0),N(null),w(null);try{console.log(" Starting monthly report generation...");const T=t.filter(J=>{const X=new Date(J.date);return X.getMonth()===o&&X.getFullYear()===l});if(T.length===0)throw new Error(`No roster entries found for ${U()}`);let O={individualBills:0,annexureGenerated:!1,rosterListGenerated:!1,reportType:m,staffName:x};if(m==="all")O={...await vE.generateAllReports({month:o,year:l,entries:t,basicSalary:r,hourlyRate:i,shiftCombinations:s,numberOfCopies:P}),reportType:"all"};else if(m==="individual"){if(!x||x.trim()==="")throw new Error("Please select a staff member for individual report");await vp.generateBill({staffName:x,month:o,year:l,entries:T,basicSalary:r,hourlyRate:i,shiftCombinations:s,numberOfCopies:P}),O.individualBills=1}else m==="annexure"?(await xp.generateAnnexure({month:o,year:l,entries:T,hourlyRate:i,shiftCombinations:s,numberOfCopies:P}),O.annexureGenerated=!0):m==="roster"&&(await wp.generateRosterList({month:o,year:l,entries:T,numberOfCopies:P}),O.rosterListGenerated=!0);w(O),console.log(" Monthly reports generated successfully:",O)}catch(T){console.error(" Monthly report generation failed:",T),N(T instanceof Error?T.message:"Failed to generate reports")}finally{p(!1)}},D=T=>{T.target===T.currentTarget&&!d&&e()},U=()=>`${["January","February","March","April","May","June","July","August","September","October","November","December"][o]} ${l}`,L=()=>t.filter(T=>{const O=new Date(T.date);return O.getMonth()===o&&O.getFullYear()===l}).length,F=()=>{const T=t.filter(se=>{const q=new Date(se.date);return q.getMonth()===o&&q.getFullYear()===l}),O=new Set;return T.forEach(se=>{const q=se.assigned_name.replace(/\(R\)$/,"").trim();O.add(q)}),Array.from(O).filter(se=>!!Ha(se)).sort()};return n?xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:D,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",maxHeight:"90vh",display:"flex",flexDirection:"column"},onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"relative p-6 pb-4 border-b border-gray-200 flex-shrink-0",children:[!d&&c.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors duration-200",children:c.jsx(Er,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(ns,{className:"w-6 h-6 text-blue-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Monthly Reports Generator"}),c.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Generate end-of-month reports for all staff"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[!_&&!b&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Month and Year"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsx("div",{children:c.jsx("select",{value:o,onChange:T=>a(Number(T.target.value)),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((T,O)=>c.jsx("option",{value:O,children:T},O))})}),c.jsx("div",{children:c.jsx("select",{value:l,onChange:T=>u(Number(T.target.value)),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:Array.from({length:5},(T,O)=>new Date().getFullYear()-2+O).map(T=>c.jsx("option",{value:T,children:T},T))})})]}),c.jsxs("div",{className:"mt-2 text-sm text-gray-600 text-center",children:[L()," entries found for ",U()]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Report Type"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[c.jsx("input",{type:"radio",value:"all",checked:m==="all",onChange:T=>f(T.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ns,{className:"w-5 h-5 text-blue-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"All Reports"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Generate all three report types"})]})]})]}),c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[c.jsx("input",{type:"radio",value:"individual",checked:m==="individual",onChange:T=>f(T.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Wr,{className:"w-5 h-5 text-green-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Individual Staff Bill"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Generate bill for one staff member"})]})]})]}),c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[c.jsx("input",{type:"radio",value:"annexure",checked:m==="annexure",onChange:T=>f(T.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ev,{className:"w-5 h-5 text-purple-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Annexure (All Staff Summary)"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Combined summary for all staff"})]})]})]}),c.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer",children:[c.jsx("input",{type:"radio",value:"roster",checked:m==="roster",onChange:T=>f(T.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(X2,{className:"w-5 h-5 text-orange-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Roster List"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Simple list of name, date, and shift"})]})]})]})]})]}),m==="individual"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Staff Member"}),c.jsxs("select",{value:x,onChange:T=>y(T.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[c.jsx("option",{value:"",children:"Select staff member"}),F().map(T=>c.jsx("option",{value:T,children:T},T))]}),x&&c.jsxs("div",{className:"mt-2 text-sm text-gray-600 text-center",children:["Will generate individual bill for ",x]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Number of Copies"}),c.jsx("select",{value:P,onChange:T=>E(Number(T.target.value)),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[1,2,3,4,5].map(T=>c.jsxs("option",{value:T,children:[T," ",T===1?"copy":"copies"]},T))})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:m==="all"?"Reports to Generate:":"Selected Report:"}),c.jsxs("div",{className:"space-y-3",children:[(m==="all"||m==="individual")&&c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Wr,{className:"w-5 h-5 text-green-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:m==="individual"?`Individual Bill - ${x||"Select staff"}`:"Individual Staff Bills"}),c.jsx("div",{className:"text-sm text-gray-600",children:m==="individual"?"One PDF for selected staff member":"One PDF per staff member with their work summary"})]})]}),(m==="all"||m==="annexure")&&c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(ev,{className:"w-5 h-5 text-purple-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Annexure (All Staff Summary)"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Combined summary for all staff members"})]})]}),(m==="all"||m==="roster")&&c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(X2,{className:"w-5 h-5 text-orange-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:"Roster List"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Simple list showing name, date, and shift"})]})]})]})]}),(L()===0||m==="individual"&&!x)&&c.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(AlertTriangle,{className:"w-5 h-5 text-amber-600"}),c.jsx("span",{className:"text-sm text-amber-800 font-medium",children:L()===0?`No entries found for ${U()}`:"Please select a staff member for individual report"})]}),c.jsx("p",{className:"text-sm text-amber-700 mt-1",children:L()===0?"Please select a different month or ensure roster data exists.":"Choose a staff member from the dropdown above."})]})]}),d&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generating Reports"}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["Creating PDFs for ",U(),"..."]}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[c.jsx("p",{children:" Generating individual staff bills"}),c.jsx("p",{children:" Creating annexure summary"}),c.jsx("p",{children:" Preparing roster list"})]})]}),_&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(CheckCircle,{className:"w-8 h-8 text-green-600"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Reports Generated Successfully!"}),c.jsxs("p",{className:"text-gray-600",children:["All reports for ",U()," have been created"]})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-medium text-green-800 mb-3",children:"Generation Summary:"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Report Type:"}),c.jsx("span",{className:"text-green-800 font-medium capitalize",children:_.reportType})]}),_.reportType==="individual"&&_.staffName&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Staff Member:"}),c.jsx("span",{className:"text-green-800 font-medium",children:_.staffName})]}),_.individualBills>0&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Individual Bills:"}),c.jsxs("span",{className:"text-green-800 font-medium",children:[_.individualBills," files"]})]}),_.reportType==="all"||_.reportType==="annexure"?c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Annexure:"}),c.jsx("span",{className:"text-green-800 font-medium",children:_.annexureGenerated?" Generated":" Failed"})]}):null,_.reportType==="all"||_.reportType==="roster"?c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-green-700",children:"Roster List:"}),c.jsx("span",{className:"text-green-800 font-medium",children:_.rosterListGenerated?" Generated":" Failed"})]}):null]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Files Generated:"}),c.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[_.individualBills>0&&c.jsxs("li",{children:[" ",_.individualBills," individual staff bill",_.individualBills>1?"s":""]}),_.annexureGenerated&&c.jsx("li",{children:" 1 annexure summary (all staff)"}),_.rosterListGenerated&&c.jsx("li",{children:" 1 roster list (name, date, shift)"})]}),c.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"Check your downloads folder for all PDF files."})]})]}),b&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(AlertTriangle,{className:"w-8 h-8 text-red-600"})}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generation Failed"}),c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsx("p",{className:"text-sm text-red-700",children:b})})]})]}),c.jsx("div",{className:"border-t border-gray-200 p-6 flex-shrink-0",children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:e,disabled:d,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:_?"Close":"Cancel"}),!_&&!b&&c.jsx("button",{onClick:j,disabled:d||L()===0||m==="individual"&&!x,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:d?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Generating..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Download,{className:"w-4 h-4"}),c.jsx("span",{children:m==="all"?"Generate All Reports":m==="individual"?"Generate Individual Bill":m==="annexure"?"Generate Annexure":"Generate Roster List"})]})}),(_||b)&&c.jsx("button",{onClick:()=>{w(null),N(null)},className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:"Generate Again"})]})})]})}),document.body):null};class wE{constructor(){Ut(this,"printWindow",null);Ut(this,"currentPrintIndex",0);Ut(this,"pdfDocuments",[])}async generateCombinedPDF(e,t){const{month:r,year:i,entries:s,basicSalary:o,hourlyRate:a,shiftCombinations:l,reportTypes:u,selectedStaff:d}=e;this.pdfDocuments=[],this.currentPrintIndex=0;const p=["January","February","March","April","May","June","July","August","September","October","November","December"],m=s.filter(w=>{const b=new Date(w.date);return b.getMonth()===r&&b.getFullYear()===i});if(m.length===0)throw new Error(`No roster entries found for ${p[r]} ${i}`);let f=0;if(u.includes("individual")){const w=d||this.getUniqueStaffMembers(m);f+=w.length}u.includes("annexure")&&(f+=1),u.includes("roster")&&(f+=1);let x=0;const y=new it({orientation:"portrait",unit:"mm",format:"a4"});let _=!0;try{if(u.includes("individual")){const C=d||this.getUniqueStaffMembers(m);for(const A of C)x++,t==null||t({current:x,total:f,currentTask:`Generating bill for ${A}`,completed:!1}),_||y.addPage(),_=!1,await vp.generateBillContent(y,{staffName:A,month:r,year:i,entries:m,basicSalary:o,hourlyRate:a,shiftCombinations:l}),await new Promise(P=>setTimeout(P,100))}u.includes("annexure")&&(x++,t==null||t({current:x,total:f,currentTask:"Generating annexure summary",completed:!1}),_||y.addPage(),_=!1,await xp.generateAnnexureContent(y,{month:r,year:i,entries:m,hourlyRate:a,shiftCombinations:l}),await new Promise(C=>setTimeout(C,100))),u.includes("roster")&&(x++,t==null||t({current:x,total:f,currentTask:"Generating roster list",completed:!1}),_||y.addPage(),_=!1,await wp.generateRosterListContent(y,{month:r,year:i,entries:m})),t==null||t({current:f,total:f,currentTask:"Finalizing combined PDF...",completed:!1});const w=`Combined_Reports_${p[r]}_${i}.pdf`,b=y.output("blob"),N=URL.createObjectURL(b);window.open(N,"_blank"),t==null||t({current:f,total:f,currentTask:`Combined PDF opened in browser: ${w}`,completed:!0}),console.log(" Combined PDF generated successfully:",w)}catch(w){throw console.error(" Combined PDF generation failed:",w),t==null||t({current:x,total:f,currentTask:"Combined PDF generation failed",completed:!1,error:w instanceof Error?w.message:"Unknown error"}),w}}async generateAndPrintBatch(e,t){const{month:r,year:i,entries:s,basicSalary:o,hourlyRate:a,shiftCombinations:l,reportTypes:u,selectedStaff:d}=e;console.log(" Starting batch PDF generation for printing..."),this.pdfDocuments=[],this.currentPrintIndex=0;const p=["January","February","March","April","May","June","July","August","September","October","November","December"],m=s.filter(y=>{const _=new Date(y.date);return _.getMonth()===r&&_.getFullYear()===i});if(m.length===0)throw new Error(`No roster entries found for ${p[r]} ${i}`);let f=0;if(u.includes("individual")){const y=d||this.getUniqueStaffMembers(m);f+=y.length}u.includes("annexure")&&(f+=1),u.includes("roster")&&(f+=1);let x=0;try{if(u.includes("individual")){const _=d||this.getUniqueStaffMembers(m);for(const w of _){x++,t==null||t({current:x,total:f,currentTask:`Generating bill for ${w}`,completed:!1});const b=await this.generateIndividualBillPDF({staffName:w,month:r,year:i,entries:m,basicSalary:o,hourlyRate:a,shiftCombinations:l});this.pdfDocuments.push({doc:b,filename:`${w}_${p[r]}_${i}_Bill.pdf`}),await new Promise(N=>setTimeout(N,100))}}if(u.includes("annexure")){x++,t==null||t({current:x,total:f,currentTask:"Generating annexure summary",completed:!1});const _=await this.generateAnnexurePDF({month:r,year:i,entries:m,hourlyRate:a,shiftCombinations:l});this.pdfDocuments.push({doc:_,filename:`Annexure_${p[r]}_${i}.pdf`}),await new Promise(w=>setTimeout(w,100))}if(u.includes("roster")){x++,t==null||t({current:x,total:f,currentTask:"Generating roster list",completed:!1});const _=await this.generateRosterListPDF({month:r,year:i,entries:m});this.pdfDocuments.push({doc:_,filename:`Roster_List_${p[r]}_${i}.pdf`})}t==null||t({current:f,total:f,currentTask:"Opening print window...",completed:!1});const y=window.open("","_blank","width=1200,height=800,scrollbars=yes,resizable=yes");t==null||t({current:f,total:f,currentTask:"Print window opened",completed:!0})}catch(y){throw console.error(" Batch generation failed:",y),t==null||t({current:x,total:f,currentTask:"Print preparation failed",completed:!1,error:y instanceof Error?y.message:"Unknown error"}),y}}async displayAllPDFsInSingleTab(e){if(!e)throw new Error("Print window not provided");console.log(` Displaying ${this.pdfDocuments.length} PDFs in single tab with menu bars`),await new Promise(t=>setTimeout(t,100)),e.document.write(`
      <html>
        <head>
          <title>Print Documents - ${this.pdfDocuments.length} Files</title>
          <style>
            body { 
              margin: 0; 
              padding: 0; 
              font-family: Arial, sans-serif; 
              background: #f5f5f5;
            }
            .document-section { 
              margin-bottom: 20px; 
              background: white;
              border-radius: 8px;
              overflow: hidden;
              box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }
            .document-header { 
              background: #4f46e5; 
              color: white; 
              padding: 12px 20px; 
              display: flex;
              justify-content: space-between;
              align-items: center;
              font-weight: 600;
            }
            .document-actions {
              display: flex;
              gap: 10px;
            }
            .action-btn {
              background: rgba(255,255,255,0.2);
              border: none;
              color: white;
              padding: 6px 12px;
              border-radius: 4px;
              cursor: pointer;
              font-size: 12px;
              font-weight: 500;
            }
            .action-btn:hover {
              background: rgba(255,255,255,0.3);
            }
            .pdf-content { 
              width: 100%; 
              height: 600px; 
              border: none; 
              background: white;
            }
            .main-header {
              background: #1f2937;
              color: white;
              padding: 20px;
              text-align: center;
              margin-bottom: 20px;
            }
            .main-actions {
              text-align: center;
              margin: 20px 0;
            }
            .main-btn {
              background: #10b981;
              color: white;
              border: none;
              padding: 12px 24px;
              border-radius: 8px;
              font-size: 16px;
              font-weight: 600;
              cursor: pointer;
              margin: 0 10px;
            }
            .main-btn:hover {
              background: #059669;
            }
            .close-btn {
              background: #6b7280;
            }
            .close-btn:hover {
              background: #4b5563;
            }
          </style>
        </head>
        <body>
          <div class="main-header">
            <h1>Print Preview - ${this.pdfDocuments.length} Documents</h1>
            <p>Each document has its own menu bar. Use the main Print All button or individual Print buttons.</p>
          </div>
          
          <div class="main-actions">
            <button onclick="window.close()" class="main-btn close-btn">
              Close Window
            </button>
          </div>
    `);for(let t=0;t<this.pdfDocuments.length;t++){const r=this.pdfDocuments[t],i=r.doc.output("datauristring");e.document.write(`
        <div class="document-section">
          <div class="document-header">
            <span>${r.filename}</span>
            <div class="document-actions">
              <button class="action-btn" onclick="
                const iframe = document.getElementById('pdf-${t}');
                const newWindow = window.open('', '_blank');
                newWindow.document.write('<html><head><title>${r.filename}</title></head><body style=\\'margin:0;padding:0\\'><object data=\\'${i}\\' type=\\'application/pdf\\' width=\\'100%\\' height=\\'100vh\\'></object><script>setTimeout(() => window.print(), 1000);<\/script></body></html>');
                newWindow.document.close();
              ">Print This</button>
              <button class="action-btn" onclick="
                const link = document.createElement('a');
                link.href = '${i}';
                link.download = '${r.filename}';
                (function() {
                  if(typeof document !== 'undefined') {
                    const link = document.createElement('a');
                    link.href = '${i}';
                    link.download = '${r.filename}';
                    link.click();
                  }
                })()
                  if(typeof window !== 'undefined') {
                    const newWindow = window.open('', '_blank', 'width=800,height=600,scrollbars=yes,resizable=yes');
                    if(newWindow) {
                      newWindow.document.write('<html><head><title>${r.filename}</title></head><body style=\\'margin:0;padding:0\\'><object data=\\'${i}\\' type=\\'application/pdf\\' width=\\'100%\\' height=\\'100vh\\'></object><script>setTimeout(function() { if(typeof window !== \\'undefined\\') { window.print(); } }, 1000);<\/script></body></html>');
                      newWindow.document.close();
                      newWindow.focus();
                    } else {
                      alert('Please allow popups to print individual documents');
                    }
                  }
                })()
      `)}e.document.write(`
        </body>
      </html>
    `),e.document.close(),e.focus()}async startBatchPrinting(){if(this.pdfDocuments.length===0)throw new Error("No PDFs to print");console.log(` Starting batch printing of ${this.pdfDocuments.length} PDFs`),this.canUseBatchPrint()?await this.printAllAtOnce():await this.printSequentially()}canUseBatchPrint(){return typeof window.print=="function"&&!this.isMobileBrowser()}isMobileBrowser(){return/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}async printAllAtOnce(){console.log(" Using batch print method");const e=window.open("","_blank","width=800,height=600");if(!e)throw new Error("Could not open print window. Please allow popups.");await new Promise(t=>setTimeout(t,100)),e.document.write(`
      <html>
        <head>
          <title>Batch Print - ${this.pdfDocuments.length} Documents</title>
          <style>
            body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
            .pdf-container { margin: 0; padding: 0; page-break-after: always; width: 100%; height: 100vh; }
            .pdf-container:last-child { page-break-after: auto; }
            .pdf-content { width: 100%; height: 100%; border: none; background: white; padding: 0; margin: 0; }
            .header-info { display: block; }
            .print-buttons { display: block; text-align: center; margin: 20px 0; }
            @media print {
              .header-info { display: none !important; }
              .print-buttons { display: none !important; }
              .pdf-container { page-break-after: always; }
              .pdf-content { height: 100vh; width: 100%; margin: 0; padding: 0; }
              body { margin: 0; padding: 0; }
            }
          </style>
        </head>
        <body>
          <div class="header-info">
            <h1>Batch Print Preview - ${this.pdfDocuments.length} Documents</h1>
            <p>Click Print to print all documents. PDFs are embedded as HTML content for better printing compatibility.</p>
          </div>
          <div class="print-buttons">
            <button onclick="window.print()" style="padding: 10px 20px; font-size: 16px; background: #4f46e5; color: white; border: none; border-radius: 8px; cursor: pointer;">
              Print All Documents
            </button>
            <button onclick="window.close()" style="padding: 10px 20px; font-size: 16px; background: #6b7280; color: white; border: none; border-radius: 8px; cursor: pointer; margin-left: 10px;">
              Close
            </button>
          </div>
    `);for(let t=0;t<this.pdfDocuments.length;t++){const r=this.pdfDocuments[t],i=await this.convertPdfToHtml(r.doc);e.document.write(`
        <div class="pdf-container">
          <div class="pdf-content">
            ${i}
          </div>
        </div>
      `)}e.document.write(`
      </body>
      </html>
    `),e.document.close(),e.focus(),setTimeout(()=>{e&&!e.closed&&e.print()},1e3)}async convertPdfToHtml(e){try{const t=e.output("datauristring");return`
        <object data="${t}" type="application/pdf" width="100%" height="600px">
          <embed src="${t}" type="application/pdf" width="100%" height="600px" />
          <p>Your browser does not support PDF viewing. 
             <a href="${t}" download="document.pdf">Download the PDF</a> instead.
          </p>
        </object>
      `}catch(t){return console.error("Failed to convert PDF to HTML:",t),"<p>Error loading PDF content. Please try downloading instead.</p>"}}async printSequentially(){console.log(" Using sequential print method");const e=window.open("","_blank","width=800,height=600");if(!e)throw new Error("Could not open print window. Please allow popups.");e.document.write(`
      <html>
        <head>
          <title>Sequential Print - ${this.pdfDocuments.length} Documents</title>
          <style>
            body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
            .pdf-container { margin: 0; padding: 0; page-break-after: always; width: 100%; height: 100vh; }
            .pdf-container:last-child { page-break-after: auto; }
            .pdf-content { width: 100%; height: 100%; border: none; background: white; padding: 0; margin: 0; }
            .header-info { display: block; }
            .print-buttons { display: block; text-align: center; margin: 20px 0; }
            @media print {
              .header-info { display: none !important; }
              .print-buttons { display: none !important; }
              .pdf-container { page-break-after: always; }
              .pdf-content { height: 100vh; width: 100%; margin: 0; padding: 0; }
              body { margin: 0; padding: 0; }
            }
          </style>
        </head>
        <body>
          <div class="header-info">
            <h1>Print Preview - ${this.pdfDocuments.length} Documents</h1>
            <p>Click Print to print all documents sequentially.</p>
          </div>
          <div class="print-buttons">
            <button onclick="window.print()" style="padding: 10px 20px; font-size: 16px; background: #4f46e5; color: white; border: none; border-radius: 8px; cursor: pointer;">
              Print All Documents
            </button>
            <button onclick="window.close()" style="padding: 10px 20px; font-size: 16px; background: #6b7280; color: white; border: none; border-radius: 8px; cursor: pointer; margin-left: 10px;">
              Close
            </button>
          </div>
    `);for(let t=0;t<this.pdfDocuments.length;t++){const r=this.pdfDocuments[t],i=await this.convertPdfToHtml(r.doc);e.document.write(`
        <div class="pdf-container">
          <div class="pdf-content">
            ${i}
          </div>
        </div>
      `)}e.document.write(`
      </body>
      </html>
    `),e.document.close(),e.focus(),setTimeout(()=>{e&&!e.closed&&e.print()},1e3)}async generateIndividualBillPDF(e){const{individualBillGenerator:t}=await Qr(async()=>{const{individualBillGenerator:i}=await Promise.resolve().then(()=>pE);return{individualBillGenerator:i}},void 0),r=new it({orientation:"portrait",unit:"mm",format:"a4"});return await t.generateBillContent(r,e),r}async generateAnnexurePDF(e){const{annexureGenerator:t}=await Qr(async()=>{const{annexureGenerator:i}=await Promise.resolve().then(()=>mE);return{annexureGenerator:i}},void 0),r=new it({orientation:"portrait",unit:"mm",format:"a4"});return await t.generateAnnexureContent(r,e),r}async generateRosterListPDF(e){const{rosterListGenerator:t}=await Qr(async()=>{const{rosterListGenerator:i}=await Promise.resolve().then(()=>gE);return{rosterListGenerator:i}},void 0),r=new it({orientation:"portrait",unit:"mm",format:"a4"});return await t.generateRosterListContent(r,e),r}getUniqueStaffMembers(e){const t=new Set;return e.forEach(s=>{const o=s.assigned_name.replace(/\(R\)$/,"").trim();t.add(o)}),Array.from(t).filter(s=>!!Ha(s)).sort()}cleanup(){this.printWindow&&!this.printWindow.closed&&this.printWindow.close(),this.pdfDocuments.forEach(e=>{}),this.pdfDocuments=[],this.currentPrintIndex=0}}const fx=new wE,bE=({isOpen:n,onClose:e,entries:t,basicSalary:r,hourlyRate:i,shiftCombinations:s})=>{const[o,a]=H.useState(new Date().getMonth()),[l,u]=H.useState(new Date().getFullYear()),[d,p]=H.useState(["individual","annexure","roster"]),[m,f]=H.useState([]),[x,y]=H.useState(!1),[_,w]=H.useState(null),[b,N]=H.useState(null),C=["January","February","March","April","May","June","July","August","September","October","November","December"],P=(()=>{const O=t.filter(q=>{const ee=new Date(q.date);return ee.getMonth()===o&&ee.getFullYear()===l}),J=new Set;return O.forEach(q=>{const ee=q.assigned_name.replace(/\(R\)$/,"").trim();J.add(ee)}),Array.from(J).filter(q=>!!Ha(q)).sort()})(),E=(O,J)=>{p(J?X=>[...X,O]:X=>X.filter(se=>se!==O))},j=(O,J)=>{f(J?X=>[...X,O]:X=>X.filter(se=>se!==O))},D=()=>{f(P)},U=()=>{f([])},L=async()=>{if(d.length===0){N("Please select at least one report type");return}if(d.includes("individual")&&m.length===0){N("Please select at least one staff member for individual reports");return}y(!0),N(null),w(null);const O={month:o,year:l,entries:t,basicSalary:r,hourlyRate:i,shiftCombinations:s,reportTypes:d,selectedStaff:d.includes("individual")?m:void 0,combineIntoSinglePDF:!0};try{await fx.generateCombinedPDF(O,w)}catch(J){console.error("Batch print failed:",J);let X=J instanceof Error?J.message:"Failed to generate batch print";(X.includes("Unable to open print window")||X.includes("popup"))&&(X="Browser blocked the print window popup. Please disable your browser's popup blocker for this site and try again. You can usually do this by clicking the popup blocker icon in your address bar."),N(X)}finally{y(!1)}},F=()=>{x||(fx.cleanup(),e())};if(!n)return null;const T=c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Batch Print & Download"}),c.jsx("button",{onClick:F,disabled:x,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 disabled:opacity-50",children:c.jsx(Er,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Select Month & Year"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),c.jsx("select",{value:o,onChange:O=>a(Number(O.target.value)),disabled:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",children:C.map((O,J)=>c.jsx("option",{value:J,children:O},J))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),c.jsx("select",{value:l,onChange:O=>u(Number(O.target.value)),disabled:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",children:Array.from({length:10},(O,J)=>new Date().getFullYear()-5+J).map(O=>c.jsx("option",{value:O,children:O},O))})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Report Types"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:d.includes("individual"),onChange:O=>E("individual",O.target.checked),disabled:x,className:"mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded disabled:opacity-50"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Individual Bills"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:d.includes("annexure"),onChange:O=>E("annexure",O.target.checked),disabled:x,className:"mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded disabled:opacity-50"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Annexure Summary"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:d.includes("roster"),onChange:O=>E("roster",O.target.checked),disabled:x,className:"mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded disabled:opacity-50"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Roster List"})]})]})]}),d.includes("individual")&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Staff"}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:D,disabled:x,className:"text-sm text-indigo-600 hover:text-indigo-800 disabled:opacity-50",children:"Select All"}),c.jsx("button",{onClick:U,disabled:x,className:"text-sm text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"Deselect All"})]})]}),c.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-3",children:P.length===0?c.jsx("p",{className:"text-sm text-gray-500",children:"No staff found for selected month"}):c.jsx("div",{className:"space-y-2",children:P.map(O=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:m.includes(O),onChange:J=>j(O,J.target.checked),disabled:x,className:"mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded disabled:opacity-50"}),c.jsx("span",{className:"text-sm text-gray-700",children:O})]},O))})})]}),_&&c.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[_.completed?c.jsx(pc,{className:"w-5 h-5 text-green-600"}):c.jsx(UN,{className:"w-5 h-5 text-blue-600 animate-spin"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:_.currentTask})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${_.current/_.total*100}%`}})}),c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[_.current," of ",_.total," tasks completed"]})]}),b&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Zm,{className:"w-5 h-5 text-red-600"}),c.jsx("span",{className:"text-sm text-red-800",children:b})]})})]}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[c.jsx("button",{onClick:F,disabled:x,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:x?"Processing...":"Cancel"}),c.jsxs("button",{onClick:L,disabled:x||d.length===0,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 text-white rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[c.jsx(Tw,{className:"w-4 h-4"}),c.jsx("span",{children:"Print PDF"})]})]})]})});return xn.createPortal(T,document.body)},SE=()=>{const[n,e]=H.useState([]),[t,r]=H.useState(!0),[i,s]=H.useState(null),[o,a]=H.useState("disconnected"),l=H.useRef(!0);H.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const u=m=>({code:m.code,name:m.name,title:m.title,salary:m.salary,employeeId:m.employee_id,firstName:m.first_name,surname:m.surname}),d=H.useCallback(async m=>{try{const f=m.map(u);console.log(" Updating local auth codes with server data:",f.length,"entries"),await D6(f),console.log(" Local auth codes updated successfully")}catch(f){console.error(" Failed to update local auth codes:",f)}},[]),p=H.useCallback(async()=>{if(!ft){console.log(" Supabase not available, using local auth codes");const m=Bn.filter(f=>f.name!=="ADMIN").map(f=>({id:f.code,code:f.code,name:f.name,title:f.title||"MIT",salary:f.salary||0,employee_id:f.employeeId||"",first_name:f.firstName||"",surname:f.surname||f.name,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_updated_by:"LOCAL"}));console.log(" Local staff members:",m.length),l.current&&(e(m),s("Using local staff data - database not available"),r(!1));return}try{s(null),console.log(" Loading staff members from Supabase...");const{data:m,error:f}=await ft.from("staff_members").select("*").order("surname",{ascending:!0});if(f)throw console.error(" Supabase fetch error:",f),new Error(`Database error: ${f.message}`);console.log(" Loaded staff members from Supabase:",(m==null?void 0:m.length)||0),l.current&&(e(m||[]),console.log(" Setting staff members state:",(m==null?void 0:m.length)||0),m&&m.length>0&&await d(m))}catch(m){if(console.error(" Error loading staff members:",m),l.current){const f=m instanceof Error?m.message:"Failed to load staff members";s(f);const x=Bn.filter(y=>y.name!=="ADMIN").map(y=>({id:y.code,code:y.code,name:y.name,title:y.title||"MIT",salary:y.salary||0,employee_id:y.employeeId||"",first_name:y.firstName||"",surname:y.surname||y.name,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_updated_by:"LOCAL"}));console.log(" Fallback to local staff members:",x.length),e(x)}}finally{l.current&&r(!1)}},[d]);return H.useEffect(()=>{if(!ft){console.log(" Supabase not available for real-time staff updates"),a("error");return}console.log(" Setting up staff real-time subscription..."),a("connecting");const m=ft.channel("staff_changes").on("postgres_changes",{event:"*",schema:"public",table:"staff_members"},async f=>{try{if(console.log(" Staff real-time update received:",f),!l.current){console.log(" Component unmounted, ignoring staff real-time update");return}if(f.eventType==="INSERT"&&f.new){const x=f.new;e(y=>{if(!y.some(w=>w.id===x.id)){const w=[...y,x].sort((b,N)=>b.surname.localeCompare(N.surname));return d(w),w}return y})}else if(f.eventType==="UPDATE"&&f.new){const x=f.new;e(y=>{let _;return y.some(b=>b.id===x.id)?_=y.map(b=>b.id===x.id?x:b):_=[...y,x],_=_.sort((b,N)=>b.surname.localeCompare(N.surname)),d(_),_})}else if(f.eventType==="DELETE"&&f.old){const x=f.old;e(y=>{const _=y.filter(w=>w.id!==x.id);return d(_),_})}window.dispatchEvent(new CustomEvent("staffRealtimeUpdate",{detail:f}))}catch(x){console.error(" Error handling staff real-time update:",x)}}).subscribe((f,x)=>{console.log(" Staff real-time subscription status:",f,x),l.current&&(f==="SUBSCRIBED"?(a("connected"),console.log(" Staff real-time connection established")):f==="CHANNEL_ERROR"?(a("error"),console.log(" Staff real-time connection error:",x),console.log(" Check if real-time is enabled for the staff_members table in Supabase dashboard")):f==="TIMED_OUT"?(a("error"),console.log(" Staff real-time connection timed out"),setTimeout(()=>{l.current&&(console.log(" Attempting to reconnect staff real-time subscription..."),a("connecting"))},5e3)):f==="CLOSED"&&(a("disconnected"),console.log(" Staff real-time connection closed")))});return p(),()=>{console.log(" Cleaning up staff real-time subscription..."),ft&&m&&ft.removeChannel(m)}},[p,d]),{staffMembers:n,loading:t,error:i,realtimeStatus:o,loadStaffMembers:p}},_E=async()=>{if(!ft)return[];try{const{data:n,error:e}=await ft.from("staff_members").select("*").order("surname",{ascending:!0});return e?[]:n||[]}catch{return[]}},t_=async(n,e)=>{if(!ft)throw new Error("Database not available.");try{const t={...n,last_updated_by:e},{data:r,error:i}=await ft.from("staff_members").upsert([t],{onConflict:"code"}).select().single();if(i)throw new Error(`Failed to add staff member: ${i.message}`);if(r&&!r.name.includes("(R)")){const s=`${r.name}(R)`,a={code:`${r.code}R`,name:s,title:r.title,salary:r.salary,employee_id:r.employee_id,first_name:r.first_name,surname:r.surname,is_active:!0,last_updated_by:e},{data:l,error:u}=await ft.from("staff_members").upsert([a],{onConflict:"code"}).select().single()}return window.dispatchEvent(new CustomEvent("staffRealtimeUpdate",{detail:{action:"added",staff:r}})),r}catch(t){throw t}},n_=async(n,e,t)=>{if(!ft)throw new Error("Database not available.");try{const r={...e,last_updated_by:t,updated_at:new Date().toISOString()},{data:i,error:s}=await ft.from("staff_members").update(r).eq("id",n).select().single();if(s)throw new Error(`Failed to update staff member: ${s.message}`);return window.dispatchEvent(new CustomEvent("staffRealtimeUpdate",{detail:i})),i}catch(r){throw r}},r_=async(n,e)=>{if(!ft)throw new Error("Database not available.");try{const{data:t,error:r}=await ft.from("staff_members").select("*").eq("id",n).single();if(r)throw new Error(`Failed to fetch staff member: ${r.message}`);const{data:i,error:s}=await ft.from("staff_members").delete().eq("id",n).select().single();if(s)throw new Error(`Failed to delete staff member: ${s.message}`);if(t&&!t.name.includes("(R)")){const o=`${t.name}(R)`,{data:a,error:l}=await ft.from("staff_members").select("*").eq("name",o).maybeSingle();!l&&a&&await ft.from("staff_members").delete().eq("name",o).select().single()}else if(t&&t.name.includes("(R)")){const o=t.name.replace("(R)",""),{data:a,error:l}=await ft.from("staff_members").select("*").eq("name",o).maybeSingle();!l&&a&&await ft.from("staff_members").delete().eq("name",o).select().single()}window.dispatchEvent(new CustomEvent("staffRealtimeUpdate",{detail:{action:"deleted",id:n,deletedStaff:i}}))}catch(t){throw t}},NE=Object.freeze(Object.defineProperty({__proto__:null,addStaffMember:t_,deleteStaffMember:r_,fetchStaffMembers:_E,updateStaffMember:n_},Symbol.toStringTag,{value:"Module"})),kE=({isOpen:n,onClose:e,isAdminAuthenticated:t,adminName:r})=>{const{staffMembers:i,loading:s,error:o,realtimeStatus:a,loadStaffMembers:l}=SE(),[u,d]=H.useState(null),[p,m]=H.useState(!1),[f,x]=H.useState({code:"",title:"MIT",salary:0,employeeId:"",firstName:"",surname:"",name:""}),[y,_]=H.useState({}),[w,b]=H.useState(!1),[N,C]=H.useState(null),[A,P]=H.useState(""),[E,j]=H.useState(!1),[D,U]=H.useState("");H.useEffect(()=>{n&&L()},[n]),H.useEffect(()=>(n&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[n]);const L=()=>{x({code:"",title:"MIT",salary:0,employeeId:"",firstName:"",surname:"",name:""}),_({}),d(null),m(!1)},F=()=>{const re={};return f.code.trim()?f.code.length<3?re.code="Code must be at least 3 characters":i.some(M=>M.code===f.code&&M.code!==(u==null?void 0:u.code))&&(re.code="Code already exists"):re.code="Code is required",f.surname.trim()||(re.surname="Surname is required"),f.salary<0&&(re.salary="Salary must be positive"),_(re),Object.keys(re).length===0},T=()=>{L(),m(!0)},O=re=>{d(re),x({code:re.code,title:re.title,salary:re.salary,employeeId:re.employee_id,firstName:re.first_name,surname:re.surname,name:re.name}),m(!0)},J=re=>{if(re.code==="5274"){alert("Cannot delete ADMIN account");return}C("delete"),P(`Are you sure you want to delete ${re.name}? This action cannot be undone.`),d(re),b(!0)},X=()=>{F()&&(C("save"),P(u?`Save changes to ${f.name||f.surname}?`:`Add new staff member ${f.surname}?`),b(!0))},se=async()=>{j(!0);try{if(N==="save"){const re={code:f.code,name:f.name||f.surname,title:f.title,salary:f.salary,employee_id:f.employeeId,first_name:f.firstName,surname:f.surname,last_updated_by:r||"ADMIN"};u?(await n_(u.id,re,r||"ADMIN"),U(`${f.name||f.surname} updated successfully!`)):(await t_({...re,is_active:!0,last_updated_by:r||"ADMIN"},r||"ADMIN"),U(`${f.surname} added successfully!`)),await l(),L()}else N==="delete"&&u&&(await r_(u.id,r||"ADMIN"),U(`${u.name} deleted successfully!`),await l(),L());setTimeout(()=>U(""),5e3)}catch(re){alert(`Failed to save changes: ${re instanceof Error?re.message:"Unknown error"}`),U("")}finally{j(!1),b(!1),C(null)}},q=()=>{b(!1),C(null),P("")},ee=(re,M)=>{x(Y=>({...Y,[re]:M})),y[re]&&_(Y=>({...Y,[re]:""}))};if(!n)return null;const ie=i.filter(re=>re.name!=="ADMIN"&&!re.name.includes("(R)")&&re.title!=="R");return xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",style:{display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"16px",paddingTop:"8px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},onClick:re=>{re.target===re.currentTarget&&!w&&e()},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxWidth:"90vw",maxHeight:"95vh",margin:"8px 0",userSelect:"none",WebkitUserSelect:"none"},onClick:re=>re.stopPropagation(),children:[c.jsx("div",{className:"border-b border-gray-200 flex-shrink-0 p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:c.jsx(Wr,{className:`w-6 h-6 ${a==="connected"?"text-green-600":a==="connecting"?"text-yellow-600":a==="error"?"text-red-600":"text-gray-600"}`})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Staff Management"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Manage staff details and authentication codes",a==="connected"&&c.jsx("span",{className:"text-green-600 ml-2",children:" Live sync active"}),a==="error"&&c.jsx("span",{className:"text-red-600 ml-2",title:"Real-time sync is not working. Data may not update automatically.",children:" Sync error"}),a==="connecting"&&c.jsx("span",{className:"text-yellow-600 ml-2",children:" Connecting..."})]})]})]}),c.jsx("button",{onClick:e,disabled:w,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 disabled:opacity-50",children:c.jsx(Er,{className:"w-5 h-5"})})]})}),D&&c.jsx("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(pc,{className:"w-5 h-5 text-green-600"}),c.jsx("span",{className:"text-green-800 font-medium",children:D})]})}),o&&c.jsx("div",{className:"mx-6 mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Jn,{className:"w-5 h-5 text-amber-600"}),c.jsx("span",{className:"text-amber-800 font-medium",children:o})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:p?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:u?"Edit Staff Member":"Add New Staff Member"}),c.jsx("button",{onClick:L,className:"text-gray-600 hover:text-gray-800 transition-colors duration-200",children:c.jsx(Er,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code *"}),c.jsx("input",{type:"text",value:f.code,onChange:re=>ee("code",re.target.value.toUpperCase()),disabled:!t,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono ${y.code?"border-red-500":"border-gray-300"}`,placeholder:"Enter unique code"}),y.code&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.code})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),c.jsxs("select",{value:f.title,onChange:re=>ee("title",re.target.value),disabled:!t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"MIT",children:"MIT"}),c.jsx("option",{value:"SMIT",children:"SMIT"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Surname *"}),c.jsx("input",{type:"text",value:f.surname,onChange:re=>ee("surname",re.target.value),disabled:!t,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${y.surname?"border-red-500":"border-gray-300"}`,placeholder:"Enter surname"}),y.surname&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.surname})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),c.jsx("input",{type:"text",value:f.firstName,onChange:re=>ee("firstName",re.target.value),disabled:!t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter first name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),c.jsx("input",{type:"text",value:f.employeeId,onChange:re=>ee("employeeId",re.target.value),disabled:!t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"Enter employee ID"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Salary (Rs)"}),c.jsx("input",{type:"number",value:f.salary,onChange:re=>ee("salary",Number(re.target.value)),disabled:!t,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${y.salary?"border-red-500":"border-gray-300"}`,placeholder:"Enter salary",min:"0"}),y.salary&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.salary})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{onClick:L,disabled:!t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:X,disabled:!t||E,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:E?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Saving..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(JN,{className:"w-4 h-4"}),c.jsx("span",{children:"Save Changes"})]})})]})]}):c.jsxs("div",{className:"space-y-4",children:[s&&c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-yellow-200 border-t-yellow-600 rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Loading staff data..."})]}),!s&&c.jsx("div",{className:"flex justify-between items-center",children:c.jsxs("div",{className:"w-full",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Staff Members (",ie.length,")"]}),c.jsx("div",{className:"flex space-x-2",children:c.jsxs("button",{onClick:T,disabled:!t,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors duration-200",children:[c.jsx(Q2,{className:"w-4 h-4"}),c.jsx("span",{children:"Add New"})]})})]}),o&&typeof o=="string"&&o.includes("does not exist")||i.length===0||c.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Jn,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:o&&typeof o=="string"&&o.includes("does not exist")?"Database Setup Required":i.length===0?"Setup Required":"Staff Management"}),c.jsx("p",{className:"text-sm text-blue-700 mb-3",children:o&&typeof o=="string"&&o.includes("does not exist")?"The staff_members table doesn't exist yet. Follow these steps to enable shared staff management:":i.length===0?"Initialize the database to enable shared staff management:":"Manage staff members using the buttons below:"}),o&&typeof o=="string"&&o.includes("does not exist")&&c.jsxs(c.Fragment,{children:[c.jsxs("ol",{className:"text-sm text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Go to your Supabase dashboard"}),c.jsx("li",{children:"Open the SQL Editor"}),c.jsx("li",{children:"Copy and paste the SQL code below"}),c.jsx("li",{children:'Click "Run" to create the table'}),c.jsx("li",{children:'Come back here and use the "Add New" button to add staff'})]}),c.jsx("div",{className:"mt-3 p-3 bg-white border border-blue-300 rounded font-mono text-xs overflow-x-auto",children:c.jsx("pre",{children:`-- Create staff_members table
CREATE TABLE IF NOT EXISTS staff_members (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  code text UNIQUE NOT NULL,
  name text NOT NULL,
  title text DEFAULT 'MIT',
  salary integer DEFAULT 0,
  employee_id text DEFAULT '',
  first_name text DEFAULT '',
  surname text NOT NULL,
  is_active boolean DEFAULT true,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now(),
  last_updated_by text DEFAULT 'SYSTEM'
);

-- Enable RLS
ALTER TABLE staff_members ENABLE ROW LEVEL SECURITY;

-- Allow all operations
CREATE POLICY "Allow all operations on staff members" 
ON staff_members FOR ALL USING (true);

-- Create update trigger
CREATE OR REPLACE FUNCTION update_staff_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = now();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_staff_members_updated_at
  BEFORE UPDATE ON staff_members
  FOR EACH ROW
  EXECUTE FUNCTION update_staff_updated_at();`})})]}),!o&&i.length===0&&c.jsxs("button",{onClick:T,disabled:!t,className:"mt-3 w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[c.jsx(Q2,{className:"w-4 h-4"}),c.jsx("span",{children:"Add Your First Staff Member"})]})]})]})})]})}),!s&&c.jsx("div",{className:"space-y-3",children:ie.map(re=>c.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:c.jsxs("div",{className:"flex flex-col space-y-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-200 px-2 py-1 rounded",children:re.code}),c.jsx("span",{className:"font-semibold text-gray-900",children:re.name}),c.jsx("span",{className:"text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded",children:re.title})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-600",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Full Name:"})," ",re.first_name," ",re.surname]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Salary:"})," Rs ",re.salary.toLocaleString()]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("span",{className:"font-medium",children:"Employee ID:"})," ",re.employee_id||"Not set"]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 pt-2 border-t border-gray-200",children:[c.jsxs("button",{onClick:()=>O(re),disabled:!t,className:"w-full sm:flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 text-sm",children:[c.jsx(Mw,{className:"w-4 h-4"}),c.jsx("span",{children:"Edit"})]}),c.jsxs("button",{onClick:()=>J(re),disabled:!t,className:"w-full sm:flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200 text-sm",children:[c.jsx(bs,{className:"w-4 h-4"}),c.jsx("span",{children:"Delete"})]})]})]})},re.code))})]})}),w&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-4",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx(Jn,{className:"w-6 h-6 text-amber-600"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Action"})]}),c.jsx("p",{className:"text-gray-700 mb-6",children:A}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:q,disabled:E,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:se,disabled:E,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:E?"Processing...":"Confirm"})]})]})})]})}),document.body)},px=({setActiveTab:n,onOpenCalendarExportModal:e,selectedDate:t,onDateChange:r})=>{const[i,s]=H.useState("table"),[o,a]=H.useState("all"),[l,u]=H.useState(t||new Date);H.useEffect(()=>{t&&u(t)},[t]);const d=ze=>{u(ze),r&&r(ze)},[p,m]=H.useState(null),[f,x]=H.useState(!1),[y,_]=H.useState(""),[w,b]=H.useState(0),[N,C]=H.useState([]),[A,P]=H.useState(!1),[E,j]=H.useState(!1),[D,U]=H.useState(""),[L,F]=H.useState(""),[T,O]=H.useState(!1),[J,X]=H.useState("all"),[se,q]=H.useState(new Date().getMonth()),[ee,ie]=H.useState(new Date().getFullYear()),[re,M]=H.useState(!1),[Y,G]=H.useState(null),[Z,te]=H.useState(!1),[ue,me]=H.useState(""),[ge,De]=H.useState(""),[Pe,$e]=H.useState(!1),[Oe,He]=H.useState(null),[ye,Q]=H.useState(!1),[lt,Ye]=H.useState(!1),[Me,Ue]=H.useState(!1),[ce,be]=H.useState(!1),[ke,we]=H.useState(!1),{entries:_e,loading:Ie,error:Ae,loadEntries:Je,realtimeStatus:Xe}=fC();H.useEffect(()=>{O(!1),j(!1),U(""),F(""),te(!1),me(""),De(""),console.log(" RosterPanel: Forcing loading states to false on mount"),console.log(" RosterPanel: Reset all loading states on mount")},[]),H.useEffect(()=>((Z||E||A)&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom=""}),[Z,E,A]),H.useEffect(()=>{_e&&C(_e)},[_e]);const We=ze=>{_(ze),x(!0),setTimeout(()=>x(!1),3e3)},Le=async ze=>{try{if(console.log(" Starting PDF import with",ze.length,"entries..."),ze.length>0){const Ge=new Date(ze[0].date),rt=Ge.getMonth(),Ke=Ge.getFullYear();console.log(` Navigating to imported month immediately: ${rt+1}/${Ke}`);const dt=new Date(Ke,rt,1);d(dt),console.log(` Forcing child components to navigate to: ${rt+1}/${Ke}`),b(It=>It+1),window.dispatchEvent(new CustomEvent("navigateToMonth",{detail:{month:rt,year:Ke}})),await new Promise(It=>setTimeout(It,200))}window.batchImportMode=!0,window.disableAutoScroll=!0,window.batchImportStats={count:0,staffName:Oe||"Unknown",dates:new Set};let At=0,he=0;for(const Ge of ze)try{await cy(Ge,"PDF Import"),At++}catch(rt){console.error(" Failed to import entry:",Ge,rt),he++}window.batchImportMode=!1,window.disableAutoScroll=!1;const Fe=window.batchImportStats;Fe&&Fe.count>0&&rr(Fe.count,Fe.staffName,Fe.dates.size),window.batchImportStats=null,await Je(),b(Ge=>Ge+1),We(`PDF import completed: ${At} entries added${he>0?`, ${he} failed`:""}`)}catch(At){console.error(" PDF import failed:",At),window.batchImportMode=!1,window.batchImportStats=null;const he=At instanceof Error?At.message:"Unknown error occurred";alert(`PDF import failed: ${he}

Please check:
 PDF file format
 Network connection
 Database access`)}},kt=async()=>{console.log(" Starting clear database operation..."),O(!0),F("");try{console.log(` Starting ${J} database clear operation...`),J==="all"?(console.log(" Clearing ALL roster entries..."),await KA(),console.log(" All entries cleared successfully")):(console.log(` Clearing ${se+1}/${ee} entries...`),await XA(ee,se),console.log(` Month ${se+1}/${ee} cleared successfully`)),console.log(" Refreshing data after clear..."),await Je(),b(he=>he+1),console.log(" Data refresh completed"),O(!1),console.log(" Loading state reset to false");const At=J==="all"?"Database cleared successfully!":`${["January","February","March","April","May","June","July","August","September","October","November","December"][se]} ${ee} data cleared successfully!`;We(At),setTimeout(()=>{j(!1),U(""),X("all"),O(!1),console.log(" Modal closed and all states reset")},100)}catch(ze){console.error(" Failed to clear database:",ze),O(!1),console.log(" Loading state reset to false after error"),F("Failed to clear database. Please try again.")}},pt=()=>{console.log(" Clear operation cancelled by user"),O(!1),j(!1),X("all"),U(""),F(""),console.log(" All clear states reset after cancel")},wn=()=>{const ze=mi(ue);if(!ze||!Zs(ue)){De(ze?"Admin access required":"Invalid authentication code");return}$e(!0),He(ze),te(!1),De(""),me(""),M(!0)},_t=()=>{te(!1),me(""),De("")},Lt=async()=>{Q(!0);try{console.log(" Starting PDF export...");const ze=l.getMonth(),At=l.getFullYear();await fE.exportToPDF({entries:N,month:ze,year:At,title:"X-ray ANWH Roster"}),We("PDF exported successfully! Check your downloads folder."),console.log(" PDF export completed")}catch(ze){console.error(" PDF export failed:",ze),alert("Failed to export PDF. Please try again.")}finally{Q(!1)}},rr=(ze,At,he)=>{const Fe=document.createElement("div");Fe.style.cssText=`
      position: fixed;
      top: 80px;
      right: 20px;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 20px 24px;
      border-radius: 16px;
      box-shadow: 0 12px 30px rgba(16, 185, 129, 0.5);
      z-index: 999999;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      font-size: 15px;
      font-weight: 600;
      max-width: 380px;
      animation: slideInRight 0.4s ease-out;
      border: 3px solid rgba(255, 255, 255, 0.3);
    `,Fe.innerHTML=`
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
        <div style="width: 12px; height: 12px; background: white; border-radius: 50%; opacity: 0.9;"></div>
        <strong style="font-size: 17px;">PDF Import Complete</strong>
      </div>
      <div style="font-size: 14px; line-height: 1.5; opacity: 0.95;">
        <strong>${ze} entries</strong> imported for <strong>${At}</strong><br>
         <strong>${he} dates</strong> updated in calendar<br>
         Navigated to imported month
      </div>
    `,document.body.appendChild(Fe),setTimeout(()=>{document.body.contains(Fe)&&(Fe.style.animation="slideInRight 0.4s ease-out reverse",setTimeout(()=>{document.body.contains(Fe)&&document.body.removeChild(Fe)},400))},5e3)};return c.jsxs("div",{className:"bg-white",style:{width:"100vw",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",paddingTop:"0px"},children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Roster Management"})}),c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("button",{onClick:()=>P(!0),...Ec({onLongPress:()=>te(!0),delay:800}),className:"p-3 rounded-full bg-indigo-100 hover:bg-indigo-200 text-indigo-600 transition-colors duration-200 relative z-50 flex items-center justify-center",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent",position:"relative",zIndex:50,transform:"translate3d(0,0,0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",WebkitTransform:"translate3d(0,0,0)",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"},title:Pe?"Import from PDF (authenticated)":"Import from PDF (long press for more options)",children:c.jsx(tg,{className:"w-6 h-6"})})})]})}),f&&c.jsx("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(pc,{className:"w-5 h-5 text-green-600"}),c.jsx("span",{className:"text-green-800 font-medium",children:y})]})}),Ae&&c.jsx("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:Ae})}),c.jsx("div",{className:"bg-white border-b border-gray-200",children:c.jsxs("div",{className:"flex",children:[c.jsxs("button",{onClick:()=>s("table"),className:`flex-1 px-6 py-4 font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${i==="table"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-gray-600"}`,children:[c.jsx(tk,{className:"w-4 h-4"}),c.jsx("span",{children:"Table View"})]}),c.jsxs("button",{onClick:()=>s("card"),className:`flex-1 px-6 py-4 font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${i==="card"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-gray-600"}`,children:[c.jsx(ON,{className:"w-4 h-4"}),c.jsx("span",{children:"Card View"})]}),c.jsxs("button",{onClick:()=>s("log"),className:`flex-1 px-6 py-4 font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${i==="log"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-gray-600"}`,children:[c.jsx(ns,{className:"w-4 h-4"}),c.jsx("span",{children:"Log View"})]})]})}),c.jsx("div",{className:"p-6",children:i==="table"?c.jsx(wC,{entries:N,loading:Ie&&N.length===0,realtimeStatus:Xe,onRefresh:Je,selectedDate:l,onDateChange:d,onExportToCalendar:e,setActiveTab:n}):i==="card"?c.jsx(NC,{entries:N,loading:Ie,realtimeStatus:Xe,onRefresh:Je,selectedDate:l,onDateChange:d}):i==="log"?c.jsx(kC,{entries:N,loading:Ie&&N.length===0,selectedDate:l}):null}),c.jsx(LC,{isOpen:A,onClose:()=>P(!1),onImport:Le,isAdminAuthenticated:Pe,adminName:Oe}),E&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",style:{display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{maxWidth:window.innerWidth>window.innerHeight?"98vw":"28rem",maxHeight:window.innerWidth>window.innerHeight?"98vh":"none",margin:window.innerWidth>window.innerHeight?"2px 0":"16px 0"},children:c.jsxs("div",{style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(bs,{className:"w-6 h-6 text-red-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:J==="all"?"Clear Entire Database":"Clear Month Data"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clear Type"}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"all",checked:J==="all",onChange:ze=>X(ze.target.value),className:"mr-2"}),c.jsx("span",{className:"text-sm",children:"All Data"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"month",checked:J==="month",onChange:ze=>X(ze.target.value),className:"mr-2"}),c.jsx("span",{className:"text-sm",children:"Specific Month"})]})]})]}),J==="month"&&c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),c.jsx("select",{value:se,onChange:ze=>q(Number(ze.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((ze,At)=>c.jsx("option",{value:At,children:ze},At))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),c.jsx("select",{value:ee,onChange:ze=>ie(Number(ze.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:Array.from({length:10},(ze,At)=>new Date().getFullYear()-5+At).map(ze=>c.jsx("option",{value:ze,children:ze},ze))})]})]})}),c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Jn,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-red-800 font-medium mb-2",children:[" DANGER: This will permanently delete ",J==="all"?"ALL roster entries":`all entries for ${["January","February","March","April","May","June","July","August","September","October","November","December"][se]} ${ee}`,"!"]}),c.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[J==="all"?c.jsxs(c.Fragment,{children:[c.jsx("li",{children:" All dates and shift assignments"}),c.jsx("li",{children:" All edit history and logs"}),c.jsx("li",{children:" All imported data"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("li",{children:[" All shifts for ",["January","February","March","April","May","June","July","August","September","October","November","December"][se]," ",ee]}),c.jsx("li",{children:" All edit history for that month"}),c.jsx("li",{children:" All staff assignments for that month"})]}),c.jsx("li",{children:" This action CANNOT be undone!"})]})]})]})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:pt,disabled:T,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{onClick:kt,disabled:T,className:`flex-1 px-4 py-3 ${J==="all"?"bg-red-600 hover:bg-red-700":"bg-orange-600 hover:bg-orange-700"} disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2`,children:T?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:J==="all"?"Clearing all data...":"Clearing month..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(bs,{className:"w-4 h-4"}),c.jsx("span",{children:J==="all"?"Clear Database":"Clear Month"})]})})]}),L&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:L})})]})})}),document.body),Z&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483647,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:window.innerWidth>window.innerHeight?"flex-start":"center",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"8px":"16px",paddingTop:window.innerWidth>window.innerHeight?"4px":"16px",overflow:"auto",overflowY:"auto",touchAction:"pan-y",WebkitOverflowScrolling:"touch"},onClick:ze=>{ze.target===ze.currentTarget&&_t()},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{userSelect:"none",WebkitUserSelect:"none",maxHeight:window.innerWidth>window.innerHeight?"95vh":"90vh",maxWidth:window.innerWidth>window.innerHeight?"90vw":"28rem",display:"flex",flexDirection:"column",backgroundColor:"#ffffff",zIndex:2147483647,touchAction:"auto",overflow:"hidden",margin:window.innerWidth>window.innerHeight?"4px 0":"16px 0"},onClick:ze=>{ze.stopPropagation()},children:c.jsxs("div",{style:{padding:window.innerWidth>window.innerHeight?"12px":"24px"},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Admin Authentication Required"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex space-x-3 mb-3",children:[0,1,2,3].map(ze=>c.jsx("input",{type:ce?"text":"password",value:ue[ze]||"",onChange:At=>{const he=At.target.value.toUpperCase();if(he.length<=1){const Fe=ue.split("");if(Fe[ze]=he,me(Fe.join("")),he&&ze<3){const Ge=document.querySelector(`input[data-index="${ze+1}"]`);Ge&&Ge.focus()}}},onKeyDown:At=>{if(At.key==="Backspace"&&!ue[ze]&&ze>0){const he=document.querySelector(`input[data-index="${ze-1}"]`);he&&he.focus()}},"data-index":ze,className:"w-12 h-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center font-mono text-lg",maxLength:1,autoComplete:"off",autoFocus:ze===0,spellCheck:"false",autoCorrect:"off",autoCapitalize:"off","data-lpignore":"true","data-form-type":"other"},ze))}),c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onTouchStart:()=>be(!0),onTouchEnd:()=>be(!1),onMouseDown:()=>be(!0),onMouseUp:()=>be(!1),onMouseLeave:()=>be(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200 rounded-lg",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:ce?c.jsx(kc,{className:"w-5 h-5"}):c.jsx(jc,{className:"w-5 h-5"})})})]})]}),ge&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 text-center",children:ge})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:_t,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),c.jsx("button",{onClick:wn,disabled:ue.length<4||!Zs(ue),className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200",children:"Continue"})]})]})})}),document.body),re&&xn.createPortal(c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999]",style:{display:"flex",alignItems:"flex-start",justifyContent:"center",padding:window.innerWidth>window.innerHeight?"4px":"16px",paddingTop:window.innerWidth>window.innerHeight?"2px":"16px",overflow:"auto",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:c.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full",style:{maxHeight:window.innerWidth>window.innerHeight?"98vh":"90vh",maxWidth:window.innerWidth>window.innerHeight?"98vw":"28rem",margin:window.innerWidth>window.innerHeight?"2px 0":"16px 0"},children:c.jsxs("div",{style:{padding:window.innerWidth>window.innerHeight?"8px":"24px"},children:[c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:c.jsx(tg,{className:"w-6 h-6 text-indigo-600"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Quick Actions"})}),c.jsxs("div",{className:"space-y-3 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsxs("button",{onClick:()=>{M(!1),P(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsx(jf,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Import from PDF"})]}),c.jsx("button",{onClick:()=>{M(!1),Lt()},disabled:ye,className:"w-full flex items-center space-x-3 px-4 py-3 bg-green-50 hover:bg-green-100 disabled:bg-gray-100 disabled:text-gray-500 text-green-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:ye?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-5 h-5 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Exporting PDF..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Ys,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Export to PDF"})]})}),c.jsxs("button",{onClick:()=>{M(!1),Ye(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-purple-50 hover:bg-purple-100 text-purple-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsx(ns,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Monthly Reports"})]}),c.jsxs("button",{onClick:()=>{M(!1),Ue(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsx(Tw,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Batch Print"})]}),c.jsxs("button",{onClick:()=>{M(!1),we(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-yellow-50 hover:bg-yellow-100 text-yellow-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsx(Wr,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Staff Management"})]}),c.jsxs("button",{onClick:()=>{M(!1),X("all"),j(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-red-50 hover:bg-red-100 text-red-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:[c.jsx(bs,{className:"w-5 h-5"}),c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Clear Database"})]})]}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:()=>M(!1),className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors duration-200 select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:c.jsx("span",{className:"select-none",style:{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:"Cancel"})})})]})})}),document.body),c.jsx(xE,{isOpen:lt,onClose:()=>Ye(!1),entries:N,basicSalary:35e3,hourlyRate:201.92,shiftCombinations:[{id:"9-4",combination:"9-4",hours:6.5},{id:"4-10",combination:"4-10",hours:5.5},{id:"12-10",combination:"12-10",hours:9.5},{id:"N",combination:"N",hours:12.5}]}),c.jsx(bE,{isOpen:Me,onClose:()=>Ue(!1),entries:N,basicSalary:35e3,hourlyRate:201.92,shiftCombinations:[{id:"9-4",combination:"9-4",hours:6.5},{id:"4-10",combination:"4-10",hours:5.5},{id:"12-10",combination:"12-10",hours:9.5},{id:"N",combination:"N",hours:12.5}]}),c.jsx(kE,{isOpen:ke,onClose:()=>we(!1),isAdminAuthenticated:Pe,adminName:Oe})]})};function jE(){const[n,e]=H.useState(new Date),[t,r]=H.useState(null),[i,s]=H.useState(!1),[o,a]=H.useState("calendar"),[l,u]=H.useState(!1),[d,p]=H.useState(!0),[m,f]=H.useState(0),[x,y]=H.useState(0),[_,w]=H.useState(!1),b=H.useRef(null),{schedule:N,specialDates:C,setSchedule:A,setSpecialDates:P,error:E,refreshData:j}=hC(),[D,U,{isLoading:L,refresh:F}]=$v("scheduleTitle","Work Schedule","metadata"),[T,O,{isLoading:J,refresh:X}]=$v("workSettings",{basicSalary:35e3,hourlyRate:201.92,shiftCombinations:ql}),[se,q]=H.useState(0),[ee,ie]=H.useState(0),re=n.getMonth(),M=n.getFullYear();H.useEffect(()=>{(async()=>{try{const _e=await Gt.getMonthlySalary(M,re);ie(_e)}catch(_e){console.error("Failed to load monthly salary:",_e),ie(0)}})()},[M,re,se]);const{totalAmount:Y,monthToDateAmount:G}=uC(N,T,C,n,se,ee);H.useEffect(()=>{let we,_e;const Ae=Je=>{_e||(_e=Je);const Xe=Je-_e,We=Math.min(Xe/3e3,1),Le=1-Math.pow(1-We,4),kt=Math.round(Le*100);y(kt),We<1?we=requestAnimationFrame(Ae):(y(100),setTimeout(()=>{p(!1),w(!0)},100))};return we=requestAnimationFrame(Ae),()=>{we&&cancelAnimationFrame(we)}},[]),H.useEffect(()=>{if(_){const we=new fS({appName:"X-ray ANWH",appIconUrl:"https://jarivatoi.github.io/anwh/Icon.PNG",maxModalDisplayCount:1,skipFirstVisit:!1,startDelay:3e3,lifespan:2e4,mustShowCustomPrompt:!1,displayPace:999999});(async()=>{await we.canPrompt()&&setTimeout(()=>{we.show()},3e3)})()}},[_]),H.useEffect(()=>{const we=_e=>{const{month:Ie,year:Ae}=_e.detail;e(new Date(Ae,Ie,1))};return window.addEventListener("navigateToMonth",we),()=>window.removeEventListener("navigateToMonth",we)},[N,C]),H.useEffect(()=>{const we=_e=>{const{calendarUpdates:Ie,specialDateUpdates:Ae,editorName:Je,source:Xe}=_e.detail;window.dispatchEvent(new CustomEvent("bulkUpdateReceived")),A(We=>{const Le={...We};return Object.entries(Ie).forEach(([kt,pt])=>{const _t=[...Le[kt]||[]];pt.forEach(Lt=>{_t.includes(Lt)||_t.push(Lt)}),Le[kt]=_t}),Le}),P(We=>{const Le={...We};return Object.entries(Ae).forEach(([kt,pt])=>{Le[kt]=pt}),Le}),q(We=>We+1)};return window.addEventListener("bulkCalendarUpdate",we),()=>window.removeEventListener("bulkCalendarUpdate",we)},[A,P]),H.useEffect(()=>{const we=()=>{a("calendar"),q(Ae=>Ae+1)},_e=()=>{u(!1)},Ie=()=>{};return window.addEventListener("switchToCalendarTab",we),window.addEventListener("closeCalendarExportModal",_e),window.addEventListener("debugCalendarState",Ie),()=>{window.removeEventListener("switchToCalendarTab",we),window.removeEventListener("closeCalendarExportModal",_e),window.removeEventListener("debugCalendarState",Ie)}},[N,C,n]),H.useEffect(()=>{b.current&&_&&pr.fromTo(b.current,{opacity:0,y:30,scale:.95,force3D:!0},{opacity:1,y:0,scale:1,duration:.8,ease:"power2.out",force3D:!0})},[_]);const Z=we=>{a(we)},te=we=>{e(new Date(M,re+(we==="next"?1:-1),1))},ue=we=>`${M}-${(re+1).toString().padStart(2,"0")}-${we.toString().padStart(2,"0")}`,me=we=>{const _e=ue(we);r(_e),s(!0)},ge=(we,_e)=>{const Ie=N[_e]||[];return!(we==="9-4"&&Ie.includes("12-10")||we==="12-10"&&Ie.includes("9-4")||we==="12-10"&&Ie.includes("4-10")||we==="4-10"&&Ie.includes("12-10"))},De=we=>{if(!t)return;const _e=N[t]||[];if(_e.includes(we)){const Ie=_e.filter(Ae=>Ae!==we);A(Ae=>({...Ae,[t]:Ie.length>0?Ie:[]}))}else ge(we,t)&&A(Ie=>({...Ie,[t]:[..._e,we]}));q(Ie=>Ie+1)},Pe=H.useCallback(we=>{const _e=we.detail;dS(_e,{calendarLabel:D,schedule:N,specialDates:C,setSchedule:A,setSpecialDates:P,entries:[]})&&q(Ae=>Ae+1)},[D,N,C,A,P]),$e=H.useCallback(()=>{q(we=>we+1)},[]);H.useEffect(()=>(window.addEventListener("rosterCalendarSync",Pe),window.addEventListener("forceCalendarRefresh",$e),()=>{window.removeEventListener("rosterCalendarSync",Pe),window.removeEventListener("forceCalendarRefresh",$e)}),[Pe,$e]);const Oe=H.useCallback((we,_e)=>{P(Ie=>{const Ae={...Ie};return _e?Ae[we]=!0:delete Ae[we],Ae})},[P]);H.useCallback(async(we,_e,Ie,Ae=!0)=>{try{if(Ie){const We=`${we}-${(_e+1).toString().padStart(2,"0")}-${Ie.toString().padStart(2,"0")}`;A(Le=>{const kt={...Le};return delete kt[We],kt}),P(Le=>{const kt={...Le};return delete kt[We],kt}),q(Le=>Le+1);return}const Je=new Date(we,_e+1,0).getDate(),Xe=[];for(let We=1;We<=Je;We++){const Le=`${we}-${(_e+1).toString().padStart(2,"0")}-${We.toString().padStart(2,"0")}`;Xe.push(Le)}A(We=>{const Le={...We};return Xe.forEach(kt=>{delete Le[kt]}),Le}),P(We=>{const Le={...We};return Xe.forEach(kt=>{delete Le[kt]}),Le}),q(We=>We+1),Ae&&alert(` Successfully cleared all data for ${["January","February","March","April","May","June","July","August","September","October","November","December"][_e]} ${we}`)}catch{alert(" Error resetting month data. Please try again.")}},[A,P]);const He=()=>{s(!1),r(null)},ye=H.useCallback(async we=>{const _e=we*12/52/40;O(Ie=>({...Ie,basicSalary:we,hourlyRate:_e}));try{const Ie=await Gt.getAllMonthlySalaries(),Ae=M,Je=[];for(let We=0;We<12;We++)Je.push([Ae,We]);const Xe=Je.map(async([We,Le])=>{const kt=`${We}-${(Le+1).toString().padStart(2,"0")}`,pt=Ie[kt];if(pt===void 0||pt===0)return Gt.setMonthlySalary(We,Le,0)});await Promise.all(Xe),q(We=>We+1)}catch(Ie){console.error("Failed to update monthly salaries:",Ie)}},[O,M]),Q=H.useCallback(async(we,_e,Ie)=>{try{await Gt.setMonthlySalary(we,_e,Ie),we===M&&_e===re&&(ie(Ie),q(Ae=>Ae+1))}catch(Ae){console.error("Failed to set monthly salary:",Ae)}},[M,re]),lt=H.useCallback((we,_e)=>{O(Ie=>({...Ie,shiftCombinations:Ie.shiftCombinations.map(Ae=>Ae.id===we?{...Ae,hours:_e}:Ae)}))},[O]),Ye=async()=>{try{const we=await Gt.exportAllData(),_e=JSON.stringify(we,null,2),Ie=new Blob([_e],{type:"application/json"}),Ae=URL.createObjectURL(Ie),Je=document.createElement("a");Je.href=Ae,Je.download=we.filename||"ANWH_export.json",document.body.appendChild(Je),Je.click(),document.body.removeChild(Je),URL.revokeObjectURL(Ae)}catch{alert("Export failed. Please try again.")}},Me=async we=>{try{await Gt.importAllData(we);const _e=[j().catch(Je=>console.error("Failed to refresh schedule data:",Je)),X().catch(Je=>console.error("Failed to refresh settings:",Je)),F().catch(Je=>console.error("Failed to refresh title:",Je))];await Promise.allSettled(_e);const Ie=(Je,Xe)=>{setTimeout(()=>{q(We=>We+1)},Je)};q(Je=>Je+1),Ie(200,"First delayed"),Ie(500,"Second delayed"),Ie(1e3,"Final delayed"),setTimeout(()=>{a("calendar")},1200);const Ae=we.version||"1.0";alert(Ae==="1.0"?"Data imported successfully! Note: This was an older format file. Special date information was not available and has been reset.":"Data imported successfully!")}catch{alert("Error importing data. Please check the file format.")}},Ue=we=>{e(we)},ce=we=>{U(we)},be=()=>{u(!0)},ke=()=>{u(!1)};return E&&_?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Database Error"}),c.jsx("p",{className:"text-gray-700 mb-6",children:E}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200",children:"Retry"})]})}):_?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"min-h-screen bg-black select-none p-4",style:{minHeight:"100vh",backfaceVisibility:"hidden",marginTop:"0px",paddingTop:"env(safe-area-inset-top)",paddingBottom:"max(1rem, env(safe-area-inset-bottom))",paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1rem, env(safe-area-inset-right))",backgroundColor:"white !important",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[c.jsx("div",{className:"sticky top-0 z-50 bg-white",children:c.jsx(cC,{activeTab:o,onTabChange:Z})}),c.jsx("div",{ref:b,style:{transform:"translate3d(0,0,0)",backfaceVisibility:"hidden"},children:o==="calendar"?c.jsx(sC,{currentDate:n,schedule:N,specialDates:C,onDateClick:me,onNavigateMonth:te,totalAmount:Y,monthToDateAmount:G,onDateChange:Ue,scheduleTitle:D,onTitleUpdate:ce,setSchedule:A,setSpecialDates:P,monthlySalary:ee,onMonthlySalaryChange:Q,globalSalary:T.basicSalary}):o==="settings"?c.jsx(aC,{settings:T,onUpdateBasicSalary:ye,onUpdateShiftHours:lt}):o==="data"?c.jsx(lC,{onImportData:Me,onExportData:Ye}):c.jsx(px,{setActiveTab:a,onOpenCalendarExportModal:be,selectedDate:n,onDateChange:Ue},se)}),i&&c.jsxs(c.Fragment,{children:[c.jsx(oC,{selectedDate:t,schedule:N,specialDates:C,onToggleShift:De,onToggleSpecialDate:Oe,onClose:He}),c.jsx(px,{setActiveTab:a,onOpenCalendarExportModal:be})]}),c.jsx(uS,{isOpen:l,onClose:ke,currentMonth:re,currentYear:M})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-50 to-indigo-100",style:{minHeight:"-webkit-fill-available",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[c.jsx("div",{className:"flex items-center justify-center space-x-3 mb-6",children:c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Work Schedule Calendar"}),c.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"Created by NARAYYA"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-gray-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("span",{className:"text-gray-600 text-lg",children:"Loading your workspace..."})]}),c.jsxs("div",{className:"space-y-3 text-base text-gray-600",children:[c.jsx("p",{children:" Initializing offline database"}),c.jsx("p",{children:" Loading schedule data"}),c.jsx("p",{children:" Preparing settings"}),c.jsx("p",{children:" Calculating amounts"}),c.jsx("p",{children:" Setting up interface"})]}),c.jsx("div",{className:"mt-8 w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-purple-600 h-2 rounded-full transition-all duration-100 ease-out",style:{width:`${x}%`,transition:"width 0.1s ease-out"}})}),c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("span",{className:"text-sm text-gray-600 font-mono tabular-nums",children:[x,"%"]})})]})})}function AE(){/iPhone|iPad|iPod/.test(navigator.userAgent)&&(setTimeout(()=>{window.scrollTo(0,1)},100),window.addEventListener("orientationchange",()=>{setTimeout(()=>{window.scrollTo(0,1)},100)}))}try{const n=document.getElementById("root");if(!n)throw new Error("Root element not found");Aw(n).render(c.jsx(H.StrictMode,{children:c.jsx(jE,{})})),AE()}catch(n){console.error("Failed to initialize app:",n);const e=document.getElementById("root");e&&(e.innerHTML=`
      <div style="
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: white;
        color: #374151;
        font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        text-align: center;
        padding: 20px;
      ">
        <div>
          <h1 style="font-size: 24px; margin-bottom: 20px; font-weight: 600; color: #1f2937;"> App Error</h1>
          <p style="font-size: 16px; margin-bottom: 30px; color: #6b7280;">Something went wrong. Please try reloading the app.</p>
          <button onclick="window.location.reload()" style="
            background: #6366f1; 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 8px; 
            font-size: 16px; 
            font-weight: 600;
            cursor: pointer;
          ">Reload App</button>
        </div>
      </div>
    `)}export{zt as _,Fi as c,W_ as g};
